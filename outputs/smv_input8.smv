MODULE main
DEFINE m := 10 ; n := 11 ;
VAR
    dr: {r, l, u, d, s};
	i: 0..m+(-1);
	j: 0..n+(-1);
  right: boolean;
  left: boolean;
  down: boolean;
  up: boolean;
b00: {wall, target, flr, mantrg, bx, man, bxtrg};
b01: {wall, target, flr, mantrg, bx, man, bxtrg};
b02: {wall, target, flr, mantrg, bx, man, bxtrg};
b03: {wall, target, flr, mantrg, bx, man, bxtrg};
b04: {wall, target, flr, mantrg, bx, man, bxtrg};
b05: {wall, target, flr, mantrg, bx, man, bxtrg};
b06: {wall, target, flr, mantrg, bx, man, bxtrg};
b07: {wall, target, flr, mantrg, bx, man, bxtrg};
b08: {wall, target, flr, mantrg, bx, man, bxtrg};
b09: {wall, target, flr, mantrg, bx, man, bxtrg};
b010: {wall, target, flr, mantrg, bx, man, bxtrg};
b10: {wall, target, flr, mantrg, bx, man, bxtrg};
b11: {wall, target, flr, mantrg, bx, man, bxtrg};
b12: {wall, target, flr, mantrg, bx, man, bxtrg};
b13: {wall, target, flr, mantrg, bx, man, bxtrg};
b14: {wall, target, flr, mantrg, bx, man, bxtrg};
b15: {wall, target, flr, mantrg, bx, man, bxtrg};
b16: {wall, target, flr, mantrg, bx, man, bxtrg};
b17: {wall, target, flr, mantrg, bx, man, bxtrg};
b18: {wall, target, flr, mantrg, bx, man, bxtrg};
b19: {wall, target, flr, mantrg, bx, man, bxtrg};
b110: {wall, target, flr, mantrg, bx, man, bxtrg};
b20: {wall, target, flr, mantrg, bx, man, bxtrg};
b21: {wall, target, flr, mantrg, bx, man, bxtrg};
b22: {wall, target, flr, mantrg, bx, man, bxtrg};
b23: {wall, target, flr, mantrg, bx, man, bxtrg};
b24: {wall, target, flr, mantrg, bx, man, bxtrg};
b25: {wall, target, flr, mantrg, bx, man, bxtrg};
b26: {wall, target, flr, mantrg, bx, man, bxtrg};
b27: {wall, target, flr, mantrg, bx, man, bxtrg};
b28: {wall, target, flr, mantrg, bx, man, bxtrg};
b29: {wall, target, flr, mantrg, bx, man, bxtrg};
b210: {wall, target, flr, mantrg, bx, man, bxtrg};
b30: {wall, target, flr, mantrg, bx, man, bxtrg};
b31: {wall, target, flr, mantrg, bx, man, bxtrg};
b32: {wall, target, flr, mantrg, bx, man, bxtrg};
b33: {wall, target, flr, mantrg, bx, man, bxtrg};
b34: {wall, target, flr, mantrg, bx, man, bxtrg};
b35: {wall, target, flr, mantrg, bx, man, bxtrg};
b36: {wall, target, flr, mantrg, bx, man, bxtrg};
b37: {wall, target, flr, mantrg, bx, man, bxtrg};
b38: {wall, target, flr, mantrg, bx, man, bxtrg};
b39: {wall, target, flr, mantrg, bx, man, bxtrg};
b310: {wall, target, flr, mantrg, bx, man, bxtrg};
b40: {wall, target, flr, mantrg, bx, man, bxtrg};
b41: {wall, target, flr, mantrg, bx, man, bxtrg};
b42: {wall, target, flr, mantrg, bx, man, bxtrg};
b43: {wall, target, flr, mantrg, bx, man, bxtrg};
b44: {wall, target, flr, mantrg, bx, man, bxtrg};
b45: {wall, target, flr, mantrg, bx, man, bxtrg};
b46: {wall, target, flr, mantrg, bx, man, bxtrg};
b47: {wall, target, flr, mantrg, bx, man, bxtrg};
b48: {wall, target, flr, mantrg, bx, man, bxtrg};
b49: {wall, target, flr, mantrg, bx, man, bxtrg};
b410: {wall, target, flr, mantrg, bx, man, bxtrg};
b50: {wall, target, flr, mantrg, bx, man, bxtrg};
b51: {wall, target, flr, mantrg, bx, man, bxtrg};
b52: {wall, target, flr, mantrg, bx, man, bxtrg};
b53: {wall, target, flr, mantrg, bx, man, bxtrg};
b54: {wall, target, flr, mantrg, bx, man, bxtrg};
b55: {wall, target, flr, mantrg, bx, man, bxtrg};
b56: {wall, target, flr, mantrg, bx, man, bxtrg};
b57: {wall, target, flr, mantrg, bx, man, bxtrg};
b58: {wall, target, flr, mantrg, bx, man, bxtrg};
b59: {wall, target, flr, mantrg, bx, man, bxtrg};
b510: {wall, target, flr, mantrg, bx, man, bxtrg};
b60: {wall, target, flr, mantrg, bx, man, bxtrg};
b61: {wall, target, flr, mantrg, bx, man, bxtrg};
b62: {wall, target, flr, mantrg, bx, man, bxtrg};
b63: {wall, target, flr, mantrg, bx, man, bxtrg};
b64: {wall, target, flr, mantrg, bx, man, bxtrg};
b65: {wall, target, flr, mantrg, bx, man, bxtrg};
b66: {wall, target, flr, mantrg, bx, man, bxtrg};
b67: {wall, target, flr, mantrg, bx, man, bxtrg};
b68: {wall, target, flr, mantrg, bx, man, bxtrg};
b69: {wall, target, flr, mantrg, bx, man, bxtrg};
b610: {wall, target, flr, mantrg, bx, man, bxtrg};
b70: {wall, target, flr, mantrg, bx, man, bxtrg};
b71: {wall, target, flr, mantrg, bx, man, bxtrg};
b72: {wall, target, flr, mantrg, bx, man, bxtrg};
b73: {wall, target, flr, mantrg, bx, man, bxtrg};
b74: {wall, target, flr, mantrg, bx, man, bxtrg};
b75: {wall, target, flr, mantrg, bx, man, bxtrg};
b76: {wall, target, flr, mantrg, bx, man, bxtrg};
b77: {wall, target, flr, mantrg, bx, man, bxtrg};
b78: {wall, target, flr, mantrg, bx, man, bxtrg};
b79: {wall, target, flr, mantrg, bx, man, bxtrg};
b710: {wall, target, flr, mantrg, bx, man, bxtrg};
b80: {wall, target, flr, mantrg, bx, man, bxtrg};
b81: {wall, target, flr, mantrg, bx, man, bxtrg};
b82: {wall, target, flr, mantrg, bx, man, bxtrg};
b83: {wall, target, flr, mantrg, bx, man, bxtrg};
b84: {wall, target, flr, mantrg, bx, man, bxtrg};
b85: {wall, target, flr, mantrg, bx, man, bxtrg};
b86: {wall, target, flr, mantrg, bx, man, bxtrg};
b87: {wall, target, flr, mantrg, bx, man, bxtrg};
b88: {wall, target, flr, mantrg, bx, man, bxtrg};
b89: {wall, target, flr, mantrg, bx, man, bxtrg};
b810: {wall, target, flr, mantrg, bx, man, bxtrg};
b90: {wall, target, flr, mantrg, bx, man, bxtrg};
b91: {wall, target, flr, mantrg, bx, man, bxtrg};
b92: {wall, target, flr, mantrg, bx, man, bxtrg};
b93: {wall, target, flr, mantrg, bx, man, bxtrg};
b94: {wall, target, flr, mantrg, bx, man, bxtrg};
b95: {wall, target, flr, mantrg, bx, man, bxtrg};
b96: {wall, target, flr, mantrg, bx, man, bxtrg};
b97: {wall, target, flr, mantrg, bx, man, bxtrg};
b98: {wall, target, flr, mantrg, bx, man, bxtrg};
b99: {wall, target, flr, mantrg, bx, man, bxtrg};
b910: {wall, target, flr, mantrg, bx, man, bxtrg};

ASSIGN
	init(b00) := wall;
	init(b01) := wall;
	init(b02) := wall;
	init(b03) := wall;
	init(b04) := wall;
	init(b05) := wall;
	init(b06) := wall;
	init(b07) := wall;
	init(b08) := wall;
	init(b09) := wall;
	init(b010) := wall;
	init(b10) := wall;
	init(b11) := flr;
	init(b12) := flr;
	init(b13) := flr;
	init(b14) := flr;
	init(b15) := flr;
	init(b16) := flr;
	init(b17) := wall;
	init(b18) := wall;
	init(b19) := wall;
	init(b110) := wall;
	init(b20) := wall;
	init(b21) := flr;
	init(b22) := flr;
	init(b23) := wall;
	init(b24) := flr;
	init(b25) := flr;
	init(b26) := bx;
	init(b27) := target;
	init(b28) := wall;
	init(b29) := wall;
	init(b210) := wall;
	init(b30) := wall;
	init(b31) := flr;
	init(b32) := bx;
	init(b33) := flr;
	init(b34) := flr;
	init(b35) := target;
	init(b36) := flr;
	init(b37) := flr;
	init(b38) := wall;
	init(b39) := wall;
	init(b310) := wall;
	init(b40) := wall;
	init(b41) := flr;
	init(b42) := flr;
	init(b43) := man;
	init(b44) := wall;
	init(b45) := flr;
	init(b46) := flr;
	init(b47) := flr;
	init(b48) := wall;
	init(b49) := wall;
	init(b410) := wall;
	init(b50) := wall;
	init(b51) := wall;
	init(b52) := wall;
	init(b53) := flr;
	init(b54) := flr;
	init(b55) := flr;
	init(b56) := flr;
	init(b57) := bxtrg;
	init(b58) := wall;
	init(b59) := wall;
	init(b510) := wall;
	init(b60) := wall;
	init(b61) := wall;
	init(b62) := wall;
	init(b63) := wall;
	init(b64) := wall;
	init(b65) := flr;
	init(b66) := flr;
	init(b67) := flr;
	init(b68) := flr;
	init(b69) := flr;
	init(b610) := wall;
	init(b70) := wall;
	init(b71) := wall;
	init(b72) := wall;
	init(b73) := wall;
	init(b74) := wall;
	init(b75) := wall;
	init(b76) := wall;
	init(b77) := flr;
	init(b78) := bx;
	init(b79) := flr;
	init(b710) := wall;
	init(b80) := wall;
	init(b81) := wall;
	init(b82) := wall;
	init(b83) := wall;
	init(b84) := wall;
	init(b85) := wall;
	init(b86) := wall;
	init(b87) := flr;
	init(b88) := target;
	init(b89) := flr;
	init(b810) := wall;
	init(b90) := wall;
	init(b91) := wall;
	init(b92) := wall;
	init(b93) := wall;
	init(b94) := wall;
	init(b95) := wall;
	init(b96) := wall;
	init(b97) := wall;
	init(b98) := wall;
	init(b99) := wall;
	init(b910) := wall;
	init(i) := 4;
	init(j) := 3;
	init(dr) := s;
	init(left) := FALSE;
	init(right) := FALSE;
	init(down) := FALSE;
	init(up) := FALSE;
	 
next(i) := case
    next(dr) = u & i>0: i+(-1);
    next(dr) = d & i<m+(-1): i+1;
    TRUE: i;
    esac;

next(j) := case
    next(dr) = l & j>0: j+(-1);
    next(dr) = r & j<n+(-1): j+1;
    TRUE: j;
    esac;

next(dr) := case
    next(up) & next(down) & next(right) & next(left): {r, u, l, d};
	next(up) & next(down) & next(right) & !next(left): {r, u, d};
	next(up) & next(down) & !next(right) & next(left): {u, l, d};
	next(up) & next(down) & !next(right) & !next(left): {u, d};
	next(up) & !next(down) & next(right) & next(left): {r, u, l};
	next(up) & !next(down) & next(right) & !next(left): {r, u};
	next(up) & !next(down) & !next(right) & next(left): {u, l};
	next(up) & !next(down) & !next(right) & !next(left): {u};
	!next(up) & next(down) & next(right) & next(left): {r, l, d};
	!next(up) & next(down) & next(right) & !next(left): {r, d};
	!next(up) & next(down) & !next(right) & next(left): {l, d};
	!next(up) & next(down) & !next(right) & !next(left): {d};
	!next(up) & !next(down) & next(right) & next(left): {r, l};
	!next(up) & !next(down) & next(right) & !next(left): {r};
	!next(up) & !next(down) & !next(right) & next(left): {l};
	TRUE: {s};
esac;

next(up):= case
	i = 0 | i = 1: FALSE;
	i = 1 & j = 1 & (b01 = flr | b01 = target): TRUE;
	i = 1 & j = 2 & (b02 = flr | b02 = target): TRUE;
	i = 1 & j = 3 & (b03 = flr | b03 = target): TRUE;
	i = 1 & j = 4 & (b04 = flr | b04 = target): TRUE;
	i = 1 & j = 5 & (b05 = flr | b05 = target): TRUE;
	i = 1 & j = 6 & (b06 = flr | b06 = target): TRUE;
	i = 1 & j = 7 & (b07 = flr | b07 = target): TRUE;
	i = 1 & j = 8 & (b08 = flr | b08 = target): TRUE;
	i = 1 & j = 9 & (b09 = flr | b09 = target): TRUE;
	i = 1 & j = 10 & (b010 = flr | b010 = target): TRUE;
	i = 2 & j = 1 & (b11 = flr | b11 = target): TRUE;
	i = 2 & j = 1 & (b11 = bx | b11 = bxtrg) & (b01 != bx & b01 != bxtrg & b01 != wall): TRUE;
	i = 2 & j = 2 & (b12 = flr | b12 = target): TRUE;
	i = 2 & j = 2 & (b12 = bx | b12 = bxtrg) & (b02 != bx & b02 != bxtrg & b02 != wall): TRUE;
	i = 2 & j = 3 & (b13 = flr | b13 = target): TRUE;
	i = 2 & j = 3 & (b13 = bx | b13 = bxtrg) & (b03 != bx & b03 != bxtrg & b03 != wall): TRUE;
	i = 2 & j = 4 & (b14 = flr | b14 = target): TRUE;
	i = 2 & j = 4 & (b14 = bx | b14 = bxtrg) & (b04 != bx & b04 != bxtrg & b04 != wall): TRUE;
	i = 2 & j = 5 & (b15 = flr | b15 = target): TRUE;
	i = 2 & j = 5 & (b15 = bx | b15 = bxtrg) & (b05 != bx & b05 != bxtrg & b05 != wall): TRUE;
	i = 2 & j = 6 & (b16 = flr | b16 = target): TRUE;
	i = 2 & j = 6 & (b16 = bx | b16 = bxtrg) & (b06 != bx & b06 != bxtrg & b06 != wall): TRUE;
	i = 2 & j = 7 & (b17 = flr | b17 = target): TRUE;
	i = 2 & j = 7 & (b17 = bx | b17 = bxtrg) & (b07 != bx & b07 != bxtrg & b07 != wall): TRUE;
	i = 2 & j = 8 & (b18 = flr | b18 = target): TRUE;
	i = 2 & j = 8 & (b18 = bx | b18 = bxtrg) & (b08 != bx & b08 != bxtrg & b08 != wall): TRUE;
	i = 2 & j = 9 & (b19 = flr | b19 = target): TRUE;
	i = 2 & j = 9 & (b19 = bx | b19 = bxtrg) & (b09 != bx & b09 != bxtrg & b09 != wall): TRUE;
	i = 2 & j = 10 & (b110 = flr | b110 = target): TRUE;
	i = 2 & j = 10 & (b110 = bx | b110 = bxtrg) & (b010 != bx & b010 != bxtrg & b010 != wall): TRUE;
	i = 3 & j = 1 & (b21 = flr | b21 = target): TRUE;
	i = 3 & j = 1 & (b21 = bx | b21 = bxtrg) & (b11 != bx & b11 != bxtrg & b11 != wall): TRUE;
	i = 3 & j = 2 & (b22 = flr | b22 = target): TRUE;
	i = 3 & j = 2 & (b22 = bx | b22 = bxtrg) & (b12 != bx & b12 != bxtrg & b12 != wall): TRUE;
	i = 3 & j = 3 & (b23 = flr | b23 = target): TRUE;
	i = 3 & j = 3 & (b23 = bx | b23 = bxtrg) & (b13 != bx & b13 != bxtrg & b13 != wall): TRUE;
	i = 3 & j = 4 & (b24 = flr | b24 = target): TRUE;
	i = 3 & j = 4 & (b24 = bx | b24 = bxtrg) & (b14 != bx & b14 != bxtrg & b14 != wall): TRUE;
	i = 3 & j = 5 & (b25 = flr | b25 = target): TRUE;
	i = 3 & j = 5 & (b25 = bx | b25 = bxtrg) & (b15 != bx & b15 != bxtrg & b15 != wall): TRUE;
	i = 3 & j = 6 & (b26 = flr | b26 = target): TRUE;
	i = 3 & j = 6 & (b26 = bx | b26 = bxtrg) & (b16 != bx & b16 != bxtrg & b16 != wall): TRUE;
	i = 3 & j = 7 & (b27 = flr | b27 = target): TRUE;
	i = 3 & j = 7 & (b27 = bx | b27 = bxtrg) & (b17 != bx & b17 != bxtrg & b17 != wall): TRUE;
	i = 3 & j = 8 & (b28 = flr | b28 = target): TRUE;
	i = 3 & j = 8 & (b28 = bx | b28 = bxtrg) & (b18 != bx & b18 != bxtrg & b18 != wall): TRUE;
	i = 3 & j = 9 & (b29 = flr | b29 = target): TRUE;
	i = 3 & j = 9 & (b29 = bx | b29 = bxtrg) & (b19 != bx & b19 != bxtrg & b19 != wall): TRUE;
	i = 3 & j = 10 & (b210 = flr | b210 = target): TRUE;
	i = 3 & j = 10 & (b210 = bx | b210 = bxtrg) & (b110 != bx & b110 != bxtrg & b110 != wall): TRUE;
	i = 4 & j = 1 & (b31 = flr | b31 = target): TRUE;
	i = 4 & j = 1 & (b31 = bx | b31 = bxtrg) & (b21 != bx & b21 != bxtrg & b21 != wall): TRUE;
	i = 4 & j = 2 & (b32 = flr | b32 = target): TRUE;
	i = 4 & j = 2 & (b32 = bx | b32 = bxtrg) & (b22 != bx & b22 != bxtrg & b22 != wall): TRUE;
	i = 4 & j = 3 & (b33 = flr | b33 = target): TRUE;
	i = 4 & j = 3 & (b33 = bx | b33 = bxtrg) & (b23 != bx & b23 != bxtrg & b23 != wall): TRUE;
	i = 4 & j = 4 & (b34 = flr | b34 = target): TRUE;
	i = 4 & j = 4 & (b34 = bx | b34 = bxtrg) & (b24 != bx & b24 != bxtrg & b24 != wall): TRUE;
	i = 4 & j = 5 & (b35 = flr | b35 = target): TRUE;
	i = 4 & j = 5 & (b35 = bx | b35 = bxtrg) & (b25 != bx & b25 != bxtrg & b25 != wall): TRUE;
	i = 4 & j = 6 & (b36 = flr | b36 = target): TRUE;
	i = 4 & j = 6 & (b36 = bx | b36 = bxtrg) & (b26 != bx & b26 != bxtrg & b26 != wall): TRUE;
	i = 4 & j = 7 & (b37 = flr | b37 = target): TRUE;
	i = 4 & j = 7 & (b37 = bx | b37 = bxtrg) & (b27 != bx & b27 != bxtrg & b27 != wall): TRUE;
	i = 4 & j = 8 & (b38 = flr | b38 = target): TRUE;
	i = 4 & j = 8 & (b38 = bx | b38 = bxtrg) & (b28 != bx & b28 != bxtrg & b28 != wall): TRUE;
	i = 4 & j = 9 & (b39 = flr | b39 = target): TRUE;
	i = 4 & j = 9 & (b39 = bx | b39 = bxtrg) & (b29 != bx & b29 != bxtrg & b29 != wall): TRUE;
	i = 4 & j = 10 & (b310 = flr | b310 = target): TRUE;
	i = 4 & j = 10 & (b310 = bx | b310 = bxtrg) & (b210 != bx & b210 != bxtrg & b210 != wall): TRUE;
	i = 5 & j = 1 & (b41 = flr | b41 = target): TRUE;
	i = 5 & j = 1 & (b41 = bx | b41 = bxtrg) & (b31 != bx & b31 != bxtrg & b31 != wall): TRUE;
	i = 5 & j = 2 & (b42 = flr | b42 = target): TRUE;
	i = 5 & j = 2 & (b42 = bx | b42 = bxtrg) & (b32 != bx & b32 != bxtrg & b32 != wall): TRUE;
	i = 5 & j = 3 & (b43 = flr | b43 = target): TRUE;
	i = 5 & j = 3 & (b43 = bx | b43 = bxtrg) & (b33 != bx & b33 != bxtrg & b33 != wall): TRUE;
	i = 5 & j = 4 & (b44 = flr | b44 = target): TRUE;
	i = 5 & j = 4 & (b44 = bx | b44 = bxtrg) & (b34 != bx & b34 != bxtrg & b34 != wall): TRUE;
	i = 5 & j = 5 & (b45 = flr | b45 = target): TRUE;
	i = 5 & j = 5 & (b45 = bx | b45 = bxtrg) & (b35 != bx & b35 != bxtrg & b35 != wall): TRUE;
	i = 5 & j = 6 & (b46 = flr | b46 = target): TRUE;
	i = 5 & j = 6 & (b46 = bx | b46 = bxtrg) & (b36 != bx & b36 != bxtrg & b36 != wall): TRUE;
	i = 5 & j = 7 & (b47 = flr | b47 = target): TRUE;
	i = 5 & j = 7 & (b47 = bx | b47 = bxtrg) & (b37 != bx & b37 != bxtrg & b37 != wall): TRUE;
	i = 5 & j = 8 & (b48 = flr | b48 = target): TRUE;
	i = 5 & j = 8 & (b48 = bx | b48 = bxtrg) & (b38 != bx & b38 != bxtrg & b38 != wall): TRUE;
	i = 5 & j = 9 & (b49 = flr | b49 = target): TRUE;
	i = 5 & j = 9 & (b49 = bx | b49 = bxtrg) & (b39 != bx & b39 != bxtrg & b39 != wall): TRUE;
	i = 5 & j = 10 & (b410 = flr | b410 = target): TRUE;
	i = 5 & j = 10 & (b410 = bx | b410 = bxtrg) & (b310 != bx & b310 != bxtrg & b310 != wall): TRUE;
	i = 6 & j = 1 & (b51 = flr | b51 = target): TRUE;
	i = 6 & j = 1 & (b51 = bx | b51 = bxtrg) & (b41 != bx & b41 != bxtrg & b41 != wall): TRUE;
	i = 6 & j = 2 & (b52 = flr | b52 = target): TRUE;
	i = 6 & j = 2 & (b52 = bx | b52 = bxtrg) & (b42 != bx & b42 != bxtrg & b42 != wall): TRUE;
	i = 6 & j = 3 & (b53 = flr | b53 = target): TRUE;
	i = 6 & j = 3 & (b53 = bx | b53 = bxtrg) & (b43 != bx & b43 != bxtrg & b43 != wall): TRUE;
	i = 6 & j = 4 & (b54 = flr | b54 = target): TRUE;
	i = 6 & j = 4 & (b54 = bx | b54 = bxtrg) & (b44 != bx & b44 != bxtrg & b44 != wall): TRUE;
	i = 6 & j = 5 & (b55 = flr | b55 = target): TRUE;
	i = 6 & j = 5 & (b55 = bx | b55 = bxtrg) & (b45 != bx & b45 != bxtrg & b45 != wall): TRUE;
	i = 6 & j = 6 & (b56 = flr | b56 = target): TRUE;
	i = 6 & j = 6 & (b56 = bx | b56 = bxtrg) & (b46 != bx & b46 != bxtrg & b46 != wall): TRUE;
	i = 6 & j = 7 & (b57 = flr | b57 = target): TRUE;
	i = 6 & j = 7 & (b57 = bx | b57 = bxtrg) & (b47 != bx & b47 != bxtrg & b47 != wall): TRUE;
	i = 6 & j = 8 & (b58 = flr | b58 = target): TRUE;
	i = 6 & j = 8 & (b58 = bx | b58 = bxtrg) & (b48 != bx & b48 != bxtrg & b48 != wall): TRUE;
	i = 6 & j = 9 & (b59 = flr | b59 = target): TRUE;
	i = 6 & j = 9 & (b59 = bx | b59 = bxtrg) & (b49 != bx & b49 != bxtrg & b49 != wall): TRUE;
	i = 6 & j = 10 & (b510 = flr | b510 = target): TRUE;
	i = 6 & j = 10 & (b510 = bx | b510 = bxtrg) & (b410 != bx & b410 != bxtrg & b410 != wall): TRUE;
	i = 7 & j = 1 & (b61 = flr | b61 = target): TRUE;
	i = 7 & j = 1 & (b61 = bx | b61 = bxtrg) & (b51 != bx & b51 != bxtrg & b51 != wall): TRUE;
	i = 7 & j = 2 & (b62 = flr | b62 = target): TRUE;
	i = 7 & j = 2 & (b62 = bx | b62 = bxtrg) & (b52 != bx & b52 != bxtrg & b52 != wall): TRUE;
	i = 7 & j = 3 & (b63 = flr | b63 = target): TRUE;
	i = 7 & j = 3 & (b63 = bx | b63 = bxtrg) & (b53 != bx & b53 != bxtrg & b53 != wall): TRUE;
	i = 7 & j = 4 & (b64 = flr | b64 = target): TRUE;
	i = 7 & j = 4 & (b64 = bx | b64 = bxtrg) & (b54 != bx & b54 != bxtrg & b54 != wall): TRUE;
	i = 7 & j = 5 & (b65 = flr | b65 = target): TRUE;
	i = 7 & j = 5 & (b65 = bx | b65 = bxtrg) & (b55 != bx & b55 != bxtrg & b55 != wall): TRUE;
	i = 7 & j = 6 & (b66 = flr | b66 = target): TRUE;
	i = 7 & j = 6 & (b66 = bx | b66 = bxtrg) & (b56 != bx & b56 != bxtrg & b56 != wall): TRUE;
	i = 7 & j = 7 & (b67 = flr | b67 = target): TRUE;
	i = 7 & j = 7 & (b67 = bx | b67 = bxtrg) & (b57 != bx & b57 != bxtrg & b57 != wall): TRUE;
	i = 7 & j = 8 & (b68 = flr | b68 = target): TRUE;
	i = 7 & j = 8 & (b68 = bx | b68 = bxtrg) & (b58 != bx & b58 != bxtrg & b58 != wall): TRUE;
	i = 7 & j = 9 & (b69 = flr | b69 = target): TRUE;
	i = 7 & j = 9 & (b69 = bx | b69 = bxtrg) & (b59 != bx & b59 != bxtrg & b59 != wall): TRUE;
	i = 7 & j = 10 & (b610 = flr | b610 = target): TRUE;
	i = 7 & j = 10 & (b610 = bx | b610 = bxtrg) & (b510 != bx & b510 != bxtrg & b510 != wall): TRUE;
	i = 8 & j = 1 & (b71 = flr | b71 = target): TRUE;
	i = 8 & j = 1 & (b71 = bx | b71 = bxtrg) & (b61 != bx & b61 != bxtrg & b61 != wall): TRUE;
	i = 8 & j = 2 & (b72 = flr | b72 = target): TRUE;
	i = 8 & j = 2 & (b72 = bx | b72 = bxtrg) & (b62 != bx & b62 != bxtrg & b62 != wall): TRUE;
	i = 8 & j = 3 & (b73 = flr | b73 = target): TRUE;
	i = 8 & j = 3 & (b73 = bx | b73 = bxtrg) & (b63 != bx & b63 != bxtrg & b63 != wall): TRUE;
	i = 8 & j = 4 & (b74 = flr | b74 = target): TRUE;
	i = 8 & j = 4 & (b74 = bx | b74 = bxtrg) & (b64 != bx & b64 != bxtrg & b64 != wall): TRUE;
	i = 8 & j = 5 & (b75 = flr | b75 = target): TRUE;
	i = 8 & j = 5 & (b75 = bx | b75 = bxtrg) & (b65 != bx & b65 != bxtrg & b65 != wall): TRUE;
	i = 8 & j = 6 & (b76 = flr | b76 = target): TRUE;
	i = 8 & j = 6 & (b76 = bx | b76 = bxtrg) & (b66 != bx & b66 != bxtrg & b66 != wall): TRUE;
	i = 8 & j = 7 & (b77 = flr | b77 = target): TRUE;
	i = 8 & j = 7 & (b77 = bx | b77 = bxtrg) & (b67 != bx & b67 != bxtrg & b67 != wall): TRUE;
	i = 8 & j = 8 & (b78 = flr | b78 = target): TRUE;
	i = 8 & j = 8 & (b78 = bx | b78 = bxtrg) & (b68 != bx & b68 != bxtrg & b68 != wall): TRUE;
	i = 8 & j = 9 & (b79 = flr | b79 = target): TRUE;
	i = 8 & j = 9 & (b79 = bx | b79 = bxtrg) & (b69 != bx & b69 != bxtrg & b69 != wall): TRUE;
	i = 8 & j = 10 & (b710 = flr | b710 = target): TRUE;
	i = 8 & j = 10 & (b710 = bx | b710 = bxtrg) & (b610 != bx & b610 != bxtrg & b610 != wall): TRUE;
	i = 9 & j = 1 & (b81 = flr | b81 = target): TRUE;
	i = 9 & j = 1 & (b81 = bx | b81 = bxtrg) & (b71 != bx & b71 != bxtrg & b71 != wall): TRUE;
	i = 9 & j = 2 & (b82 = flr | b82 = target): TRUE;
	i = 9 & j = 2 & (b82 = bx | b82 = bxtrg) & (b72 != bx & b72 != bxtrg & b72 != wall): TRUE;
	i = 9 & j = 3 & (b83 = flr | b83 = target): TRUE;
	i = 9 & j = 3 & (b83 = bx | b83 = bxtrg) & (b73 != bx & b73 != bxtrg & b73 != wall): TRUE;
	i = 9 & j = 4 & (b84 = flr | b84 = target): TRUE;
	i = 9 & j = 4 & (b84 = bx | b84 = bxtrg) & (b74 != bx & b74 != bxtrg & b74 != wall): TRUE;
	i = 9 & j = 5 & (b85 = flr | b85 = target): TRUE;
	i = 9 & j = 5 & (b85 = bx | b85 = bxtrg) & (b75 != bx & b75 != bxtrg & b75 != wall): TRUE;
	i = 9 & j = 6 & (b86 = flr | b86 = target): TRUE;
	i = 9 & j = 6 & (b86 = bx | b86 = bxtrg) & (b76 != bx & b76 != bxtrg & b76 != wall): TRUE;
	i = 9 & j = 7 & (b87 = flr | b87 = target): TRUE;
	i = 9 & j = 7 & (b87 = bx | b87 = bxtrg) & (b77 != bx & b77 != bxtrg & b77 != wall): TRUE;
	i = 9 & j = 8 & (b88 = flr | b88 = target): TRUE;
	i = 9 & j = 8 & (b88 = bx | b88 = bxtrg) & (b78 != bx & b78 != bxtrg & b78 != wall): TRUE;
	i = 9 & j = 9 & (b89 = flr | b89 = target): TRUE;
	i = 9 & j = 9 & (b89 = bx | b89 = bxtrg) & (b79 != bx & b79 != bxtrg & b79 != wall): TRUE;
	i = 9 & j = 10 & (b810 = flr | b810 = target): TRUE;
	i = 9 & j = 10 & (b810 = bx | b810 = bxtrg) & (b710 != bx & b710 != bxtrg & b710 != wall): TRUE;
	TRUE: FALSE;
esac;
next(down):= case
	i = m+(-1): FALSE;
	i = 1 & j = 1 & (b21 = flr | b21 = target): TRUE;
	i = 1 & j = 1 & (b21 = bx | b21 = bxtrg) & (b31 != bx & b31 != bxtrg & b31 != wall): TRUE;
	i = 1 & j = 2 & (b22 = flr | b22 = target): TRUE;
	i = 1 & j = 2 & (b22 = bx | b22 = bxtrg) & (b32 != bx & b32 != bxtrg & b32 != wall): TRUE;
	i = 1 & j = 3 & (b23 = flr | b23 = target): TRUE;
	i = 1 & j = 3 & (b23 = bx | b23 = bxtrg) & (b33 != bx & b33 != bxtrg & b33 != wall): TRUE;
	i = 1 & j = 4 & (b24 = flr | b24 = target): TRUE;
	i = 1 & j = 4 & (b24 = bx | b24 = bxtrg) & (b34 != bx & b34 != bxtrg & b34 != wall): TRUE;
	i = 1 & j = 5 & (b25 = flr | b25 = target): TRUE;
	i = 1 & j = 5 & (b25 = bx | b25 = bxtrg) & (b35 != bx & b35 != bxtrg & b35 != wall): TRUE;
	i = 1 & j = 6 & (b26 = flr | b26 = target): TRUE;
	i = 1 & j = 6 & (b26 = bx | b26 = bxtrg) & (b36 != bx & b36 != bxtrg & b36 != wall): TRUE;
	i = 1 & j = 7 & (b27 = flr | b27 = target): TRUE;
	i = 1 & j = 7 & (b27 = bx | b27 = bxtrg) & (b37 != bx & b37 != bxtrg & b37 != wall): TRUE;
	i = 1 & j = 8 & (b28 = flr | b28 = target): TRUE;
	i = 1 & j = 8 & (b28 = bx | b28 = bxtrg) & (b38 != bx & b38 != bxtrg & b38 != wall): TRUE;
	i = 1 & j = 9 & (b29 = flr | b29 = target): TRUE;
	i = 1 & j = 9 & (b29 = bx | b29 = bxtrg) & (b39 != bx & b39 != bxtrg & b39 != wall): TRUE;
	i = 1 & j = 10 & (b210 = flr | b210 = target): TRUE;
	i = 1 & j = 10 & (b210 = bx | b210 = bxtrg) & (b310 != bx & b310 != bxtrg & b310 != wall): TRUE;
	i = 2 & j = 1 & (b31 = flr | b31 = target): TRUE;
	i = 2 & j = 1 & (b31 = bx | b31 = bxtrg) & (b41 != bx & b41 != bxtrg & b41 != wall): TRUE;
	i = 2 & j = 2 & (b32 = flr | b32 = target): TRUE;
	i = 2 & j = 2 & (b32 = bx | b32 = bxtrg) & (b42 != bx & b42 != bxtrg & b42 != wall): TRUE;
	i = 2 & j = 3 & (b33 = flr | b33 = target): TRUE;
	i = 2 & j = 3 & (b33 = bx | b33 = bxtrg) & (b43 != bx & b43 != bxtrg & b43 != wall): TRUE;
	i = 2 & j = 4 & (b34 = flr | b34 = target): TRUE;
	i = 2 & j = 4 & (b34 = bx | b34 = bxtrg) & (b44 != bx & b44 != bxtrg & b44 != wall): TRUE;
	i = 2 & j = 5 & (b35 = flr | b35 = target): TRUE;
	i = 2 & j = 5 & (b35 = bx | b35 = bxtrg) & (b45 != bx & b45 != bxtrg & b45 != wall): TRUE;
	i = 2 & j = 6 & (b36 = flr | b36 = target): TRUE;
	i = 2 & j = 6 & (b36 = bx | b36 = bxtrg) & (b46 != bx & b46 != bxtrg & b46 != wall): TRUE;
	i = 2 & j = 7 & (b37 = flr | b37 = target): TRUE;
	i = 2 & j = 7 & (b37 = bx | b37 = bxtrg) & (b47 != bx & b47 != bxtrg & b47 != wall): TRUE;
	i = 2 & j = 8 & (b38 = flr | b38 = target): TRUE;
	i = 2 & j = 8 & (b38 = bx | b38 = bxtrg) & (b48 != bx & b48 != bxtrg & b48 != wall): TRUE;
	i = 2 & j = 9 & (b39 = flr | b39 = target): TRUE;
	i = 2 & j = 9 & (b39 = bx | b39 = bxtrg) & (b49 != bx & b49 != bxtrg & b49 != wall): TRUE;
	i = 2 & j = 10 & (b310 = flr | b310 = target): TRUE;
	i = 2 & j = 10 & (b310 = bx | b310 = bxtrg) & (b410 != bx & b410 != bxtrg & b410 != wall): TRUE;
	i = 3 & j = 1 & (b41 = flr | b41 = target): TRUE;
	i = 3 & j = 1 & (b41 = bx | b41 = bxtrg) & (b51 != bx & b51 != bxtrg & b51 != wall): TRUE;
	i = 3 & j = 2 & (b42 = flr | b42 = target): TRUE;
	i = 3 & j = 2 & (b42 = bx | b42 = bxtrg) & (b52 != bx & b52 != bxtrg & b52 != wall): TRUE;
	i = 3 & j = 3 & (b43 = flr | b43 = target): TRUE;
	i = 3 & j = 3 & (b43 = bx | b43 = bxtrg) & (b53 != bx & b53 != bxtrg & b53 != wall): TRUE;
	i = 3 & j = 4 & (b44 = flr | b44 = target): TRUE;
	i = 3 & j = 4 & (b44 = bx | b44 = bxtrg) & (b54 != bx & b54 != bxtrg & b54 != wall): TRUE;
	i = 3 & j = 5 & (b45 = flr | b45 = target): TRUE;
	i = 3 & j = 5 & (b45 = bx | b45 = bxtrg) & (b55 != bx & b55 != bxtrg & b55 != wall): TRUE;
	i = 3 & j = 6 & (b46 = flr | b46 = target): TRUE;
	i = 3 & j = 6 & (b46 = bx | b46 = bxtrg) & (b56 != bx & b56 != bxtrg & b56 != wall): TRUE;
	i = 3 & j = 7 & (b47 = flr | b47 = target): TRUE;
	i = 3 & j = 7 & (b47 = bx | b47 = bxtrg) & (b57 != bx & b57 != bxtrg & b57 != wall): TRUE;
	i = 3 & j = 8 & (b48 = flr | b48 = target): TRUE;
	i = 3 & j = 8 & (b48 = bx | b48 = bxtrg) & (b58 != bx & b58 != bxtrg & b58 != wall): TRUE;
	i = 3 & j = 9 & (b49 = flr | b49 = target): TRUE;
	i = 3 & j = 9 & (b49 = bx | b49 = bxtrg) & (b59 != bx & b59 != bxtrg & b59 != wall): TRUE;
	i = 3 & j = 10 & (b410 = flr | b410 = target): TRUE;
	i = 3 & j = 10 & (b410 = bx | b410 = bxtrg) & (b510 != bx & b510 != bxtrg & b510 != wall): TRUE;
	i = 4 & j = 1 & (b51 = flr | b51 = target): TRUE;
	i = 4 & j = 1 & (b51 = bx | b51 = bxtrg) & (b61 != bx & b61 != bxtrg & b61 != wall): TRUE;
	i = 4 & j = 2 & (b52 = flr | b52 = target): TRUE;
	i = 4 & j = 2 & (b52 = bx | b52 = bxtrg) & (b62 != bx & b62 != bxtrg & b62 != wall): TRUE;
	i = 4 & j = 3 & (b53 = flr | b53 = target): TRUE;
	i = 4 & j = 3 & (b53 = bx | b53 = bxtrg) & (b63 != bx & b63 != bxtrg & b63 != wall): TRUE;
	i = 4 & j = 4 & (b54 = flr | b54 = target): TRUE;
	i = 4 & j = 4 & (b54 = bx | b54 = bxtrg) & (b64 != bx & b64 != bxtrg & b64 != wall): TRUE;
	i = 4 & j = 5 & (b55 = flr | b55 = target): TRUE;
	i = 4 & j = 5 & (b55 = bx | b55 = bxtrg) & (b65 != bx & b65 != bxtrg & b65 != wall): TRUE;
	i = 4 & j = 6 & (b56 = flr | b56 = target): TRUE;
	i = 4 & j = 6 & (b56 = bx | b56 = bxtrg) & (b66 != bx & b66 != bxtrg & b66 != wall): TRUE;
	i = 4 & j = 7 & (b57 = flr | b57 = target): TRUE;
	i = 4 & j = 7 & (b57 = bx | b57 = bxtrg) & (b67 != bx & b67 != bxtrg & b67 != wall): TRUE;
	i = 4 & j = 8 & (b58 = flr | b58 = target): TRUE;
	i = 4 & j = 8 & (b58 = bx | b58 = bxtrg) & (b68 != bx & b68 != bxtrg & b68 != wall): TRUE;
	i = 4 & j = 9 & (b59 = flr | b59 = target): TRUE;
	i = 4 & j = 9 & (b59 = bx | b59 = bxtrg) & (b69 != bx & b69 != bxtrg & b69 != wall): TRUE;
	i = 4 & j = 10 & (b510 = flr | b510 = target): TRUE;
	i = 4 & j = 10 & (b510 = bx | b510 = bxtrg) & (b610 != bx & b610 != bxtrg & b610 != wall): TRUE;
	i = 5 & j = 1 & (b61 = flr | b61 = target): TRUE;
	i = 5 & j = 1 & (b61 = bx | b61 = bxtrg) & (b71 != bx & b71 != bxtrg & b71 != wall): TRUE;
	i = 5 & j = 2 & (b62 = flr | b62 = target): TRUE;
	i = 5 & j = 2 & (b62 = bx | b62 = bxtrg) & (b72 != bx & b72 != bxtrg & b72 != wall): TRUE;
	i = 5 & j = 3 & (b63 = flr | b63 = target): TRUE;
	i = 5 & j = 3 & (b63 = bx | b63 = bxtrg) & (b73 != bx & b73 != bxtrg & b73 != wall): TRUE;
	i = 5 & j = 4 & (b64 = flr | b64 = target): TRUE;
	i = 5 & j = 4 & (b64 = bx | b64 = bxtrg) & (b74 != bx & b74 != bxtrg & b74 != wall): TRUE;
	i = 5 & j = 5 & (b65 = flr | b65 = target): TRUE;
	i = 5 & j = 5 & (b65 = bx | b65 = bxtrg) & (b75 != bx & b75 != bxtrg & b75 != wall): TRUE;
	i = 5 & j = 6 & (b66 = flr | b66 = target): TRUE;
	i = 5 & j = 6 & (b66 = bx | b66 = bxtrg) & (b76 != bx & b76 != bxtrg & b76 != wall): TRUE;
	i = 5 & j = 7 & (b67 = flr | b67 = target): TRUE;
	i = 5 & j = 7 & (b67 = bx | b67 = bxtrg) & (b77 != bx & b77 != bxtrg & b77 != wall): TRUE;
	i = 5 & j = 8 & (b68 = flr | b68 = target): TRUE;
	i = 5 & j = 8 & (b68 = bx | b68 = bxtrg) & (b78 != bx & b78 != bxtrg & b78 != wall): TRUE;
	i = 5 & j = 9 & (b69 = flr | b69 = target): TRUE;
	i = 5 & j = 9 & (b69 = bx | b69 = bxtrg) & (b79 != bx & b79 != bxtrg & b79 != wall): TRUE;
	i = 5 & j = 10 & (b610 = flr | b610 = target): TRUE;
	i = 5 & j = 10 & (b610 = bx | b610 = bxtrg) & (b710 != bx & b710 != bxtrg & b710 != wall): TRUE;
	i = 6 & j = 1 & (b71 = flr | b71 = target): TRUE;
	i = 6 & j = 1 & (b71 = bx | b71 = bxtrg) & (b81 != bx & b81 != bxtrg & b81 != wall): TRUE;
	i = 6 & j = 2 & (b72 = flr | b72 = target): TRUE;
	i = 6 & j = 2 & (b72 = bx | b72 = bxtrg) & (b82 != bx & b82 != bxtrg & b82 != wall): TRUE;
	i = 6 & j = 3 & (b73 = flr | b73 = target): TRUE;
	i = 6 & j = 3 & (b73 = bx | b73 = bxtrg) & (b83 != bx & b83 != bxtrg & b83 != wall): TRUE;
	i = 6 & j = 4 & (b74 = flr | b74 = target): TRUE;
	i = 6 & j = 4 & (b74 = bx | b74 = bxtrg) & (b84 != bx & b84 != bxtrg & b84 != wall): TRUE;
	i = 6 & j = 5 & (b75 = flr | b75 = target): TRUE;
	i = 6 & j = 5 & (b75 = bx | b75 = bxtrg) & (b85 != bx & b85 != bxtrg & b85 != wall): TRUE;
	i = 6 & j = 6 & (b76 = flr | b76 = target): TRUE;
	i = 6 & j = 6 & (b76 = bx | b76 = bxtrg) & (b86 != bx & b86 != bxtrg & b86 != wall): TRUE;
	i = 6 & j = 7 & (b77 = flr | b77 = target): TRUE;
	i = 6 & j = 7 & (b77 = bx | b77 = bxtrg) & (b87 != bx & b87 != bxtrg & b87 != wall): TRUE;
	i = 6 & j = 8 & (b78 = flr | b78 = target): TRUE;
	i = 6 & j = 8 & (b78 = bx | b78 = bxtrg) & (b88 != bx & b88 != bxtrg & b88 != wall): TRUE;
	i = 6 & j = 9 & (b79 = flr | b79 = target): TRUE;
	i = 6 & j = 9 & (b79 = bx | b79 = bxtrg) & (b89 != bx & b89 != bxtrg & b89 != wall): TRUE;
	i = 6 & j = 10 & (b710 = flr | b710 = target): TRUE;
	i = 6 & j = 10 & (b710 = bx | b710 = bxtrg) & (b810 != bx & b810 != bxtrg & b810 != wall): TRUE;
	i = 7 & j = 1 & (b81 = flr | b81 = target): TRUE;
	i = 7 & j = 1 & (b81 = bx | b81 = bxtrg) & (b91 != bx & b91 != bxtrg & b91 != wall): TRUE;
	i = 7 & j = 2 & (b82 = flr | b82 = target): TRUE;
	i = 7 & j = 2 & (b82 = bx | b82 = bxtrg) & (b92 != bx & b92 != bxtrg & b92 != wall): TRUE;
	i = 7 & j = 3 & (b83 = flr | b83 = target): TRUE;
	i = 7 & j = 3 & (b83 = bx | b83 = bxtrg) & (b93 != bx & b93 != bxtrg & b93 != wall): TRUE;
	i = 7 & j = 4 & (b84 = flr | b84 = target): TRUE;
	i = 7 & j = 4 & (b84 = bx | b84 = bxtrg) & (b94 != bx & b94 != bxtrg & b94 != wall): TRUE;
	i = 7 & j = 5 & (b85 = flr | b85 = target): TRUE;
	i = 7 & j = 5 & (b85 = bx | b85 = bxtrg) & (b95 != bx & b95 != bxtrg & b95 != wall): TRUE;
	i = 7 & j = 6 & (b86 = flr | b86 = target): TRUE;
	i = 7 & j = 6 & (b86 = bx | b86 = bxtrg) & (b96 != bx & b96 != bxtrg & b96 != wall): TRUE;
	i = 7 & j = 7 & (b87 = flr | b87 = target): TRUE;
	i = 7 & j = 7 & (b87 = bx | b87 = bxtrg) & (b97 != bx & b97 != bxtrg & b97 != wall): TRUE;
	i = 7 & j = 8 & (b88 = flr | b88 = target): TRUE;
	i = 7 & j = 8 & (b88 = bx | b88 = bxtrg) & (b98 != bx & b98 != bxtrg & b98 != wall): TRUE;
	i = 7 & j = 9 & (b89 = flr | b89 = target): TRUE;
	i = 7 & j = 9 & (b89 = bx | b89 = bxtrg) & (b99 != bx & b99 != bxtrg & b99 != wall): TRUE;
	i = 7 & j = 10 & (b810 = flr | b810 = target): TRUE;
	i = 7 & j = 10 & (b810 = bx | b810 = bxtrg) & (b910 != bx & b910 != bxtrg & b910 != wall): TRUE;
	i = 8 & j = 1 & (b91 = flr | b91 = target): TRUE;
	i = 8 & j = 2 & (b92 = flr | b92 = target): TRUE;
	i = 8 & j = 3 & (b93 = flr | b93 = target): TRUE;
	i = 8 & j = 4 & (b94 = flr | b94 = target): TRUE;
	i = 8 & j = 5 & (b95 = flr | b95 = target): TRUE;
	i = 8 & j = 6 & (b96 = flr | b96 = target): TRUE;
	i = 8 & j = 7 & (b97 = flr | b97 = target): TRUE;
	i = 8 & j = 8 & (b98 = flr | b98 = target): TRUE;
	i = 8 & j = 9 & (b99 = flr | b99 = target): TRUE;
	i = 8 & j = 10 & (b910 = flr | b910 = target): TRUE;
	TRUE: FALSE;
esac;
next(right):= case
	j = n+(-1): FALSE;
	i = 1 & j = 1 & (b12 = flr | b12 = target): TRUE;
	i = 1 & j = 1 & (b12 = bx | b12 = bxtrg) & (b13 != bx & b13 != bxtrg & b13 != wall): TRUE;
	i = 1 & j = 2 & (b13 = flr | b13 = target): TRUE;
	i = 1 & j = 2 & (b13 = bx | b13 = bxtrg) & (b14 != bx & b14 != bxtrg & b14 != wall): TRUE;
	i = 1 & j = 3 & (b14 = flr | b14 = target): TRUE;
	i = 1 & j = 3 & (b14 = bx | b14 = bxtrg) & (b15 != bx & b15 != bxtrg & b15 != wall): TRUE;
	i = 1 & j = 4 & (b15 = flr | b15 = target): TRUE;
	i = 1 & j = 4 & (b15 = bx | b15 = bxtrg) & (b16 != bx & b16 != bxtrg & b16 != wall): TRUE;
	i = 1 & j = 5 & (b16 = flr | b16 = target): TRUE;
	i = 1 & j = 5 & (b16 = bx | b16 = bxtrg) & (b17 != bx & b17 != bxtrg & b17 != wall): TRUE;
	i = 1 & j = 6 & (b17 = flr | b17 = target): TRUE;
	i = 1 & j = 6 & (b17 = bx | b17 = bxtrg) & (b18 != bx & b18 != bxtrg & b18 != wall): TRUE;
	i = 1 & j = 7 & (b18 = flr | b18 = target): TRUE;
	i = 1 & j = 7 & (b18 = bx | b18 = bxtrg) & (b19 != bx & b19 != bxtrg & b19 != wall): TRUE;
	i = 1 & j = 8 & (b19 = flr | b19 = target): TRUE;
	i = 1 & j = 8 & (b19 = bx | b19 = bxtrg) & (b110 != bx & b110 != bxtrg & b110 != wall): TRUE;
	i = 1 & j = 9 & (b110 = flr | b110 = target): TRUE;
	i = 2 & j = 1 & (b22 = flr | b22 = target): TRUE;
	i = 2 & j = 1 & (b22 = bx | b22 = bxtrg) & (b23 != bx & b23 != bxtrg & b23 != wall): TRUE;
	i = 2 & j = 2 & (b23 = flr | b23 = target): TRUE;
	i = 2 & j = 2 & (b23 = bx | b23 = bxtrg) & (b24 != bx & b24 != bxtrg & b24 != wall): TRUE;
	i = 2 & j = 3 & (b24 = flr | b24 = target): TRUE;
	i = 2 & j = 3 & (b24 = bx | b24 = bxtrg) & (b25 != bx & b25 != bxtrg & b25 != wall): TRUE;
	i = 2 & j = 4 & (b25 = flr | b25 = target): TRUE;
	i = 2 & j = 4 & (b25 = bx | b25 = bxtrg) & (b26 != bx & b26 != bxtrg & b26 != wall): TRUE;
	i = 2 & j = 5 & (b26 = flr | b26 = target): TRUE;
	i = 2 & j = 5 & (b26 = bx | b26 = bxtrg) & (b27 != bx & b27 != bxtrg & b27 != wall): TRUE;
	i = 2 & j = 6 & (b27 = flr | b27 = target): TRUE;
	i = 2 & j = 6 & (b27 = bx | b27 = bxtrg) & (b28 != bx & b28 != bxtrg & b28 != wall): TRUE;
	i = 2 & j = 7 & (b28 = flr | b28 = target): TRUE;
	i = 2 & j = 7 & (b28 = bx | b28 = bxtrg) & (b29 != bx & b29 != bxtrg & b29 != wall): TRUE;
	i = 2 & j = 8 & (b29 = flr | b29 = target): TRUE;
	i = 2 & j = 8 & (b29 = bx | b29 = bxtrg) & (b210 != bx & b210 != bxtrg & b210 != wall): TRUE;
	i = 2 & j = 9 & (b210 = flr | b210 = target): TRUE;
	i = 3 & j = 1 & (b32 = flr | b32 = target): TRUE;
	i = 3 & j = 1 & (b32 = bx | b32 = bxtrg) & (b33 != bx & b33 != bxtrg & b33 != wall): TRUE;
	i = 3 & j = 2 & (b33 = flr | b33 = target): TRUE;
	i = 3 & j = 2 & (b33 = bx | b33 = bxtrg) & (b34 != bx & b34 != bxtrg & b34 != wall): TRUE;
	i = 3 & j = 3 & (b34 = flr | b34 = target): TRUE;
	i = 3 & j = 3 & (b34 = bx | b34 = bxtrg) & (b35 != bx & b35 != bxtrg & b35 != wall): TRUE;
	i = 3 & j = 4 & (b35 = flr | b35 = target): TRUE;
	i = 3 & j = 4 & (b35 = bx | b35 = bxtrg) & (b36 != bx & b36 != bxtrg & b36 != wall): TRUE;
	i = 3 & j = 5 & (b36 = flr | b36 = target): TRUE;
	i = 3 & j = 5 & (b36 = bx | b36 = bxtrg) & (b37 != bx & b37 != bxtrg & b37 != wall): TRUE;
	i = 3 & j = 6 & (b37 = flr | b37 = target): TRUE;
	i = 3 & j = 6 & (b37 = bx | b37 = bxtrg) & (b38 != bx & b38 != bxtrg & b38 != wall): TRUE;
	i = 3 & j = 7 & (b38 = flr | b38 = target): TRUE;
	i = 3 & j = 7 & (b38 = bx | b38 = bxtrg) & (b39 != bx & b39 != bxtrg & b39 != wall): TRUE;
	i = 3 & j = 8 & (b39 = flr | b39 = target): TRUE;
	i = 3 & j = 8 & (b39 = bx | b39 = bxtrg) & (b310 != bx & b310 != bxtrg & b310 != wall): TRUE;
	i = 3 & j = 9 & (b310 = flr | b310 = target): TRUE;
	i = 4 & j = 1 & (b42 = flr | b42 = target): TRUE;
	i = 4 & j = 1 & (b42 = bx | b42 = bxtrg) & (b43 != bx & b43 != bxtrg & b43 != wall): TRUE;
	i = 4 & j = 2 & (b43 = flr | b43 = target): TRUE;
	i = 4 & j = 2 & (b43 = bx | b43 = bxtrg) & (b44 != bx & b44 != bxtrg & b44 != wall): TRUE;
	i = 4 & j = 3 & (b44 = flr | b44 = target): TRUE;
	i = 4 & j = 3 & (b44 = bx | b44 = bxtrg) & (b45 != bx & b45 != bxtrg & b45 != wall): TRUE;
	i = 4 & j = 4 & (b45 = flr | b45 = target): TRUE;
	i = 4 & j = 4 & (b45 = bx | b45 = bxtrg) & (b46 != bx & b46 != bxtrg & b46 != wall): TRUE;
	i = 4 & j = 5 & (b46 = flr | b46 = target): TRUE;
	i = 4 & j = 5 & (b46 = bx | b46 = bxtrg) & (b47 != bx & b47 != bxtrg & b47 != wall): TRUE;
	i = 4 & j = 6 & (b47 = flr | b47 = target): TRUE;
	i = 4 & j = 6 & (b47 = bx | b47 = bxtrg) & (b48 != bx & b48 != bxtrg & b48 != wall): TRUE;
	i = 4 & j = 7 & (b48 = flr | b48 = target): TRUE;
	i = 4 & j = 7 & (b48 = bx | b48 = bxtrg) & (b49 != bx & b49 != bxtrg & b49 != wall): TRUE;
	i = 4 & j = 8 & (b49 = flr | b49 = target): TRUE;
	i = 4 & j = 8 & (b49 = bx | b49 = bxtrg) & (b410 != bx & b410 != bxtrg & b410 != wall): TRUE;
	i = 4 & j = 9 & (b410 = flr | b410 = target): TRUE;
	i = 5 & j = 1 & (b52 = flr | b52 = target): TRUE;
	i = 5 & j = 1 & (b52 = bx | b52 = bxtrg) & (b53 != bx & b53 != bxtrg & b53 != wall): TRUE;
	i = 5 & j = 2 & (b53 = flr | b53 = target): TRUE;
	i = 5 & j = 2 & (b53 = bx | b53 = bxtrg) & (b54 != bx & b54 != bxtrg & b54 != wall): TRUE;
	i = 5 & j = 3 & (b54 = flr | b54 = target): TRUE;
	i = 5 & j = 3 & (b54 = bx | b54 = bxtrg) & (b55 != bx & b55 != bxtrg & b55 != wall): TRUE;
	i = 5 & j = 4 & (b55 = flr | b55 = target): TRUE;
	i = 5 & j = 4 & (b55 = bx | b55 = bxtrg) & (b56 != bx & b56 != bxtrg & b56 != wall): TRUE;
	i = 5 & j = 5 & (b56 = flr | b56 = target): TRUE;
	i = 5 & j = 5 & (b56 = bx | b56 = bxtrg) & (b57 != bx & b57 != bxtrg & b57 != wall): TRUE;
	i = 5 & j = 6 & (b57 = flr | b57 = target): TRUE;
	i = 5 & j = 6 & (b57 = bx | b57 = bxtrg) & (b58 != bx & b58 != bxtrg & b58 != wall): TRUE;
	i = 5 & j = 7 & (b58 = flr | b58 = target): TRUE;
	i = 5 & j = 7 & (b58 = bx | b58 = bxtrg) & (b59 != bx & b59 != bxtrg & b59 != wall): TRUE;
	i = 5 & j = 8 & (b59 = flr | b59 = target): TRUE;
	i = 5 & j = 8 & (b59 = bx | b59 = bxtrg) & (b510 != bx & b510 != bxtrg & b510 != wall): TRUE;
	i = 5 & j = 9 & (b510 = flr | b510 = target): TRUE;
	i = 6 & j = 1 & (b62 = flr | b62 = target): TRUE;
	i = 6 & j = 1 & (b62 = bx | b62 = bxtrg) & (b63 != bx & b63 != bxtrg & b63 != wall): TRUE;
	i = 6 & j = 2 & (b63 = flr | b63 = target): TRUE;
	i = 6 & j = 2 & (b63 = bx | b63 = bxtrg) & (b64 != bx & b64 != bxtrg & b64 != wall): TRUE;
	i = 6 & j = 3 & (b64 = flr | b64 = target): TRUE;
	i = 6 & j = 3 & (b64 = bx | b64 = bxtrg) & (b65 != bx & b65 != bxtrg & b65 != wall): TRUE;
	i = 6 & j = 4 & (b65 = flr | b65 = target): TRUE;
	i = 6 & j = 4 & (b65 = bx | b65 = bxtrg) & (b66 != bx & b66 != bxtrg & b66 != wall): TRUE;
	i = 6 & j = 5 & (b66 = flr | b66 = target): TRUE;
	i = 6 & j = 5 & (b66 = bx | b66 = bxtrg) & (b67 != bx & b67 != bxtrg & b67 != wall): TRUE;
	i = 6 & j = 6 & (b67 = flr | b67 = target): TRUE;
	i = 6 & j = 6 & (b67 = bx | b67 = bxtrg) & (b68 != bx & b68 != bxtrg & b68 != wall): TRUE;
	i = 6 & j = 7 & (b68 = flr | b68 = target): TRUE;
	i = 6 & j = 7 & (b68 = bx | b68 = bxtrg) & (b69 != bx & b69 != bxtrg & b69 != wall): TRUE;
	i = 6 & j = 8 & (b69 = flr | b69 = target): TRUE;
	i = 6 & j = 8 & (b69 = bx | b69 = bxtrg) & (b610 != bx & b610 != bxtrg & b610 != wall): TRUE;
	i = 6 & j = 9 & (b610 = flr | b610 = target): TRUE;
	i = 7 & j = 1 & (b72 = flr | b72 = target): TRUE;
	i = 7 & j = 1 & (b72 = bx | b72 = bxtrg) & (b73 != bx & b73 != bxtrg & b73 != wall): TRUE;
	i = 7 & j = 2 & (b73 = flr | b73 = target): TRUE;
	i = 7 & j = 2 & (b73 = bx | b73 = bxtrg) & (b74 != bx & b74 != bxtrg & b74 != wall): TRUE;
	i = 7 & j = 3 & (b74 = flr | b74 = target): TRUE;
	i = 7 & j = 3 & (b74 = bx | b74 = bxtrg) & (b75 != bx & b75 != bxtrg & b75 != wall): TRUE;
	i = 7 & j = 4 & (b75 = flr | b75 = target): TRUE;
	i = 7 & j = 4 & (b75 = bx | b75 = bxtrg) & (b76 != bx & b76 != bxtrg & b76 != wall): TRUE;
	i = 7 & j = 5 & (b76 = flr | b76 = target): TRUE;
	i = 7 & j = 5 & (b76 = bx | b76 = bxtrg) & (b77 != bx & b77 != bxtrg & b77 != wall): TRUE;
	i = 7 & j = 6 & (b77 = flr | b77 = target): TRUE;
	i = 7 & j = 6 & (b77 = bx | b77 = bxtrg) & (b78 != bx & b78 != bxtrg & b78 != wall): TRUE;
	i = 7 & j = 7 & (b78 = flr | b78 = target): TRUE;
	i = 7 & j = 7 & (b78 = bx | b78 = bxtrg) & (b79 != bx & b79 != bxtrg & b79 != wall): TRUE;
	i = 7 & j = 8 & (b79 = flr | b79 = target): TRUE;
	i = 7 & j = 8 & (b79 = bx | b79 = bxtrg) & (b710 != bx & b710 != bxtrg & b710 != wall): TRUE;
	i = 7 & j = 9 & (b710 = flr | b710 = target): TRUE;
	i = 8 & j = 1 & (b82 = flr | b82 = target): TRUE;
	i = 8 & j = 1 & (b82 = bx | b82 = bxtrg) & (b83 != bx & b83 != bxtrg & b83 != wall): TRUE;
	i = 8 & j = 2 & (b83 = flr | b83 = target): TRUE;
	i = 8 & j = 2 & (b83 = bx | b83 = bxtrg) & (b84 != bx & b84 != bxtrg & b84 != wall): TRUE;
	i = 8 & j = 3 & (b84 = flr | b84 = target): TRUE;
	i = 8 & j = 3 & (b84 = bx | b84 = bxtrg) & (b85 != bx & b85 != bxtrg & b85 != wall): TRUE;
	i = 8 & j = 4 & (b85 = flr | b85 = target): TRUE;
	i = 8 & j = 4 & (b85 = bx | b85 = bxtrg) & (b86 != bx & b86 != bxtrg & b86 != wall): TRUE;
	i = 8 & j = 5 & (b86 = flr | b86 = target): TRUE;
	i = 8 & j = 5 & (b86 = bx | b86 = bxtrg) & (b87 != bx & b87 != bxtrg & b87 != wall): TRUE;
	i = 8 & j = 6 & (b87 = flr | b87 = target): TRUE;
	i = 8 & j = 6 & (b87 = bx | b87 = bxtrg) & (b88 != bx & b88 != bxtrg & b88 != wall): TRUE;
	i = 8 & j = 7 & (b88 = flr | b88 = target): TRUE;
	i = 8 & j = 7 & (b88 = bx | b88 = bxtrg) & (b89 != bx & b89 != bxtrg & b89 != wall): TRUE;
	i = 8 & j = 8 & (b89 = flr | b89 = target): TRUE;
	i = 8 & j = 8 & (b89 = bx | b89 = bxtrg) & (b810 != bx & b810 != bxtrg & b810 != wall): TRUE;
	i = 8 & j = 9 & (b810 = flr | b810 = target): TRUE;
	i = 9 & j = 1 & (b92 = flr | b92 = target): TRUE;
	i = 9 & j = 1 & (b92 = bx | b92 = bxtrg) & (b93 != bx & b93 != bxtrg & b93 != wall): TRUE;
	i = 9 & j = 2 & (b93 = flr | b93 = target): TRUE;
	i = 9 & j = 2 & (b93 = bx | b93 = bxtrg) & (b94 != bx & b94 != bxtrg & b94 != wall): TRUE;
	i = 9 & j = 3 & (b94 = flr | b94 = target): TRUE;
	i = 9 & j = 3 & (b94 = bx | b94 = bxtrg) & (b95 != bx & b95 != bxtrg & b95 != wall): TRUE;
	i = 9 & j = 4 & (b95 = flr | b95 = target): TRUE;
	i = 9 & j = 4 & (b95 = bx | b95 = bxtrg) & (b96 != bx & b96 != bxtrg & b96 != wall): TRUE;
	i = 9 & j = 5 & (b96 = flr | b96 = target): TRUE;
	i = 9 & j = 5 & (b96 = bx | b96 = bxtrg) & (b97 != bx & b97 != bxtrg & b97 != wall): TRUE;
	i = 9 & j = 6 & (b97 = flr | b97 = target): TRUE;
	i = 9 & j = 6 & (b97 = bx | b97 = bxtrg) & (b98 != bx & b98 != bxtrg & b98 != wall): TRUE;
	i = 9 & j = 7 & (b98 = flr | b98 = target): TRUE;
	i = 9 & j = 7 & (b98 = bx | b98 = bxtrg) & (b99 != bx & b99 != bxtrg & b99 != wall): TRUE;
	i = 9 & j = 8 & (b99 = flr | b99 = target): TRUE;
	i = 9 & j = 8 & (b99 = bx | b99 = bxtrg) & (b910 != bx & b910 != bxtrg & b910 != wall): TRUE;
	i = 9 & j = 9 & (b910 = flr | b910 = target): TRUE;
	TRUE: FALSE;
esac;
next(left):= case
	j = 0 | j = 1: FALSE;
	i = 1 & j = 1 & (b10 = flr | b10 = target): TRUE;
	i = 1 & j = 2 & (b11 = flr | b11 = target): TRUE;
	i = 1 & j = 2 & (b11 = bx | b11 = bxtrg) & (b10 != bx & b10 != bxtrg & b10 != wall): TRUE;
	i = 1 & j = 3 & (b12 = flr | b12 = target): TRUE;
	i = 1 & j = 3 & (b12 = bx | b12 = bxtrg) & (b11 != bx & b11 != bxtrg & b11 != wall): TRUE;
	i = 1 & j = 4 & (b13 = flr | b13 = target): TRUE;
	i = 1 & j = 4 & (b13 = bx | b13 = bxtrg) & (b12 != bx & b12 != bxtrg & b12 != wall): TRUE;
	i = 1 & j = 5 & (b14 = flr | b14 = target): TRUE;
	i = 1 & j = 5 & (b14 = bx | b14 = bxtrg) & (b13 != bx & b13 != bxtrg & b13 != wall): TRUE;
	i = 1 & j = 6 & (b15 = flr | b15 = target): TRUE;
	i = 1 & j = 6 & (b15 = bx | b15 = bxtrg) & (b14 != bx & b14 != bxtrg & b14 != wall): TRUE;
	i = 1 & j = 7 & (b16 = flr | b16 = target): TRUE;
	i = 1 & j = 7 & (b16 = bx | b16 = bxtrg) & (b15 != bx & b15 != bxtrg & b15 != wall): TRUE;
	i = 1 & j = 8 & (b17 = flr | b17 = target): TRUE;
	i = 1 & j = 8 & (b17 = bx | b17 = bxtrg) & (b16 != bx & b16 != bxtrg & b16 != wall): TRUE;
	i = 1 & j = 9 & (b18 = flr | b18 = target): TRUE;
	i = 1 & j = 9 & (b18 = bx | b18 = bxtrg) & (b17 != bx & b17 != bxtrg & b17 != wall): TRUE;
	i = 1 & j = 10 & (b19 = flr | b19 = target): TRUE;
	i = 1 & j = 10 & (b19 = bx | b19 = bxtrg) & (b18 != bx & b18 != bxtrg & b18 != wall): TRUE;
	i = 2 & j = 1 & (b20 = flr | b20 = target): TRUE;
	i = 2 & j = 2 & (b21 = flr | b21 = target): TRUE;
	i = 2 & j = 2 & (b21 = bx | b21 = bxtrg) & (b20 != bx & b20 != bxtrg & b20 != wall): TRUE;
	i = 2 & j = 3 & (b22 = flr | b22 = target): TRUE;
	i = 2 & j = 3 & (b22 = bx | b22 = bxtrg) & (b21 != bx & b21 != bxtrg & b21 != wall): TRUE;
	i = 2 & j = 4 & (b23 = flr | b23 = target): TRUE;
	i = 2 & j = 4 & (b23 = bx | b23 = bxtrg) & (b22 != bx & b22 != bxtrg & b22 != wall): TRUE;
	i = 2 & j = 5 & (b24 = flr | b24 = target): TRUE;
	i = 2 & j = 5 & (b24 = bx | b24 = bxtrg) & (b23 != bx & b23 != bxtrg & b23 != wall): TRUE;
	i = 2 & j = 6 & (b25 = flr | b25 = target): TRUE;
	i = 2 & j = 6 & (b25 = bx | b25 = bxtrg) & (b24 != bx & b24 != bxtrg & b24 != wall): TRUE;
	i = 2 & j = 7 & (b26 = flr | b26 = target): TRUE;
	i = 2 & j = 7 & (b26 = bx | b26 = bxtrg) & (b25 != bx & b25 != bxtrg & b25 != wall): TRUE;
	i = 2 & j = 8 & (b27 = flr | b27 = target): TRUE;
	i = 2 & j = 8 & (b27 = bx | b27 = bxtrg) & (b26 != bx & b26 != bxtrg & b26 != wall): TRUE;
	i = 2 & j = 9 & (b28 = flr | b28 = target): TRUE;
	i = 2 & j = 9 & (b28 = bx | b28 = bxtrg) & (b27 != bx & b27 != bxtrg & b27 != wall): TRUE;
	i = 2 & j = 10 & (b29 = flr | b29 = target): TRUE;
	i = 2 & j = 10 & (b29 = bx | b29 = bxtrg) & (b28 != bx & b28 != bxtrg & b28 != wall): TRUE;
	i = 3 & j = 1 & (b30 = flr | b30 = target): TRUE;
	i = 3 & j = 2 & (b31 = flr | b31 = target): TRUE;
	i = 3 & j = 2 & (b31 = bx | b31 = bxtrg) & (b30 != bx & b30 != bxtrg & b30 != wall): TRUE;
	i = 3 & j = 3 & (b32 = flr | b32 = target): TRUE;
	i = 3 & j = 3 & (b32 = bx | b32 = bxtrg) & (b31 != bx & b31 != bxtrg & b31 != wall): TRUE;
	i = 3 & j = 4 & (b33 = flr | b33 = target): TRUE;
	i = 3 & j = 4 & (b33 = bx | b33 = bxtrg) & (b32 != bx & b32 != bxtrg & b32 != wall): TRUE;
	i = 3 & j = 5 & (b34 = flr | b34 = target): TRUE;
	i = 3 & j = 5 & (b34 = bx | b34 = bxtrg) & (b33 != bx & b33 != bxtrg & b33 != wall): TRUE;
	i = 3 & j = 6 & (b35 = flr | b35 = target): TRUE;
	i = 3 & j = 6 & (b35 = bx | b35 = bxtrg) & (b34 != bx & b34 != bxtrg & b34 != wall): TRUE;
	i = 3 & j = 7 & (b36 = flr | b36 = target): TRUE;
	i = 3 & j = 7 & (b36 = bx | b36 = bxtrg) & (b35 != bx & b35 != bxtrg & b35 != wall): TRUE;
	i = 3 & j = 8 & (b37 = flr | b37 = target): TRUE;
	i = 3 & j = 8 & (b37 = bx | b37 = bxtrg) & (b36 != bx & b36 != bxtrg & b36 != wall): TRUE;
	i = 3 & j = 9 & (b38 = flr | b38 = target): TRUE;
	i = 3 & j = 9 & (b38 = bx | b38 = bxtrg) & (b37 != bx & b37 != bxtrg & b37 != wall): TRUE;
	i = 3 & j = 10 & (b39 = flr | b39 = target): TRUE;
	i = 3 & j = 10 & (b39 = bx | b39 = bxtrg) & (b38 != bx & b38 != bxtrg & b38 != wall): TRUE;
	i = 4 & j = 1 & (b40 = flr | b40 = target): TRUE;
	i = 4 & j = 2 & (b41 = flr | b41 = target): TRUE;
	i = 4 & j = 2 & (b41 = bx | b41 = bxtrg) & (b40 != bx & b40 != bxtrg & b40 != wall): TRUE;
	i = 4 & j = 3 & (b42 = flr | b42 = target): TRUE;
	i = 4 & j = 3 & (b42 = bx | b42 = bxtrg) & (b41 != bx & b41 != bxtrg & b41 != wall): TRUE;
	i = 4 & j = 4 & (b43 = flr | b43 = target): TRUE;
	i = 4 & j = 4 & (b43 = bx | b43 = bxtrg) & (b42 != bx & b42 != bxtrg & b42 != wall): TRUE;
	i = 4 & j = 5 & (b44 = flr | b44 = target): TRUE;
	i = 4 & j = 5 & (b44 = bx | b44 = bxtrg) & (b43 != bx & b43 != bxtrg & b43 != wall): TRUE;
	i = 4 & j = 6 & (b45 = flr | b45 = target): TRUE;
	i = 4 & j = 6 & (b45 = bx | b45 = bxtrg) & (b44 != bx & b44 != bxtrg & b44 != wall): TRUE;
	i = 4 & j = 7 & (b46 = flr | b46 = target): TRUE;
	i = 4 & j = 7 & (b46 = bx | b46 = bxtrg) & (b45 != bx & b45 != bxtrg & b45 != wall): TRUE;
	i = 4 & j = 8 & (b47 = flr | b47 = target): TRUE;
	i = 4 & j = 8 & (b47 = bx | b47 = bxtrg) & (b46 != bx & b46 != bxtrg & b46 != wall): TRUE;
	i = 4 & j = 9 & (b48 = flr | b48 = target): TRUE;
	i = 4 & j = 9 & (b48 = bx | b48 = bxtrg) & (b47 != bx & b47 != bxtrg & b47 != wall): TRUE;
	i = 4 & j = 10 & (b49 = flr | b49 = target): TRUE;
	i = 4 & j = 10 & (b49 = bx | b49 = bxtrg) & (b48 != bx & b48 != bxtrg & b48 != wall): TRUE;
	i = 5 & j = 1 & (b50 = flr | b50 = target): TRUE;
	i = 5 & j = 2 & (b51 = flr | b51 = target): TRUE;
	i = 5 & j = 2 & (b51 = bx | b51 = bxtrg) & (b50 != bx & b50 != bxtrg & b50 != wall): TRUE;
	i = 5 & j = 3 & (b52 = flr | b52 = target): TRUE;
	i = 5 & j = 3 & (b52 = bx | b52 = bxtrg) & (b51 != bx & b51 != bxtrg & b51 != wall): TRUE;
	i = 5 & j = 4 & (b53 = flr | b53 = target): TRUE;
	i = 5 & j = 4 & (b53 = bx | b53 = bxtrg) & (b52 != bx & b52 != bxtrg & b52 != wall): TRUE;
	i = 5 & j = 5 & (b54 = flr | b54 = target): TRUE;
	i = 5 & j = 5 & (b54 = bx | b54 = bxtrg) & (b53 != bx & b53 != bxtrg & b53 != wall): TRUE;
	i = 5 & j = 6 & (b55 = flr | b55 = target): TRUE;
	i = 5 & j = 6 & (b55 = bx | b55 = bxtrg) & (b54 != bx & b54 != bxtrg & b54 != wall): TRUE;
	i = 5 & j = 7 & (b56 = flr | b56 = target): TRUE;
	i = 5 & j = 7 & (b56 = bx | b56 = bxtrg) & (b55 != bx & b55 != bxtrg & b55 != wall): TRUE;
	i = 5 & j = 8 & (b57 = flr | b57 = target): TRUE;
	i = 5 & j = 8 & (b57 = bx | b57 = bxtrg) & (b56 != bx & b56 != bxtrg & b56 != wall): TRUE;
	i = 5 & j = 9 & (b58 = flr | b58 = target): TRUE;
	i = 5 & j = 9 & (b58 = bx | b58 = bxtrg) & (b57 != bx & b57 != bxtrg & b57 != wall): TRUE;
	i = 5 & j = 10 & (b59 = flr | b59 = target): TRUE;
	i = 5 & j = 10 & (b59 = bx | b59 = bxtrg) & (b58 != bx & b58 != bxtrg & b58 != wall): TRUE;
	i = 6 & j = 1 & (b60 = flr | b60 = target): TRUE;
	i = 6 & j = 2 & (b61 = flr | b61 = target): TRUE;
	i = 6 & j = 2 & (b61 = bx | b61 = bxtrg) & (b60 != bx & b60 != bxtrg & b60 != wall): TRUE;
	i = 6 & j = 3 & (b62 = flr | b62 = target): TRUE;
	i = 6 & j = 3 & (b62 = bx | b62 = bxtrg) & (b61 != bx & b61 != bxtrg & b61 != wall): TRUE;
	i = 6 & j = 4 & (b63 = flr | b63 = target): TRUE;
	i = 6 & j = 4 & (b63 = bx | b63 = bxtrg) & (b62 != bx & b62 != bxtrg & b62 != wall): TRUE;
	i = 6 & j = 5 & (b64 = flr | b64 = target): TRUE;
	i = 6 & j = 5 & (b64 = bx | b64 = bxtrg) & (b63 != bx & b63 != bxtrg & b63 != wall): TRUE;
	i = 6 & j = 6 & (b65 = flr | b65 = target): TRUE;
	i = 6 & j = 6 & (b65 = bx | b65 = bxtrg) & (b64 != bx & b64 != bxtrg & b64 != wall): TRUE;
	i = 6 & j = 7 & (b66 = flr | b66 = target): TRUE;
	i = 6 & j = 7 & (b66 = bx | b66 = bxtrg) & (b65 != bx & b65 != bxtrg & b65 != wall): TRUE;
	i = 6 & j = 8 & (b67 = flr | b67 = target): TRUE;
	i = 6 & j = 8 & (b67 = bx | b67 = bxtrg) & (b66 != bx & b66 != bxtrg & b66 != wall): TRUE;
	i = 6 & j = 9 & (b68 = flr | b68 = target): TRUE;
	i = 6 & j = 9 & (b68 = bx | b68 = bxtrg) & (b67 != bx & b67 != bxtrg & b67 != wall): TRUE;
	i = 6 & j = 10 & (b69 = flr | b69 = target): TRUE;
	i = 6 & j = 10 & (b69 = bx | b69 = bxtrg) & (b68 != bx & b68 != bxtrg & b68 != wall): TRUE;
	i = 7 & j = 1 & (b70 = flr | b70 = target): TRUE;
	i = 7 & j = 2 & (b71 = flr | b71 = target): TRUE;
	i = 7 & j = 2 & (b71 = bx | b71 = bxtrg) & (b70 != bx & b70 != bxtrg & b70 != wall): TRUE;
	i = 7 & j = 3 & (b72 = flr | b72 = target): TRUE;
	i = 7 & j = 3 & (b72 = bx | b72 = bxtrg) & (b71 != bx & b71 != bxtrg & b71 != wall): TRUE;
	i = 7 & j = 4 & (b73 = flr | b73 = target): TRUE;
	i = 7 & j = 4 & (b73 = bx | b73 = bxtrg) & (b72 != bx & b72 != bxtrg & b72 != wall): TRUE;
	i = 7 & j = 5 & (b74 = flr | b74 = target): TRUE;
	i = 7 & j = 5 & (b74 = bx | b74 = bxtrg) & (b73 != bx & b73 != bxtrg & b73 != wall): TRUE;
	i = 7 & j = 6 & (b75 = flr | b75 = target): TRUE;
	i = 7 & j = 6 & (b75 = bx | b75 = bxtrg) & (b74 != bx & b74 != bxtrg & b74 != wall): TRUE;
	i = 7 & j = 7 & (b76 = flr | b76 = target): TRUE;
	i = 7 & j = 7 & (b76 = bx | b76 = bxtrg) & (b75 != bx & b75 != bxtrg & b75 != wall): TRUE;
	i = 7 & j = 8 & (b77 = flr | b77 = target): TRUE;
	i = 7 & j = 8 & (b77 = bx | b77 = bxtrg) & (b76 != bx & b76 != bxtrg & b76 != wall): TRUE;
	i = 7 & j = 9 & (b78 = flr | b78 = target): TRUE;
	i = 7 & j = 9 & (b78 = bx | b78 = bxtrg) & (b77 != bx & b77 != bxtrg & b77 != wall): TRUE;
	i = 7 & j = 10 & (b79 = flr | b79 = target): TRUE;
	i = 7 & j = 10 & (b79 = bx | b79 = bxtrg) & (b78 != bx & b78 != bxtrg & b78 != wall): TRUE;
	i = 8 & j = 1 & (b80 = flr | b80 = target): TRUE;
	i = 8 & j = 2 & (b81 = flr | b81 = target): TRUE;
	i = 8 & j = 2 & (b81 = bx | b81 = bxtrg) & (b80 != bx & b80 != bxtrg & b80 != wall): TRUE;
	i = 8 & j = 3 & (b82 = flr | b82 = target): TRUE;
	i = 8 & j = 3 & (b82 = bx | b82 = bxtrg) & (b81 != bx & b81 != bxtrg & b81 != wall): TRUE;
	i = 8 & j = 4 & (b83 = flr | b83 = target): TRUE;
	i = 8 & j = 4 & (b83 = bx | b83 = bxtrg) & (b82 != bx & b82 != bxtrg & b82 != wall): TRUE;
	i = 8 & j = 5 & (b84 = flr | b84 = target): TRUE;
	i = 8 & j = 5 & (b84 = bx | b84 = bxtrg) & (b83 != bx & b83 != bxtrg & b83 != wall): TRUE;
	i = 8 & j = 6 & (b85 = flr | b85 = target): TRUE;
	i = 8 & j = 6 & (b85 = bx | b85 = bxtrg) & (b84 != bx & b84 != bxtrg & b84 != wall): TRUE;
	i = 8 & j = 7 & (b86 = flr | b86 = target): TRUE;
	i = 8 & j = 7 & (b86 = bx | b86 = bxtrg) & (b85 != bx & b85 != bxtrg & b85 != wall): TRUE;
	i = 8 & j = 8 & (b87 = flr | b87 = target): TRUE;
	i = 8 & j = 8 & (b87 = bx | b87 = bxtrg) & (b86 != bx & b86 != bxtrg & b86 != wall): TRUE;
	i = 8 & j = 9 & (b88 = flr | b88 = target): TRUE;
	i = 8 & j = 9 & (b88 = bx | b88 = bxtrg) & (b87 != bx & b87 != bxtrg & b87 != wall): TRUE;
	i = 8 & j = 10 & (b89 = flr | b89 = target): TRUE;
	i = 8 & j = 10 & (b89 = bx | b89 = bxtrg) & (b88 != bx & b88 != bxtrg & b88 != wall): TRUE;
	i = 9 & j = 1 & (b90 = flr | b90 = target): TRUE;
	i = 9 & j = 2 & (b91 = flr | b91 = target): TRUE;
	i = 9 & j = 2 & (b91 = bx | b91 = bxtrg) & (b90 != bx & b90 != bxtrg & b90 != wall): TRUE;
	i = 9 & j = 3 & (b92 = flr | b92 = target): TRUE;
	i = 9 & j = 3 & (b92 = bx | b92 = bxtrg) & (b91 != bx & b91 != bxtrg & b91 != wall): TRUE;
	i = 9 & j = 4 & (b93 = flr | b93 = target): TRUE;
	i = 9 & j = 4 & (b93 = bx | b93 = bxtrg) & (b92 != bx & b92 != bxtrg & b92 != wall): TRUE;
	i = 9 & j = 5 & (b94 = flr | b94 = target): TRUE;
	i = 9 & j = 5 & (b94 = bx | b94 = bxtrg) & (b93 != bx & b93 != bxtrg & b93 != wall): TRUE;
	i = 9 & j = 6 & (b95 = flr | b95 = target): TRUE;
	i = 9 & j = 6 & (b95 = bx | b95 = bxtrg) & (b94 != bx & b94 != bxtrg & b94 != wall): TRUE;
	i = 9 & j = 7 & (b96 = flr | b96 = target): TRUE;
	i = 9 & j = 7 & (b96 = bx | b96 = bxtrg) & (b95 != bx & b95 != bxtrg & b95 != wall): TRUE;
	i = 9 & j = 8 & (b97 = flr | b97 = target): TRUE;
	i = 9 & j = 8 & (b97 = bx | b97 = bxtrg) & (b96 != bx & b96 != bxtrg & b96 != wall): TRUE;
	i = 9 & j = 9 & (b98 = flr | b98 = target): TRUE;
	i = 9 & j = 9 & (b98 = bx | b98 = bxtrg) & (b97 != bx & b97 != bxtrg & b97 != wall): TRUE;
	i = 9 & j = 10 & (b99 = flr | b99 = target): TRUE;
	i = 9 & j = 10 & (b99 = bx | b99 = bxtrg) & (b98 != bx & b98 != bxtrg & b98 != wall): TRUE;
	TRUE: FALSE;
esac;

next(b00) := case
	--floor to floor
		next(dr) = r & (b00 = man & b01 =flr):flr;
		next(dr) = d & (b00 = man & b10 =flr):flr;


	--target to floor
		next(dr) = r & (b00 = mantrg & b01 =flr): target;
		next(dr) = d & (b00 = mantrg & b10 =flr): target;

	--floor to target
		next(dr) = r & (b00 = man & b01 = target):flr;
		next(dr) = d & (b00 = man & b10 = target):flr;

	--target to target
		next(dr) = r & (b00 = mantrg & b01 = target): target;
		next(dr) = d & (b00 = mantrg & b10 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b00 = man & b01 = bx) & (b02 =flr) & (0+2 < n):flr;
		next(dr) = d & (b00 = man & b10 = bx) & (b20 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b00 = man & b01 = bx) & (b02 = target) & (0+2 < n):flr;
		next(dr) = d & (b00 = man & b10 = bx) & (b20 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b00 = man & b01 = bxtrg) & (b02 =flr) & (0+2 < n):flr;
		next(dr) = d & (b00 = man & b10 = bxtrg) & (b20 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b00 = man & b01 = bxtrg) & (b02 = target) & (0+2 < n):flr;
		next(dr) = d & (b00 = man & b10 = bxtrg) & (b20 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b00 = mantrg & b01 = bx) & (b02 =flr) & (0+2 < n): target;
		next(dr) = d & (b00 = mantrg & b10 = bx) & (b20 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b00 = mantrg & b01 = bx) & (b02 = target) & (0+2 < n): target;
		next(dr) = d & (b00 = mantrg & b10 = bx) & (b20 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b00 = mantrg & b01 = bxtrg) & (b02 =flr) & (0+2 < n): target;
		next(dr) = d & (b00 = mantrg & b10 = bxtrg) & (b20 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b00 = mantrg & b01 = bxtrg) & (b02 = target) & (0+2 < n): target;
		next(dr) = d & (b00 = mantrg & b10 = bxtrg) & (b20 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = l & (b00 = flr & (b01 = man | b01 = mantrg)): man;
        next(dr) = u & (b00 = flr & (b10 = man | b10 = mantrg)): man;

    --box to floor
        next(dr) = l & (b00 = flr & (b01 = bx | b01 = bxtrg)) & (b02 = man | b02 = mantrg): bx;
        next(dr) = u & (b00 = flr & (b10 = bx | b10 = bxtrg)) & (b20 = man | b20 = mantrg): bx;

    --man to target
        next(dr) = l & (b00 = target & (b01 = man | b01 = mantrg)): mantrg;
        next(dr) = u & (b00 = target & (b10 = man | b10 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b00 = target & (b01 = bx | b01 = bxtrg)) & (b02 = man | b02 = mantrg): bxtrg;
        next(dr) = u & (b00 = target & (b10 = bx | b10 = bxtrg)) & (b20 = man | b20 = mantrg): bxtrg;

    --man to box

    --man to box on target

    TRUE: b00;
esac;
next(b01) := case
	--floor to floor
		next(dr) = l & (b01 = man & b00 =flr):flr;
		next(dr) = r & (b01 = man & b02 =flr):flr;
		next(dr) = d & (b01 = man & b11 =flr):flr;


	--target to floor
		next(dr) = l & (b01 = mantrg & b00 =flr): target;
		next(dr) = r & (b01 = mantrg & b02 =flr): target;
		next(dr) = d & (b01 = mantrg & b11 =flr): target;

	--floor to target
		next(dr) = l & (b01 = man & b00 = target):flr;
		next(dr) = r & (b01 = man & b02 = target):flr;
		next(dr) = d & (b01 = man & b11 = target):flr;

	--target to target
		next(dr) = l & (b01 = mantrg & b00 = target): target;
		next(dr) = r & (b01 = mantrg & b02 = target): target;
		next(dr) = d & (b01 = mantrg & b11 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b01 = man & b02 = bx) & (b03 =flr) & (1+2 < n):flr;
		next(dr) = d & (b01 = man & b11 = bx) & (b21 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b01 = man & b02 = bx) & (b03 = target) & (1+2 < n):flr;
		next(dr) = d & (b01 = man & b11 = bx) & (b21 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b01 = man & b02 = bxtrg) & (b03 =flr) & (1+2 < n):flr;
		next(dr) = d & (b01 = man & b11 = bxtrg) & (b21 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b01 = man & b02 = bxtrg) & (b03 = target) & (1+2 < n):flr;
		next(dr) = d & (b01 = man & b11 = bxtrg) & (b21 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b01 = mantrg & b02 = bx) & (b03 =flr) & (1+2 < n): target;
		next(dr) = d & (b01 = mantrg & b11 = bx) & (b21 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b01 = mantrg & b02 = bx) & (b03 = target) & (1+2 < n): target;
		next(dr) = d & (b01 = mantrg & b11 = bx) & (b21 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b01 = mantrg & b02 = bxtrg) & (b03 =flr) & (1+2 < n): target;
		next(dr) = d & (b01 = mantrg & b11 = bxtrg) & (b21 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b01 = mantrg & b02 = bxtrg) & (b03 = target) & (1+2 < n): target;
		next(dr) = d & (b01 = mantrg & b11 = bxtrg) & (b21 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b01 = flr & (b00 = man | b00 = mantrg)) : man;
        next(dr) = l & (b01 = flr & (b02 = man | b02 = mantrg)): man;
        next(dr) = u & (b01 = flr & (b11 = man | b11 = mantrg)): man;

    --box to floor
        next(dr) = l & (b01 = flr & (b02 = bx | b02 = bxtrg)) & (b03 = man | b03 = mantrg): bx;
        next(dr) = u & (b01 = flr & (b11 = bx | b11 = bxtrg)) & (b21 = man | b21 = mantrg): bx;

    --man to target
        next(dr) = r & (b01 = target & (b00 = man | b00 = mantrg)): mantrg;
        next(dr) = l & (b01 = target & (b02 = man | b02 = mantrg)): mantrg;
        next(dr) = u & (b01 = target & (b11 = man | b11 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b01 = target & (b02 = bx | b02 = bxtrg)) & (b03 = man | b03 = mantrg): bxtrg;
        next(dr) = u & (b01 = target & (b11 = bx | b11 = bxtrg)) & (b21 = man | b21 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b01 = bx & (b00 = man | b00 = mantrg)) & (b02 = flr | b02 = target): man;
        next(dr) = l & (b01 = bx & (b02 = man | b02 = mantrg)) & (b00 = flr | b00 = target): man;

    --man to box on target
        next(dr) = r & (b01 = bxtrg & (b00 = man | b00 = mantrg)) & (b02 = flr | b02 = target): mantrg;
        next(dr) = l & (b01 = bxtrg & (b02 = man | b02 = mantrg)) & (b00 = flr | b00 = target): mantrg;

    TRUE: b01;
esac;
next(b02) := case
	--floor to floor
		next(dr) = l & (b02 = man & b01 =flr):flr;
		next(dr) = r & (b02 = man & b03 =flr):flr;
		next(dr) = d & (b02 = man & b12 =flr):flr;


	--target to floor
		next(dr) = l & (b02 = mantrg & b01 =flr): target;
		next(dr) = r & (b02 = mantrg & b03 =flr): target;
		next(dr) = d & (b02 = mantrg & b12 =flr): target;

	--floor to target
		next(dr) = l & (b02 = man & b01 = target):flr;
		next(dr) = r & (b02 = man & b03 = target):flr;
		next(dr) = d & (b02 = man & b12 = target):flr;

	--target to target
		next(dr) = l & (b02 = mantrg & b01 = target): target;
		next(dr) = r & (b02 = mantrg & b03 = target): target;
		next(dr) = d & (b02 = mantrg & b12 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b02 = man & b01 = bx) & (b00 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b02 = man & b03 = bx) & (b04 =flr) & (2+2 < n):flr;
		next(dr) = d & (b02 = man & b12 = bx) & (b22 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b02 = man & b01 = bx) & (b00 = target) & (2-2 > 0):flr;
		next(dr) = r & (b02 = man & b03 = bx) & (b04 = target) & (2+2 < n):flr;
		next(dr) = d & (b02 = man & b12 = bx) & (b22 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b02 = man & b01 = bxtrg) & (b00 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b02 = man & b03 = bxtrg) & (b04 =flr) & (2+2 < n):flr;
		next(dr) = d & (b02 = man & b12 = bxtrg) & (b22 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b02 = man & b01 = bxtrg) & (b00 = target) & (2-2 > 0):flr;
		next(dr) = r & (b02 = man & b03 = bxtrg) & (b04 = target) & (2+2 < n):flr;
		next(dr) = d & (b02 = man & b12 = bxtrg) & (b22 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b02 = mantrg & b01 = bx) & (b00 =flr) & (2-2 > 0): target;
		next(dr) = r & (b02 = mantrg & b03 = bx) & (b04 =flr) & (2+2 < n): target;
		next(dr) = d & (b02 = mantrg & b12 = bx) & (b22 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b02 = mantrg & b01 = bx) & (b00 = target) & (2-2 > 0): target;
		next(dr) = r & (b02 = mantrg & b03 = bx) & (b04 = target) & (2+2 < n): target;
		next(dr) = d & (b02 = mantrg & b12 = bx) & (b22 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b02 = mantrg & b01 = bxtrg) & (b00 =flr) & (2-2 > 0): target;
		next(dr) = r & (b02 = mantrg & b03 = bxtrg) & (b04 =flr) & (2+2 < n): target;
		next(dr) = d & (b02 = mantrg & b12 = bxtrg) & (b22 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b02 = mantrg & b01 = bxtrg) & (b00 = target) & (2-2 > 0): target;
		next(dr) = r & (b02 = mantrg & b03 = bxtrg) & (b04 = target) & (2+2 < n): target;
		next(dr) = d & (b02 = mantrg & b12 = bxtrg) & (b22 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b02 = flr & (b01 = man | b01 = mantrg)) : man;
        next(dr) = l & (b02 = flr & (b03 = man | b03 = mantrg)): man;
        next(dr) = u & (b02 = flr & (b12 = man | b12 = mantrg)): man;

    --box to floor
        next(dr) = r & (b02 = flr & (b01 = bx | b01 = bxtrg)) & (b00 = man | b00 = mantrg): bx;
        next(dr) = l & (b02 = flr & (b03 = bx | b03 = bxtrg)) & (b04 = man | b04 = mantrg): bx;
        next(dr) = u & (b02 = flr & (b12 = bx | b12 = bxtrg)) & (b22 = man | b22 = mantrg): bx;

    --man to target
        next(dr) = r & (b02 = target & (b01 = man | b01 = mantrg)): mantrg;
        next(dr) = l & (b02 = target & (b03 = man | b03 = mantrg)): mantrg;
        next(dr) = u & (b02 = target & (b12 = man | b12 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b02 = target & (b01 = bx | b01 = bxtrg)) & (b00 = man | b00 = mantrg): bxtrg;
        next(dr) = l & (b02 = target & (b03 = bx | b03 = bxtrg)) & (b04 = man | b04 = mantrg): bxtrg;
        next(dr) = u & (b02 = target & (b12 = bx | b12 = bxtrg)) & (b22 = man | b22 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b02 = bx & (b01 = man | b01 = mantrg)) & (b03 = flr | b03 = target): man;
        next(dr) = l & (b02 = bx & (b03 = man | b03 = mantrg)) & (b01 = flr | b01 = target): man;

    --man to box on target
        next(dr) = r & (b02 = bxtrg & (b01 = man | b01 = mantrg)) & (b03 = flr | b03 = target): mantrg;
        next(dr) = l & (b02 = bxtrg & (b03 = man | b03 = mantrg)) & (b01 = flr | b01 = target): mantrg;

    TRUE: b02;
esac;
next(b03) := case
	--floor to floor
		next(dr) = l & (b03 = man & b02 =flr):flr;
		next(dr) = r & (b03 = man & b04 =flr):flr;
		next(dr) = d & (b03 = man & b13 =flr):flr;


	--target to floor
		next(dr) = l & (b03 = mantrg & b02 =flr): target;
		next(dr) = r & (b03 = mantrg & b04 =flr): target;
		next(dr) = d & (b03 = mantrg & b13 =flr): target;

	--floor to target
		next(dr) = l & (b03 = man & b02 = target):flr;
		next(dr) = r & (b03 = man & b04 = target):flr;
		next(dr) = d & (b03 = man & b13 = target):flr;

	--target to target
		next(dr) = l & (b03 = mantrg & b02 = target): target;
		next(dr) = r & (b03 = mantrg & b04 = target): target;
		next(dr) = d & (b03 = mantrg & b13 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b03 = man & b02 = bx) & (b01 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b03 = man & b04 = bx) & (b05 =flr) & (3+2 < n):flr;
		next(dr) = d & (b03 = man & b13 = bx) & (b23 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b03 = man & b02 = bx) & (b01 = target) & (3-2 > 0):flr;
		next(dr) = r & (b03 = man & b04 = bx) & (b05 = target) & (3+2 < n):flr;
		next(dr) = d & (b03 = man & b13 = bx) & (b23 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b03 = man & b02 = bxtrg) & (b01 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b03 = man & b04 = bxtrg) & (b05 =flr) & (3+2 < n):flr;
		next(dr) = d & (b03 = man & b13 = bxtrg) & (b23 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b03 = man & b02 = bxtrg) & (b01 = target) & (3-2 > 0):flr;
		next(dr) = r & (b03 = man & b04 = bxtrg) & (b05 = target) & (3+2 < n):flr;
		next(dr) = d & (b03 = man & b13 = bxtrg) & (b23 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b03 = mantrg & b02 = bx) & (b01 =flr) & (3-2 > 0): target;
		next(dr) = r & (b03 = mantrg & b04 = bx) & (b05 =flr) & (3+2 < n): target;
		next(dr) = d & (b03 = mantrg & b13 = bx) & (b23 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b03 = mantrg & b02 = bx) & (b01 = target) & (3-2 > 0): target;
		next(dr) = r & (b03 = mantrg & b04 = bx) & (b05 = target) & (3+2 < n): target;
		next(dr) = d & (b03 = mantrg & b13 = bx) & (b23 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b03 = mantrg & b02 = bxtrg) & (b01 =flr) & (3-2 > 0): target;
		next(dr) = r & (b03 = mantrg & b04 = bxtrg) & (b05 =flr) & (3+2 < n): target;
		next(dr) = d & (b03 = mantrg & b13 = bxtrg) & (b23 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b03 = mantrg & b02 = bxtrg) & (b01 = target) & (3-2 > 0): target;
		next(dr) = r & (b03 = mantrg & b04 = bxtrg) & (b05 = target) & (3+2 < n): target;
		next(dr) = d & (b03 = mantrg & b13 = bxtrg) & (b23 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b03 = flr & (b02 = man | b02 = mantrg)) : man;
        next(dr) = l & (b03 = flr & (b04 = man | b04 = mantrg)): man;
        next(dr) = u & (b03 = flr & (b13 = man | b13 = mantrg)): man;

    --box to floor
        next(dr) = r & (b03 = flr & (b02 = bx | b02 = bxtrg)) & (b01 = man | b01 = mantrg): bx;
        next(dr) = l & (b03 = flr & (b04 = bx | b04 = bxtrg)) & (b05 = man | b05 = mantrg): bx;
        next(dr) = u & (b03 = flr & (b13 = bx | b13 = bxtrg)) & (b23 = man | b23 = mantrg): bx;

    --man to target
        next(dr) = r & (b03 = target & (b02 = man | b02 = mantrg)): mantrg;
        next(dr) = l & (b03 = target & (b04 = man | b04 = mantrg)): mantrg;
        next(dr) = u & (b03 = target & (b13 = man | b13 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b03 = target & (b02 = bx | b02 = bxtrg)) & (b01 = man | b01 = mantrg): bxtrg;
        next(dr) = l & (b03 = target & (b04 = bx | b04 = bxtrg)) & (b05 = man | b05 = mantrg): bxtrg;
        next(dr) = u & (b03 = target & (b13 = bx | b13 = bxtrg)) & (b23 = man | b23 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b03 = bx & (b02 = man | b02 = mantrg)) & (b04 = flr | b04 = target): man;
        next(dr) = l & (b03 = bx & (b04 = man | b04 = mantrg)) & (b02 = flr | b02 = target): man;

    --man to box on target
        next(dr) = r & (b03 = bxtrg & (b02 = man | b02 = mantrg)) & (b04 = flr | b04 = target): mantrg;
        next(dr) = l & (b03 = bxtrg & (b04 = man | b04 = mantrg)) & (b02 = flr | b02 = target): mantrg;

    TRUE: b03;
esac;
next(b04) := case
	--floor to floor
		next(dr) = l & (b04 = man & b03 =flr):flr;
		next(dr) = r & (b04 = man & b05 =flr):flr;
		next(dr) = d & (b04 = man & b14 =flr):flr;


	--target to floor
		next(dr) = l & (b04 = mantrg & b03 =flr): target;
		next(dr) = r & (b04 = mantrg & b05 =flr): target;
		next(dr) = d & (b04 = mantrg & b14 =flr): target;

	--floor to target
		next(dr) = l & (b04 = man & b03 = target):flr;
		next(dr) = r & (b04 = man & b05 = target):flr;
		next(dr) = d & (b04 = man & b14 = target):flr;

	--target to target
		next(dr) = l & (b04 = mantrg & b03 = target): target;
		next(dr) = r & (b04 = mantrg & b05 = target): target;
		next(dr) = d & (b04 = mantrg & b14 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b04 = man & b03 = bx) & (b02 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b04 = man & b05 = bx) & (b06 =flr) & (4+2 < n):flr;
		next(dr) = d & (b04 = man & b14 = bx) & (b24 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b04 = man & b03 = bx) & (b02 = target) & (4-2 > 0):flr;
		next(dr) = r & (b04 = man & b05 = bx) & (b06 = target) & (4+2 < n):flr;
		next(dr) = d & (b04 = man & b14 = bx) & (b24 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b04 = man & b03 = bxtrg) & (b02 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b04 = man & b05 = bxtrg) & (b06 =flr) & (4+2 < n):flr;
		next(dr) = d & (b04 = man & b14 = bxtrg) & (b24 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b04 = man & b03 = bxtrg) & (b02 = target) & (4-2 > 0):flr;
		next(dr) = r & (b04 = man & b05 = bxtrg) & (b06 = target) & (4+2 < n):flr;
		next(dr) = d & (b04 = man & b14 = bxtrg) & (b24 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b04 = mantrg & b03 = bx) & (b02 =flr) & (4-2 > 0): target;
		next(dr) = r & (b04 = mantrg & b05 = bx) & (b06 =flr) & (4+2 < n): target;
		next(dr) = d & (b04 = mantrg & b14 = bx) & (b24 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b04 = mantrg & b03 = bx) & (b02 = target) & (4-2 > 0): target;
		next(dr) = r & (b04 = mantrg & b05 = bx) & (b06 = target) & (4+2 < n): target;
		next(dr) = d & (b04 = mantrg & b14 = bx) & (b24 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b04 = mantrg & b03 = bxtrg) & (b02 =flr) & (4-2 > 0): target;
		next(dr) = r & (b04 = mantrg & b05 = bxtrg) & (b06 =flr) & (4+2 < n): target;
		next(dr) = d & (b04 = mantrg & b14 = bxtrg) & (b24 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b04 = mantrg & b03 = bxtrg) & (b02 = target) & (4-2 > 0): target;
		next(dr) = r & (b04 = mantrg & b05 = bxtrg) & (b06 = target) & (4+2 < n): target;
		next(dr) = d & (b04 = mantrg & b14 = bxtrg) & (b24 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b04 = flr & (b03 = man | b03 = mantrg)) : man;
        next(dr) = l & (b04 = flr & (b05 = man | b05 = mantrg)): man;
        next(dr) = u & (b04 = flr & (b14 = man | b14 = mantrg)): man;

    --box to floor
        next(dr) = r & (b04 = flr & (b03 = bx | b03 = bxtrg)) & (b02 = man | b02 = mantrg): bx;
        next(dr) = l & (b04 = flr & (b05 = bx | b05 = bxtrg)) & (b06 = man | b06 = mantrg): bx;
        next(dr) = u & (b04 = flr & (b14 = bx | b14 = bxtrg)) & (b24 = man | b24 = mantrg): bx;

    --man to target
        next(dr) = r & (b04 = target & (b03 = man | b03 = mantrg)): mantrg;
        next(dr) = l & (b04 = target & (b05 = man | b05 = mantrg)): mantrg;
        next(dr) = u & (b04 = target & (b14 = man | b14 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b04 = target & (b03 = bx | b03 = bxtrg)) & (b02 = man | b02 = mantrg): bxtrg;
        next(dr) = l & (b04 = target & (b05 = bx | b05 = bxtrg)) & (b06 = man | b06 = mantrg): bxtrg;
        next(dr) = u & (b04 = target & (b14 = bx | b14 = bxtrg)) & (b24 = man | b24 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b04 = bx & (b03 = man | b03 = mantrg)) & (b05 = flr | b05 = target): man;
        next(dr) = l & (b04 = bx & (b05 = man | b05 = mantrg)) & (b03 = flr | b03 = target): man;

    --man to box on target
        next(dr) = r & (b04 = bxtrg & (b03 = man | b03 = mantrg)) & (b05 = flr | b05 = target): mantrg;
        next(dr) = l & (b04 = bxtrg & (b05 = man | b05 = mantrg)) & (b03 = flr | b03 = target): mantrg;

    TRUE: b04;
esac;
next(b05) := case
	--floor to floor
		next(dr) = l & (b05 = man & b04 =flr):flr;
		next(dr) = r & (b05 = man & b06 =flr):flr;
		next(dr) = d & (b05 = man & b15 =flr):flr;


	--target to floor
		next(dr) = l & (b05 = mantrg & b04 =flr): target;
		next(dr) = r & (b05 = mantrg & b06 =flr): target;
		next(dr) = d & (b05 = mantrg & b15 =flr): target;

	--floor to target
		next(dr) = l & (b05 = man & b04 = target):flr;
		next(dr) = r & (b05 = man & b06 = target):flr;
		next(dr) = d & (b05 = man & b15 = target):flr;

	--target to target
		next(dr) = l & (b05 = mantrg & b04 = target): target;
		next(dr) = r & (b05 = mantrg & b06 = target): target;
		next(dr) = d & (b05 = mantrg & b15 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b05 = man & b04 = bx) & (b03 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b05 = man & b06 = bx) & (b07 =flr) & (5+2 < n):flr;
		next(dr) = d & (b05 = man & b15 = bx) & (b25 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b05 = man & b04 = bx) & (b03 = target) & (5-2 > 0):flr;
		next(dr) = r & (b05 = man & b06 = bx) & (b07 = target) & (5+2 < n):flr;
		next(dr) = d & (b05 = man & b15 = bx) & (b25 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b05 = man & b04 = bxtrg) & (b03 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b05 = man & b06 = bxtrg) & (b07 =flr) & (5+2 < n):flr;
		next(dr) = d & (b05 = man & b15 = bxtrg) & (b25 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b05 = man & b04 = bxtrg) & (b03 = target) & (5-2 > 0):flr;
		next(dr) = r & (b05 = man & b06 = bxtrg) & (b07 = target) & (5+2 < n):flr;
		next(dr) = d & (b05 = man & b15 = bxtrg) & (b25 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b05 = mantrg & b04 = bx) & (b03 =flr) & (5-2 > 0): target;
		next(dr) = r & (b05 = mantrg & b06 = bx) & (b07 =flr) & (5+2 < n): target;
		next(dr) = d & (b05 = mantrg & b15 = bx) & (b25 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b05 = mantrg & b04 = bx) & (b03 = target) & (5-2 > 0): target;
		next(dr) = r & (b05 = mantrg & b06 = bx) & (b07 = target) & (5+2 < n): target;
		next(dr) = d & (b05 = mantrg & b15 = bx) & (b25 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b05 = mantrg & b04 = bxtrg) & (b03 =flr) & (5-2 > 0): target;
		next(dr) = r & (b05 = mantrg & b06 = bxtrg) & (b07 =flr) & (5+2 < n): target;
		next(dr) = d & (b05 = mantrg & b15 = bxtrg) & (b25 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b05 = mantrg & b04 = bxtrg) & (b03 = target) & (5-2 > 0): target;
		next(dr) = r & (b05 = mantrg & b06 = bxtrg) & (b07 = target) & (5+2 < n): target;
		next(dr) = d & (b05 = mantrg & b15 = bxtrg) & (b25 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b05 = flr & (b04 = man | b04 = mantrg)) : man;
        next(dr) = l & (b05 = flr & (b06 = man | b06 = mantrg)): man;
        next(dr) = u & (b05 = flr & (b15 = man | b15 = mantrg)): man;

    --box to floor
        next(dr) = r & (b05 = flr & (b04 = bx | b04 = bxtrg)) & (b03 = man | b03 = mantrg): bx;
        next(dr) = l & (b05 = flr & (b06 = bx | b06 = bxtrg)) & (b07 = man | b07 = mantrg): bx;
        next(dr) = u & (b05 = flr & (b15 = bx | b15 = bxtrg)) & (b25 = man | b25 = mantrg): bx;

    --man to target
        next(dr) = r & (b05 = target & (b04 = man | b04 = mantrg)): mantrg;
        next(dr) = l & (b05 = target & (b06 = man | b06 = mantrg)): mantrg;
        next(dr) = u & (b05 = target & (b15 = man | b15 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b05 = target & (b04 = bx | b04 = bxtrg)) & (b03 = man | b03 = mantrg): bxtrg;
        next(dr) = l & (b05 = target & (b06 = bx | b06 = bxtrg)) & (b07 = man | b07 = mantrg): bxtrg;
        next(dr) = u & (b05 = target & (b15 = bx | b15 = bxtrg)) & (b25 = man | b25 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b05 = bx & (b04 = man | b04 = mantrg)) & (b06 = flr | b06 = target): man;
        next(dr) = l & (b05 = bx & (b06 = man | b06 = mantrg)) & (b04 = flr | b04 = target): man;

    --man to box on target
        next(dr) = r & (b05 = bxtrg & (b04 = man | b04 = mantrg)) & (b06 = flr | b06 = target): mantrg;
        next(dr) = l & (b05 = bxtrg & (b06 = man | b06 = mantrg)) & (b04 = flr | b04 = target): mantrg;

    TRUE: b05;
esac;
next(b06) := case
	--floor to floor
		next(dr) = l & (b06 = man & b05 =flr):flr;
		next(dr) = r & (b06 = man & b07 =flr):flr;
		next(dr) = d & (b06 = man & b16 =flr):flr;


	--target to floor
		next(dr) = l & (b06 = mantrg & b05 =flr): target;
		next(dr) = r & (b06 = mantrg & b07 =flr): target;
		next(dr) = d & (b06 = mantrg & b16 =flr): target;

	--floor to target
		next(dr) = l & (b06 = man & b05 = target):flr;
		next(dr) = r & (b06 = man & b07 = target):flr;
		next(dr) = d & (b06 = man & b16 = target):flr;

	--target to target
		next(dr) = l & (b06 = mantrg & b05 = target): target;
		next(dr) = r & (b06 = mantrg & b07 = target): target;
		next(dr) = d & (b06 = mantrg & b16 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b06 = man & b05 = bx) & (b04 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b06 = man & b07 = bx) & (b08 =flr) & (6+2 < n):flr;
		next(dr) = d & (b06 = man & b16 = bx) & (b26 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b06 = man & b05 = bx) & (b04 = target) & (6-2 > 0):flr;
		next(dr) = r & (b06 = man & b07 = bx) & (b08 = target) & (6+2 < n):flr;
		next(dr) = d & (b06 = man & b16 = bx) & (b26 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b06 = man & b05 = bxtrg) & (b04 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b06 = man & b07 = bxtrg) & (b08 =flr) & (6+2 < n):flr;
		next(dr) = d & (b06 = man & b16 = bxtrg) & (b26 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b06 = man & b05 = bxtrg) & (b04 = target) & (6-2 > 0):flr;
		next(dr) = r & (b06 = man & b07 = bxtrg) & (b08 = target) & (6+2 < n):flr;
		next(dr) = d & (b06 = man & b16 = bxtrg) & (b26 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b06 = mantrg & b05 = bx) & (b04 =flr) & (6-2 > 0): target;
		next(dr) = r & (b06 = mantrg & b07 = bx) & (b08 =flr) & (6+2 < n): target;
		next(dr) = d & (b06 = mantrg & b16 = bx) & (b26 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b06 = mantrg & b05 = bx) & (b04 = target) & (6-2 > 0): target;
		next(dr) = r & (b06 = mantrg & b07 = bx) & (b08 = target) & (6+2 < n): target;
		next(dr) = d & (b06 = mantrg & b16 = bx) & (b26 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b06 = mantrg & b05 = bxtrg) & (b04 =flr) & (6-2 > 0): target;
		next(dr) = r & (b06 = mantrg & b07 = bxtrg) & (b08 =flr) & (6+2 < n): target;
		next(dr) = d & (b06 = mantrg & b16 = bxtrg) & (b26 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b06 = mantrg & b05 = bxtrg) & (b04 = target) & (6-2 > 0): target;
		next(dr) = r & (b06 = mantrg & b07 = bxtrg) & (b08 = target) & (6+2 < n): target;
		next(dr) = d & (b06 = mantrg & b16 = bxtrg) & (b26 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b06 = flr & (b05 = man | b05 = mantrg)) : man;
        next(dr) = l & (b06 = flr & (b07 = man | b07 = mantrg)): man;
        next(dr) = u & (b06 = flr & (b16 = man | b16 = mantrg)): man;

    --box to floor
        next(dr) = r & (b06 = flr & (b05 = bx | b05 = bxtrg)) & (b04 = man | b04 = mantrg): bx;
        next(dr) = l & (b06 = flr & (b07 = bx | b07 = bxtrg)) & (b08 = man | b08 = mantrg): bx;
        next(dr) = u & (b06 = flr & (b16 = bx | b16 = bxtrg)) & (b26 = man | b26 = mantrg): bx;

    --man to target
        next(dr) = r & (b06 = target & (b05 = man | b05 = mantrg)): mantrg;
        next(dr) = l & (b06 = target & (b07 = man | b07 = mantrg)): mantrg;
        next(dr) = u & (b06 = target & (b16 = man | b16 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b06 = target & (b05 = bx | b05 = bxtrg)) & (b04 = man | b04 = mantrg): bxtrg;
        next(dr) = l & (b06 = target & (b07 = bx | b07 = bxtrg)) & (b08 = man | b08 = mantrg): bxtrg;
        next(dr) = u & (b06 = target & (b16 = bx | b16 = bxtrg)) & (b26 = man | b26 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b06 = bx & (b05 = man | b05 = mantrg)) & (b07 = flr | b07 = target): man;
        next(dr) = l & (b06 = bx & (b07 = man | b07 = mantrg)) & (b05 = flr | b05 = target): man;

    --man to box on target
        next(dr) = r & (b06 = bxtrg & (b05 = man | b05 = mantrg)) & (b07 = flr | b07 = target): mantrg;
        next(dr) = l & (b06 = bxtrg & (b07 = man | b07 = mantrg)) & (b05 = flr | b05 = target): mantrg;

    TRUE: b06;
esac;
next(b07) := case
	--floor to floor
		next(dr) = l & (b07 = man & b06 =flr):flr;
		next(dr) = r & (b07 = man & b08 =flr):flr;
		next(dr) = d & (b07 = man & b17 =flr):flr;


	--target to floor
		next(dr) = l & (b07 = mantrg & b06 =flr): target;
		next(dr) = r & (b07 = mantrg & b08 =flr): target;
		next(dr) = d & (b07 = mantrg & b17 =flr): target;

	--floor to target
		next(dr) = l & (b07 = man & b06 = target):flr;
		next(dr) = r & (b07 = man & b08 = target):flr;
		next(dr) = d & (b07 = man & b17 = target):flr;

	--target to target
		next(dr) = l & (b07 = mantrg & b06 = target): target;
		next(dr) = r & (b07 = mantrg & b08 = target): target;
		next(dr) = d & (b07 = mantrg & b17 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b07 = man & b06 = bx) & (b05 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b07 = man & b08 = bx) & (b09 =flr) & (7+2 < n):flr;
		next(dr) = d & (b07 = man & b17 = bx) & (b27 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b07 = man & b06 = bx) & (b05 = target) & (7-2 > 0):flr;
		next(dr) = r & (b07 = man & b08 = bx) & (b09 = target) & (7+2 < n):flr;
		next(dr) = d & (b07 = man & b17 = bx) & (b27 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b07 = man & b06 = bxtrg) & (b05 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b07 = man & b08 = bxtrg) & (b09 =flr) & (7+2 < n):flr;
		next(dr) = d & (b07 = man & b17 = bxtrg) & (b27 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b07 = man & b06 = bxtrg) & (b05 = target) & (7-2 > 0):flr;
		next(dr) = r & (b07 = man & b08 = bxtrg) & (b09 = target) & (7+2 < n):flr;
		next(dr) = d & (b07 = man & b17 = bxtrg) & (b27 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b07 = mantrg & b06 = bx) & (b05 =flr) & (7-2 > 0): target;
		next(dr) = r & (b07 = mantrg & b08 = bx) & (b09 =flr) & (7+2 < n): target;
		next(dr) = d & (b07 = mantrg & b17 = bx) & (b27 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b07 = mantrg & b06 = bx) & (b05 = target) & (7-2 > 0): target;
		next(dr) = r & (b07 = mantrg & b08 = bx) & (b09 = target) & (7+2 < n): target;
		next(dr) = d & (b07 = mantrg & b17 = bx) & (b27 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b07 = mantrg & b06 = bxtrg) & (b05 =flr) & (7-2 > 0): target;
		next(dr) = r & (b07 = mantrg & b08 = bxtrg) & (b09 =flr) & (7+2 < n): target;
		next(dr) = d & (b07 = mantrg & b17 = bxtrg) & (b27 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b07 = mantrg & b06 = bxtrg) & (b05 = target) & (7-2 > 0): target;
		next(dr) = r & (b07 = mantrg & b08 = bxtrg) & (b09 = target) & (7+2 < n): target;
		next(dr) = d & (b07 = mantrg & b17 = bxtrg) & (b27 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b07 = flr & (b06 = man | b06 = mantrg)) : man;
        next(dr) = l & (b07 = flr & (b08 = man | b08 = mantrg)): man;
        next(dr) = u & (b07 = flr & (b17 = man | b17 = mantrg)): man;

    --box to floor
        next(dr) = r & (b07 = flr & (b06 = bx | b06 = bxtrg)) & (b05 = man | b05 = mantrg): bx;
        next(dr) = l & (b07 = flr & (b08 = bx | b08 = bxtrg)) & (b09 = man | b09 = mantrg): bx;
        next(dr) = u & (b07 = flr & (b17 = bx | b17 = bxtrg)) & (b27 = man | b27 = mantrg): bx;

    --man to target
        next(dr) = r & (b07 = target & (b06 = man | b06 = mantrg)): mantrg;
        next(dr) = l & (b07 = target & (b08 = man | b08 = mantrg)): mantrg;
        next(dr) = u & (b07 = target & (b17 = man | b17 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b07 = target & (b06 = bx | b06 = bxtrg)) & (b05 = man | b05 = mantrg): bxtrg;
        next(dr) = l & (b07 = target & (b08 = bx | b08 = bxtrg)) & (b09 = man | b09 = mantrg): bxtrg;
        next(dr) = u & (b07 = target & (b17 = bx | b17 = bxtrg)) & (b27 = man | b27 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b07 = bx & (b06 = man | b06 = mantrg)) & (b08 = flr | b08 = target): man;
        next(dr) = l & (b07 = bx & (b08 = man | b08 = mantrg)) & (b06 = flr | b06 = target): man;

    --man to box on target
        next(dr) = r & (b07 = bxtrg & (b06 = man | b06 = mantrg)) & (b08 = flr | b08 = target): mantrg;
        next(dr) = l & (b07 = bxtrg & (b08 = man | b08 = mantrg)) & (b06 = flr | b06 = target): mantrg;

    TRUE: b07;
esac;
next(b08) := case
	--floor to floor
		next(dr) = l & (b08 = man & b07 =flr):flr;
		next(dr) = r & (b08 = man & b09 =flr):flr;
		next(dr) = d & (b08 = man & b18 =flr):flr;


	--target to floor
		next(dr) = l & (b08 = mantrg & b07 =flr): target;
		next(dr) = r & (b08 = mantrg & b09 =flr): target;
		next(dr) = d & (b08 = mantrg & b18 =flr): target;

	--floor to target
		next(dr) = l & (b08 = man & b07 = target):flr;
		next(dr) = r & (b08 = man & b09 = target):flr;
		next(dr) = d & (b08 = man & b18 = target):flr;

	--target to target
		next(dr) = l & (b08 = mantrg & b07 = target): target;
		next(dr) = r & (b08 = mantrg & b09 = target): target;
		next(dr) = d & (b08 = mantrg & b18 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b08 = man & b07 = bx) & (b06 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b08 = man & b09 = bx) & (b010 =flr) & (8+2 < n):flr;
		next(dr) = d & (b08 = man & b18 = bx) & (b28 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b08 = man & b07 = bx) & (b06 = target) & (8-2 > 0):flr;
		next(dr) = r & (b08 = man & b09 = bx) & (b010 = target) & (8+2 < n):flr;
		next(dr) = d & (b08 = man & b18 = bx) & (b28 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b08 = man & b07 = bxtrg) & (b06 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b08 = man & b09 = bxtrg) & (b010 =flr) & (8+2 < n):flr;
		next(dr) = d & (b08 = man & b18 = bxtrg) & (b28 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b08 = man & b07 = bxtrg) & (b06 = target) & (8-2 > 0):flr;
		next(dr) = r & (b08 = man & b09 = bxtrg) & (b010 = target) & (8+2 < n):flr;
		next(dr) = d & (b08 = man & b18 = bxtrg) & (b28 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b08 = mantrg & b07 = bx) & (b06 =flr) & (8-2 > 0): target;
		next(dr) = r & (b08 = mantrg & b09 = bx) & (b010 =flr) & (8+2 < n): target;
		next(dr) = d & (b08 = mantrg & b18 = bx) & (b28 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b08 = mantrg & b07 = bx) & (b06 = target) & (8-2 > 0): target;
		next(dr) = r & (b08 = mantrg & b09 = bx) & (b010 = target) & (8+2 < n): target;
		next(dr) = d & (b08 = mantrg & b18 = bx) & (b28 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b08 = mantrg & b07 = bxtrg) & (b06 =flr) & (8-2 > 0): target;
		next(dr) = r & (b08 = mantrg & b09 = bxtrg) & (b010 =flr) & (8+2 < n): target;
		next(dr) = d & (b08 = mantrg & b18 = bxtrg) & (b28 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b08 = mantrg & b07 = bxtrg) & (b06 = target) & (8-2 > 0): target;
		next(dr) = r & (b08 = mantrg & b09 = bxtrg) & (b010 = target) & (8+2 < n): target;
		next(dr) = d & (b08 = mantrg & b18 = bxtrg) & (b28 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b08 = flr & (b07 = man | b07 = mantrg)) : man;
        next(dr) = l & (b08 = flr & (b09 = man | b09 = mantrg)): man;
        next(dr) = u & (b08 = flr & (b18 = man | b18 = mantrg)): man;

    --box to floor
        next(dr) = r & (b08 = flr & (b07 = bx | b07 = bxtrg)) & (b06 = man | b06 = mantrg): bx;
        next(dr) = l & (b08 = flr & (b09 = bx | b09 = bxtrg)) & (b010 = man | b010 = mantrg): bx;
        next(dr) = u & (b08 = flr & (b18 = bx | b18 = bxtrg)) & (b28 = man | b28 = mantrg): bx;

    --man to target
        next(dr) = r & (b08 = target & (b07 = man | b07 = mantrg)): mantrg;
        next(dr) = l & (b08 = target & (b09 = man | b09 = mantrg)): mantrg;
        next(dr) = u & (b08 = target & (b18 = man | b18 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b08 = target & (b07 = bx | b07 = bxtrg)) & (b06 = man | b06 = mantrg): bxtrg;
        next(dr) = l & (b08 = target & (b09 = bx | b09 = bxtrg)) & (b010 = man | b010 = mantrg): bxtrg;
        next(dr) = u & (b08 = target & (b18 = bx | b18 = bxtrg)) & (b28 = man | b28 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b08 = bx & (b07 = man | b07 = mantrg)) & (b09 = flr | b09 = target): man;
        next(dr) = l & (b08 = bx & (b09 = man | b09 = mantrg)) & (b07 = flr | b07 = target): man;

    --man to box on target
        next(dr) = r & (b08 = bxtrg & (b07 = man | b07 = mantrg)) & (b09 = flr | b09 = target): mantrg;
        next(dr) = l & (b08 = bxtrg & (b09 = man | b09 = mantrg)) & (b07 = flr | b07 = target): mantrg;

    TRUE: b08;
esac;
next(b09) := case
	--floor to floor
		next(dr) = l & (b09 = man & b08 =flr):flr;
		next(dr) = r & (b09 = man & b010 =flr):flr;
		next(dr) = d & (b09 = man & b19 =flr):flr;


	--target to floor
		next(dr) = l & (b09 = mantrg & b08 =flr): target;
		next(dr) = r & (b09 = mantrg & b010 =flr): target;
		next(dr) = d & (b09 = mantrg & b19 =flr): target;

	--floor to target
		next(dr) = l & (b09 = man & b08 = target):flr;
		next(dr) = r & (b09 = man & b010 = target):flr;
		next(dr) = d & (b09 = man & b19 = target):flr;

	--target to target
		next(dr) = l & (b09 = mantrg & b08 = target): target;
		next(dr) = r & (b09 = mantrg & b010 = target): target;
		next(dr) = d & (b09 = mantrg & b19 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b09 = man & b08 = bx) & (b07 =flr) & (9-2 > 0):flr;
		next(dr) = d & (b09 = man & b19 = bx) & (b29 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b09 = man & b08 = bx) & (b07 = target) & (9-2 > 0):flr;
		next(dr) = d & (b09 = man & b19 = bx) & (b29 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b09 = man & b08 = bxtrg) & (b07 =flr) & (9-2 > 0):flr;
		next(dr) = d & (b09 = man & b19 = bxtrg) & (b29 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b09 = man & b08 = bxtrg) & (b07 = target) & (9-2 > 0):flr;
		next(dr) = d & (b09 = man & b19 = bxtrg) & (b29 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b09 = mantrg & b08 = bx) & (b07 =flr) & (9-2 > 0): target;
		next(dr) = d & (b09 = mantrg & b19 = bx) & (b29 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b09 = mantrg & b08 = bx) & (b07 = target) & (9-2 > 0): target;
		next(dr) = d & (b09 = mantrg & b19 = bx) & (b29 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b09 = mantrg & b08 = bxtrg) & (b07 =flr) & (9-2 > 0): target;
		next(dr) = d & (b09 = mantrg & b19 = bxtrg) & (b29 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b09 = mantrg & b08 = bxtrg) & (b07 = target) & (9-2 > 0): target;
		next(dr) = d & (b09 = mantrg & b19 = bxtrg) & (b29 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b09 = flr & (b08 = man | b08 = mantrg)) : man;
        next(dr) = l & (b09 = flr & (b010 = man | b010 = mantrg)): man;
        next(dr) = u & (b09 = flr & (b19 = man | b19 = mantrg)): man;

    --box to floor
        next(dr) = r & (b09 = flr & (b08 = bx | b08 = bxtrg)) & (b07 = man | b07 = mantrg): bx;
        next(dr) = u & (b09 = flr & (b19 = bx | b19 = bxtrg)) & (b29 = man | b29 = mantrg): bx;

    --man to target
        next(dr) = r & (b09 = target & (b08 = man | b08 = mantrg)): mantrg;
        next(dr) = l & (b09 = target & (b010 = man | b010 = mantrg)): mantrg;
        next(dr) = u & (b09 = target & (b19 = man | b19 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b09 = target & (b08 = bx | b08 = bxtrg)) & (b07 = man | b07 = mantrg): bxtrg;
        next(dr) = u & (b09 = target & (b19 = bx | b19 = bxtrg)) & (b29 = man | b29 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b09 = bx & (b08 = man | b08 = mantrg)) & (b010 = flr | b010 = target): man;
        next(dr) = l & (b09 = bx & (b010 = man | b010 = mantrg)) & (b08 = flr | b08 = target): man;

    --man to box on target
        next(dr) = r & (b09 = bxtrg & (b08 = man | b08 = mantrg)) & (b010 = flr | b010 = target): mantrg;
        next(dr) = l & (b09 = bxtrg & (b010 = man | b010 = mantrg)) & (b08 = flr | b08 = target): mantrg;

    TRUE: b09;
esac;
next(b010) := case
	--floor to floor
		next(dr) = l & (b010 = man & b09 =flr):flr;
		next(dr) = d & (b010 = man & b110 =flr):flr;


	--target to floor
		next(dr) = l & (b010 = mantrg & b09 =flr): target;
		next(dr) = d & (b010 = mantrg & b110 =flr): target;

	--floor to target
		next(dr) = l & (b010 = man & b09 = target):flr;
		next(dr) = d & (b010 = man & b110 = target):flr;

	--target to target
		next(dr) = l & (b010 = mantrg & b09 = target): target;
		next(dr) = d & (b010 = mantrg & b110 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b010 = man & b09 = bx) & (b08 =flr) & (10-2 > 0):flr;
		next(dr) = d & (b010 = man & b110 = bx) & (b210 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b010 = man & b09 = bx) & (b08 = target) & (10-2 > 0):flr;
		next(dr) = d & (b010 = man & b110 = bx) & (b210 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b010 = man & b09 = bxtrg) & (b08 =flr) & (10-2 > 0):flr;
		next(dr) = d & (b010 = man & b110 = bxtrg) & (b210 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b010 = man & b09 = bxtrg) & (b08 = target) & (10-2 > 0):flr;
		next(dr) = d & (b010 = man & b110 = bxtrg) & (b210 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b010 = mantrg & b09 = bx) & (b08 =flr) & (10-2 > 0): target;
		next(dr) = d & (b010 = mantrg & b110 = bx) & (b210 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b010 = mantrg & b09 = bx) & (b08 = target) & (10-2 > 0): target;
		next(dr) = d & (b010 = mantrg & b110 = bx) & (b210 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b010 = mantrg & b09 = bxtrg) & (b08 =flr) & (10-2 > 0): target;
		next(dr) = d & (b010 = mantrg & b110 = bxtrg) & (b210 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b010 = mantrg & b09 = bxtrg) & (b08 = target) & (10-2 > 0): target;
		next(dr) = d & (b010 = mantrg & b110 = bxtrg) & (b210 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b010 = flr & (b09 = man | b09 = mantrg)) : man;
        next(dr) = u & (b010 = flr & (b110 = man | b110 = mantrg)): man;

    --box to floor
        next(dr) = r & (b010 = flr & (b09 = bx | b09 = bxtrg)) & (b08 = man | b08 = mantrg): bx;
        next(dr) = u & (b010 = flr & (b110 = bx | b110 = bxtrg)) & (b210 = man | b210 = mantrg): bx;

    --man to target
        next(dr) = r & (b010 = target & (b09 = man | b09 = mantrg)): mantrg;
        next(dr) = u & (b010 = target & (b110 = man | b110 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b010 = target & (b09 = bx | b09 = bxtrg)) & (b08 = man | b08 = mantrg): bxtrg;
        next(dr) = u & (b010 = target & (b110 = bx | b110 = bxtrg)) & (b210 = man | b210 = mantrg): bxtrg;

    --man to box

    --man to box on target

    TRUE: b010;
esac;
next(b10) := case
	--floor to floor
		next(dr) = r & (b10 = man & b11 =flr):flr;
		next(dr) = u & (b10 = man & b00 =flr):flr;
		next(dr) = d & (b10 = man & b20 =flr):flr;


	--target to floor
		next(dr) = r & (b10 = mantrg & b11 =flr): target;
		next(dr) = u & (b10 = mantrg & b00 =flr): target;
		next(dr) = d & (b10 = mantrg & b20 =flr): target;

	--floor to target
		next(dr) = r & (b10 = man & b11 = target):flr;
		next(dr) = u & (b10 = man & b00 = target):flr;
		next(dr) = d & (b10 = man & b20 = target):flr;

	--target to target
		next(dr) = r & (b10 = mantrg & b11 = target): target;
		next(dr) = u & (b10 = mantrg & b00 = target): target;
		next(dr) = d & (b10 = mantrg & b20 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b10 = man & b11 = bx) & (b12 =flr) & (0+2 < n):flr;
		next(dr) = d & (b10 = man & b20 = bx) & (b30 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b10 = man & b11 = bx) & (b12 = target) & (0+2 < n):flr;
		next(dr) = d & (b10 = man & b20 = bx) & (b30 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b10 = man & b11 = bxtrg) & (b12 =flr) & (0+2 < n):flr;
		next(dr) = d & (b10 = man & b20 = bxtrg) & (b30 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b10 = man & b11 = bxtrg) & (b12 = target) & (0+2 < n):flr;
		next(dr) = d & (b10 = man & b20 = bxtrg) & (b30 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b10 = mantrg & b11 = bx) & (b12 =flr) & (0+2 < n): target;
		next(dr) = d & (b10 = mantrg & b20 = bx) & (b30 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b10 = mantrg & b11 = bx) & (b12 = target) & (0+2 < n): target;
		next(dr) = d & (b10 = mantrg & b20 = bx) & (b30 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b10 = mantrg & b11 = bxtrg) & (b12 =flr) & (0+2 < n): target;
		next(dr) = d & (b10 = mantrg & b20 = bxtrg) & (b30 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b10 = mantrg & b11 = bxtrg) & (b12 = target) & (0+2 < n): target;
		next(dr) = d & (b10 = mantrg & b20 = bxtrg) & (b30 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = l & (b10 = flr & (b11 = man | b11 = mantrg)): man;
        next(dr) = d & (b10 = flr & (b00 = man | b00 = mantrg)): man;
        next(dr) = u & (b10 = flr & (b20 = man | b20 = mantrg)): man;

    --box to floor
        next(dr) = l & (b10 = flr & (b11 = bx | b11 = bxtrg)) & (b12 = man | b12 = mantrg): bx;
        next(dr) = u & (b10 = flr & (b20 = bx | b20 = bxtrg)) & (b30 = man | b30 = mantrg): bx;

    --man to target
        next(dr) = l & (b10 = target & (b11 = man | b11 = mantrg)): mantrg;
        next(dr) = d & (b10 = target & (b00 = man | b00 = mantrg)): mantrg;
        next(dr) = u & (b10 = target & (b20 = man | b20 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b10 = target & (b11 = bx | b11 = bxtrg)) & (b12 = man | b12 = mantrg): bxtrg;
        next(dr) = u & (b10 = target & (b20 = bx | b20 = bxtrg)) & (b30 = man | b30 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b10 = bx & (b00 = man | b00 = mantrg)) & (b20 = flr | b20 = target): man;
        next(dr) = u & (b10 = bx & (b20 = man | b20 = mantrg)) & (b00 = flr | b00 = target): man;

    --man to box on target
        next(dr) = d & (b10 = bxtrg & (b00 = man | b00 = mantrg)) & (b20 = flr | b20 = target): mantrg;
        next(dr) = u & (b10 = bxtrg & (b20 = man | b20 = mantrg)) & (b00 = flr | b00 = target): mantrg;

    TRUE: b10;
esac;
next(b11) := case
	--floor to floor
		next(dr) = l & (b11 = man & b10 =flr):flr;
		next(dr) = r & (b11 = man & b12 =flr):flr;
		next(dr) = u & (b11 = man & b01 =flr):flr;
		next(dr) = d & (b11 = man & b21 =flr):flr;


	--target to floor
		next(dr) = l & (b11 = mantrg & b10 =flr): target;
		next(dr) = r & (b11 = mantrg & b12 =flr): target;
		next(dr) = u & (b11 = mantrg & b01 =flr): target;
		next(dr) = d & (b11 = mantrg & b21 =flr): target;

	--floor to target
		next(dr) = l & (b11 = man & b10 = target):flr;
		next(dr) = r & (b11 = man & b12 = target):flr;
		next(dr) = u & (b11 = man & b01 = target):flr;
		next(dr) = d & (b11 = man & b21 = target):flr;

	--target to target
		next(dr) = l & (b11 = mantrg & b10 = target): target;
		next(dr) = r & (b11 = mantrg & b12 = target): target;
		next(dr) = u & (b11 = mantrg & b01 = target): target;
		next(dr) = d & (b11 = mantrg & b21 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b11 = man & b12 = bx) & (b13 =flr) & (1+2 < n):flr;
		next(dr) = d & (b11 = man & b21 = bx) & (b31 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b11 = man & b12 = bx) & (b13 = target) & (1+2 < n):flr;
		next(dr) = d & (b11 = man & b21 = bx) & (b31 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b11 = man & b12 = bxtrg) & (b13 =flr) & (1+2 < n):flr;
		next(dr) = d & (b11 = man & b21 = bxtrg) & (b31 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b11 = man & b12 = bxtrg) & (b13 = target) & (1+2 < n):flr;
		next(dr) = d & (b11 = man & b21 = bxtrg) & (b31 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b11 = mantrg & b12 = bx) & (b13 =flr) & (1+2 < n): target;
		next(dr) = d & (b11 = mantrg & b21 = bx) & (b31 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b11 = mantrg & b12 = bx) & (b13 = target) & (1+2 < n): target;
		next(dr) = d & (b11 = mantrg & b21 = bx) & (b31 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b11 = mantrg & b12 = bxtrg) & (b13 =flr) & (1+2 < n): target;
		next(dr) = d & (b11 = mantrg & b21 = bxtrg) & (b31 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b11 = mantrg & b12 = bxtrg) & (b13 = target) & (1+2 < n): target;
		next(dr) = d & (b11 = mantrg & b21 = bxtrg) & (b31 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b11 = flr & (b10 = man | b10 = mantrg)) : man;
        next(dr) = l & (b11 = flr & (b12 = man | b12 = mantrg)): man;
        next(dr) = d & (b11 = flr & (b01 = man | b01 = mantrg)): man;
        next(dr) = u & (b11 = flr & (b21 = man | b21 = mantrg)): man;

    --box to floor
        next(dr) = l & (b11 = flr & (b12 = bx | b12 = bxtrg)) & (b13 = man | b13 = mantrg): bx;
        next(dr) = u & (b11 = flr & (b21 = bx | b21 = bxtrg)) & (b31 = man | b31 = mantrg): bx;

    --man to target
        next(dr) = r & (b11 = target & (b10 = man | b10 = mantrg)): mantrg;
        next(dr) = l & (b11 = target & (b12 = man | b12 = mantrg)): mantrg;
        next(dr) = d & (b11 = target & (b01 = man | b01 = mantrg)): mantrg;
        next(dr) = u & (b11 = target & (b21 = man | b21 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b11 = target & (b12 = bx | b12 = bxtrg)) & (b13 = man | b13 = mantrg): bxtrg;
        next(dr) = u & (b11 = target & (b21 = bx | b21 = bxtrg)) & (b31 = man | b31 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b11 = bx & (b10 = man | b10 = mantrg)) & (b12 = flr | b12 = target): man;
        next(dr) = l & (b11 = bx & (b12 = man | b12 = mantrg)) & (b10 = flr | b10 = target): man;
        next(dr) = d & (b11 = bx & (b01 = man | b01 = mantrg)) & (b21 = flr | b21 = target): man;
        next(dr) = u & (b11 = bx & (b21 = man | b21 = mantrg)) & (b01 = flr | b01 = target): man;

    --man to box on target
        next(dr) = r & (b11 = bxtrg & (b10 = man | b10 = mantrg)) & (b12 = flr | b12 = target): mantrg;
        next(dr) = l & (b11 = bxtrg & (b12 = man | b12 = mantrg)) & (b10 = flr | b10 = target): mantrg;
        next(dr) = d & (b11 = bxtrg & (b01 = man | b01 = mantrg)) & (b21 = flr | b21 = target): mantrg;
        next(dr) = u & (b11 = bxtrg & (b21 = man | b21 = mantrg)) & (b01 = flr | b01 = target): mantrg;

    TRUE: b11;
esac;
next(b12) := case
	--floor to floor
		next(dr) = l & (b12 = man & b11 =flr):flr;
		next(dr) = r & (b12 = man & b13 =flr):flr;
		next(dr) = u & (b12 = man & b02 =flr):flr;
		next(dr) = d & (b12 = man & b22 =flr):flr;


	--target to floor
		next(dr) = l & (b12 = mantrg & b11 =flr): target;
		next(dr) = r & (b12 = mantrg & b13 =flr): target;
		next(dr) = u & (b12 = mantrg & b02 =flr): target;
		next(dr) = d & (b12 = mantrg & b22 =flr): target;

	--floor to target
		next(dr) = l & (b12 = man & b11 = target):flr;
		next(dr) = r & (b12 = man & b13 = target):flr;
		next(dr) = u & (b12 = man & b02 = target):flr;
		next(dr) = d & (b12 = man & b22 = target):flr;

	--target to target
		next(dr) = l & (b12 = mantrg & b11 = target): target;
		next(dr) = r & (b12 = mantrg & b13 = target): target;
		next(dr) = u & (b12 = mantrg & b02 = target): target;
		next(dr) = d & (b12 = mantrg & b22 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b12 = man & b11 = bx) & (b10 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b12 = man & b13 = bx) & (b14 =flr) & (2+2 < n):flr;
		next(dr) = d & (b12 = man & b22 = bx) & (b32 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b12 = man & b11 = bx) & (b10 = target) & (2-2 > 0):flr;
		next(dr) = r & (b12 = man & b13 = bx) & (b14 = target) & (2+2 < n):flr;
		next(dr) = d & (b12 = man & b22 = bx) & (b32 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b12 = man & b11 = bxtrg) & (b10 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b12 = man & b13 = bxtrg) & (b14 =flr) & (2+2 < n):flr;
		next(dr) = d & (b12 = man & b22 = bxtrg) & (b32 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b12 = man & b11 = bxtrg) & (b10 = target) & (2-2 > 0):flr;
		next(dr) = r & (b12 = man & b13 = bxtrg) & (b14 = target) & (2+2 < n):flr;
		next(dr) = d & (b12 = man & b22 = bxtrg) & (b32 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b12 = mantrg & b11 = bx) & (b10 =flr) & (2-2 > 0): target;
		next(dr) = r & (b12 = mantrg & b13 = bx) & (b14 =flr) & (2+2 < n): target;
		next(dr) = d & (b12 = mantrg & b22 = bx) & (b32 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b12 = mantrg & b11 = bx) & (b10 = target) & (2-2 > 0): target;
		next(dr) = r & (b12 = mantrg & b13 = bx) & (b14 = target) & (2+2 < n): target;
		next(dr) = d & (b12 = mantrg & b22 = bx) & (b32 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b12 = mantrg & b11 = bxtrg) & (b10 =flr) & (2-2 > 0): target;
		next(dr) = r & (b12 = mantrg & b13 = bxtrg) & (b14 =flr) & (2+2 < n): target;
		next(dr) = d & (b12 = mantrg & b22 = bxtrg) & (b32 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b12 = mantrg & b11 = bxtrg) & (b10 = target) & (2-2 > 0): target;
		next(dr) = r & (b12 = mantrg & b13 = bxtrg) & (b14 = target) & (2+2 < n): target;
		next(dr) = d & (b12 = mantrg & b22 = bxtrg) & (b32 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b12 = flr & (b11 = man | b11 = mantrg)) : man;
        next(dr) = l & (b12 = flr & (b13 = man | b13 = mantrg)): man;
        next(dr) = d & (b12 = flr & (b02 = man | b02 = mantrg)): man;
        next(dr) = u & (b12 = flr & (b22 = man | b22 = mantrg)): man;

    --box to floor
        next(dr) = r & (b12 = flr & (b11 = bx | b11 = bxtrg)) & (b10 = man | b10 = mantrg): bx;
        next(dr) = l & (b12 = flr & (b13 = bx | b13 = bxtrg)) & (b14 = man | b14 = mantrg): bx;
        next(dr) = u & (b12 = flr & (b22 = bx | b22 = bxtrg)) & (b32 = man | b32 = mantrg): bx;

    --man to target
        next(dr) = r & (b12 = target & (b11 = man | b11 = mantrg)): mantrg;
        next(dr) = l & (b12 = target & (b13 = man | b13 = mantrg)): mantrg;
        next(dr) = d & (b12 = target & (b02 = man | b02 = mantrg)): mantrg;
        next(dr) = u & (b12 = target & (b22 = man | b22 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b12 = target & (b11 = bx | b11 = bxtrg)) & (b10 = man | b10 = mantrg): bxtrg;
        next(dr) = l & (b12 = target & (b13 = bx | b13 = bxtrg)) & (b14 = man | b14 = mantrg): bxtrg;
        next(dr) = u & (b12 = target & (b22 = bx | b22 = bxtrg)) & (b32 = man | b32 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b12 = bx & (b11 = man | b11 = mantrg)) & (b13 = flr | b13 = target): man;
        next(dr) = l & (b12 = bx & (b13 = man | b13 = mantrg)) & (b11 = flr | b11 = target): man;
        next(dr) = d & (b12 = bx & (b02 = man | b02 = mantrg)) & (b22 = flr | b22 = target): man;
        next(dr) = u & (b12 = bx & (b22 = man | b22 = mantrg)) & (b02 = flr | b02 = target): man;

    --man to box on target
        next(dr) = r & (b12 = bxtrg & (b11 = man | b11 = mantrg)) & (b13 = flr | b13 = target): mantrg;
        next(dr) = l & (b12 = bxtrg & (b13 = man | b13 = mantrg)) & (b11 = flr | b11 = target): mantrg;
        next(dr) = d & (b12 = bxtrg & (b02 = man | b02 = mantrg)) & (b22 = flr | b22 = target): mantrg;
        next(dr) = u & (b12 = bxtrg & (b22 = man | b22 = mantrg)) & (b02 = flr | b02 = target): mantrg;

    TRUE: b12;
esac;
next(b13) := case
	--floor to floor
		next(dr) = l & (b13 = man & b12 =flr):flr;
		next(dr) = r & (b13 = man & b14 =flr):flr;
		next(dr) = u & (b13 = man & b03 =flr):flr;
		next(dr) = d & (b13 = man & b23 =flr):flr;


	--target to floor
		next(dr) = l & (b13 = mantrg & b12 =flr): target;
		next(dr) = r & (b13 = mantrg & b14 =flr): target;
		next(dr) = u & (b13 = mantrg & b03 =flr): target;
		next(dr) = d & (b13 = mantrg & b23 =flr): target;

	--floor to target
		next(dr) = l & (b13 = man & b12 = target):flr;
		next(dr) = r & (b13 = man & b14 = target):flr;
		next(dr) = u & (b13 = man & b03 = target):flr;
		next(dr) = d & (b13 = man & b23 = target):flr;

	--target to target
		next(dr) = l & (b13 = mantrg & b12 = target): target;
		next(dr) = r & (b13 = mantrg & b14 = target): target;
		next(dr) = u & (b13 = mantrg & b03 = target): target;
		next(dr) = d & (b13 = mantrg & b23 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b13 = man & b12 = bx) & (b11 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b13 = man & b14 = bx) & (b15 =flr) & (3+2 < n):flr;
		next(dr) = d & (b13 = man & b23 = bx) & (b33 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b13 = man & b12 = bx) & (b11 = target) & (3-2 > 0):flr;
		next(dr) = r & (b13 = man & b14 = bx) & (b15 = target) & (3+2 < n):flr;
		next(dr) = d & (b13 = man & b23 = bx) & (b33 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b13 = man & b12 = bxtrg) & (b11 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b13 = man & b14 = bxtrg) & (b15 =flr) & (3+2 < n):flr;
		next(dr) = d & (b13 = man & b23 = bxtrg) & (b33 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b13 = man & b12 = bxtrg) & (b11 = target) & (3-2 > 0):flr;
		next(dr) = r & (b13 = man & b14 = bxtrg) & (b15 = target) & (3+2 < n):flr;
		next(dr) = d & (b13 = man & b23 = bxtrg) & (b33 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b13 = mantrg & b12 = bx) & (b11 =flr) & (3-2 > 0): target;
		next(dr) = r & (b13 = mantrg & b14 = bx) & (b15 =flr) & (3+2 < n): target;
		next(dr) = d & (b13 = mantrg & b23 = bx) & (b33 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b13 = mantrg & b12 = bx) & (b11 = target) & (3-2 > 0): target;
		next(dr) = r & (b13 = mantrg & b14 = bx) & (b15 = target) & (3+2 < n): target;
		next(dr) = d & (b13 = mantrg & b23 = bx) & (b33 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b13 = mantrg & b12 = bxtrg) & (b11 =flr) & (3-2 > 0): target;
		next(dr) = r & (b13 = mantrg & b14 = bxtrg) & (b15 =flr) & (3+2 < n): target;
		next(dr) = d & (b13 = mantrg & b23 = bxtrg) & (b33 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b13 = mantrg & b12 = bxtrg) & (b11 = target) & (3-2 > 0): target;
		next(dr) = r & (b13 = mantrg & b14 = bxtrg) & (b15 = target) & (3+2 < n): target;
		next(dr) = d & (b13 = mantrg & b23 = bxtrg) & (b33 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b13 = flr & (b12 = man | b12 = mantrg)) : man;
        next(dr) = l & (b13 = flr & (b14 = man | b14 = mantrg)): man;
        next(dr) = d & (b13 = flr & (b03 = man | b03 = mantrg)): man;
        next(dr) = u & (b13 = flr & (b23 = man | b23 = mantrg)): man;

    --box to floor
        next(dr) = r & (b13 = flr & (b12 = bx | b12 = bxtrg)) & (b11 = man | b11 = mantrg): bx;
        next(dr) = l & (b13 = flr & (b14 = bx | b14 = bxtrg)) & (b15 = man | b15 = mantrg): bx;
        next(dr) = u & (b13 = flr & (b23 = bx | b23 = bxtrg)) & (b33 = man | b33 = mantrg): bx;

    --man to target
        next(dr) = r & (b13 = target & (b12 = man | b12 = mantrg)): mantrg;
        next(dr) = l & (b13 = target & (b14 = man | b14 = mantrg)): mantrg;
        next(dr) = d & (b13 = target & (b03 = man | b03 = mantrg)): mantrg;
        next(dr) = u & (b13 = target & (b23 = man | b23 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b13 = target & (b12 = bx | b12 = bxtrg)) & (b11 = man | b11 = mantrg): bxtrg;
        next(dr) = l & (b13 = target & (b14 = bx | b14 = bxtrg)) & (b15 = man | b15 = mantrg): bxtrg;
        next(dr) = u & (b13 = target & (b23 = bx | b23 = bxtrg)) & (b33 = man | b33 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b13 = bx & (b12 = man | b12 = mantrg)) & (b14 = flr | b14 = target): man;
        next(dr) = l & (b13 = bx & (b14 = man | b14 = mantrg)) & (b12 = flr | b12 = target): man;
        next(dr) = d & (b13 = bx & (b03 = man | b03 = mantrg)) & (b23 = flr | b23 = target): man;
        next(dr) = u & (b13 = bx & (b23 = man | b23 = mantrg)) & (b03 = flr | b03 = target): man;

    --man to box on target
        next(dr) = r & (b13 = bxtrg & (b12 = man | b12 = mantrg)) & (b14 = flr | b14 = target): mantrg;
        next(dr) = l & (b13 = bxtrg & (b14 = man | b14 = mantrg)) & (b12 = flr | b12 = target): mantrg;
        next(dr) = d & (b13 = bxtrg & (b03 = man | b03 = mantrg)) & (b23 = flr | b23 = target): mantrg;
        next(dr) = u & (b13 = bxtrg & (b23 = man | b23 = mantrg)) & (b03 = flr | b03 = target): mantrg;

    TRUE: b13;
esac;
next(b14) := case
	--floor to floor
		next(dr) = l & (b14 = man & b13 =flr):flr;
		next(dr) = r & (b14 = man & b15 =flr):flr;
		next(dr) = u & (b14 = man & b04 =flr):flr;
		next(dr) = d & (b14 = man & b24 =flr):flr;


	--target to floor
		next(dr) = l & (b14 = mantrg & b13 =flr): target;
		next(dr) = r & (b14 = mantrg & b15 =flr): target;
		next(dr) = u & (b14 = mantrg & b04 =flr): target;
		next(dr) = d & (b14 = mantrg & b24 =flr): target;

	--floor to target
		next(dr) = l & (b14 = man & b13 = target):flr;
		next(dr) = r & (b14 = man & b15 = target):flr;
		next(dr) = u & (b14 = man & b04 = target):flr;
		next(dr) = d & (b14 = man & b24 = target):flr;

	--target to target
		next(dr) = l & (b14 = mantrg & b13 = target): target;
		next(dr) = r & (b14 = mantrg & b15 = target): target;
		next(dr) = u & (b14 = mantrg & b04 = target): target;
		next(dr) = d & (b14 = mantrg & b24 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b14 = man & b13 = bx) & (b12 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b14 = man & b15 = bx) & (b16 =flr) & (4+2 < n):flr;
		next(dr) = d & (b14 = man & b24 = bx) & (b34 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b14 = man & b13 = bx) & (b12 = target) & (4-2 > 0):flr;
		next(dr) = r & (b14 = man & b15 = bx) & (b16 = target) & (4+2 < n):flr;
		next(dr) = d & (b14 = man & b24 = bx) & (b34 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b14 = man & b13 = bxtrg) & (b12 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b14 = man & b15 = bxtrg) & (b16 =flr) & (4+2 < n):flr;
		next(dr) = d & (b14 = man & b24 = bxtrg) & (b34 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b14 = man & b13 = bxtrg) & (b12 = target) & (4-2 > 0):flr;
		next(dr) = r & (b14 = man & b15 = bxtrg) & (b16 = target) & (4+2 < n):flr;
		next(dr) = d & (b14 = man & b24 = bxtrg) & (b34 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b14 = mantrg & b13 = bx) & (b12 =flr) & (4-2 > 0): target;
		next(dr) = r & (b14 = mantrg & b15 = bx) & (b16 =flr) & (4+2 < n): target;
		next(dr) = d & (b14 = mantrg & b24 = bx) & (b34 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b14 = mantrg & b13 = bx) & (b12 = target) & (4-2 > 0): target;
		next(dr) = r & (b14 = mantrg & b15 = bx) & (b16 = target) & (4+2 < n): target;
		next(dr) = d & (b14 = mantrg & b24 = bx) & (b34 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b14 = mantrg & b13 = bxtrg) & (b12 =flr) & (4-2 > 0): target;
		next(dr) = r & (b14 = mantrg & b15 = bxtrg) & (b16 =flr) & (4+2 < n): target;
		next(dr) = d & (b14 = mantrg & b24 = bxtrg) & (b34 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b14 = mantrg & b13 = bxtrg) & (b12 = target) & (4-2 > 0): target;
		next(dr) = r & (b14 = mantrg & b15 = bxtrg) & (b16 = target) & (4+2 < n): target;
		next(dr) = d & (b14 = mantrg & b24 = bxtrg) & (b34 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b14 = flr & (b13 = man | b13 = mantrg)) : man;
        next(dr) = l & (b14 = flr & (b15 = man | b15 = mantrg)): man;
        next(dr) = d & (b14 = flr & (b04 = man | b04 = mantrg)): man;
        next(dr) = u & (b14 = flr & (b24 = man | b24 = mantrg)): man;

    --box to floor
        next(dr) = r & (b14 = flr & (b13 = bx | b13 = bxtrg)) & (b12 = man | b12 = mantrg): bx;
        next(dr) = l & (b14 = flr & (b15 = bx | b15 = bxtrg)) & (b16 = man | b16 = mantrg): bx;
        next(dr) = u & (b14 = flr & (b24 = bx | b24 = bxtrg)) & (b34 = man | b34 = mantrg): bx;

    --man to target
        next(dr) = r & (b14 = target & (b13 = man | b13 = mantrg)): mantrg;
        next(dr) = l & (b14 = target & (b15 = man | b15 = mantrg)): mantrg;
        next(dr) = d & (b14 = target & (b04 = man | b04 = mantrg)): mantrg;
        next(dr) = u & (b14 = target & (b24 = man | b24 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b14 = target & (b13 = bx | b13 = bxtrg)) & (b12 = man | b12 = mantrg): bxtrg;
        next(dr) = l & (b14 = target & (b15 = bx | b15 = bxtrg)) & (b16 = man | b16 = mantrg): bxtrg;
        next(dr) = u & (b14 = target & (b24 = bx | b24 = bxtrg)) & (b34 = man | b34 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b14 = bx & (b13 = man | b13 = mantrg)) & (b15 = flr | b15 = target): man;
        next(dr) = l & (b14 = bx & (b15 = man | b15 = mantrg)) & (b13 = flr | b13 = target): man;
        next(dr) = d & (b14 = bx & (b04 = man | b04 = mantrg)) & (b24 = flr | b24 = target): man;
        next(dr) = u & (b14 = bx & (b24 = man | b24 = mantrg)) & (b04 = flr | b04 = target): man;

    --man to box on target
        next(dr) = r & (b14 = bxtrg & (b13 = man | b13 = mantrg)) & (b15 = flr | b15 = target): mantrg;
        next(dr) = l & (b14 = bxtrg & (b15 = man | b15 = mantrg)) & (b13 = flr | b13 = target): mantrg;
        next(dr) = d & (b14 = bxtrg & (b04 = man | b04 = mantrg)) & (b24 = flr | b24 = target): mantrg;
        next(dr) = u & (b14 = bxtrg & (b24 = man | b24 = mantrg)) & (b04 = flr | b04 = target): mantrg;

    TRUE: b14;
esac;
next(b15) := case
	--floor to floor
		next(dr) = l & (b15 = man & b14 =flr):flr;
		next(dr) = r & (b15 = man & b16 =flr):flr;
		next(dr) = u & (b15 = man & b05 =flr):flr;
		next(dr) = d & (b15 = man & b25 =flr):flr;


	--target to floor
		next(dr) = l & (b15 = mantrg & b14 =flr): target;
		next(dr) = r & (b15 = mantrg & b16 =flr): target;
		next(dr) = u & (b15 = mantrg & b05 =flr): target;
		next(dr) = d & (b15 = mantrg & b25 =flr): target;

	--floor to target
		next(dr) = l & (b15 = man & b14 = target):flr;
		next(dr) = r & (b15 = man & b16 = target):flr;
		next(dr) = u & (b15 = man & b05 = target):flr;
		next(dr) = d & (b15 = man & b25 = target):flr;

	--target to target
		next(dr) = l & (b15 = mantrg & b14 = target): target;
		next(dr) = r & (b15 = mantrg & b16 = target): target;
		next(dr) = u & (b15 = mantrg & b05 = target): target;
		next(dr) = d & (b15 = mantrg & b25 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b15 = man & b14 = bx) & (b13 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b15 = man & b16 = bx) & (b17 =flr) & (5+2 < n):flr;
		next(dr) = d & (b15 = man & b25 = bx) & (b35 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b15 = man & b14 = bx) & (b13 = target) & (5-2 > 0):flr;
		next(dr) = r & (b15 = man & b16 = bx) & (b17 = target) & (5+2 < n):flr;
		next(dr) = d & (b15 = man & b25 = bx) & (b35 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b15 = man & b14 = bxtrg) & (b13 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b15 = man & b16 = bxtrg) & (b17 =flr) & (5+2 < n):flr;
		next(dr) = d & (b15 = man & b25 = bxtrg) & (b35 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b15 = man & b14 = bxtrg) & (b13 = target) & (5-2 > 0):flr;
		next(dr) = r & (b15 = man & b16 = bxtrg) & (b17 = target) & (5+2 < n):flr;
		next(dr) = d & (b15 = man & b25 = bxtrg) & (b35 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b15 = mantrg & b14 = bx) & (b13 =flr) & (5-2 > 0): target;
		next(dr) = r & (b15 = mantrg & b16 = bx) & (b17 =flr) & (5+2 < n): target;
		next(dr) = d & (b15 = mantrg & b25 = bx) & (b35 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b15 = mantrg & b14 = bx) & (b13 = target) & (5-2 > 0): target;
		next(dr) = r & (b15 = mantrg & b16 = bx) & (b17 = target) & (5+2 < n): target;
		next(dr) = d & (b15 = mantrg & b25 = bx) & (b35 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b15 = mantrg & b14 = bxtrg) & (b13 =flr) & (5-2 > 0): target;
		next(dr) = r & (b15 = mantrg & b16 = bxtrg) & (b17 =flr) & (5+2 < n): target;
		next(dr) = d & (b15 = mantrg & b25 = bxtrg) & (b35 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b15 = mantrg & b14 = bxtrg) & (b13 = target) & (5-2 > 0): target;
		next(dr) = r & (b15 = mantrg & b16 = bxtrg) & (b17 = target) & (5+2 < n): target;
		next(dr) = d & (b15 = mantrg & b25 = bxtrg) & (b35 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b15 = flr & (b14 = man | b14 = mantrg)) : man;
        next(dr) = l & (b15 = flr & (b16 = man | b16 = mantrg)): man;
        next(dr) = d & (b15 = flr & (b05 = man | b05 = mantrg)): man;
        next(dr) = u & (b15 = flr & (b25 = man | b25 = mantrg)): man;

    --box to floor
        next(dr) = r & (b15 = flr & (b14 = bx | b14 = bxtrg)) & (b13 = man | b13 = mantrg): bx;
        next(dr) = l & (b15 = flr & (b16 = bx | b16 = bxtrg)) & (b17 = man | b17 = mantrg): bx;
        next(dr) = u & (b15 = flr & (b25 = bx | b25 = bxtrg)) & (b35 = man | b35 = mantrg): bx;

    --man to target
        next(dr) = r & (b15 = target & (b14 = man | b14 = mantrg)): mantrg;
        next(dr) = l & (b15 = target & (b16 = man | b16 = mantrg)): mantrg;
        next(dr) = d & (b15 = target & (b05 = man | b05 = mantrg)): mantrg;
        next(dr) = u & (b15 = target & (b25 = man | b25 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b15 = target & (b14 = bx | b14 = bxtrg)) & (b13 = man | b13 = mantrg): bxtrg;
        next(dr) = l & (b15 = target & (b16 = bx | b16 = bxtrg)) & (b17 = man | b17 = mantrg): bxtrg;
        next(dr) = u & (b15 = target & (b25 = bx | b25 = bxtrg)) & (b35 = man | b35 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b15 = bx & (b14 = man | b14 = mantrg)) & (b16 = flr | b16 = target): man;
        next(dr) = l & (b15 = bx & (b16 = man | b16 = mantrg)) & (b14 = flr | b14 = target): man;
        next(dr) = d & (b15 = bx & (b05 = man | b05 = mantrg)) & (b25 = flr | b25 = target): man;
        next(dr) = u & (b15 = bx & (b25 = man | b25 = mantrg)) & (b05 = flr | b05 = target): man;

    --man to box on target
        next(dr) = r & (b15 = bxtrg & (b14 = man | b14 = mantrg)) & (b16 = flr | b16 = target): mantrg;
        next(dr) = l & (b15 = bxtrg & (b16 = man | b16 = mantrg)) & (b14 = flr | b14 = target): mantrg;
        next(dr) = d & (b15 = bxtrg & (b05 = man | b05 = mantrg)) & (b25 = flr | b25 = target): mantrg;
        next(dr) = u & (b15 = bxtrg & (b25 = man | b25 = mantrg)) & (b05 = flr | b05 = target): mantrg;

    TRUE: b15;
esac;
next(b16) := case
	--floor to floor
		next(dr) = l & (b16 = man & b15 =flr):flr;
		next(dr) = r & (b16 = man & b17 =flr):flr;
		next(dr) = u & (b16 = man & b06 =flr):flr;
		next(dr) = d & (b16 = man & b26 =flr):flr;


	--target to floor
		next(dr) = l & (b16 = mantrg & b15 =flr): target;
		next(dr) = r & (b16 = mantrg & b17 =flr): target;
		next(dr) = u & (b16 = mantrg & b06 =flr): target;
		next(dr) = d & (b16 = mantrg & b26 =flr): target;

	--floor to target
		next(dr) = l & (b16 = man & b15 = target):flr;
		next(dr) = r & (b16 = man & b17 = target):flr;
		next(dr) = u & (b16 = man & b06 = target):flr;
		next(dr) = d & (b16 = man & b26 = target):flr;

	--target to target
		next(dr) = l & (b16 = mantrg & b15 = target): target;
		next(dr) = r & (b16 = mantrg & b17 = target): target;
		next(dr) = u & (b16 = mantrg & b06 = target): target;
		next(dr) = d & (b16 = mantrg & b26 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b16 = man & b15 = bx) & (b14 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b16 = man & b17 = bx) & (b18 =flr) & (6+2 < n):flr;
		next(dr) = d & (b16 = man & b26 = bx) & (b36 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b16 = man & b15 = bx) & (b14 = target) & (6-2 > 0):flr;
		next(dr) = r & (b16 = man & b17 = bx) & (b18 = target) & (6+2 < n):flr;
		next(dr) = d & (b16 = man & b26 = bx) & (b36 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b16 = man & b15 = bxtrg) & (b14 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b16 = man & b17 = bxtrg) & (b18 =flr) & (6+2 < n):flr;
		next(dr) = d & (b16 = man & b26 = bxtrg) & (b36 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b16 = man & b15 = bxtrg) & (b14 = target) & (6-2 > 0):flr;
		next(dr) = r & (b16 = man & b17 = bxtrg) & (b18 = target) & (6+2 < n):flr;
		next(dr) = d & (b16 = man & b26 = bxtrg) & (b36 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b16 = mantrg & b15 = bx) & (b14 =flr) & (6-2 > 0): target;
		next(dr) = r & (b16 = mantrg & b17 = bx) & (b18 =flr) & (6+2 < n): target;
		next(dr) = d & (b16 = mantrg & b26 = bx) & (b36 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b16 = mantrg & b15 = bx) & (b14 = target) & (6-2 > 0): target;
		next(dr) = r & (b16 = mantrg & b17 = bx) & (b18 = target) & (6+2 < n): target;
		next(dr) = d & (b16 = mantrg & b26 = bx) & (b36 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b16 = mantrg & b15 = bxtrg) & (b14 =flr) & (6-2 > 0): target;
		next(dr) = r & (b16 = mantrg & b17 = bxtrg) & (b18 =flr) & (6+2 < n): target;
		next(dr) = d & (b16 = mantrg & b26 = bxtrg) & (b36 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b16 = mantrg & b15 = bxtrg) & (b14 = target) & (6-2 > 0): target;
		next(dr) = r & (b16 = mantrg & b17 = bxtrg) & (b18 = target) & (6+2 < n): target;
		next(dr) = d & (b16 = mantrg & b26 = bxtrg) & (b36 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b16 = flr & (b15 = man | b15 = mantrg)) : man;
        next(dr) = l & (b16 = flr & (b17 = man | b17 = mantrg)): man;
        next(dr) = d & (b16 = flr & (b06 = man | b06 = mantrg)): man;
        next(dr) = u & (b16 = flr & (b26 = man | b26 = mantrg)): man;

    --box to floor
        next(dr) = r & (b16 = flr & (b15 = bx | b15 = bxtrg)) & (b14 = man | b14 = mantrg): bx;
        next(dr) = l & (b16 = flr & (b17 = bx | b17 = bxtrg)) & (b18 = man | b18 = mantrg): bx;
        next(dr) = u & (b16 = flr & (b26 = bx | b26 = bxtrg)) & (b36 = man | b36 = mantrg): bx;

    --man to target
        next(dr) = r & (b16 = target & (b15 = man | b15 = mantrg)): mantrg;
        next(dr) = l & (b16 = target & (b17 = man | b17 = mantrg)): mantrg;
        next(dr) = d & (b16 = target & (b06 = man | b06 = mantrg)): mantrg;
        next(dr) = u & (b16 = target & (b26 = man | b26 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b16 = target & (b15 = bx | b15 = bxtrg)) & (b14 = man | b14 = mantrg): bxtrg;
        next(dr) = l & (b16 = target & (b17 = bx | b17 = bxtrg)) & (b18 = man | b18 = mantrg): bxtrg;
        next(dr) = u & (b16 = target & (b26 = bx | b26 = bxtrg)) & (b36 = man | b36 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b16 = bx & (b15 = man | b15 = mantrg)) & (b17 = flr | b17 = target): man;
        next(dr) = l & (b16 = bx & (b17 = man | b17 = mantrg)) & (b15 = flr | b15 = target): man;
        next(dr) = d & (b16 = bx & (b06 = man | b06 = mantrg)) & (b26 = flr | b26 = target): man;
        next(dr) = u & (b16 = bx & (b26 = man | b26 = mantrg)) & (b06 = flr | b06 = target): man;

    --man to box on target
        next(dr) = r & (b16 = bxtrg & (b15 = man | b15 = mantrg)) & (b17 = flr | b17 = target): mantrg;
        next(dr) = l & (b16 = bxtrg & (b17 = man | b17 = mantrg)) & (b15 = flr | b15 = target): mantrg;
        next(dr) = d & (b16 = bxtrg & (b06 = man | b06 = mantrg)) & (b26 = flr | b26 = target): mantrg;
        next(dr) = u & (b16 = bxtrg & (b26 = man | b26 = mantrg)) & (b06 = flr | b06 = target): mantrg;

    TRUE: b16;
esac;
next(b17) := case
	--floor to floor
		next(dr) = l & (b17 = man & b16 =flr):flr;
		next(dr) = r & (b17 = man & b18 =flr):flr;
		next(dr) = u & (b17 = man & b07 =flr):flr;
		next(dr) = d & (b17 = man & b27 =flr):flr;


	--target to floor
		next(dr) = l & (b17 = mantrg & b16 =flr): target;
		next(dr) = r & (b17 = mantrg & b18 =flr): target;
		next(dr) = u & (b17 = mantrg & b07 =flr): target;
		next(dr) = d & (b17 = mantrg & b27 =flr): target;

	--floor to target
		next(dr) = l & (b17 = man & b16 = target):flr;
		next(dr) = r & (b17 = man & b18 = target):flr;
		next(dr) = u & (b17 = man & b07 = target):flr;
		next(dr) = d & (b17 = man & b27 = target):flr;

	--target to target
		next(dr) = l & (b17 = mantrg & b16 = target): target;
		next(dr) = r & (b17 = mantrg & b18 = target): target;
		next(dr) = u & (b17 = mantrg & b07 = target): target;
		next(dr) = d & (b17 = mantrg & b27 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b17 = man & b16 = bx) & (b15 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b17 = man & b18 = bx) & (b19 =flr) & (7+2 < n):flr;
		next(dr) = d & (b17 = man & b27 = bx) & (b37 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b17 = man & b16 = bx) & (b15 = target) & (7-2 > 0):flr;
		next(dr) = r & (b17 = man & b18 = bx) & (b19 = target) & (7+2 < n):flr;
		next(dr) = d & (b17 = man & b27 = bx) & (b37 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b17 = man & b16 = bxtrg) & (b15 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b17 = man & b18 = bxtrg) & (b19 =flr) & (7+2 < n):flr;
		next(dr) = d & (b17 = man & b27 = bxtrg) & (b37 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b17 = man & b16 = bxtrg) & (b15 = target) & (7-2 > 0):flr;
		next(dr) = r & (b17 = man & b18 = bxtrg) & (b19 = target) & (7+2 < n):flr;
		next(dr) = d & (b17 = man & b27 = bxtrg) & (b37 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b17 = mantrg & b16 = bx) & (b15 =flr) & (7-2 > 0): target;
		next(dr) = r & (b17 = mantrg & b18 = bx) & (b19 =flr) & (7+2 < n): target;
		next(dr) = d & (b17 = mantrg & b27 = bx) & (b37 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b17 = mantrg & b16 = bx) & (b15 = target) & (7-2 > 0): target;
		next(dr) = r & (b17 = mantrg & b18 = bx) & (b19 = target) & (7+2 < n): target;
		next(dr) = d & (b17 = mantrg & b27 = bx) & (b37 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b17 = mantrg & b16 = bxtrg) & (b15 =flr) & (7-2 > 0): target;
		next(dr) = r & (b17 = mantrg & b18 = bxtrg) & (b19 =flr) & (7+2 < n): target;
		next(dr) = d & (b17 = mantrg & b27 = bxtrg) & (b37 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b17 = mantrg & b16 = bxtrg) & (b15 = target) & (7-2 > 0): target;
		next(dr) = r & (b17 = mantrg & b18 = bxtrg) & (b19 = target) & (7+2 < n): target;
		next(dr) = d & (b17 = mantrg & b27 = bxtrg) & (b37 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b17 = flr & (b16 = man | b16 = mantrg)) : man;
        next(dr) = l & (b17 = flr & (b18 = man | b18 = mantrg)): man;
        next(dr) = d & (b17 = flr & (b07 = man | b07 = mantrg)): man;
        next(dr) = u & (b17 = flr & (b27 = man | b27 = mantrg)): man;

    --box to floor
        next(dr) = r & (b17 = flr & (b16 = bx | b16 = bxtrg)) & (b15 = man | b15 = mantrg): bx;
        next(dr) = l & (b17 = flr & (b18 = bx | b18 = bxtrg)) & (b19 = man | b19 = mantrg): bx;
        next(dr) = u & (b17 = flr & (b27 = bx | b27 = bxtrg)) & (b37 = man | b37 = mantrg): bx;

    --man to target
        next(dr) = r & (b17 = target & (b16 = man | b16 = mantrg)): mantrg;
        next(dr) = l & (b17 = target & (b18 = man | b18 = mantrg)): mantrg;
        next(dr) = d & (b17 = target & (b07 = man | b07 = mantrg)): mantrg;
        next(dr) = u & (b17 = target & (b27 = man | b27 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b17 = target & (b16 = bx | b16 = bxtrg)) & (b15 = man | b15 = mantrg): bxtrg;
        next(dr) = l & (b17 = target & (b18 = bx | b18 = bxtrg)) & (b19 = man | b19 = mantrg): bxtrg;
        next(dr) = u & (b17 = target & (b27 = bx | b27 = bxtrg)) & (b37 = man | b37 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b17 = bx & (b16 = man | b16 = mantrg)) & (b18 = flr | b18 = target): man;
        next(dr) = l & (b17 = bx & (b18 = man | b18 = mantrg)) & (b16 = flr | b16 = target): man;
        next(dr) = d & (b17 = bx & (b07 = man | b07 = mantrg)) & (b27 = flr | b27 = target): man;
        next(dr) = u & (b17 = bx & (b27 = man | b27 = mantrg)) & (b07 = flr | b07 = target): man;

    --man to box on target
        next(dr) = r & (b17 = bxtrg & (b16 = man | b16 = mantrg)) & (b18 = flr | b18 = target): mantrg;
        next(dr) = l & (b17 = bxtrg & (b18 = man | b18 = mantrg)) & (b16 = flr | b16 = target): mantrg;
        next(dr) = d & (b17 = bxtrg & (b07 = man | b07 = mantrg)) & (b27 = flr | b27 = target): mantrg;
        next(dr) = u & (b17 = bxtrg & (b27 = man | b27 = mantrg)) & (b07 = flr | b07 = target): mantrg;

    TRUE: b17;
esac;
next(b18) := case
	--floor to floor
		next(dr) = l & (b18 = man & b17 =flr):flr;
		next(dr) = r & (b18 = man & b19 =flr):flr;
		next(dr) = u & (b18 = man & b08 =flr):flr;
		next(dr) = d & (b18 = man & b28 =flr):flr;


	--target to floor
		next(dr) = l & (b18 = mantrg & b17 =flr): target;
		next(dr) = r & (b18 = mantrg & b19 =flr): target;
		next(dr) = u & (b18 = mantrg & b08 =flr): target;
		next(dr) = d & (b18 = mantrg & b28 =flr): target;

	--floor to target
		next(dr) = l & (b18 = man & b17 = target):flr;
		next(dr) = r & (b18 = man & b19 = target):flr;
		next(dr) = u & (b18 = man & b08 = target):flr;
		next(dr) = d & (b18 = man & b28 = target):flr;

	--target to target
		next(dr) = l & (b18 = mantrg & b17 = target): target;
		next(dr) = r & (b18 = mantrg & b19 = target): target;
		next(dr) = u & (b18 = mantrg & b08 = target): target;
		next(dr) = d & (b18 = mantrg & b28 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b18 = man & b17 = bx) & (b16 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b18 = man & b19 = bx) & (b110 =flr) & (8+2 < n):flr;
		next(dr) = d & (b18 = man & b28 = bx) & (b38 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b18 = man & b17 = bx) & (b16 = target) & (8-2 > 0):flr;
		next(dr) = r & (b18 = man & b19 = bx) & (b110 = target) & (8+2 < n):flr;
		next(dr) = d & (b18 = man & b28 = bx) & (b38 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b18 = man & b17 = bxtrg) & (b16 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b18 = man & b19 = bxtrg) & (b110 =flr) & (8+2 < n):flr;
		next(dr) = d & (b18 = man & b28 = bxtrg) & (b38 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b18 = man & b17 = bxtrg) & (b16 = target) & (8-2 > 0):flr;
		next(dr) = r & (b18 = man & b19 = bxtrg) & (b110 = target) & (8+2 < n):flr;
		next(dr) = d & (b18 = man & b28 = bxtrg) & (b38 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b18 = mantrg & b17 = bx) & (b16 =flr) & (8-2 > 0): target;
		next(dr) = r & (b18 = mantrg & b19 = bx) & (b110 =flr) & (8+2 < n): target;
		next(dr) = d & (b18 = mantrg & b28 = bx) & (b38 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b18 = mantrg & b17 = bx) & (b16 = target) & (8-2 > 0): target;
		next(dr) = r & (b18 = mantrg & b19 = bx) & (b110 = target) & (8+2 < n): target;
		next(dr) = d & (b18 = mantrg & b28 = bx) & (b38 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b18 = mantrg & b17 = bxtrg) & (b16 =flr) & (8-2 > 0): target;
		next(dr) = r & (b18 = mantrg & b19 = bxtrg) & (b110 =flr) & (8+2 < n): target;
		next(dr) = d & (b18 = mantrg & b28 = bxtrg) & (b38 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b18 = mantrg & b17 = bxtrg) & (b16 = target) & (8-2 > 0): target;
		next(dr) = r & (b18 = mantrg & b19 = bxtrg) & (b110 = target) & (8+2 < n): target;
		next(dr) = d & (b18 = mantrg & b28 = bxtrg) & (b38 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b18 = flr & (b17 = man | b17 = mantrg)) : man;
        next(dr) = l & (b18 = flr & (b19 = man | b19 = mantrg)): man;
        next(dr) = d & (b18 = flr & (b08 = man | b08 = mantrg)): man;
        next(dr) = u & (b18 = flr & (b28 = man | b28 = mantrg)): man;

    --box to floor
        next(dr) = r & (b18 = flr & (b17 = bx | b17 = bxtrg)) & (b16 = man | b16 = mantrg): bx;
        next(dr) = l & (b18 = flr & (b19 = bx | b19 = bxtrg)) & (b110 = man | b110 = mantrg): bx;
        next(dr) = u & (b18 = flr & (b28 = bx | b28 = bxtrg)) & (b38 = man | b38 = mantrg): bx;

    --man to target
        next(dr) = r & (b18 = target & (b17 = man | b17 = mantrg)): mantrg;
        next(dr) = l & (b18 = target & (b19 = man | b19 = mantrg)): mantrg;
        next(dr) = d & (b18 = target & (b08 = man | b08 = mantrg)): mantrg;
        next(dr) = u & (b18 = target & (b28 = man | b28 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b18 = target & (b17 = bx | b17 = bxtrg)) & (b16 = man | b16 = mantrg): bxtrg;
        next(dr) = l & (b18 = target & (b19 = bx | b19 = bxtrg)) & (b110 = man | b110 = mantrg): bxtrg;
        next(dr) = u & (b18 = target & (b28 = bx | b28 = bxtrg)) & (b38 = man | b38 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b18 = bx & (b17 = man | b17 = mantrg)) & (b19 = flr | b19 = target): man;
        next(dr) = l & (b18 = bx & (b19 = man | b19 = mantrg)) & (b17 = flr | b17 = target): man;
        next(dr) = d & (b18 = bx & (b08 = man | b08 = mantrg)) & (b28 = flr | b28 = target): man;
        next(dr) = u & (b18 = bx & (b28 = man | b28 = mantrg)) & (b08 = flr | b08 = target): man;

    --man to box on target
        next(dr) = r & (b18 = bxtrg & (b17 = man | b17 = mantrg)) & (b19 = flr | b19 = target): mantrg;
        next(dr) = l & (b18 = bxtrg & (b19 = man | b19 = mantrg)) & (b17 = flr | b17 = target): mantrg;
        next(dr) = d & (b18 = bxtrg & (b08 = man | b08 = mantrg)) & (b28 = flr | b28 = target): mantrg;
        next(dr) = u & (b18 = bxtrg & (b28 = man | b28 = mantrg)) & (b08 = flr | b08 = target): mantrg;

    TRUE: b18;
esac;
next(b19) := case
	--floor to floor
		next(dr) = l & (b19 = man & b18 =flr):flr;
		next(dr) = r & (b19 = man & b110 =flr):flr;
		next(dr) = u & (b19 = man & b09 =flr):flr;
		next(dr) = d & (b19 = man & b29 =flr):flr;


	--target to floor
		next(dr) = l & (b19 = mantrg & b18 =flr): target;
		next(dr) = r & (b19 = mantrg & b110 =flr): target;
		next(dr) = u & (b19 = mantrg & b09 =flr): target;
		next(dr) = d & (b19 = mantrg & b29 =flr): target;

	--floor to target
		next(dr) = l & (b19 = man & b18 = target):flr;
		next(dr) = r & (b19 = man & b110 = target):flr;
		next(dr) = u & (b19 = man & b09 = target):flr;
		next(dr) = d & (b19 = man & b29 = target):flr;

	--target to target
		next(dr) = l & (b19 = mantrg & b18 = target): target;
		next(dr) = r & (b19 = mantrg & b110 = target): target;
		next(dr) = u & (b19 = mantrg & b09 = target): target;
		next(dr) = d & (b19 = mantrg & b29 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b19 = man & b18 = bx) & (b17 =flr) & (9-2 > 0):flr;
		next(dr) = d & (b19 = man & b29 = bx) & (b39 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b19 = man & b18 = bx) & (b17 = target) & (9-2 > 0):flr;
		next(dr) = d & (b19 = man & b29 = bx) & (b39 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b19 = man & b18 = bxtrg) & (b17 =flr) & (9-2 > 0):flr;
		next(dr) = d & (b19 = man & b29 = bxtrg) & (b39 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b19 = man & b18 = bxtrg) & (b17 = target) & (9-2 > 0):flr;
		next(dr) = d & (b19 = man & b29 = bxtrg) & (b39 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b19 = mantrg & b18 = bx) & (b17 =flr) & (9-2 > 0): target;
		next(dr) = d & (b19 = mantrg & b29 = bx) & (b39 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b19 = mantrg & b18 = bx) & (b17 = target) & (9-2 > 0): target;
		next(dr) = d & (b19 = mantrg & b29 = bx) & (b39 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b19 = mantrg & b18 = bxtrg) & (b17 =flr) & (9-2 > 0): target;
		next(dr) = d & (b19 = mantrg & b29 = bxtrg) & (b39 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b19 = mantrg & b18 = bxtrg) & (b17 = target) & (9-2 > 0): target;
		next(dr) = d & (b19 = mantrg & b29 = bxtrg) & (b39 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b19 = flr & (b18 = man | b18 = mantrg)) : man;
        next(dr) = l & (b19 = flr & (b110 = man | b110 = mantrg)): man;
        next(dr) = d & (b19 = flr & (b09 = man | b09 = mantrg)): man;
        next(dr) = u & (b19 = flr & (b29 = man | b29 = mantrg)): man;

    --box to floor
        next(dr) = r & (b19 = flr & (b18 = bx | b18 = bxtrg)) & (b17 = man | b17 = mantrg): bx;
        next(dr) = u & (b19 = flr & (b29 = bx | b29 = bxtrg)) & (b39 = man | b39 = mantrg): bx;

    --man to target
        next(dr) = r & (b19 = target & (b18 = man | b18 = mantrg)): mantrg;
        next(dr) = l & (b19 = target & (b110 = man | b110 = mantrg)): mantrg;
        next(dr) = d & (b19 = target & (b09 = man | b09 = mantrg)): mantrg;
        next(dr) = u & (b19 = target & (b29 = man | b29 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b19 = target & (b18 = bx | b18 = bxtrg)) & (b17 = man | b17 = mantrg): bxtrg;
        next(dr) = u & (b19 = target & (b29 = bx | b29 = bxtrg)) & (b39 = man | b39 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b19 = bx & (b18 = man | b18 = mantrg)) & (b110 = flr | b110 = target): man;
        next(dr) = l & (b19 = bx & (b110 = man | b110 = mantrg)) & (b18 = flr | b18 = target): man;
        next(dr) = d & (b19 = bx & (b09 = man | b09 = mantrg)) & (b29 = flr | b29 = target): man;
        next(dr) = u & (b19 = bx & (b29 = man | b29 = mantrg)) & (b09 = flr | b09 = target): man;

    --man to box on target
        next(dr) = r & (b19 = bxtrg & (b18 = man | b18 = mantrg)) & (b110 = flr | b110 = target): mantrg;
        next(dr) = l & (b19 = bxtrg & (b110 = man | b110 = mantrg)) & (b18 = flr | b18 = target): mantrg;
        next(dr) = d & (b19 = bxtrg & (b09 = man | b09 = mantrg)) & (b29 = flr | b29 = target): mantrg;
        next(dr) = u & (b19 = bxtrg & (b29 = man | b29 = mantrg)) & (b09 = flr | b09 = target): mantrg;

    TRUE: b19;
esac;
next(b110) := case
	--floor to floor
		next(dr) = l & (b110 = man & b19 =flr):flr;
		next(dr) = u & (b110 = man & b010 =flr):flr;
		next(dr) = d & (b110 = man & b210 =flr):flr;


	--target to floor
		next(dr) = l & (b110 = mantrg & b19 =flr): target;
		next(dr) = u & (b110 = mantrg & b010 =flr): target;
		next(dr) = d & (b110 = mantrg & b210 =flr): target;

	--floor to target
		next(dr) = l & (b110 = man & b19 = target):flr;
		next(dr) = u & (b110 = man & b010 = target):flr;
		next(dr) = d & (b110 = man & b210 = target):flr;

	--target to target
		next(dr) = l & (b110 = mantrg & b19 = target): target;
		next(dr) = u & (b110 = mantrg & b010 = target): target;
		next(dr) = d & (b110 = mantrg & b210 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b110 = man & b19 = bx) & (b18 =flr) & (10-2 > 0):flr;
		next(dr) = d & (b110 = man & b210 = bx) & (b310 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b110 = man & b19 = bx) & (b18 = target) & (10-2 > 0):flr;
		next(dr) = d & (b110 = man & b210 = bx) & (b310 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b110 = man & b19 = bxtrg) & (b18 =flr) & (10-2 > 0):flr;
		next(dr) = d & (b110 = man & b210 = bxtrg) & (b310 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b110 = man & b19 = bxtrg) & (b18 = target) & (10-2 > 0):flr;
		next(dr) = d & (b110 = man & b210 = bxtrg) & (b310 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b110 = mantrg & b19 = bx) & (b18 =flr) & (10-2 > 0): target;
		next(dr) = d & (b110 = mantrg & b210 = bx) & (b310 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b110 = mantrg & b19 = bx) & (b18 = target) & (10-2 > 0): target;
		next(dr) = d & (b110 = mantrg & b210 = bx) & (b310 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b110 = mantrg & b19 = bxtrg) & (b18 =flr) & (10-2 > 0): target;
		next(dr) = d & (b110 = mantrg & b210 = bxtrg) & (b310 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b110 = mantrg & b19 = bxtrg) & (b18 = target) & (10-2 > 0): target;
		next(dr) = d & (b110 = mantrg & b210 = bxtrg) & (b310 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b110 = flr & (b19 = man | b19 = mantrg)) : man;
        next(dr) = d & (b110 = flr & (b010 = man | b010 = mantrg)): man;
        next(dr) = u & (b110 = flr & (b210 = man | b210 = mantrg)): man;

    --box to floor
        next(dr) = r & (b110 = flr & (b19 = bx | b19 = bxtrg)) & (b18 = man | b18 = mantrg): bx;
        next(dr) = u & (b110 = flr & (b210 = bx | b210 = bxtrg)) & (b310 = man | b310 = mantrg): bx;

    --man to target
        next(dr) = r & (b110 = target & (b19 = man | b19 = mantrg)): mantrg;
        next(dr) = d & (b110 = target & (b010 = man | b010 = mantrg)): mantrg;
        next(dr) = u & (b110 = target & (b210 = man | b210 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b110 = target & (b19 = bx | b19 = bxtrg)) & (b18 = man | b18 = mantrg): bxtrg;
        next(dr) = u & (b110 = target & (b210 = bx | b210 = bxtrg)) & (b310 = man | b310 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b110 = bx & (b010 = man | b010 = mantrg)) & (b210 = flr | b210 = target): man;
        next(dr) = u & (b110 = bx & (b210 = man | b210 = mantrg)) & (b010 = flr | b010 = target): man;

    --man to box on target
        next(dr) = d & (b110 = bxtrg & (b010 = man | b010 = mantrg)) & (b210 = flr | b210 = target): mantrg;
        next(dr) = u & (b110 = bxtrg & (b210 = man | b210 = mantrg)) & (b010 = flr | b010 = target): mantrg;

    TRUE: b110;
esac;
next(b20) := case
	--floor to floor
		next(dr) = r & (b20 = man & b21 =flr):flr;
		next(dr) = u & (b20 = man & b10 =flr):flr;
		next(dr) = d & (b20 = man & b30 =flr):flr;


	--target to floor
		next(dr) = r & (b20 = mantrg & b21 =flr): target;
		next(dr) = u & (b20 = mantrg & b10 =flr): target;
		next(dr) = d & (b20 = mantrg & b30 =flr): target;

	--floor to target
		next(dr) = r & (b20 = man & b21 = target):flr;
		next(dr) = u & (b20 = man & b10 = target):flr;
		next(dr) = d & (b20 = man & b30 = target):flr;

	--target to target
		next(dr) = r & (b20 = mantrg & b21 = target): target;
		next(dr) = u & (b20 = mantrg & b10 = target): target;
		next(dr) = d & (b20 = mantrg & b30 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b20 = man & b21 = bx) & (b22 =flr) & (0+2 < n):flr;
		next(dr) = u & (b20 = man & b10 = bx) & (b00 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b20 = man & b30 = bx) & (b40 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b20 = man & b21 = bx) & (b22 = target) & (0+2 < n):flr;
		next(dr) = u & (b20 = man & b10 = bx) & (b00 = target) & (2-2 > 0):flr;
		next(dr) = d & (b20 = man & b30 = bx) & (b40 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b20 = man & b21 = bxtrg) & (b22 =flr) & (0+2 < n):flr;
		next(dr) = u & (b20 = man & b10 = bxtrg) & (b00 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b20 = man & b30 = bxtrg) & (b40 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b20 = man & b21 = bxtrg) & (b22 = target) & (0+2 < n):flr;
		next(dr) = u & (b20 = man & b10 = bxtrg) & (b00 = target) & (2-2 > 0):flr;
		next(dr) = d & (b20 = man & b30 = bxtrg) & (b40 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b20 = mantrg & b21 = bx) & (b22 =flr) & (0+2 < n): target;
		next(dr) = u & (b20 = mantrg & b10 = bx) & (b00 =flr) & (2-2 > 0): target;
		next(dr) = d & (b20 = mantrg & b30 = bx) & (b40 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b20 = mantrg & b21 = bx) & (b22 = target) & (0+2 < n): target;
		next(dr) = u & (b20 = mantrg & b10 = bx) & (b00 = target) & (2-2 > 0): target;
		next(dr) = d & (b20 = mantrg & b30 = bx) & (b40 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b20 = mantrg & b21 = bxtrg) & (b22 =flr) & (0+2 < n): target;
		next(dr) = u & (b20 = mantrg & b10 = bxtrg) & (b00 =flr) & (2-2 > 0): target;
		next(dr) = d & (b20 = mantrg & b30 = bxtrg) & (b40 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b20 = mantrg & b21 = bxtrg) & (b22 = target) & (0+2 < n): target;
		next(dr) = u & (b20 = mantrg & b10 = bxtrg) & (b00 = target) & (2-2 > 0): target;
		next(dr) = d & (b20 = mantrg & b30 = bxtrg) & (b40 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = l & (b20 = flr & (b21 = man | b21 = mantrg)): man;
        next(dr) = d & (b20 = flr & (b10 = man | b10 = mantrg)): man;
        next(dr) = u & (b20 = flr & (b30 = man | b30 = mantrg)): man;

    --box to floor
        next(dr) = l & (b20 = flr & (b21 = bx | b21 = bxtrg)) & (b22 = man | b22 = mantrg): bx;
        next(dr) = d & (b20 = flr & (b10 = bx | b10 = bxtrg)) & (b00 = man | b00 = mantrg): bx;
        next(dr) = u & (b20 = flr & (b30 = bx | b30 = bxtrg)) & (b40 = man | b40 = mantrg): bx;

    --man to target
        next(dr) = l & (b20 = target & (b21 = man | b21 = mantrg)): mantrg;
        next(dr) = d & (b20 = target & (b10 = man | b10 = mantrg)): mantrg;
        next(dr) = u & (b20 = target & (b30 = man | b30 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b20 = target & (b21 = bx | b21 = bxtrg)) & (b22 = man | b22 = mantrg): bxtrg;
        next(dr) = d & (b20 = target & (b10 = bx | b10 = bxtrg)) & (b00 = man | b00 = mantrg): bxtrg;
        next(dr) = u & (b20 = target & (b30 = bx | b30 = bxtrg)) & (b40 = man | b40 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b20 = bx & (b10 = man | b10 = mantrg)) & (b30 = flr | b30 = target): man;
        next(dr) = u & (b20 = bx & (b30 = man | b30 = mantrg)) & (b10 = flr | b10 = target): man;

    --man to box on target
        next(dr) = d & (b20 = bxtrg & (b10 = man | b10 = mantrg)) & (b30 = flr | b30 = target): mantrg;
        next(dr) = u & (b20 = bxtrg & (b30 = man | b30 = mantrg)) & (b10 = flr | b10 = target): mantrg;

    TRUE: b20;
esac;
next(b21) := case
	--floor to floor
		next(dr) = l & (b21 = man & b20 =flr):flr;
		next(dr) = r & (b21 = man & b22 =flr):flr;
		next(dr) = u & (b21 = man & b11 =flr):flr;
		next(dr) = d & (b21 = man & b31 =flr):flr;


	--target to floor
		next(dr) = l & (b21 = mantrg & b20 =flr): target;
		next(dr) = r & (b21 = mantrg & b22 =flr): target;
		next(dr) = u & (b21 = mantrg & b11 =flr): target;
		next(dr) = d & (b21 = mantrg & b31 =flr): target;

	--floor to target
		next(dr) = l & (b21 = man & b20 = target):flr;
		next(dr) = r & (b21 = man & b22 = target):flr;
		next(dr) = u & (b21 = man & b11 = target):flr;
		next(dr) = d & (b21 = man & b31 = target):flr;

	--target to target
		next(dr) = l & (b21 = mantrg & b20 = target): target;
		next(dr) = r & (b21 = mantrg & b22 = target): target;
		next(dr) = u & (b21 = mantrg & b11 = target): target;
		next(dr) = d & (b21 = mantrg & b31 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b21 = man & b22 = bx) & (b23 =flr) & (1+2 < n):flr;
		next(dr) = u & (b21 = man & b11 = bx) & (b01 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b21 = man & b31 = bx) & (b41 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b21 = man & b22 = bx) & (b23 = target) & (1+2 < n):flr;
		next(dr) = u & (b21 = man & b11 = bx) & (b01 = target) & (2-2 > 0):flr;
		next(dr) = d & (b21 = man & b31 = bx) & (b41 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b21 = man & b22 = bxtrg) & (b23 =flr) & (1+2 < n):flr;
		next(dr) = u & (b21 = man & b11 = bxtrg) & (b01 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b21 = man & b31 = bxtrg) & (b41 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b21 = man & b22 = bxtrg) & (b23 = target) & (1+2 < n):flr;
		next(dr) = u & (b21 = man & b11 = bxtrg) & (b01 = target) & (2-2 > 0):flr;
		next(dr) = d & (b21 = man & b31 = bxtrg) & (b41 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b21 = mantrg & b22 = bx) & (b23 =flr) & (1+2 < n): target;
		next(dr) = u & (b21 = mantrg & b11 = bx) & (b01 =flr) & (2-2 > 0): target;
		next(dr) = d & (b21 = mantrg & b31 = bx) & (b41 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b21 = mantrg & b22 = bx) & (b23 = target) & (1+2 < n): target;
		next(dr) = u & (b21 = mantrg & b11 = bx) & (b01 = target) & (2-2 > 0): target;
		next(dr) = d & (b21 = mantrg & b31 = bx) & (b41 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b21 = mantrg & b22 = bxtrg) & (b23 =flr) & (1+2 < n): target;
		next(dr) = u & (b21 = mantrg & b11 = bxtrg) & (b01 =flr) & (2-2 > 0): target;
		next(dr) = d & (b21 = mantrg & b31 = bxtrg) & (b41 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b21 = mantrg & b22 = bxtrg) & (b23 = target) & (1+2 < n): target;
		next(dr) = u & (b21 = mantrg & b11 = bxtrg) & (b01 = target) & (2-2 > 0): target;
		next(dr) = d & (b21 = mantrg & b31 = bxtrg) & (b41 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b21 = flr & (b20 = man | b20 = mantrg)) : man;
        next(dr) = l & (b21 = flr & (b22 = man | b22 = mantrg)): man;
        next(dr) = d & (b21 = flr & (b11 = man | b11 = mantrg)): man;
        next(dr) = u & (b21 = flr & (b31 = man | b31 = mantrg)): man;

    --box to floor
        next(dr) = l & (b21 = flr & (b22 = bx | b22 = bxtrg)) & (b23 = man | b23 = mantrg): bx;
        next(dr) = d & (b21 = flr & (b11 = bx | b11 = bxtrg)) & (b01 = man | b01 = mantrg): bx;
        next(dr) = u & (b21 = flr & (b31 = bx | b31 = bxtrg)) & (b41 = man | b41 = mantrg): bx;

    --man to target
        next(dr) = r & (b21 = target & (b20 = man | b20 = mantrg)): mantrg;
        next(dr) = l & (b21 = target & (b22 = man | b22 = mantrg)): mantrg;
        next(dr) = d & (b21 = target & (b11 = man | b11 = mantrg)): mantrg;
        next(dr) = u & (b21 = target & (b31 = man | b31 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b21 = target & (b22 = bx | b22 = bxtrg)) & (b23 = man | b23 = mantrg): bxtrg;
        next(dr) = d & (b21 = target & (b11 = bx | b11 = bxtrg)) & (b01 = man | b01 = mantrg): bxtrg;
        next(dr) = u & (b21 = target & (b31 = bx | b31 = bxtrg)) & (b41 = man | b41 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b21 = bx & (b20 = man | b20 = mantrg)) & (b22 = flr | b22 = target): man;
        next(dr) = l & (b21 = bx & (b22 = man | b22 = mantrg)) & (b20 = flr | b20 = target): man;
        next(dr) = d & (b21 = bx & (b11 = man | b11 = mantrg)) & (b31 = flr | b31 = target): man;
        next(dr) = u & (b21 = bx & (b31 = man | b31 = mantrg)) & (b11 = flr | b11 = target): man;

    --man to box on target
        next(dr) = r & (b21 = bxtrg & (b20 = man | b20 = mantrg)) & (b22 = flr | b22 = target): mantrg;
        next(dr) = l & (b21 = bxtrg & (b22 = man | b22 = mantrg)) & (b20 = flr | b20 = target): mantrg;
        next(dr) = d & (b21 = bxtrg & (b11 = man | b11 = mantrg)) & (b31 = flr | b31 = target): mantrg;
        next(dr) = u & (b21 = bxtrg & (b31 = man | b31 = mantrg)) & (b11 = flr | b11 = target): mantrg;

    TRUE: b21;
esac;
next(b22) := case
	--floor to floor
		next(dr) = l & (b22 = man & b21 =flr):flr;
		next(dr) = r & (b22 = man & b23 =flr):flr;
		next(dr) = u & (b22 = man & b12 =flr):flr;
		next(dr) = d & (b22 = man & b32 =flr):flr;


	--target to floor
		next(dr) = l & (b22 = mantrg & b21 =flr): target;
		next(dr) = r & (b22 = mantrg & b23 =flr): target;
		next(dr) = u & (b22 = mantrg & b12 =flr): target;
		next(dr) = d & (b22 = mantrg & b32 =flr): target;

	--floor to target
		next(dr) = l & (b22 = man & b21 = target):flr;
		next(dr) = r & (b22 = man & b23 = target):flr;
		next(dr) = u & (b22 = man & b12 = target):flr;
		next(dr) = d & (b22 = man & b32 = target):flr;

	--target to target
		next(dr) = l & (b22 = mantrg & b21 = target): target;
		next(dr) = r & (b22 = mantrg & b23 = target): target;
		next(dr) = u & (b22 = mantrg & b12 = target): target;
		next(dr) = d & (b22 = mantrg & b32 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b22 = man & b21 = bx) & (b20 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b22 = man & b23 = bx) & (b24 =flr) & (2+2 < n):flr;
		next(dr) = u & (b22 = man & b12 = bx) & (b02 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b22 = man & b32 = bx) & (b42 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b22 = man & b21 = bx) & (b20 = target) & (2-2 > 0):flr;
		next(dr) = r & (b22 = man & b23 = bx) & (b24 = target) & (2+2 < n):flr;
		next(dr) = u & (b22 = man & b12 = bx) & (b02 = target) & (2-2 > 0):flr;
		next(dr) = d & (b22 = man & b32 = bx) & (b42 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b22 = man & b21 = bxtrg) & (b20 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b22 = man & b23 = bxtrg) & (b24 =flr) & (2+2 < n):flr;
		next(dr) = u & (b22 = man & b12 = bxtrg) & (b02 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b22 = man & b32 = bxtrg) & (b42 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b22 = man & b21 = bxtrg) & (b20 = target) & (2-2 > 0):flr;
		next(dr) = r & (b22 = man & b23 = bxtrg) & (b24 = target) & (2+2 < n):flr;
		next(dr) = u & (b22 = man & b12 = bxtrg) & (b02 = target) & (2-2 > 0):flr;
		next(dr) = d & (b22 = man & b32 = bxtrg) & (b42 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b22 = mantrg & b21 = bx) & (b20 =flr) & (2-2 > 0): target;
		next(dr) = r & (b22 = mantrg & b23 = bx) & (b24 =flr) & (2+2 < n): target;
		next(dr) = u & (b22 = mantrg & b12 = bx) & (b02 =flr) & (2-2 > 0): target;
		next(dr) = d & (b22 = mantrg & b32 = bx) & (b42 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b22 = mantrg & b21 = bx) & (b20 = target) & (2-2 > 0): target;
		next(dr) = r & (b22 = mantrg & b23 = bx) & (b24 = target) & (2+2 < n): target;
		next(dr) = u & (b22 = mantrg & b12 = bx) & (b02 = target) & (2-2 > 0): target;
		next(dr) = d & (b22 = mantrg & b32 = bx) & (b42 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b22 = mantrg & b21 = bxtrg) & (b20 =flr) & (2-2 > 0): target;
		next(dr) = r & (b22 = mantrg & b23 = bxtrg) & (b24 =flr) & (2+2 < n): target;
		next(dr) = u & (b22 = mantrg & b12 = bxtrg) & (b02 =flr) & (2-2 > 0): target;
		next(dr) = d & (b22 = mantrg & b32 = bxtrg) & (b42 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b22 = mantrg & b21 = bxtrg) & (b20 = target) & (2-2 > 0): target;
		next(dr) = r & (b22 = mantrg & b23 = bxtrg) & (b24 = target) & (2+2 < n): target;
		next(dr) = u & (b22 = mantrg & b12 = bxtrg) & (b02 = target) & (2-2 > 0): target;
		next(dr) = d & (b22 = mantrg & b32 = bxtrg) & (b42 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b22 = flr & (b21 = man | b21 = mantrg)) : man;
        next(dr) = l & (b22 = flr & (b23 = man | b23 = mantrg)): man;
        next(dr) = d & (b22 = flr & (b12 = man | b12 = mantrg)): man;
        next(dr) = u & (b22 = flr & (b32 = man | b32 = mantrg)): man;

    --box to floor
        next(dr) = r & (b22 = flr & (b21 = bx | b21 = bxtrg)) & (b20 = man | b20 = mantrg): bx;
        next(dr) = l & (b22 = flr & (b23 = bx | b23 = bxtrg)) & (b24 = man | b24 = mantrg): bx;
        next(dr) = d & (b22 = flr & (b12 = bx | b12 = bxtrg)) & (b02 = man | b02 = mantrg): bx;
        next(dr) = u & (b22 = flr & (b32 = bx | b32 = bxtrg)) & (b42 = man | b42 = mantrg): bx;

    --man to target
        next(dr) = r & (b22 = target & (b21 = man | b21 = mantrg)): mantrg;
        next(dr) = l & (b22 = target & (b23 = man | b23 = mantrg)): mantrg;
        next(dr) = d & (b22 = target & (b12 = man | b12 = mantrg)): mantrg;
        next(dr) = u & (b22 = target & (b32 = man | b32 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b22 = target & (b21 = bx | b21 = bxtrg)) & (b20 = man | b20 = mantrg): bxtrg;
        next(dr) = l & (b22 = target & (b23 = bx | b23 = bxtrg)) & (b24 = man | b24 = mantrg): bxtrg;
        next(dr) = d & (b22 = target & (b12 = bx | b12 = bxtrg)) & (b02 = man | b02 = mantrg): bxtrg;
        next(dr) = u & (b22 = target & (b32 = bx | b32 = bxtrg)) & (b42 = man | b42 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b22 = bx & (b21 = man | b21 = mantrg)) & (b23 = flr | b23 = target): man;
        next(dr) = l & (b22 = bx & (b23 = man | b23 = mantrg)) & (b21 = flr | b21 = target): man;
        next(dr) = d & (b22 = bx & (b12 = man | b12 = mantrg)) & (b32 = flr | b32 = target): man;
        next(dr) = u & (b22 = bx & (b32 = man | b32 = mantrg)) & (b12 = flr | b12 = target): man;

    --man to box on target
        next(dr) = r & (b22 = bxtrg & (b21 = man | b21 = mantrg)) & (b23 = flr | b23 = target): mantrg;
        next(dr) = l & (b22 = bxtrg & (b23 = man | b23 = mantrg)) & (b21 = flr | b21 = target): mantrg;
        next(dr) = d & (b22 = bxtrg & (b12 = man | b12 = mantrg)) & (b32 = flr | b32 = target): mantrg;
        next(dr) = u & (b22 = bxtrg & (b32 = man | b32 = mantrg)) & (b12 = flr | b12 = target): mantrg;

    TRUE: b22;
esac;
next(b23) := case
	--floor to floor
		next(dr) = l & (b23 = man & b22 =flr):flr;
		next(dr) = r & (b23 = man & b24 =flr):flr;
		next(dr) = u & (b23 = man & b13 =flr):flr;
		next(dr) = d & (b23 = man & b33 =flr):flr;


	--target to floor
		next(dr) = l & (b23 = mantrg & b22 =flr): target;
		next(dr) = r & (b23 = mantrg & b24 =flr): target;
		next(dr) = u & (b23 = mantrg & b13 =flr): target;
		next(dr) = d & (b23 = mantrg & b33 =flr): target;

	--floor to target
		next(dr) = l & (b23 = man & b22 = target):flr;
		next(dr) = r & (b23 = man & b24 = target):flr;
		next(dr) = u & (b23 = man & b13 = target):flr;
		next(dr) = d & (b23 = man & b33 = target):flr;

	--target to target
		next(dr) = l & (b23 = mantrg & b22 = target): target;
		next(dr) = r & (b23 = mantrg & b24 = target): target;
		next(dr) = u & (b23 = mantrg & b13 = target): target;
		next(dr) = d & (b23 = mantrg & b33 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b23 = man & b22 = bx) & (b21 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b23 = man & b24 = bx) & (b25 =flr) & (3+2 < n):flr;
		next(dr) = u & (b23 = man & b13 = bx) & (b03 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b23 = man & b33 = bx) & (b43 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b23 = man & b22 = bx) & (b21 = target) & (3-2 > 0):flr;
		next(dr) = r & (b23 = man & b24 = bx) & (b25 = target) & (3+2 < n):flr;
		next(dr) = u & (b23 = man & b13 = bx) & (b03 = target) & (2-2 > 0):flr;
		next(dr) = d & (b23 = man & b33 = bx) & (b43 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b23 = man & b22 = bxtrg) & (b21 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b23 = man & b24 = bxtrg) & (b25 =flr) & (3+2 < n):flr;
		next(dr) = u & (b23 = man & b13 = bxtrg) & (b03 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b23 = man & b33 = bxtrg) & (b43 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b23 = man & b22 = bxtrg) & (b21 = target) & (3-2 > 0):flr;
		next(dr) = r & (b23 = man & b24 = bxtrg) & (b25 = target) & (3+2 < n):flr;
		next(dr) = u & (b23 = man & b13 = bxtrg) & (b03 = target) & (2-2 > 0):flr;
		next(dr) = d & (b23 = man & b33 = bxtrg) & (b43 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b23 = mantrg & b22 = bx) & (b21 =flr) & (3-2 > 0): target;
		next(dr) = r & (b23 = mantrg & b24 = bx) & (b25 =flr) & (3+2 < n): target;
		next(dr) = u & (b23 = mantrg & b13 = bx) & (b03 =flr) & (2-2 > 0): target;
		next(dr) = d & (b23 = mantrg & b33 = bx) & (b43 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b23 = mantrg & b22 = bx) & (b21 = target) & (3-2 > 0): target;
		next(dr) = r & (b23 = mantrg & b24 = bx) & (b25 = target) & (3+2 < n): target;
		next(dr) = u & (b23 = mantrg & b13 = bx) & (b03 = target) & (2-2 > 0): target;
		next(dr) = d & (b23 = mantrg & b33 = bx) & (b43 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b23 = mantrg & b22 = bxtrg) & (b21 =flr) & (3-2 > 0): target;
		next(dr) = r & (b23 = mantrg & b24 = bxtrg) & (b25 =flr) & (3+2 < n): target;
		next(dr) = u & (b23 = mantrg & b13 = bxtrg) & (b03 =flr) & (2-2 > 0): target;
		next(dr) = d & (b23 = mantrg & b33 = bxtrg) & (b43 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b23 = mantrg & b22 = bxtrg) & (b21 = target) & (3-2 > 0): target;
		next(dr) = r & (b23 = mantrg & b24 = bxtrg) & (b25 = target) & (3+2 < n): target;
		next(dr) = u & (b23 = mantrg & b13 = bxtrg) & (b03 = target) & (2-2 > 0): target;
		next(dr) = d & (b23 = mantrg & b33 = bxtrg) & (b43 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b23 = flr & (b22 = man | b22 = mantrg)) : man;
        next(dr) = l & (b23 = flr & (b24 = man | b24 = mantrg)): man;
        next(dr) = d & (b23 = flr & (b13 = man | b13 = mantrg)): man;
        next(dr) = u & (b23 = flr & (b33 = man | b33 = mantrg)): man;

    --box to floor
        next(dr) = r & (b23 = flr & (b22 = bx | b22 = bxtrg)) & (b21 = man | b21 = mantrg): bx;
        next(dr) = l & (b23 = flr & (b24 = bx | b24 = bxtrg)) & (b25 = man | b25 = mantrg): bx;
        next(dr) = d & (b23 = flr & (b13 = bx | b13 = bxtrg)) & (b03 = man | b03 = mantrg): bx;
        next(dr) = u & (b23 = flr & (b33 = bx | b33 = bxtrg)) & (b43 = man | b43 = mantrg): bx;

    --man to target
        next(dr) = r & (b23 = target & (b22 = man | b22 = mantrg)): mantrg;
        next(dr) = l & (b23 = target & (b24 = man | b24 = mantrg)): mantrg;
        next(dr) = d & (b23 = target & (b13 = man | b13 = mantrg)): mantrg;
        next(dr) = u & (b23 = target & (b33 = man | b33 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b23 = target & (b22 = bx | b22 = bxtrg)) & (b21 = man | b21 = mantrg): bxtrg;
        next(dr) = l & (b23 = target & (b24 = bx | b24 = bxtrg)) & (b25 = man | b25 = mantrg): bxtrg;
        next(dr) = d & (b23 = target & (b13 = bx | b13 = bxtrg)) & (b03 = man | b03 = mantrg): bxtrg;
        next(dr) = u & (b23 = target & (b33 = bx | b33 = bxtrg)) & (b43 = man | b43 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b23 = bx & (b22 = man | b22 = mantrg)) & (b24 = flr | b24 = target): man;
        next(dr) = l & (b23 = bx & (b24 = man | b24 = mantrg)) & (b22 = flr | b22 = target): man;
        next(dr) = d & (b23 = bx & (b13 = man | b13 = mantrg)) & (b33 = flr | b33 = target): man;
        next(dr) = u & (b23 = bx & (b33 = man | b33 = mantrg)) & (b13 = flr | b13 = target): man;

    --man to box on target
        next(dr) = r & (b23 = bxtrg & (b22 = man | b22 = mantrg)) & (b24 = flr | b24 = target): mantrg;
        next(dr) = l & (b23 = bxtrg & (b24 = man | b24 = mantrg)) & (b22 = flr | b22 = target): mantrg;
        next(dr) = d & (b23 = bxtrg & (b13 = man | b13 = mantrg)) & (b33 = flr | b33 = target): mantrg;
        next(dr) = u & (b23 = bxtrg & (b33 = man | b33 = mantrg)) & (b13 = flr | b13 = target): mantrg;

    TRUE: b23;
esac;
next(b24) := case
	--floor to floor
		next(dr) = l & (b24 = man & b23 =flr):flr;
		next(dr) = r & (b24 = man & b25 =flr):flr;
		next(dr) = u & (b24 = man & b14 =flr):flr;
		next(dr) = d & (b24 = man & b34 =flr):flr;


	--target to floor
		next(dr) = l & (b24 = mantrg & b23 =flr): target;
		next(dr) = r & (b24 = mantrg & b25 =flr): target;
		next(dr) = u & (b24 = mantrg & b14 =flr): target;
		next(dr) = d & (b24 = mantrg & b34 =flr): target;

	--floor to target
		next(dr) = l & (b24 = man & b23 = target):flr;
		next(dr) = r & (b24 = man & b25 = target):flr;
		next(dr) = u & (b24 = man & b14 = target):flr;
		next(dr) = d & (b24 = man & b34 = target):flr;

	--target to target
		next(dr) = l & (b24 = mantrg & b23 = target): target;
		next(dr) = r & (b24 = mantrg & b25 = target): target;
		next(dr) = u & (b24 = mantrg & b14 = target): target;
		next(dr) = d & (b24 = mantrg & b34 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b24 = man & b23 = bx) & (b22 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b24 = man & b25 = bx) & (b26 =flr) & (4+2 < n):flr;
		next(dr) = u & (b24 = man & b14 = bx) & (b04 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b24 = man & b34 = bx) & (b44 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b24 = man & b23 = bx) & (b22 = target) & (4-2 > 0):flr;
		next(dr) = r & (b24 = man & b25 = bx) & (b26 = target) & (4+2 < n):flr;
		next(dr) = u & (b24 = man & b14 = bx) & (b04 = target) & (2-2 > 0):flr;
		next(dr) = d & (b24 = man & b34 = bx) & (b44 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b24 = man & b23 = bxtrg) & (b22 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b24 = man & b25 = bxtrg) & (b26 =flr) & (4+2 < n):flr;
		next(dr) = u & (b24 = man & b14 = bxtrg) & (b04 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b24 = man & b34 = bxtrg) & (b44 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b24 = man & b23 = bxtrg) & (b22 = target) & (4-2 > 0):flr;
		next(dr) = r & (b24 = man & b25 = bxtrg) & (b26 = target) & (4+2 < n):flr;
		next(dr) = u & (b24 = man & b14 = bxtrg) & (b04 = target) & (2-2 > 0):flr;
		next(dr) = d & (b24 = man & b34 = bxtrg) & (b44 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b24 = mantrg & b23 = bx) & (b22 =flr) & (4-2 > 0): target;
		next(dr) = r & (b24 = mantrg & b25 = bx) & (b26 =flr) & (4+2 < n): target;
		next(dr) = u & (b24 = mantrg & b14 = bx) & (b04 =flr) & (2-2 > 0): target;
		next(dr) = d & (b24 = mantrg & b34 = bx) & (b44 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b24 = mantrg & b23 = bx) & (b22 = target) & (4-2 > 0): target;
		next(dr) = r & (b24 = mantrg & b25 = bx) & (b26 = target) & (4+2 < n): target;
		next(dr) = u & (b24 = mantrg & b14 = bx) & (b04 = target) & (2-2 > 0): target;
		next(dr) = d & (b24 = mantrg & b34 = bx) & (b44 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b24 = mantrg & b23 = bxtrg) & (b22 =flr) & (4-2 > 0): target;
		next(dr) = r & (b24 = mantrg & b25 = bxtrg) & (b26 =flr) & (4+2 < n): target;
		next(dr) = u & (b24 = mantrg & b14 = bxtrg) & (b04 =flr) & (2-2 > 0): target;
		next(dr) = d & (b24 = mantrg & b34 = bxtrg) & (b44 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b24 = mantrg & b23 = bxtrg) & (b22 = target) & (4-2 > 0): target;
		next(dr) = r & (b24 = mantrg & b25 = bxtrg) & (b26 = target) & (4+2 < n): target;
		next(dr) = u & (b24 = mantrg & b14 = bxtrg) & (b04 = target) & (2-2 > 0): target;
		next(dr) = d & (b24 = mantrg & b34 = bxtrg) & (b44 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b24 = flr & (b23 = man | b23 = mantrg)) : man;
        next(dr) = l & (b24 = flr & (b25 = man | b25 = mantrg)): man;
        next(dr) = d & (b24 = flr & (b14 = man | b14 = mantrg)): man;
        next(dr) = u & (b24 = flr & (b34 = man | b34 = mantrg)): man;

    --box to floor
        next(dr) = r & (b24 = flr & (b23 = bx | b23 = bxtrg)) & (b22 = man | b22 = mantrg): bx;
        next(dr) = l & (b24 = flr & (b25 = bx | b25 = bxtrg)) & (b26 = man | b26 = mantrg): bx;
        next(dr) = d & (b24 = flr & (b14 = bx | b14 = bxtrg)) & (b04 = man | b04 = mantrg): bx;
        next(dr) = u & (b24 = flr & (b34 = bx | b34 = bxtrg)) & (b44 = man | b44 = mantrg): bx;

    --man to target
        next(dr) = r & (b24 = target & (b23 = man | b23 = mantrg)): mantrg;
        next(dr) = l & (b24 = target & (b25 = man | b25 = mantrg)): mantrg;
        next(dr) = d & (b24 = target & (b14 = man | b14 = mantrg)): mantrg;
        next(dr) = u & (b24 = target & (b34 = man | b34 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b24 = target & (b23 = bx | b23 = bxtrg)) & (b22 = man | b22 = mantrg): bxtrg;
        next(dr) = l & (b24 = target & (b25 = bx | b25 = bxtrg)) & (b26 = man | b26 = mantrg): bxtrg;
        next(dr) = d & (b24 = target & (b14 = bx | b14 = bxtrg)) & (b04 = man | b04 = mantrg): bxtrg;
        next(dr) = u & (b24 = target & (b34 = bx | b34 = bxtrg)) & (b44 = man | b44 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b24 = bx & (b23 = man | b23 = mantrg)) & (b25 = flr | b25 = target): man;
        next(dr) = l & (b24 = bx & (b25 = man | b25 = mantrg)) & (b23 = flr | b23 = target): man;
        next(dr) = d & (b24 = bx & (b14 = man | b14 = mantrg)) & (b34 = flr | b34 = target): man;
        next(dr) = u & (b24 = bx & (b34 = man | b34 = mantrg)) & (b14 = flr | b14 = target): man;

    --man to box on target
        next(dr) = r & (b24 = bxtrg & (b23 = man | b23 = mantrg)) & (b25 = flr | b25 = target): mantrg;
        next(dr) = l & (b24 = bxtrg & (b25 = man | b25 = mantrg)) & (b23 = flr | b23 = target): mantrg;
        next(dr) = d & (b24 = bxtrg & (b14 = man | b14 = mantrg)) & (b34 = flr | b34 = target): mantrg;
        next(dr) = u & (b24 = bxtrg & (b34 = man | b34 = mantrg)) & (b14 = flr | b14 = target): mantrg;

    TRUE: b24;
esac;
next(b25) := case
	--floor to floor
		next(dr) = l & (b25 = man & b24 =flr):flr;
		next(dr) = r & (b25 = man & b26 =flr):flr;
		next(dr) = u & (b25 = man & b15 =flr):flr;
		next(dr) = d & (b25 = man & b35 =flr):flr;


	--target to floor
		next(dr) = l & (b25 = mantrg & b24 =flr): target;
		next(dr) = r & (b25 = mantrg & b26 =flr): target;
		next(dr) = u & (b25 = mantrg & b15 =flr): target;
		next(dr) = d & (b25 = mantrg & b35 =flr): target;

	--floor to target
		next(dr) = l & (b25 = man & b24 = target):flr;
		next(dr) = r & (b25 = man & b26 = target):flr;
		next(dr) = u & (b25 = man & b15 = target):flr;
		next(dr) = d & (b25 = man & b35 = target):flr;

	--target to target
		next(dr) = l & (b25 = mantrg & b24 = target): target;
		next(dr) = r & (b25 = mantrg & b26 = target): target;
		next(dr) = u & (b25 = mantrg & b15 = target): target;
		next(dr) = d & (b25 = mantrg & b35 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b25 = man & b24 = bx) & (b23 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b25 = man & b26 = bx) & (b27 =flr) & (5+2 < n):flr;
		next(dr) = u & (b25 = man & b15 = bx) & (b05 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b25 = man & b35 = bx) & (b45 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b25 = man & b24 = bx) & (b23 = target) & (5-2 > 0):flr;
		next(dr) = r & (b25 = man & b26 = bx) & (b27 = target) & (5+2 < n):flr;
		next(dr) = u & (b25 = man & b15 = bx) & (b05 = target) & (2-2 > 0):flr;
		next(dr) = d & (b25 = man & b35 = bx) & (b45 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b25 = man & b24 = bxtrg) & (b23 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b25 = man & b26 = bxtrg) & (b27 =flr) & (5+2 < n):flr;
		next(dr) = u & (b25 = man & b15 = bxtrg) & (b05 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b25 = man & b35 = bxtrg) & (b45 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b25 = man & b24 = bxtrg) & (b23 = target) & (5-2 > 0):flr;
		next(dr) = r & (b25 = man & b26 = bxtrg) & (b27 = target) & (5+2 < n):flr;
		next(dr) = u & (b25 = man & b15 = bxtrg) & (b05 = target) & (2-2 > 0):flr;
		next(dr) = d & (b25 = man & b35 = bxtrg) & (b45 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b25 = mantrg & b24 = bx) & (b23 =flr) & (5-2 > 0): target;
		next(dr) = r & (b25 = mantrg & b26 = bx) & (b27 =flr) & (5+2 < n): target;
		next(dr) = u & (b25 = mantrg & b15 = bx) & (b05 =flr) & (2-2 > 0): target;
		next(dr) = d & (b25 = mantrg & b35 = bx) & (b45 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b25 = mantrg & b24 = bx) & (b23 = target) & (5-2 > 0): target;
		next(dr) = r & (b25 = mantrg & b26 = bx) & (b27 = target) & (5+2 < n): target;
		next(dr) = u & (b25 = mantrg & b15 = bx) & (b05 = target) & (2-2 > 0): target;
		next(dr) = d & (b25 = mantrg & b35 = bx) & (b45 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b25 = mantrg & b24 = bxtrg) & (b23 =flr) & (5-2 > 0): target;
		next(dr) = r & (b25 = mantrg & b26 = bxtrg) & (b27 =flr) & (5+2 < n): target;
		next(dr) = u & (b25 = mantrg & b15 = bxtrg) & (b05 =flr) & (2-2 > 0): target;
		next(dr) = d & (b25 = mantrg & b35 = bxtrg) & (b45 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b25 = mantrg & b24 = bxtrg) & (b23 = target) & (5-2 > 0): target;
		next(dr) = r & (b25 = mantrg & b26 = bxtrg) & (b27 = target) & (5+2 < n): target;
		next(dr) = u & (b25 = mantrg & b15 = bxtrg) & (b05 = target) & (2-2 > 0): target;
		next(dr) = d & (b25 = mantrg & b35 = bxtrg) & (b45 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b25 = flr & (b24 = man | b24 = mantrg)) : man;
        next(dr) = l & (b25 = flr & (b26 = man | b26 = mantrg)): man;
        next(dr) = d & (b25 = flr & (b15 = man | b15 = mantrg)): man;
        next(dr) = u & (b25 = flr & (b35 = man | b35 = mantrg)): man;

    --box to floor
        next(dr) = r & (b25 = flr & (b24 = bx | b24 = bxtrg)) & (b23 = man | b23 = mantrg): bx;
        next(dr) = l & (b25 = flr & (b26 = bx | b26 = bxtrg)) & (b27 = man | b27 = mantrg): bx;
        next(dr) = d & (b25 = flr & (b15 = bx | b15 = bxtrg)) & (b05 = man | b05 = mantrg): bx;
        next(dr) = u & (b25 = flr & (b35 = bx | b35 = bxtrg)) & (b45 = man | b45 = mantrg): bx;

    --man to target
        next(dr) = r & (b25 = target & (b24 = man | b24 = mantrg)): mantrg;
        next(dr) = l & (b25 = target & (b26 = man | b26 = mantrg)): mantrg;
        next(dr) = d & (b25 = target & (b15 = man | b15 = mantrg)): mantrg;
        next(dr) = u & (b25 = target & (b35 = man | b35 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b25 = target & (b24 = bx | b24 = bxtrg)) & (b23 = man | b23 = mantrg): bxtrg;
        next(dr) = l & (b25 = target & (b26 = bx | b26 = bxtrg)) & (b27 = man | b27 = mantrg): bxtrg;
        next(dr) = d & (b25 = target & (b15 = bx | b15 = bxtrg)) & (b05 = man | b05 = mantrg): bxtrg;
        next(dr) = u & (b25 = target & (b35 = bx | b35 = bxtrg)) & (b45 = man | b45 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b25 = bx & (b24 = man | b24 = mantrg)) & (b26 = flr | b26 = target): man;
        next(dr) = l & (b25 = bx & (b26 = man | b26 = mantrg)) & (b24 = flr | b24 = target): man;
        next(dr) = d & (b25 = bx & (b15 = man | b15 = mantrg)) & (b35 = flr | b35 = target): man;
        next(dr) = u & (b25 = bx & (b35 = man | b35 = mantrg)) & (b15 = flr | b15 = target): man;

    --man to box on target
        next(dr) = r & (b25 = bxtrg & (b24 = man | b24 = mantrg)) & (b26 = flr | b26 = target): mantrg;
        next(dr) = l & (b25 = bxtrg & (b26 = man | b26 = mantrg)) & (b24 = flr | b24 = target): mantrg;
        next(dr) = d & (b25 = bxtrg & (b15 = man | b15 = mantrg)) & (b35 = flr | b35 = target): mantrg;
        next(dr) = u & (b25 = bxtrg & (b35 = man | b35 = mantrg)) & (b15 = flr | b15 = target): mantrg;

    TRUE: b25;
esac;
next(b26) := case
	--floor to floor
		next(dr) = l & (b26 = man & b25 =flr):flr;
		next(dr) = r & (b26 = man & b27 =flr):flr;
		next(dr) = u & (b26 = man & b16 =flr):flr;
		next(dr) = d & (b26 = man & b36 =flr):flr;


	--target to floor
		next(dr) = l & (b26 = mantrg & b25 =flr): target;
		next(dr) = r & (b26 = mantrg & b27 =flr): target;
		next(dr) = u & (b26 = mantrg & b16 =flr): target;
		next(dr) = d & (b26 = mantrg & b36 =flr): target;

	--floor to target
		next(dr) = l & (b26 = man & b25 = target):flr;
		next(dr) = r & (b26 = man & b27 = target):flr;
		next(dr) = u & (b26 = man & b16 = target):flr;
		next(dr) = d & (b26 = man & b36 = target):flr;

	--target to target
		next(dr) = l & (b26 = mantrg & b25 = target): target;
		next(dr) = r & (b26 = mantrg & b27 = target): target;
		next(dr) = u & (b26 = mantrg & b16 = target): target;
		next(dr) = d & (b26 = mantrg & b36 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b26 = man & b25 = bx) & (b24 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b26 = man & b27 = bx) & (b28 =flr) & (6+2 < n):flr;
		next(dr) = u & (b26 = man & b16 = bx) & (b06 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b26 = man & b36 = bx) & (b46 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b26 = man & b25 = bx) & (b24 = target) & (6-2 > 0):flr;
		next(dr) = r & (b26 = man & b27 = bx) & (b28 = target) & (6+2 < n):flr;
		next(dr) = u & (b26 = man & b16 = bx) & (b06 = target) & (2-2 > 0):flr;
		next(dr) = d & (b26 = man & b36 = bx) & (b46 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b26 = man & b25 = bxtrg) & (b24 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b26 = man & b27 = bxtrg) & (b28 =flr) & (6+2 < n):flr;
		next(dr) = u & (b26 = man & b16 = bxtrg) & (b06 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b26 = man & b36 = bxtrg) & (b46 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b26 = man & b25 = bxtrg) & (b24 = target) & (6-2 > 0):flr;
		next(dr) = r & (b26 = man & b27 = bxtrg) & (b28 = target) & (6+2 < n):flr;
		next(dr) = u & (b26 = man & b16 = bxtrg) & (b06 = target) & (2-2 > 0):flr;
		next(dr) = d & (b26 = man & b36 = bxtrg) & (b46 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b26 = mantrg & b25 = bx) & (b24 =flr) & (6-2 > 0): target;
		next(dr) = r & (b26 = mantrg & b27 = bx) & (b28 =flr) & (6+2 < n): target;
		next(dr) = u & (b26 = mantrg & b16 = bx) & (b06 =flr) & (2-2 > 0): target;
		next(dr) = d & (b26 = mantrg & b36 = bx) & (b46 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b26 = mantrg & b25 = bx) & (b24 = target) & (6-2 > 0): target;
		next(dr) = r & (b26 = mantrg & b27 = bx) & (b28 = target) & (6+2 < n): target;
		next(dr) = u & (b26 = mantrg & b16 = bx) & (b06 = target) & (2-2 > 0): target;
		next(dr) = d & (b26 = mantrg & b36 = bx) & (b46 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b26 = mantrg & b25 = bxtrg) & (b24 =flr) & (6-2 > 0): target;
		next(dr) = r & (b26 = mantrg & b27 = bxtrg) & (b28 =flr) & (6+2 < n): target;
		next(dr) = u & (b26 = mantrg & b16 = bxtrg) & (b06 =flr) & (2-2 > 0): target;
		next(dr) = d & (b26 = mantrg & b36 = bxtrg) & (b46 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b26 = mantrg & b25 = bxtrg) & (b24 = target) & (6-2 > 0): target;
		next(dr) = r & (b26 = mantrg & b27 = bxtrg) & (b28 = target) & (6+2 < n): target;
		next(dr) = u & (b26 = mantrg & b16 = bxtrg) & (b06 = target) & (2-2 > 0): target;
		next(dr) = d & (b26 = mantrg & b36 = bxtrg) & (b46 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b26 = flr & (b25 = man | b25 = mantrg)) : man;
        next(dr) = l & (b26 = flr & (b27 = man | b27 = mantrg)): man;
        next(dr) = d & (b26 = flr & (b16 = man | b16 = mantrg)): man;
        next(dr) = u & (b26 = flr & (b36 = man | b36 = mantrg)): man;

    --box to floor
        next(dr) = r & (b26 = flr & (b25 = bx | b25 = bxtrg)) & (b24 = man | b24 = mantrg): bx;
        next(dr) = l & (b26 = flr & (b27 = bx | b27 = bxtrg)) & (b28 = man | b28 = mantrg): bx;
        next(dr) = d & (b26 = flr & (b16 = bx | b16 = bxtrg)) & (b06 = man | b06 = mantrg): bx;
        next(dr) = u & (b26 = flr & (b36 = bx | b36 = bxtrg)) & (b46 = man | b46 = mantrg): bx;

    --man to target
        next(dr) = r & (b26 = target & (b25 = man | b25 = mantrg)): mantrg;
        next(dr) = l & (b26 = target & (b27 = man | b27 = mantrg)): mantrg;
        next(dr) = d & (b26 = target & (b16 = man | b16 = mantrg)): mantrg;
        next(dr) = u & (b26 = target & (b36 = man | b36 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b26 = target & (b25 = bx | b25 = bxtrg)) & (b24 = man | b24 = mantrg): bxtrg;
        next(dr) = l & (b26 = target & (b27 = bx | b27 = bxtrg)) & (b28 = man | b28 = mantrg): bxtrg;
        next(dr) = d & (b26 = target & (b16 = bx | b16 = bxtrg)) & (b06 = man | b06 = mantrg): bxtrg;
        next(dr) = u & (b26 = target & (b36 = bx | b36 = bxtrg)) & (b46 = man | b46 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b26 = bx & (b25 = man | b25 = mantrg)) & (b27 = flr | b27 = target): man;
        next(dr) = l & (b26 = bx & (b27 = man | b27 = mantrg)) & (b25 = flr | b25 = target): man;
        next(dr) = d & (b26 = bx & (b16 = man | b16 = mantrg)) & (b36 = flr | b36 = target): man;
        next(dr) = u & (b26 = bx & (b36 = man | b36 = mantrg)) & (b16 = flr | b16 = target): man;

    --man to box on target
        next(dr) = r & (b26 = bxtrg & (b25 = man | b25 = mantrg)) & (b27 = flr | b27 = target): mantrg;
        next(dr) = l & (b26 = bxtrg & (b27 = man | b27 = mantrg)) & (b25 = flr | b25 = target): mantrg;
        next(dr) = d & (b26 = bxtrg & (b16 = man | b16 = mantrg)) & (b36 = flr | b36 = target): mantrg;
        next(dr) = u & (b26 = bxtrg & (b36 = man | b36 = mantrg)) & (b16 = flr | b16 = target): mantrg;

    TRUE: b26;
esac;
next(b27) := case
	--floor to floor
		next(dr) = l & (b27 = man & b26 =flr):flr;
		next(dr) = r & (b27 = man & b28 =flr):flr;
		next(dr) = u & (b27 = man & b17 =flr):flr;
		next(dr) = d & (b27 = man & b37 =flr):flr;


	--target to floor
		next(dr) = l & (b27 = mantrg & b26 =flr): target;
		next(dr) = r & (b27 = mantrg & b28 =flr): target;
		next(dr) = u & (b27 = mantrg & b17 =flr): target;
		next(dr) = d & (b27 = mantrg & b37 =flr): target;

	--floor to target
		next(dr) = l & (b27 = man & b26 = target):flr;
		next(dr) = r & (b27 = man & b28 = target):flr;
		next(dr) = u & (b27 = man & b17 = target):flr;
		next(dr) = d & (b27 = man & b37 = target):flr;

	--target to target
		next(dr) = l & (b27 = mantrg & b26 = target): target;
		next(dr) = r & (b27 = mantrg & b28 = target): target;
		next(dr) = u & (b27 = mantrg & b17 = target): target;
		next(dr) = d & (b27 = mantrg & b37 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b27 = man & b26 = bx) & (b25 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b27 = man & b28 = bx) & (b29 =flr) & (7+2 < n):flr;
		next(dr) = u & (b27 = man & b17 = bx) & (b07 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b27 = man & b37 = bx) & (b47 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b27 = man & b26 = bx) & (b25 = target) & (7-2 > 0):flr;
		next(dr) = r & (b27 = man & b28 = bx) & (b29 = target) & (7+2 < n):flr;
		next(dr) = u & (b27 = man & b17 = bx) & (b07 = target) & (2-2 > 0):flr;
		next(dr) = d & (b27 = man & b37 = bx) & (b47 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b27 = man & b26 = bxtrg) & (b25 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b27 = man & b28 = bxtrg) & (b29 =flr) & (7+2 < n):flr;
		next(dr) = u & (b27 = man & b17 = bxtrg) & (b07 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b27 = man & b37 = bxtrg) & (b47 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b27 = man & b26 = bxtrg) & (b25 = target) & (7-2 > 0):flr;
		next(dr) = r & (b27 = man & b28 = bxtrg) & (b29 = target) & (7+2 < n):flr;
		next(dr) = u & (b27 = man & b17 = bxtrg) & (b07 = target) & (2-2 > 0):flr;
		next(dr) = d & (b27 = man & b37 = bxtrg) & (b47 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b27 = mantrg & b26 = bx) & (b25 =flr) & (7-2 > 0): target;
		next(dr) = r & (b27 = mantrg & b28 = bx) & (b29 =flr) & (7+2 < n): target;
		next(dr) = u & (b27 = mantrg & b17 = bx) & (b07 =flr) & (2-2 > 0): target;
		next(dr) = d & (b27 = mantrg & b37 = bx) & (b47 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b27 = mantrg & b26 = bx) & (b25 = target) & (7-2 > 0): target;
		next(dr) = r & (b27 = mantrg & b28 = bx) & (b29 = target) & (7+2 < n): target;
		next(dr) = u & (b27 = mantrg & b17 = bx) & (b07 = target) & (2-2 > 0): target;
		next(dr) = d & (b27 = mantrg & b37 = bx) & (b47 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b27 = mantrg & b26 = bxtrg) & (b25 =flr) & (7-2 > 0): target;
		next(dr) = r & (b27 = mantrg & b28 = bxtrg) & (b29 =flr) & (7+2 < n): target;
		next(dr) = u & (b27 = mantrg & b17 = bxtrg) & (b07 =flr) & (2-2 > 0): target;
		next(dr) = d & (b27 = mantrg & b37 = bxtrg) & (b47 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b27 = mantrg & b26 = bxtrg) & (b25 = target) & (7-2 > 0): target;
		next(dr) = r & (b27 = mantrg & b28 = bxtrg) & (b29 = target) & (7+2 < n): target;
		next(dr) = u & (b27 = mantrg & b17 = bxtrg) & (b07 = target) & (2-2 > 0): target;
		next(dr) = d & (b27 = mantrg & b37 = bxtrg) & (b47 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b27 = flr & (b26 = man | b26 = mantrg)) : man;
        next(dr) = l & (b27 = flr & (b28 = man | b28 = mantrg)): man;
        next(dr) = d & (b27 = flr & (b17 = man | b17 = mantrg)): man;
        next(dr) = u & (b27 = flr & (b37 = man | b37 = mantrg)): man;

    --box to floor
        next(dr) = r & (b27 = flr & (b26 = bx | b26 = bxtrg)) & (b25 = man | b25 = mantrg): bx;
        next(dr) = l & (b27 = flr & (b28 = bx | b28 = bxtrg)) & (b29 = man | b29 = mantrg): bx;
        next(dr) = d & (b27 = flr & (b17 = bx | b17 = bxtrg)) & (b07 = man | b07 = mantrg): bx;
        next(dr) = u & (b27 = flr & (b37 = bx | b37 = bxtrg)) & (b47 = man | b47 = mantrg): bx;

    --man to target
        next(dr) = r & (b27 = target & (b26 = man | b26 = mantrg)): mantrg;
        next(dr) = l & (b27 = target & (b28 = man | b28 = mantrg)): mantrg;
        next(dr) = d & (b27 = target & (b17 = man | b17 = mantrg)): mantrg;
        next(dr) = u & (b27 = target & (b37 = man | b37 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b27 = target & (b26 = bx | b26 = bxtrg)) & (b25 = man | b25 = mantrg): bxtrg;
        next(dr) = l & (b27 = target & (b28 = bx | b28 = bxtrg)) & (b29 = man | b29 = mantrg): bxtrg;
        next(dr) = d & (b27 = target & (b17 = bx | b17 = bxtrg)) & (b07 = man | b07 = mantrg): bxtrg;
        next(dr) = u & (b27 = target & (b37 = bx | b37 = bxtrg)) & (b47 = man | b47 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b27 = bx & (b26 = man | b26 = mantrg)) & (b28 = flr | b28 = target): man;
        next(dr) = l & (b27 = bx & (b28 = man | b28 = mantrg)) & (b26 = flr | b26 = target): man;
        next(dr) = d & (b27 = bx & (b17 = man | b17 = mantrg)) & (b37 = flr | b37 = target): man;
        next(dr) = u & (b27 = bx & (b37 = man | b37 = mantrg)) & (b17 = flr | b17 = target): man;

    --man to box on target
        next(dr) = r & (b27 = bxtrg & (b26 = man | b26 = mantrg)) & (b28 = flr | b28 = target): mantrg;
        next(dr) = l & (b27 = bxtrg & (b28 = man | b28 = mantrg)) & (b26 = flr | b26 = target): mantrg;
        next(dr) = d & (b27 = bxtrg & (b17 = man | b17 = mantrg)) & (b37 = flr | b37 = target): mantrg;
        next(dr) = u & (b27 = bxtrg & (b37 = man | b37 = mantrg)) & (b17 = flr | b17 = target): mantrg;

    TRUE: b27;
esac;
next(b28) := case
	--floor to floor
		next(dr) = l & (b28 = man & b27 =flr):flr;
		next(dr) = r & (b28 = man & b29 =flr):flr;
		next(dr) = u & (b28 = man & b18 =flr):flr;
		next(dr) = d & (b28 = man & b38 =flr):flr;


	--target to floor
		next(dr) = l & (b28 = mantrg & b27 =flr): target;
		next(dr) = r & (b28 = mantrg & b29 =flr): target;
		next(dr) = u & (b28 = mantrg & b18 =flr): target;
		next(dr) = d & (b28 = mantrg & b38 =flr): target;

	--floor to target
		next(dr) = l & (b28 = man & b27 = target):flr;
		next(dr) = r & (b28 = man & b29 = target):flr;
		next(dr) = u & (b28 = man & b18 = target):flr;
		next(dr) = d & (b28 = man & b38 = target):flr;

	--target to target
		next(dr) = l & (b28 = mantrg & b27 = target): target;
		next(dr) = r & (b28 = mantrg & b29 = target): target;
		next(dr) = u & (b28 = mantrg & b18 = target): target;
		next(dr) = d & (b28 = mantrg & b38 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b28 = man & b27 = bx) & (b26 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b28 = man & b29 = bx) & (b210 =flr) & (8+2 < n):flr;
		next(dr) = u & (b28 = man & b18 = bx) & (b08 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b28 = man & b38 = bx) & (b48 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b28 = man & b27 = bx) & (b26 = target) & (8-2 > 0):flr;
		next(dr) = r & (b28 = man & b29 = bx) & (b210 = target) & (8+2 < n):flr;
		next(dr) = u & (b28 = man & b18 = bx) & (b08 = target) & (2-2 > 0):flr;
		next(dr) = d & (b28 = man & b38 = bx) & (b48 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b28 = man & b27 = bxtrg) & (b26 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b28 = man & b29 = bxtrg) & (b210 =flr) & (8+2 < n):flr;
		next(dr) = u & (b28 = man & b18 = bxtrg) & (b08 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b28 = man & b38 = bxtrg) & (b48 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b28 = man & b27 = bxtrg) & (b26 = target) & (8-2 > 0):flr;
		next(dr) = r & (b28 = man & b29 = bxtrg) & (b210 = target) & (8+2 < n):flr;
		next(dr) = u & (b28 = man & b18 = bxtrg) & (b08 = target) & (2-2 > 0):flr;
		next(dr) = d & (b28 = man & b38 = bxtrg) & (b48 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b28 = mantrg & b27 = bx) & (b26 =flr) & (8-2 > 0): target;
		next(dr) = r & (b28 = mantrg & b29 = bx) & (b210 =flr) & (8+2 < n): target;
		next(dr) = u & (b28 = mantrg & b18 = bx) & (b08 =flr) & (2-2 > 0): target;
		next(dr) = d & (b28 = mantrg & b38 = bx) & (b48 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b28 = mantrg & b27 = bx) & (b26 = target) & (8-2 > 0): target;
		next(dr) = r & (b28 = mantrg & b29 = bx) & (b210 = target) & (8+2 < n): target;
		next(dr) = u & (b28 = mantrg & b18 = bx) & (b08 = target) & (2-2 > 0): target;
		next(dr) = d & (b28 = mantrg & b38 = bx) & (b48 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b28 = mantrg & b27 = bxtrg) & (b26 =flr) & (8-2 > 0): target;
		next(dr) = r & (b28 = mantrg & b29 = bxtrg) & (b210 =flr) & (8+2 < n): target;
		next(dr) = u & (b28 = mantrg & b18 = bxtrg) & (b08 =flr) & (2-2 > 0): target;
		next(dr) = d & (b28 = mantrg & b38 = bxtrg) & (b48 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b28 = mantrg & b27 = bxtrg) & (b26 = target) & (8-2 > 0): target;
		next(dr) = r & (b28 = mantrg & b29 = bxtrg) & (b210 = target) & (8+2 < n): target;
		next(dr) = u & (b28 = mantrg & b18 = bxtrg) & (b08 = target) & (2-2 > 0): target;
		next(dr) = d & (b28 = mantrg & b38 = bxtrg) & (b48 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b28 = flr & (b27 = man | b27 = mantrg)) : man;
        next(dr) = l & (b28 = flr & (b29 = man | b29 = mantrg)): man;
        next(dr) = d & (b28 = flr & (b18 = man | b18 = mantrg)): man;
        next(dr) = u & (b28 = flr & (b38 = man | b38 = mantrg)): man;

    --box to floor
        next(dr) = r & (b28 = flr & (b27 = bx | b27 = bxtrg)) & (b26 = man | b26 = mantrg): bx;
        next(dr) = l & (b28 = flr & (b29 = bx | b29 = bxtrg)) & (b210 = man | b210 = mantrg): bx;
        next(dr) = d & (b28 = flr & (b18 = bx | b18 = bxtrg)) & (b08 = man | b08 = mantrg): bx;
        next(dr) = u & (b28 = flr & (b38 = bx | b38 = bxtrg)) & (b48 = man | b48 = mantrg): bx;

    --man to target
        next(dr) = r & (b28 = target & (b27 = man | b27 = mantrg)): mantrg;
        next(dr) = l & (b28 = target & (b29 = man | b29 = mantrg)): mantrg;
        next(dr) = d & (b28 = target & (b18 = man | b18 = mantrg)): mantrg;
        next(dr) = u & (b28 = target & (b38 = man | b38 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b28 = target & (b27 = bx | b27 = bxtrg)) & (b26 = man | b26 = mantrg): bxtrg;
        next(dr) = l & (b28 = target & (b29 = bx | b29 = bxtrg)) & (b210 = man | b210 = mantrg): bxtrg;
        next(dr) = d & (b28 = target & (b18 = bx | b18 = bxtrg)) & (b08 = man | b08 = mantrg): bxtrg;
        next(dr) = u & (b28 = target & (b38 = bx | b38 = bxtrg)) & (b48 = man | b48 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b28 = bx & (b27 = man | b27 = mantrg)) & (b29 = flr | b29 = target): man;
        next(dr) = l & (b28 = bx & (b29 = man | b29 = mantrg)) & (b27 = flr | b27 = target): man;
        next(dr) = d & (b28 = bx & (b18 = man | b18 = mantrg)) & (b38 = flr | b38 = target): man;
        next(dr) = u & (b28 = bx & (b38 = man | b38 = mantrg)) & (b18 = flr | b18 = target): man;

    --man to box on target
        next(dr) = r & (b28 = bxtrg & (b27 = man | b27 = mantrg)) & (b29 = flr | b29 = target): mantrg;
        next(dr) = l & (b28 = bxtrg & (b29 = man | b29 = mantrg)) & (b27 = flr | b27 = target): mantrg;
        next(dr) = d & (b28 = bxtrg & (b18 = man | b18 = mantrg)) & (b38 = flr | b38 = target): mantrg;
        next(dr) = u & (b28 = bxtrg & (b38 = man | b38 = mantrg)) & (b18 = flr | b18 = target): mantrg;

    TRUE: b28;
esac;
next(b29) := case
	--floor to floor
		next(dr) = l & (b29 = man & b28 =flr):flr;
		next(dr) = r & (b29 = man & b210 =flr):flr;
		next(dr) = u & (b29 = man & b19 =flr):flr;
		next(dr) = d & (b29 = man & b39 =flr):flr;


	--target to floor
		next(dr) = l & (b29 = mantrg & b28 =flr): target;
		next(dr) = r & (b29 = mantrg & b210 =flr): target;
		next(dr) = u & (b29 = mantrg & b19 =flr): target;
		next(dr) = d & (b29 = mantrg & b39 =flr): target;

	--floor to target
		next(dr) = l & (b29 = man & b28 = target):flr;
		next(dr) = r & (b29 = man & b210 = target):flr;
		next(dr) = u & (b29 = man & b19 = target):flr;
		next(dr) = d & (b29 = man & b39 = target):flr;

	--target to target
		next(dr) = l & (b29 = mantrg & b28 = target): target;
		next(dr) = r & (b29 = mantrg & b210 = target): target;
		next(dr) = u & (b29 = mantrg & b19 = target): target;
		next(dr) = d & (b29 = mantrg & b39 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b29 = man & b28 = bx) & (b27 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b29 = man & b19 = bx) & (b09 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b29 = man & b39 = bx) & (b49 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b29 = man & b28 = bx) & (b27 = target) & (9-2 > 0):flr;
		next(dr) = u & (b29 = man & b19 = bx) & (b09 = target) & (2-2 > 0):flr;
		next(dr) = d & (b29 = man & b39 = bx) & (b49 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b29 = man & b28 = bxtrg) & (b27 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b29 = man & b19 = bxtrg) & (b09 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b29 = man & b39 = bxtrg) & (b49 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b29 = man & b28 = bxtrg) & (b27 = target) & (9-2 > 0):flr;
		next(dr) = u & (b29 = man & b19 = bxtrg) & (b09 = target) & (2-2 > 0):flr;
		next(dr) = d & (b29 = man & b39 = bxtrg) & (b49 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b29 = mantrg & b28 = bx) & (b27 =flr) & (9-2 > 0): target;
		next(dr) = u & (b29 = mantrg & b19 = bx) & (b09 =flr) & (2-2 > 0): target;
		next(dr) = d & (b29 = mantrg & b39 = bx) & (b49 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b29 = mantrg & b28 = bx) & (b27 = target) & (9-2 > 0): target;
		next(dr) = u & (b29 = mantrg & b19 = bx) & (b09 = target) & (2-2 > 0): target;
		next(dr) = d & (b29 = mantrg & b39 = bx) & (b49 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b29 = mantrg & b28 = bxtrg) & (b27 =flr) & (9-2 > 0): target;
		next(dr) = u & (b29 = mantrg & b19 = bxtrg) & (b09 =flr) & (2-2 > 0): target;
		next(dr) = d & (b29 = mantrg & b39 = bxtrg) & (b49 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b29 = mantrg & b28 = bxtrg) & (b27 = target) & (9-2 > 0): target;
		next(dr) = u & (b29 = mantrg & b19 = bxtrg) & (b09 = target) & (2-2 > 0): target;
		next(dr) = d & (b29 = mantrg & b39 = bxtrg) & (b49 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b29 = flr & (b28 = man | b28 = mantrg)) : man;
        next(dr) = l & (b29 = flr & (b210 = man | b210 = mantrg)): man;
        next(dr) = d & (b29 = flr & (b19 = man | b19 = mantrg)): man;
        next(dr) = u & (b29 = flr & (b39 = man | b39 = mantrg)): man;

    --box to floor
        next(dr) = r & (b29 = flr & (b28 = bx | b28 = bxtrg)) & (b27 = man | b27 = mantrg): bx;
        next(dr) = d & (b29 = flr & (b19 = bx | b19 = bxtrg)) & (b09 = man | b09 = mantrg): bx;
        next(dr) = u & (b29 = flr & (b39 = bx | b39 = bxtrg)) & (b49 = man | b49 = mantrg): bx;

    --man to target
        next(dr) = r & (b29 = target & (b28 = man | b28 = mantrg)): mantrg;
        next(dr) = l & (b29 = target & (b210 = man | b210 = mantrg)): mantrg;
        next(dr) = d & (b29 = target & (b19 = man | b19 = mantrg)): mantrg;
        next(dr) = u & (b29 = target & (b39 = man | b39 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b29 = target & (b28 = bx | b28 = bxtrg)) & (b27 = man | b27 = mantrg): bxtrg;
        next(dr) = d & (b29 = target & (b19 = bx | b19 = bxtrg)) & (b09 = man | b09 = mantrg): bxtrg;
        next(dr) = u & (b29 = target & (b39 = bx | b39 = bxtrg)) & (b49 = man | b49 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b29 = bx & (b28 = man | b28 = mantrg)) & (b210 = flr | b210 = target): man;
        next(dr) = l & (b29 = bx & (b210 = man | b210 = mantrg)) & (b28 = flr | b28 = target): man;
        next(dr) = d & (b29 = bx & (b19 = man | b19 = mantrg)) & (b39 = flr | b39 = target): man;
        next(dr) = u & (b29 = bx & (b39 = man | b39 = mantrg)) & (b19 = flr | b19 = target): man;

    --man to box on target
        next(dr) = r & (b29 = bxtrg & (b28 = man | b28 = mantrg)) & (b210 = flr | b210 = target): mantrg;
        next(dr) = l & (b29 = bxtrg & (b210 = man | b210 = mantrg)) & (b28 = flr | b28 = target): mantrg;
        next(dr) = d & (b29 = bxtrg & (b19 = man | b19 = mantrg)) & (b39 = flr | b39 = target): mantrg;
        next(dr) = u & (b29 = bxtrg & (b39 = man | b39 = mantrg)) & (b19 = flr | b19 = target): mantrg;

    TRUE: b29;
esac;
next(b210) := case
	--floor to floor
		next(dr) = l & (b210 = man & b29 =flr):flr;
		next(dr) = u & (b210 = man & b110 =flr):flr;
		next(dr) = d & (b210 = man & b310 =flr):flr;


	--target to floor
		next(dr) = l & (b210 = mantrg & b29 =flr): target;
		next(dr) = u & (b210 = mantrg & b110 =flr): target;
		next(dr) = d & (b210 = mantrg & b310 =flr): target;

	--floor to target
		next(dr) = l & (b210 = man & b29 = target):flr;
		next(dr) = u & (b210 = man & b110 = target):flr;
		next(dr) = d & (b210 = man & b310 = target):flr;

	--target to target
		next(dr) = l & (b210 = mantrg & b29 = target): target;
		next(dr) = u & (b210 = mantrg & b110 = target): target;
		next(dr) = d & (b210 = mantrg & b310 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b210 = man & b29 = bx) & (b28 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b210 = man & b110 = bx) & (b010 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b210 = man & b310 = bx) & (b410 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b210 = man & b29 = bx) & (b28 = target) & (10-2 > 0):flr;
		next(dr) = u & (b210 = man & b110 = bx) & (b010 = target) & (2-2 > 0):flr;
		next(dr) = d & (b210 = man & b310 = bx) & (b410 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b210 = man & b29 = bxtrg) & (b28 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b210 = man & b110 = bxtrg) & (b010 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b210 = man & b310 = bxtrg) & (b410 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b210 = man & b29 = bxtrg) & (b28 = target) & (10-2 > 0):flr;
		next(dr) = u & (b210 = man & b110 = bxtrg) & (b010 = target) & (2-2 > 0):flr;
		next(dr) = d & (b210 = man & b310 = bxtrg) & (b410 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b210 = mantrg & b29 = bx) & (b28 =flr) & (10-2 > 0): target;
		next(dr) = u & (b210 = mantrg & b110 = bx) & (b010 =flr) & (2-2 > 0): target;
		next(dr) = d & (b210 = mantrg & b310 = bx) & (b410 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b210 = mantrg & b29 = bx) & (b28 = target) & (10-2 > 0): target;
		next(dr) = u & (b210 = mantrg & b110 = bx) & (b010 = target) & (2-2 > 0): target;
		next(dr) = d & (b210 = mantrg & b310 = bx) & (b410 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b210 = mantrg & b29 = bxtrg) & (b28 =flr) & (10-2 > 0): target;
		next(dr) = u & (b210 = mantrg & b110 = bxtrg) & (b010 =flr) & (2-2 > 0): target;
		next(dr) = d & (b210 = mantrg & b310 = bxtrg) & (b410 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b210 = mantrg & b29 = bxtrg) & (b28 = target) & (10-2 > 0): target;
		next(dr) = u & (b210 = mantrg & b110 = bxtrg) & (b010 = target) & (2-2 > 0): target;
		next(dr) = d & (b210 = mantrg & b310 = bxtrg) & (b410 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b210 = flr & (b29 = man | b29 = mantrg)) : man;
        next(dr) = d & (b210 = flr & (b110 = man | b110 = mantrg)): man;
        next(dr) = u & (b210 = flr & (b310 = man | b310 = mantrg)): man;

    --box to floor
        next(dr) = r & (b210 = flr & (b29 = bx | b29 = bxtrg)) & (b28 = man | b28 = mantrg): bx;
        next(dr) = d & (b210 = flr & (b110 = bx | b110 = bxtrg)) & (b010 = man | b010 = mantrg): bx;
        next(dr) = u & (b210 = flr & (b310 = bx | b310 = bxtrg)) & (b410 = man | b410 = mantrg): bx;

    --man to target
        next(dr) = r & (b210 = target & (b29 = man | b29 = mantrg)): mantrg;
        next(dr) = d & (b210 = target & (b110 = man | b110 = mantrg)): mantrg;
        next(dr) = u & (b210 = target & (b310 = man | b310 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b210 = target & (b29 = bx | b29 = bxtrg)) & (b28 = man | b28 = mantrg): bxtrg;
        next(dr) = d & (b210 = target & (b110 = bx | b110 = bxtrg)) & (b010 = man | b010 = mantrg): bxtrg;
        next(dr) = u & (b210 = target & (b310 = bx | b310 = bxtrg)) & (b410 = man | b410 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b210 = bx & (b110 = man | b110 = mantrg)) & (b310 = flr | b310 = target): man;
        next(dr) = u & (b210 = bx & (b310 = man | b310 = mantrg)) & (b110 = flr | b110 = target): man;

    --man to box on target
        next(dr) = d & (b210 = bxtrg & (b110 = man | b110 = mantrg)) & (b310 = flr | b310 = target): mantrg;
        next(dr) = u & (b210 = bxtrg & (b310 = man | b310 = mantrg)) & (b110 = flr | b110 = target): mantrg;

    TRUE: b210;
esac;
next(b30) := case
	--floor to floor
		next(dr) = r & (b30 = man & b31 =flr):flr;
		next(dr) = u & (b30 = man & b20 =flr):flr;
		next(dr) = d & (b30 = man & b40 =flr):flr;


	--target to floor
		next(dr) = r & (b30 = mantrg & b31 =flr): target;
		next(dr) = u & (b30 = mantrg & b20 =flr): target;
		next(dr) = d & (b30 = mantrg & b40 =flr): target;

	--floor to target
		next(dr) = r & (b30 = man & b31 = target):flr;
		next(dr) = u & (b30 = man & b20 = target):flr;
		next(dr) = d & (b30 = man & b40 = target):flr;

	--target to target
		next(dr) = r & (b30 = mantrg & b31 = target): target;
		next(dr) = u & (b30 = mantrg & b20 = target): target;
		next(dr) = d & (b30 = mantrg & b40 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b30 = man & b31 = bx) & (b32 =flr) & (0+2 < n):flr;
		next(dr) = u & (b30 = man & b20 = bx) & (b10 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b30 = man & b40 = bx) & (b50 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b30 = man & b31 = bx) & (b32 = target) & (0+2 < n):flr;
		next(dr) = u & (b30 = man & b20 = bx) & (b10 = target) & (3-2 > 0):flr;
		next(dr) = d & (b30 = man & b40 = bx) & (b50 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b30 = man & b31 = bxtrg) & (b32 =flr) & (0+2 < n):flr;
		next(dr) = u & (b30 = man & b20 = bxtrg) & (b10 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b30 = man & b40 = bxtrg) & (b50 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b30 = man & b31 = bxtrg) & (b32 = target) & (0+2 < n):flr;
		next(dr) = u & (b30 = man & b20 = bxtrg) & (b10 = target) & (3-2 > 0):flr;
		next(dr) = d & (b30 = man & b40 = bxtrg) & (b50 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b30 = mantrg & b31 = bx) & (b32 =flr) & (0+2 < n): target;
		next(dr) = u & (b30 = mantrg & b20 = bx) & (b10 =flr) & (3-2 > 0): target;
		next(dr) = d & (b30 = mantrg & b40 = bx) & (b50 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b30 = mantrg & b31 = bx) & (b32 = target) & (0+2 < n): target;
		next(dr) = u & (b30 = mantrg & b20 = bx) & (b10 = target) & (3-2 > 0): target;
		next(dr) = d & (b30 = mantrg & b40 = bx) & (b50 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b30 = mantrg & b31 = bxtrg) & (b32 =flr) & (0+2 < n): target;
		next(dr) = u & (b30 = mantrg & b20 = bxtrg) & (b10 =flr) & (3-2 > 0): target;
		next(dr) = d & (b30 = mantrg & b40 = bxtrg) & (b50 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b30 = mantrg & b31 = bxtrg) & (b32 = target) & (0+2 < n): target;
		next(dr) = u & (b30 = mantrg & b20 = bxtrg) & (b10 = target) & (3-2 > 0): target;
		next(dr) = d & (b30 = mantrg & b40 = bxtrg) & (b50 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = l & (b30 = flr & (b31 = man | b31 = mantrg)): man;
        next(dr) = d & (b30 = flr & (b20 = man | b20 = mantrg)): man;
        next(dr) = u & (b30 = flr & (b40 = man | b40 = mantrg)): man;

    --box to floor
        next(dr) = l & (b30 = flr & (b31 = bx | b31 = bxtrg)) & (b32 = man | b32 = mantrg): bx;
        next(dr) = d & (b30 = flr & (b20 = bx | b20 = bxtrg)) & (b10 = man | b10 = mantrg): bx;
        next(dr) = u & (b30 = flr & (b40 = bx | b40 = bxtrg)) & (b50 = man | b50 = mantrg): bx;

    --man to target
        next(dr) = l & (b30 = target & (b31 = man | b31 = mantrg)): mantrg;
        next(dr) = d & (b30 = target & (b20 = man | b20 = mantrg)): mantrg;
        next(dr) = u & (b30 = target & (b40 = man | b40 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b30 = target & (b31 = bx | b31 = bxtrg)) & (b32 = man | b32 = mantrg): bxtrg;
        next(dr) = d & (b30 = target & (b20 = bx | b20 = bxtrg)) & (b10 = man | b10 = mantrg): bxtrg;
        next(dr) = u & (b30 = target & (b40 = bx | b40 = bxtrg)) & (b50 = man | b50 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b30 = bx & (b20 = man | b20 = mantrg)) & (b40 = flr | b40 = target): man;
        next(dr) = u & (b30 = bx & (b40 = man | b40 = mantrg)) & (b20 = flr | b20 = target): man;

    --man to box on target
        next(dr) = d & (b30 = bxtrg & (b20 = man | b20 = mantrg)) & (b40 = flr | b40 = target): mantrg;
        next(dr) = u & (b30 = bxtrg & (b40 = man | b40 = mantrg)) & (b20 = flr | b20 = target): mantrg;

    TRUE: b30;
esac;
next(b31) := case
	--floor to floor
		next(dr) = l & (b31 = man & b30 =flr):flr;
		next(dr) = r & (b31 = man & b32 =flr):flr;
		next(dr) = u & (b31 = man & b21 =flr):flr;
		next(dr) = d & (b31 = man & b41 =flr):flr;


	--target to floor
		next(dr) = l & (b31 = mantrg & b30 =flr): target;
		next(dr) = r & (b31 = mantrg & b32 =flr): target;
		next(dr) = u & (b31 = mantrg & b21 =flr): target;
		next(dr) = d & (b31 = mantrg & b41 =flr): target;

	--floor to target
		next(dr) = l & (b31 = man & b30 = target):flr;
		next(dr) = r & (b31 = man & b32 = target):flr;
		next(dr) = u & (b31 = man & b21 = target):flr;
		next(dr) = d & (b31 = man & b41 = target):flr;

	--target to target
		next(dr) = l & (b31 = mantrg & b30 = target): target;
		next(dr) = r & (b31 = mantrg & b32 = target): target;
		next(dr) = u & (b31 = mantrg & b21 = target): target;
		next(dr) = d & (b31 = mantrg & b41 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b31 = man & b32 = bx) & (b33 =flr) & (1+2 < n):flr;
		next(dr) = u & (b31 = man & b21 = bx) & (b11 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b31 = man & b41 = bx) & (b51 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b31 = man & b32 = bx) & (b33 = target) & (1+2 < n):flr;
		next(dr) = u & (b31 = man & b21 = bx) & (b11 = target) & (3-2 > 0):flr;
		next(dr) = d & (b31 = man & b41 = bx) & (b51 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b31 = man & b32 = bxtrg) & (b33 =flr) & (1+2 < n):flr;
		next(dr) = u & (b31 = man & b21 = bxtrg) & (b11 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b31 = man & b41 = bxtrg) & (b51 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b31 = man & b32 = bxtrg) & (b33 = target) & (1+2 < n):flr;
		next(dr) = u & (b31 = man & b21 = bxtrg) & (b11 = target) & (3-2 > 0):flr;
		next(dr) = d & (b31 = man & b41 = bxtrg) & (b51 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b31 = mantrg & b32 = bx) & (b33 =flr) & (1+2 < n): target;
		next(dr) = u & (b31 = mantrg & b21 = bx) & (b11 =flr) & (3-2 > 0): target;
		next(dr) = d & (b31 = mantrg & b41 = bx) & (b51 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b31 = mantrg & b32 = bx) & (b33 = target) & (1+2 < n): target;
		next(dr) = u & (b31 = mantrg & b21 = bx) & (b11 = target) & (3-2 > 0): target;
		next(dr) = d & (b31 = mantrg & b41 = bx) & (b51 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b31 = mantrg & b32 = bxtrg) & (b33 =flr) & (1+2 < n): target;
		next(dr) = u & (b31 = mantrg & b21 = bxtrg) & (b11 =flr) & (3-2 > 0): target;
		next(dr) = d & (b31 = mantrg & b41 = bxtrg) & (b51 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b31 = mantrg & b32 = bxtrg) & (b33 = target) & (1+2 < n): target;
		next(dr) = u & (b31 = mantrg & b21 = bxtrg) & (b11 = target) & (3-2 > 0): target;
		next(dr) = d & (b31 = mantrg & b41 = bxtrg) & (b51 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b31 = flr & (b30 = man | b30 = mantrg)) : man;
        next(dr) = l & (b31 = flr & (b32 = man | b32 = mantrg)): man;
        next(dr) = d & (b31 = flr & (b21 = man | b21 = mantrg)): man;
        next(dr) = u & (b31 = flr & (b41 = man | b41 = mantrg)): man;

    --box to floor
        next(dr) = l & (b31 = flr & (b32 = bx | b32 = bxtrg)) & (b33 = man | b33 = mantrg): bx;
        next(dr) = d & (b31 = flr & (b21 = bx | b21 = bxtrg)) & (b11 = man | b11 = mantrg): bx;
        next(dr) = u & (b31 = flr & (b41 = bx | b41 = bxtrg)) & (b51 = man | b51 = mantrg): bx;

    --man to target
        next(dr) = r & (b31 = target & (b30 = man | b30 = mantrg)): mantrg;
        next(dr) = l & (b31 = target & (b32 = man | b32 = mantrg)): mantrg;
        next(dr) = d & (b31 = target & (b21 = man | b21 = mantrg)): mantrg;
        next(dr) = u & (b31 = target & (b41 = man | b41 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b31 = target & (b32 = bx | b32 = bxtrg)) & (b33 = man | b33 = mantrg): bxtrg;
        next(dr) = d & (b31 = target & (b21 = bx | b21 = bxtrg)) & (b11 = man | b11 = mantrg): bxtrg;
        next(dr) = u & (b31 = target & (b41 = bx | b41 = bxtrg)) & (b51 = man | b51 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b31 = bx & (b30 = man | b30 = mantrg)) & (b32 = flr | b32 = target): man;
        next(dr) = l & (b31 = bx & (b32 = man | b32 = mantrg)) & (b30 = flr | b30 = target): man;
        next(dr) = d & (b31 = bx & (b21 = man | b21 = mantrg)) & (b41 = flr | b41 = target): man;
        next(dr) = u & (b31 = bx & (b41 = man | b41 = mantrg)) & (b21 = flr | b21 = target): man;

    --man to box on target
        next(dr) = r & (b31 = bxtrg & (b30 = man | b30 = mantrg)) & (b32 = flr | b32 = target): mantrg;
        next(dr) = l & (b31 = bxtrg & (b32 = man | b32 = mantrg)) & (b30 = flr | b30 = target): mantrg;
        next(dr) = d & (b31 = bxtrg & (b21 = man | b21 = mantrg)) & (b41 = flr | b41 = target): mantrg;
        next(dr) = u & (b31 = bxtrg & (b41 = man | b41 = mantrg)) & (b21 = flr | b21 = target): mantrg;

    TRUE: b31;
esac;
next(b32) := case
	--floor to floor
		next(dr) = l & (b32 = man & b31 =flr):flr;
		next(dr) = r & (b32 = man & b33 =flr):flr;
		next(dr) = u & (b32 = man & b22 =flr):flr;
		next(dr) = d & (b32 = man & b42 =flr):flr;


	--target to floor
		next(dr) = l & (b32 = mantrg & b31 =flr): target;
		next(dr) = r & (b32 = mantrg & b33 =flr): target;
		next(dr) = u & (b32 = mantrg & b22 =flr): target;
		next(dr) = d & (b32 = mantrg & b42 =flr): target;

	--floor to target
		next(dr) = l & (b32 = man & b31 = target):flr;
		next(dr) = r & (b32 = man & b33 = target):flr;
		next(dr) = u & (b32 = man & b22 = target):flr;
		next(dr) = d & (b32 = man & b42 = target):flr;

	--target to target
		next(dr) = l & (b32 = mantrg & b31 = target): target;
		next(dr) = r & (b32 = mantrg & b33 = target): target;
		next(dr) = u & (b32 = mantrg & b22 = target): target;
		next(dr) = d & (b32 = mantrg & b42 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b32 = man & b31 = bx) & (b30 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b32 = man & b33 = bx) & (b34 =flr) & (2+2 < n):flr;
		next(dr) = u & (b32 = man & b22 = bx) & (b12 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b32 = man & b42 = bx) & (b52 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b32 = man & b31 = bx) & (b30 = target) & (2-2 > 0):flr;
		next(dr) = r & (b32 = man & b33 = bx) & (b34 = target) & (2+2 < n):flr;
		next(dr) = u & (b32 = man & b22 = bx) & (b12 = target) & (3-2 > 0):flr;
		next(dr) = d & (b32 = man & b42 = bx) & (b52 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b32 = man & b31 = bxtrg) & (b30 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b32 = man & b33 = bxtrg) & (b34 =flr) & (2+2 < n):flr;
		next(dr) = u & (b32 = man & b22 = bxtrg) & (b12 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b32 = man & b42 = bxtrg) & (b52 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b32 = man & b31 = bxtrg) & (b30 = target) & (2-2 > 0):flr;
		next(dr) = r & (b32 = man & b33 = bxtrg) & (b34 = target) & (2+2 < n):flr;
		next(dr) = u & (b32 = man & b22 = bxtrg) & (b12 = target) & (3-2 > 0):flr;
		next(dr) = d & (b32 = man & b42 = bxtrg) & (b52 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b32 = mantrg & b31 = bx) & (b30 =flr) & (2-2 > 0): target;
		next(dr) = r & (b32 = mantrg & b33 = bx) & (b34 =flr) & (2+2 < n): target;
		next(dr) = u & (b32 = mantrg & b22 = bx) & (b12 =flr) & (3-2 > 0): target;
		next(dr) = d & (b32 = mantrg & b42 = bx) & (b52 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b32 = mantrg & b31 = bx) & (b30 = target) & (2-2 > 0): target;
		next(dr) = r & (b32 = mantrg & b33 = bx) & (b34 = target) & (2+2 < n): target;
		next(dr) = u & (b32 = mantrg & b22 = bx) & (b12 = target) & (3-2 > 0): target;
		next(dr) = d & (b32 = mantrg & b42 = bx) & (b52 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b32 = mantrg & b31 = bxtrg) & (b30 =flr) & (2-2 > 0): target;
		next(dr) = r & (b32 = mantrg & b33 = bxtrg) & (b34 =flr) & (2+2 < n): target;
		next(dr) = u & (b32 = mantrg & b22 = bxtrg) & (b12 =flr) & (3-2 > 0): target;
		next(dr) = d & (b32 = mantrg & b42 = bxtrg) & (b52 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b32 = mantrg & b31 = bxtrg) & (b30 = target) & (2-2 > 0): target;
		next(dr) = r & (b32 = mantrg & b33 = bxtrg) & (b34 = target) & (2+2 < n): target;
		next(dr) = u & (b32 = mantrg & b22 = bxtrg) & (b12 = target) & (3-2 > 0): target;
		next(dr) = d & (b32 = mantrg & b42 = bxtrg) & (b52 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b32 = flr & (b31 = man | b31 = mantrg)) : man;
        next(dr) = l & (b32 = flr & (b33 = man | b33 = mantrg)): man;
        next(dr) = d & (b32 = flr & (b22 = man | b22 = mantrg)): man;
        next(dr) = u & (b32 = flr & (b42 = man | b42 = mantrg)): man;

    --box to floor
        next(dr) = r & (b32 = flr & (b31 = bx | b31 = bxtrg)) & (b30 = man | b30 = mantrg): bx;
        next(dr) = l & (b32 = flr & (b33 = bx | b33 = bxtrg)) & (b34 = man | b34 = mantrg): bx;
        next(dr) = d & (b32 = flr & (b22 = bx | b22 = bxtrg)) & (b12 = man | b12 = mantrg): bx;
        next(dr) = u & (b32 = flr & (b42 = bx | b42 = bxtrg)) & (b52 = man | b52 = mantrg): bx;

    --man to target
        next(dr) = r & (b32 = target & (b31 = man | b31 = mantrg)): mantrg;
        next(dr) = l & (b32 = target & (b33 = man | b33 = mantrg)): mantrg;
        next(dr) = d & (b32 = target & (b22 = man | b22 = mantrg)): mantrg;
        next(dr) = u & (b32 = target & (b42 = man | b42 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b32 = target & (b31 = bx | b31 = bxtrg)) & (b30 = man | b30 = mantrg): bxtrg;
        next(dr) = l & (b32 = target & (b33 = bx | b33 = bxtrg)) & (b34 = man | b34 = mantrg): bxtrg;
        next(dr) = d & (b32 = target & (b22 = bx | b22 = bxtrg)) & (b12 = man | b12 = mantrg): bxtrg;
        next(dr) = u & (b32 = target & (b42 = bx | b42 = bxtrg)) & (b52 = man | b52 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b32 = bx & (b31 = man | b31 = mantrg)) & (b33 = flr | b33 = target): man;
        next(dr) = l & (b32 = bx & (b33 = man | b33 = mantrg)) & (b31 = flr | b31 = target): man;
        next(dr) = d & (b32 = bx & (b22 = man | b22 = mantrg)) & (b42 = flr | b42 = target): man;
        next(dr) = u & (b32 = bx & (b42 = man | b42 = mantrg)) & (b22 = flr | b22 = target): man;

    --man to box on target
        next(dr) = r & (b32 = bxtrg & (b31 = man | b31 = mantrg)) & (b33 = flr | b33 = target): mantrg;
        next(dr) = l & (b32 = bxtrg & (b33 = man | b33 = mantrg)) & (b31 = flr | b31 = target): mantrg;
        next(dr) = d & (b32 = bxtrg & (b22 = man | b22 = mantrg)) & (b42 = flr | b42 = target): mantrg;
        next(dr) = u & (b32 = bxtrg & (b42 = man | b42 = mantrg)) & (b22 = flr | b22 = target): mantrg;

    TRUE: b32;
esac;
next(b33) := case
	--floor to floor
		next(dr) = l & (b33 = man & b32 =flr):flr;
		next(dr) = r & (b33 = man & b34 =flr):flr;
		next(dr) = u & (b33 = man & b23 =flr):flr;
		next(dr) = d & (b33 = man & b43 =flr):flr;


	--target to floor
		next(dr) = l & (b33 = mantrg & b32 =flr): target;
		next(dr) = r & (b33 = mantrg & b34 =flr): target;
		next(dr) = u & (b33 = mantrg & b23 =flr): target;
		next(dr) = d & (b33 = mantrg & b43 =flr): target;

	--floor to target
		next(dr) = l & (b33 = man & b32 = target):flr;
		next(dr) = r & (b33 = man & b34 = target):flr;
		next(dr) = u & (b33 = man & b23 = target):flr;
		next(dr) = d & (b33 = man & b43 = target):flr;

	--target to target
		next(dr) = l & (b33 = mantrg & b32 = target): target;
		next(dr) = r & (b33 = mantrg & b34 = target): target;
		next(dr) = u & (b33 = mantrg & b23 = target): target;
		next(dr) = d & (b33 = mantrg & b43 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b33 = man & b32 = bx) & (b31 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b33 = man & b34 = bx) & (b35 =flr) & (3+2 < n):flr;
		next(dr) = u & (b33 = man & b23 = bx) & (b13 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b33 = man & b43 = bx) & (b53 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b33 = man & b32 = bx) & (b31 = target) & (3-2 > 0):flr;
		next(dr) = r & (b33 = man & b34 = bx) & (b35 = target) & (3+2 < n):flr;
		next(dr) = u & (b33 = man & b23 = bx) & (b13 = target) & (3-2 > 0):flr;
		next(dr) = d & (b33 = man & b43 = bx) & (b53 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b33 = man & b32 = bxtrg) & (b31 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b33 = man & b34 = bxtrg) & (b35 =flr) & (3+2 < n):flr;
		next(dr) = u & (b33 = man & b23 = bxtrg) & (b13 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b33 = man & b43 = bxtrg) & (b53 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b33 = man & b32 = bxtrg) & (b31 = target) & (3-2 > 0):flr;
		next(dr) = r & (b33 = man & b34 = bxtrg) & (b35 = target) & (3+2 < n):flr;
		next(dr) = u & (b33 = man & b23 = bxtrg) & (b13 = target) & (3-2 > 0):flr;
		next(dr) = d & (b33 = man & b43 = bxtrg) & (b53 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b33 = mantrg & b32 = bx) & (b31 =flr) & (3-2 > 0): target;
		next(dr) = r & (b33 = mantrg & b34 = bx) & (b35 =flr) & (3+2 < n): target;
		next(dr) = u & (b33 = mantrg & b23 = bx) & (b13 =flr) & (3-2 > 0): target;
		next(dr) = d & (b33 = mantrg & b43 = bx) & (b53 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b33 = mantrg & b32 = bx) & (b31 = target) & (3-2 > 0): target;
		next(dr) = r & (b33 = mantrg & b34 = bx) & (b35 = target) & (3+2 < n): target;
		next(dr) = u & (b33 = mantrg & b23 = bx) & (b13 = target) & (3-2 > 0): target;
		next(dr) = d & (b33 = mantrg & b43 = bx) & (b53 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b33 = mantrg & b32 = bxtrg) & (b31 =flr) & (3-2 > 0): target;
		next(dr) = r & (b33 = mantrg & b34 = bxtrg) & (b35 =flr) & (3+2 < n): target;
		next(dr) = u & (b33 = mantrg & b23 = bxtrg) & (b13 =flr) & (3-2 > 0): target;
		next(dr) = d & (b33 = mantrg & b43 = bxtrg) & (b53 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b33 = mantrg & b32 = bxtrg) & (b31 = target) & (3-2 > 0): target;
		next(dr) = r & (b33 = mantrg & b34 = bxtrg) & (b35 = target) & (3+2 < n): target;
		next(dr) = u & (b33 = mantrg & b23 = bxtrg) & (b13 = target) & (3-2 > 0): target;
		next(dr) = d & (b33 = mantrg & b43 = bxtrg) & (b53 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b33 = flr & (b32 = man | b32 = mantrg)) : man;
        next(dr) = l & (b33 = flr & (b34 = man | b34 = mantrg)): man;
        next(dr) = d & (b33 = flr & (b23 = man | b23 = mantrg)): man;
        next(dr) = u & (b33 = flr & (b43 = man | b43 = mantrg)): man;

    --box to floor
        next(dr) = r & (b33 = flr & (b32 = bx | b32 = bxtrg)) & (b31 = man | b31 = mantrg): bx;
        next(dr) = l & (b33 = flr & (b34 = bx | b34 = bxtrg)) & (b35 = man | b35 = mantrg): bx;
        next(dr) = d & (b33 = flr & (b23 = bx | b23 = bxtrg)) & (b13 = man | b13 = mantrg): bx;
        next(dr) = u & (b33 = flr & (b43 = bx | b43 = bxtrg)) & (b53 = man | b53 = mantrg): bx;

    --man to target
        next(dr) = r & (b33 = target & (b32 = man | b32 = mantrg)): mantrg;
        next(dr) = l & (b33 = target & (b34 = man | b34 = mantrg)): mantrg;
        next(dr) = d & (b33 = target & (b23 = man | b23 = mantrg)): mantrg;
        next(dr) = u & (b33 = target & (b43 = man | b43 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b33 = target & (b32 = bx | b32 = bxtrg)) & (b31 = man | b31 = mantrg): bxtrg;
        next(dr) = l & (b33 = target & (b34 = bx | b34 = bxtrg)) & (b35 = man | b35 = mantrg): bxtrg;
        next(dr) = d & (b33 = target & (b23 = bx | b23 = bxtrg)) & (b13 = man | b13 = mantrg): bxtrg;
        next(dr) = u & (b33 = target & (b43 = bx | b43 = bxtrg)) & (b53 = man | b53 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b33 = bx & (b32 = man | b32 = mantrg)) & (b34 = flr | b34 = target): man;
        next(dr) = l & (b33 = bx & (b34 = man | b34 = mantrg)) & (b32 = flr | b32 = target): man;
        next(dr) = d & (b33 = bx & (b23 = man | b23 = mantrg)) & (b43 = flr | b43 = target): man;
        next(dr) = u & (b33 = bx & (b43 = man | b43 = mantrg)) & (b23 = flr | b23 = target): man;

    --man to box on target
        next(dr) = r & (b33 = bxtrg & (b32 = man | b32 = mantrg)) & (b34 = flr | b34 = target): mantrg;
        next(dr) = l & (b33 = bxtrg & (b34 = man | b34 = mantrg)) & (b32 = flr | b32 = target): mantrg;
        next(dr) = d & (b33 = bxtrg & (b23 = man | b23 = mantrg)) & (b43 = flr | b43 = target): mantrg;
        next(dr) = u & (b33 = bxtrg & (b43 = man | b43 = mantrg)) & (b23 = flr | b23 = target): mantrg;

    TRUE: b33;
esac;
next(b34) := case
	--floor to floor
		next(dr) = l & (b34 = man & b33 =flr):flr;
		next(dr) = r & (b34 = man & b35 =flr):flr;
		next(dr) = u & (b34 = man & b24 =flr):flr;
		next(dr) = d & (b34 = man & b44 =flr):flr;


	--target to floor
		next(dr) = l & (b34 = mantrg & b33 =flr): target;
		next(dr) = r & (b34 = mantrg & b35 =flr): target;
		next(dr) = u & (b34 = mantrg & b24 =flr): target;
		next(dr) = d & (b34 = mantrg & b44 =flr): target;

	--floor to target
		next(dr) = l & (b34 = man & b33 = target):flr;
		next(dr) = r & (b34 = man & b35 = target):flr;
		next(dr) = u & (b34 = man & b24 = target):flr;
		next(dr) = d & (b34 = man & b44 = target):flr;

	--target to target
		next(dr) = l & (b34 = mantrg & b33 = target): target;
		next(dr) = r & (b34 = mantrg & b35 = target): target;
		next(dr) = u & (b34 = mantrg & b24 = target): target;
		next(dr) = d & (b34 = mantrg & b44 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b34 = man & b33 = bx) & (b32 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b34 = man & b35 = bx) & (b36 =flr) & (4+2 < n):flr;
		next(dr) = u & (b34 = man & b24 = bx) & (b14 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b34 = man & b44 = bx) & (b54 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b34 = man & b33 = bx) & (b32 = target) & (4-2 > 0):flr;
		next(dr) = r & (b34 = man & b35 = bx) & (b36 = target) & (4+2 < n):flr;
		next(dr) = u & (b34 = man & b24 = bx) & (b14 = target) & (3-2 > 0):flr;
		next(dr) = d & (b34 = man & b44 = bx) & (b54 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b34 = man & b33 = bxtrg) & (b32 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b34 = man & b35 = bxtrg) & (b36 =flr) & (4+2 < n):flr;
		next(dr) = u & (b34 = man & b24 = bxtrg) & (b14 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b34 = man & b44 = bxtrg) & (b54 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b34 = man & b33 = bxtrg) & (b32 = target) & (4-2 > 0):flr;
		next(dr) = r & (b34 = man & b35 = bxtrg) & (b36 = target) & (4+2 < n):flr;
		next(dr) = u & (b34 = man & b24 = bxtrg) & (b14 = target) & (3-2 > 0):flr;
		next(dr) = d & (b34 = man & b44 = bxtrg) & (b54 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b34 = mantrg & b33 = bx) & (b32 =flr) & (4-2 > 0): target;
		next(dr) = r & (b34 = mantrg & b35 = bx) & (b36 =flr) & (4+2 < n): target;
		next(dr) = u & (b34 = mantrg & b24 = bx) & (b14 =flr) & (3-2 > 0): target;
		next(dr) = d & (b34 = mantrg & b44 = bx) & (b54 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b34 = mantrg & b33 = bx) & (b32 = target) & (4-2 > 0): target;
		next(dr) = r & (b34 = mantrg & b35 = bx) & (b36 = target) & (4+2 < n): target;
		next(dr) = u & (b34 = mantrg & b24 = bx) & (b14 = target) & (3-2 > 0): target;
		next(dr) = d & (b34 = mantrg & b44 = bx) & (b54 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b34 = mantrg & b33 = bxtrg) & (b32 =flr) & (4-2 > 0): target;
		next(dr) = r & (b34 = mantrg & b35 = bxtrg) & (b36 =flr) & (4+2 < n): target;
		next(dr) = u & (b34 = mantrg & b24 = bxtrg) & (b14 =flr) & (3-2 > 0): target;
		next(dr) = d & (b34 = mantrg & b44 = bxtrg) & (b54 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b34 = mantrg & b33 = bxtrg) & (b32 = target) & (4-2 > 0): target;
		next(dr) = r & (b34 = mantrg & b35 = bxtrg) & (b36 = target) & (4+2 < n): target;
		next(dr) = u & (b34 = mantrg & b24 = bxtrg) & (b14 = target) & (3-2 > 0): target;
		next(dr) = d & (b34 = mantrg & b44 = bxtrg) & (b54 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b34 = flr & (b33 = man | b33 = mantrg)) : man;
        next(dr) = l & (b34 = flr & (b35 = man | b35 = mantrg)): man;
        next(dr) = d & (b34 = flr & (b24 = man | b24 = mantrg)): man;
        next(dr) = u & (b34 = flr & (b44 = man | b44 = mantrg)): man;

    --box to floor
        next(dr) = r & (b34 = flr & (b33 = bx | b33 = bxtrg)) & (b32 = man | b32 = mantrg): bx;
        next(dr) = l & (b34 = flr & (b35 = bx | b35 = bxtrg)) & (b36 = man | b36 = mantrg): bx;
        next(dr) = d & (b34 = flr & (b24 = bx | b24 = bxtrg)) & (b14 = man | b14 = mantrg): bx;
        next(dr) = u & (b34 = flr & (b44 = bx | b44 = bxtrg)) & (b54 = man | b54 = mantrg): bx;

    --man to target
        next(dr) = r & (b34 = target & (b33 = man | b33 = mantrg)): mantrg;
        next(dr) = l & (b34 = target & (b35 = man | b35 = mantrg)): mantrg;
        next(dr) = d & (b34 = target & (b24 = man | b24 = mantrg)): mantrg;
        next(dr) = u & (b34 = target & (b44 = man | b44 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b34 = target & (b33 = bx | b33 = bxtrg)) & (b32 = man | b32 = mantrg): bxtrg;
        next(dr) = l & (b34 = target & (b35 = bx | b35 = bxtrg)) & (b36 = man | b36 = mantrg): bxtrg;
        next(dr) = d & (b34 = target & (b24 = bx | b24 = bxtrg)) & (b14 = man | b14 = mantrg): bxtrg;
        next(dr) = u & (b34 = target & (b44 = bx | b44 = bxtrg)) & (b54 = man | b54 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b34 = bx & (b33 = man | b33 = mantrg)) & (b35 = flr | b35 = target): man;
        next(dr) = l & (b34 = bx & (b35 = man | b35 = mantrg)) & (b33 = flr | b33 = target): man;
        next(dr) = d & (b34 = bx & (b24 = man | b24 = mantrg)) & (b44 = flr | b44 = target): man;
        next(dr) = u & (b34 = bx & (b44 = man | b44 = mantrg)) & (b24 = flr | b24 = target): man;

    --man to box on target
        next(dr) = r & (b34 = bxtrg & (b33 = man | b33 = mantrg)) & (b35 = flr | b35 = target): mantrg;
        next(dr) = l & (b34 = bxtrg & (b35 = man | b35 = mantrg)) & (b33 = flr | b33 = target): mantrg;
        next(dr) = d & (b34 = bxtrg & (b24 = man | b24 = mantrg)) & (b44 = flr | b44 = target): mantrg;
        next(dr) = u & (b34 = bxtrg & (b44 = man | b44 = mantrg)) & (b24 = flr | b24 = target): mantrg;

    TRUE: b34;
esac;
next(b35) := case
	--floor to floor
		next(dr) = l & (b35 = man & b34 =flr):flr;
		next(dr) = r & (b35 = man & b36 =flr):flr;
		next(dr) = u & (b35 = man & b25 =flr):flr;
		next(dr) = d & (b35 = man & b45 =flr):flr;


	--target to floor
		next(dr) = l & (b35 = mantrg & b34 =flr): target;
		next(dr) = r & (b35 = mantrg & b36 =flr): target;
		next(dr) = u & (b35 = mantrg & b25 =flr): target;
		next(dr) = d & (b35 = mantrg & b45 =flr): target;

	--floor to target
		next(dr) = l & (b35 = man & b34 = target):flr;
		next(dr) = r & (b35 = man & b36 = target):flr;
		next(dr) = u & (b35 = man & b25 = target):flr;
		next(dr) = d & (b35 = man & b45 = target):flr;

	--target to target
		next(dr) = l & (b35 = mantrg & b34 = target): target;
		next(dr) = r & (b35 = mantrg & b36 = target): target;
		next(dr) = u & (b35 = mantrg & b25 = target): target;
		next(dr) = d & (b35 = mantrg & b45 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b35 = man & b34 = bx) & (b33 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b35 = man & b36 = bx) & (b37 =flr) & (5+2 < n):flr;
		next(dr) = u & (b35 = man & b25 = bx) & (b15 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b35 = man & b45 = bx) & (b55 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b35 = man & b34 = bx) & (b33 = target) & (5-2 > 0):flr;
		next(dr) = r & (b35 = man & b36 = bx) & (b37 = target) & (5+2 < n):flr;
		next(dr) = u & (b35 = man & b25 = bx) & (b15 = target) & (3-2 > 0):flr;
		next(dr) = d & (b35 = man & b45 = bx) & (b55 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b35 = man & b34 = bxtrg) & (b33 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b35 = man & b36 = bxtrg) & (b37 =flr) & (5+2 < n):flr;
		next(dr) = u & (b35 = man & b25 = bxtrg) & (b15 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b35 = man & b45 = bxtrg) & (b55 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b35 = man & b34 = bxtrg) & (b33 = target) & (5-2 > 0):flr;
		next(dr) = r & (b35 = man & b36 = bxtrg) & (b37 = target) & (5+2 < n):flr;
		next(dr) = u & (b35 = man & b25 = bxtrg) & (b15 = target) & (3-2 > 0):flr;
		next(dr) = d & (b35 = man & b45 = bxtrg) & (b55 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b35 = mantrg & b34 = bx) & (b33 =flr) & (5-2 > 0): target;
		next(dr) = r & (b35 = mantrg & b36 = bx) & (b37 =flr) & (5+2 < n): target;
		next(dr) = u & (b35 = mantrg & b25 = bx) & (b15 =flr) & (3-2 > 0): target;
		next(dr) = d & (b35 = mantrg & b45 = bx) & (b55 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b35 = mantrg & b34 = bx) & (b33 = target) & (5-2 > 0): target;
		next(dr) = r & (b35 = mantrg & b36 = bx) & (b37 = target) & (5+2 < n): target;
		next(dr) = u & (b35 = mantrg & b25 = bx) & (b15 = target) & (3-2 > 0): target;
		next(dr) = d & (b35 = mantrg & b45 = bx) & (b55 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b35 = mantrg & b34 = bxtrg) & (b33 =flr) & (5-2 > 0): target;
		next(dr) = r & (b35 = mantrg & b36 = bxtrg) & (b37 =flr) & (5+2 < n): target;
		next(dr) = u & (b35 = mantrg & b25 = bxtrg) & (b15 =flr) & (3-2 > 0): target;
		next(dr) = d & (b35 = mantrg & b45 = bxtrg) & (b55 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b35 = mantrg & b34 = bxtrg) & (b33 = target) & (5-2 > 0): target;
		next(dr) = r & (b35 = mantrg & b36 = bxtrg) & (b37 = target) & (5+2 < n): target;
		next(dr) = u & (b35 = mantrg & b25 = bxtrg) & (b15 = target) & (3-2 > 0): target;
		next(dr) = d & (b35 = mantrg & b45 = bxtrg) & (b55 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b35 = flr & (b34 = man | b34 = mantrg)) : man;
        next(dr) = l & (b35 = flr & (b36 = man | b36 = mantrg)): man;
        next(dr) = d & (b35 = flr & (b25 = man | b25 = mantrg)): man;
        next(dr) = u & (b35 = flr & (b45 = man | b45 = mantrg)): man;

    --box to floor
        next(dr) = r & (b35 = flr & (b34 = bx | b34 = bxtrg)) & (b33 = man | b33 = mantrg): bx;
        next(dr) = l & (b35 = flr & (b36 = bx | b36 = bxtrg)) & (b37 = man | b37 = mantrg): bx;
        next(dr) = d & (b35 = flr & (b25 = bx | b25 = bxtrg)) & (b15 = man | b15 = mantrg): bx;
        next(dr) = u & (b35 = flr & (b45 = bx | b45 = bxtrg)) & (b55 = man | b55 = mantrg): bx;

    --man to target
        next(dr) = r & (b35 = target & (b34 = man | b34 = mantrg)): mantrg;
        next(dr) = l & (b35 = target & (b36 = man | b36 = mantrg)): mantrg;
        next(dr) = d & (b35 = target & (b25 = man | b25 = mantrg)): mantrg;
        next(dr) = u & (b35 = target & (b45 = man | b45 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b35 = target & (b34 = bx | b34 = bxtrg)) & (b33 = man | b33 = mantrg): bxtrg;
        next(dr) = l & (b35 = target & (b36 = bx | b36 = bxtrg)) & (b37 = man | b37 = mantrg): bxtrg;
        next(dr) = d & (b35 = target & (b25 = bx | b25 = bxtrg)) & (b15 = man | b15 = mantrg): bxtrg;
        next(dr) = u & (b35 = target & (b45 = bx | b45 = bxtrg)) & (b55 = man | b55 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b35 = bx & (b34 = man | b34 = mantrg)) & (b36 = flr | b36 = target): man;
        next(dr) = l & (b35 = bx & (b36 = man | b36 = mantrg)) & (b34 = flr | b34 = target): man;
        next(dr) = d & (b35 = bx & (b25 = man | b25 = mantrg)) & (b45 = flr | b45 = target): man;
        next(dr) = u & (b35 = bx & (b45 = man | b45 = mantrg)) & (b25 = flr | b25 = target): man;

    --man to box on target
        next(dr) = r & (b35 = bxtrg & (b34 = man | b34 = mantrg)) & (b36 = flr | b36 = target): mantrg;
        next(dr) = l & (b35 = bxtrg & (b36 = man | b36 = mantrg)) & (b34 = flr | b34 = target): mantrg;
        next(dr) = d & (b35 = bxtrg & (b25 = man | b25 = mantrg)) & (b45 = flr | b45 = target): mantrg;
        next(dr) = u & (b35 = bxtrg & (b45 = man | b45 = mantrg)) & (b25 = flr | b25 = target): mantrg;

    TRUE: b35;
esac;
next(b36) := case
	--floor to floor
		next(dr) = l & (b36 = man & b35 =flr):flr;
		next(dr) = r & (b36 = man & b37 =flr):flr;
		next(dr) = u & (b36 = man & b26 =flr):flr;
		next(dr) = d & (b36 = man & b46 =flr):flr;


	--target to floor
		next(dr) = l & (b36 = mantrg & b35 =flr): target;
		next(dr) = r & (b36 = mantrg & b37 =flr): target;
		next(dr) = u & (b36 = mantrg & b26 =flr): target;
		next(dr) = d & (b36 = mantrg & b46 =flr): target;

	--floor to target
		next(dr) = l & (b36 = man & b35 = target):flr;
		next(dr) = r & (b36 = man & b37 = target):flr;
		next(dr) = u & (b36 = man & b26 = target):flr;
		next(dr) = d & (b36 = man & b46 = target):flr;

	--target to target
		next(dr) = l & (b36 = mantrg & b35 = target): target;
		next(dr) = r & (b36 = mantrg & b37 = target): target;
		next(dr) = u & (b36 = mantrg & b26 = target): target;
		next(dr) = d & (b36 = mantrg & b46 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b36 = man & b35 = bx) & (b34 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b36 = man & b37 = bx) & (b38 =flr) & (6+2 < n):flr;
		next(dr) = u & (b36 = man & b26 = bx) & (b16 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b36 = man & b46 = bx) & (b56 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b36 = man & b35 = bx) & (b34 = target) & (6-2 > 0):flr;
		next(dr) = r & (b36 = man & b37 = bx) & (b38 = target) & (6+2 < n):flr;
		next(dr) = u & (b36 = man & b26 = bx) & (b16 = target) & (3-2 > 0):flr;
		next(dr) = d & (b36 = man & b46 = bx) & (b56 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b36 = man & b35 = bxtrg) & (b34 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b36 = man & b37 = bxtrg) & (b38 =flr) & (6+2 < n):flr;
		next(dr) = u & (b36 = man & b26 = bxtrg) & (b16 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b36 = man & b46 = bxtrg) & (b56 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b36 = man & b35 = bxtrg) & (b34 = target) & (6-2 > 0):flr;
		next(dr) = r & (b36 = man & b37 = bxtrg) & (b38 = target) & (6+2 < n):flr;
		next(dr) = u & (b36 = man & b26 = bxtrg) & (b16 = target) & (3-2 > 0):flr;
		next(dr) = d & (b36 = man & b46 = bxtrg) & (b56 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b36 = mantrg & b35 = bx) & (b34 =flr) & (6-2 > 0): target;
		next(dr) = r & (b36 = mantrg & b37 = bx) & (b38 =flr) & (6+2 < n): target;
		next(dr) = u & (b36 = mantrg & b26 = bx) & (b16 =flr) & (3-2 > 0): target;
		next(dr) = d & (b36 = mantrg & b46 = bx) & (b56 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b36 = mantrg & b35 = bx) & (b34 = target) & (6-2 > 0): target;
		next(dr) = r & (b36 = mantrg & b37 = bx) & (b38 = target) & (6+2 < n): target;
		next(dr) = u & (b36 = mantrg & b26 = bx) & (b16 = target) & (3-2 > 0): target;
		next(dr) = d & (b36 = mantrg & b46 = bx) & (b56 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b36 = mantrg & b35 = bxtrg) & (b34 =flr) & (6-2 > 0): target;
		next(dr) = r & (b36 = mantrg & b37 = bxtrg) & (b38 =flr) & (6+2 < n): target;
		next(dr) = u & (b36 = mantrg & b26 = bxtrg) & (b16 =flr) & (3-2 > 0): target;
		next(dr) = d & (b36 = mantrg & b46 = bxtrg) & (b56 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b36 = mantrg & b35 = bxtrg) & (b34 = target) & (6-2 > 0): target;
		next(dr) = r & (b36 = mantrg & b37 = bxtrg) & (b38 = target) & (6+2 < n): target;
		next(dr) = u & (b36 = mantrg & b26 = bxtrg) & (b16 = target) & (3-2 > 0): target;
		next(dr) = d & (b36 = mantrg & b46 = bxtrg) & (b56 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b36 = flr & (b35 = man | b35 = mantrg)) : man;
        next(dr) = l & (b36 = flr & (b37 = man | b37 = mantrg)): man;
        next(dr) = d & (b36 = flr & (b26 = man | b26 = mantrg)): man;
        next(dr) = u & (b36 = flr & (b46 = man | b46 = mantrg)): man;

    --box to floor
        next(dr) = r & (b36 = flr & (b35 = bx | b35 = bxtrg)) & (b34 = man | b34 = mantrg): bx;
        next(dr) = l & (b36 = flr & (b37 = bx | b37 = bxtrg)) & (b38 = man | b38 = mantrg): bx;
        next(dr) = d & (b36 = flr & (b26 = bx | b26 = bxtrg)) & (b16 = man | b16 = mantrg): bx;
        next(dr) = u & (b36 = flr & (b46 = bx | b46 = bxtrg)) & (b56 = man | b56 = mantrg): bx;

    --man to target
        next(dr) = r & (b36 = target & (b35 = man | b35 = mantrg)): mantrg;
        next(dr) = l & (b36 = target & (b37 = man | b37 = mantrg)): mantrg;
        next(dr) = d & (b36 = target & (b26 = man | b26 = mantrg)): mantrg;
        next(dr) = u & (b36 = target & (b46 = man | b46 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b36 = target & (b35 = bx | b35 = bxtrg)) & (b34 = man | b34 = mantrg): bxtrg;
        next(dr) = l & (b36 = target & (b37 = bx | b37 = bxtrg)) & (b38 = man | b38 = mantrg): bxtrg;
        next(dr) = d & (b36 = target & (b26 = bx | b26 = bxtrg)) & (b16 = man | b16 = mantrg): bxtrg;
        next(dr) = u & (b36 = target & (b46 = bx | b46 = bxtrg)) & (b56 = man | b56 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b36 = bx & (b35 = man | b35 = mantrg)) & (b37 = flr | b37 = target): man;
        next(dr) = l & (b36 = bx & (b37 = man | b37 = mantrg)) & (b35 = flr | b35 = target): man;
        next(dr) = d & (b36 = bx & (b26 = man | b26 = mantrg)) & (b46 = flr | b46 = target): man;
        next(dr) = u & (b36 = bx & (b46 = man | b46 = mantrg)) & (b26 = flr | b26 = target): man;

    --man to box on target
        next(dr) = r & (b36 = bxtrg & (b35 = man | b35 = mantrg)) & (b37 = flr | b37 = target): mantrg;
        next(dr) = l & (b36 = bxtrg & (b37 = man | b37 = mantrg)) & (b35 = flr | b35 = target): mantrg;
        next(dr) = d & (b36 = bxtrg & (b26 = man | b26 = mantrg)) & (b46 = flr | b46 = target): mantrg;
        next(dr) = u & (b36 = bxtrg & (b46 = man | b46 = mantrg)) & (b26 = flr | b26 = target): mantrg;

    TRUE: b36;
esac;
next(b37) := case
	--floor to floor
		next(dr) = l & (b37 = man & b36 =flr):flr;
		next(dr) = r & (b37 = man & b38 =flr):flr;
		next(dr) = u & (b37 = man & b27 =flr):flr;
		next(dr) = d & (b37 = man & b47 =flr):flr;


	--target to floor
		next(dr) = l & (b37 = mantrg & b36 =flr): target;
		next(dr) = r & (b37 = mantrg & b38 =flr): target;
		next(dr) = u & (b37 = mantrg & b27 =flr): target;
		next(dr) = d & (b37 = mantrg & b47 =flr): target;

	--floor to target
		next(dr) = l & (b37 = man & b36 = target):flr;
		next(dr) = r & (b37 = man & b38 = target):flr;
		next(dr) = u & (b37 = man & b27 = target):flr;
		next(dr) = d & (b37 = man & b47 = target):flr;

	--target to target
		next(dr) = l & (b37 = mantrg & b36 = target): target;
		next(dr) = r & (b37 = mantrg & b38 = target): target;
		next(dr) = u & (b37 = mantrg & b27 = target): target;
		next(dr) = d & (b37 = mantrg & b47 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b37 = man & b36 = bx) & (b35 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b37 = man & b38 = bx) & (b39 =flr) & (7+2 < n):flr;
		next(dr) = u & (b37 = man & b27 = bx) & (b17 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b37 = man & b47 = bx) & (b57 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b37 = man & b36 = bx) & (b35 = target) & (7-2 > 0):flr;
		next(dr) = r & (b37 = man & b38 = bx) & (b39 = target) & (7+2 < n):flr;
		next(dr) = u & (b37 = man & b27 = bx) & (b17 = target) & (3-2 > 0):flr;
		next(dr) = d & (b37 = man & b47 = bx) & (b57 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b37 = man & b36 = bxtrg) & (b35 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b37 = man & b38 = bxtrg) & (b39 =flr) & (7+2 < n):flr;
		next(dr) = u & (b37 = man & b27 = bxtrg) & (b17 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b37 = man & b47 = bxtrg) & (b57 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b37 = man & b36 = bxtrg) & (b35 = target) & (7-2 > 0):flr;
		next(dr) = r & (b37 = man & b38 = bxtrg) & (b39 = target) & (7+2 < n):flr;
		next(dr) = u & (b37 = man & b27 = bxtrg) & (b17 = target) & (3-2 > 0):flr;
		next(dr) = d & (b37 = man & b47 = bxtrg) & (b57 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b37 = mantrg & b36 = bx) & (b35 =flr) & (7-2 > 0): target;
		next(dr) = r & (b37 = mantrg & b38 = bx) & (b39 =flr) & (7+2 < n): target;
		next(dr) = u & (b37 = mantrg & b27 = bx) & (b17 =flr) & (3-2 > 0): target;
		next(dr) = d & (b37 = mantrg & b47 = bx) & (b57 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b37 = mantrg & b36 = bx) & (b35 = target) & (7-2 > 0): target;
		next(dr) = r & (b37 = mantrg & b38 = bx) & (b39 = target) & (7+2 < n): target;
		next(dr) = u & (b37 = mantrg & b27 = bx) & (b17 = target) & (3-2 > 0): target;
		next(dr) = d & (b37 = mantrg & b47 = bx) & (b57 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b37 = mantrg & b36 = bxtrg) & (b35 =flr) & (7-2 > 0): target;
		next(dr) = r & (b37 = mantrg & b38 = bxtrg) & (b39 =flr) & (7+2 < n): target;
		next(dr) = u & (b37 = mantrg & b27 = bxtrg) & (b17 =flr) & (3-2 > 0): target;
		next(dr) = d & (b37 = mantrg & b47 = bxtrg) & (b57 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b37 = mantrg & b36 = bxtrg) & (b35 = target) & (7-2 > 0): target;
		next(dr) = r & (b37 = mantrg & b38 = bxtrg) & (b39 = target) & (7+2 < n): target;
		next(dr) = u & (b37 = mantrg & b27 = bxtrg) & (b17 = target) & (3-2 > 0): target;
		next(dr) = d & (b37 = mantrg & b47 = bxtrg) & (b57 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b37 = flr & (b36 = man | b36 = mantrg)) : man;
        next(dr) = l & (b37 = flr & (b38 = man | b38 = mantrg)): man;
        next(dr) = d & (b37 = flr & (b27 = man | b27 = mantrg)): man;
        next(dr) = u & (b37 = flr & (b47 = man | b47 = mantrg)): man;

    --box to floor
        next(dr) = r & (b37 = flr & (b36 = bx | b36 = bxtrg)) & (b35 = man | b35 = mantrg): bx;
        next(dr) = l & (b37 = flr & (b38 = bx | b38 = bxtrg)) & (b39 = man | b39 = mantrg): bx;
        next(dr) = d & (b37 = flr & (b27 = bx | b27 = bxtrg)) & (b17 = man | b17 = mantrg): bx;
        next(dr) = u & (b37 = flr & (b47 = bx | b47 = bxtrg)) & (b57 = man | b57 = mantrg): bx;

    --man to target
        next(dr) = r & (b37 = target & (b36 = man | b36 = mantrg)): mantrg;
        next(dr) = l & (b37 = target & (b38 = man | b38 = mantrg)): mantrg;
        next(dr) = d & (b37 = target & (b27 = man | b27 = mantrg)): mantrg;
        next(dr) = u & (b37 = target & (b47 = man | b47 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b37 = target & (b36 = bx | b36 = bxtrg)) & (b35 = man | b35 = mantrg): bxtrg;
        next(dr) = l & (b37 = target & (b38 = bx | b38 = bxtrg)) & (b39 = man | b39 = mantrg): bxtrg;
        next(dr) = d & (b37 = target & (b27 = bx | b27 = bxtrg)) & (b17 = man | b17 = mantrg): bxtrg;
        next(dr) = u & (b37 = target & (b47 = bx | b47 = bxtrg)) & (b57 = man | b57 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b37 = bx & (b36 = man | b36 = mantrg)) & (b38 = flr | b38 = target): man;
        next(dr) = l & (b37 = bx & (b38 = man | b38 = mantrg)) & (b36 = flr | b36 = target): man;
        next(dr) = d & (b37 = bx & (b27 = man | b27 = mantrg)) & (b47 = flr | b47 = target): man;
        next(dr) = u & (b37 = bx & (b47 = man | b47 = mantrg)) & (b27 = flr | b27 = target): man;

    --man to box on target
        next(dr) = r & (b37 = bxtrg & (b36 = man | b36 = mantrg)) & (b38 = flr | b38 = target): mantrg;
        next(dr) = l & (b37 = bxtrg & (b38 = man | b38 = mantrg)) & (b36 = flr | b36 = target): mantrg;
        next(dr) = d & (b37 = bxtrg & (b27 = man | b27 = mantrg)) & (b47 = flr | b47 = target): mantrg;
        next(dr) = u & (b37 = bxtrg & (b47 = man | b47 = mantrg)) & (b27 = flr | b27 = target): mantrg;

    TRUE: b37;
esac;
next(b38) := case
	--floor to floor
		next(dr) = l & (b38 = man & b37 =flr):flr;
		next(dr) = r & (b38 = man & b39 =flr):flr;
		next(dr) = u & (b38 = man & b28 =flr):flr;
		next(dr) = d & (b38 = man & b48 =flr):flr;


	--target to floor
		next(dr) = l & (b38 = mantrg & b37 =flr): target;
		next(dr) = r & (b38 = mantrg & b39 =flr): target;
		next(dr) = u & (b38 = mantrg & b28 =flr): target;
		next(dr) = d & (b38 = mantrg & b48 =flr): target;

	--floor to target
		next(dr) = l & (b38 = man & b37 = target):flr;
		next(dr) = r & (b38 = man & b39 = target):flr;
		next(dr) = u & (b38 = man & b28 = target):flr;
		next(dr) = d & (b38 = man & b48 = target):flr;

	--target to target
		next(dr) = l & (b38 = mantrg & b37 = target): target;
		next(dr) = r & (b38 = mantrg & b39 = target): target;
		next(dr) = u & (b38 = mantrg & b28 = target): target;
		next(dr) = d & (b38 = mantrg & b48 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b38 = man & b37 = bx) & (b36 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b38 = man & b39 = bx) & (b310 =flr) & (8+2 < n):flr;
		next(dr) = u & (b38 = man & b28 = bx) & (b18 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b38 = man & b48 = bx) & (b58 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b38 = man & b37 = bx) & (b36 = target) & (8-2 > 0):flr;
		next(dr) = r & (b38 = man & b39 = bx) & (b310 = target) & (8+2 < n):flr;
		next(dr) = u & (b38 = man & b28 = bx) & (b18 = target) & (3-2 > 0):flr;
		next(dr) = d & (b38 = man & b48 = bx) & (b58 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b38 = man & b37 = bxtrg) & (b36 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b38 = man & b39 = bxtrg) & (b310 =flr) & (8+2 < n):flr;
		next(dr) = u & (b38 = man & b28 = bxtrg) & (b18 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b38 = man & b48 = bxtrg) & (b58 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b38 = man & b37 = bxtrg) & (b36 = target) & (8-2 > 0):flr;
		next(dr) = r & (b38 = man & b39 = bxtrg) & (b310 = target) & (8+2 < n):flr;
		next(dr) = u & (b38 = man & b28 = bxtrg) & (b18 = target) & (3-2 > 0):flr;
		next(dr) = d & (b38 = man & b48 = bxtrg) & (b58 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b38 = mantrg & b37 = bx) & (b36 =flr) & (8-2 > 0): target;
		next(dr) = r & (b38 = mantrg & b39 = bx) & (b310 =flr) & (8+2 < n): target;
		next(dr) = u & (b38 = mantrg & b28 = bx) & (b18 =flr) & (3-2 > 0): target;
		next(dr) = d & (b38 = mantrg & b48 = bx) & (b58 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b38 = mantrg & b37 = bx) & (b36 = target) & (8-2 > 0): target;
		next(dr) = r & (b38 = mantrg & b39 = bx) & (b310 = target) & (8+2 < n): target;
		next(dr) = u & (b38 = mantrg & b28 = bx) & (b18 = target) & (3-2 > 0): target;
		next(dr) = d & (b38 = mantrg & b48 = bx) & (b58 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b38 = mantrg & b37 = bxtrg) & (b36 =flr) & (8-2 > 0): target;
		next(dr) = r & (b38 = mantrg & b39 = bxtrg) & (b310 =flr) & (8+2 < n): target;
		next(dr) = u & (b38 = mantrg & b28 = bxtrg) & (b18 =flr) & (3-2 > 0): target;
		next(dr) = d & (b38 = mantrg & b48 = bxtrg) & (b58 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b38 = mantrg & b37 = bxtrg) & (b36 = target) & (8-2 > 0): target;
		next(dr) = r & (b38 = mantrg & b39 = bxtrg) & (b310 = target) & (8+2 < n): target;
		next(dr) = u & (b38 = mantrg & b28 = bxtrg) & (b18 = target) & (3-2 > 0): target;
		next(dr) = d & (b38 = mantrg & b48 = bxtrg) & (b58 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b38 = flr & (b37 = man | b37 = mantrg)) : man;
        next(dr) = l & (b38 = flr & (b39 = man | b39 = mantrg)): man;
        next(dr) = d & (b38 = flr & (b28 = man | b28 = mantrg)): man;
        next(dr) = u & (b38 = flr & (b48 = man | b48 = mantrg)): man;

    --box to floor
        next(dr) = r & (b38 = flr & (b37 = bx | b37 = bxtrg)) & (b36 = man | b36 = mantrg): bx;
        next(dr) = l & (b38 = flr & (b39 = bx | b39 = bxtrg)) & (b310 = man | b310 = mantrg): bx;
        next(dr) = d & (b38 = flr & (b28 = bx | b28 = bxtrg)) & (b18 = man | b18 = mantrg): bx;
        next(dr) = u & (b38 = flr & (b48 = bx | b48 = bxtrg)) & (b58 = man | b58 = mantrg): bx;

    --man to target
        next(dr) = r & (b38 = target & (b37 = man | b37 = mantrg)): mantrg;
        next(dr) = l & (b38 = target & (b39 = man | b39 = mantrg)): mantrg;
        next(dr) = d & (b38 = target & (b28 = man | b28 = mantrg)): mantrg;
        next(dr) = u & (b38 = target & (b48 = man | b48 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b38 = target & (b37 = bx | b37 = bxtrg)) & (b36 = man | b36 = mantrg): bxtrg;
        next(dr) = l & (b38 = target & (b39 = bx | b39 = bxtrg)) & (b310 = man | b310 = mantrg): bxtrg;
        next(dr) = d & (b38 = target & (b28 = bx | b28 = bxtrg)) & (b18 = man | b18 = mantrg): bxtrg;
        next(dr) = u & (b38 = target & (b48 = bx | b48 = bxtrg)) & (b58 = man | b58 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b38 = bx & (b37 = man | b37 = mantrg)) & (b39 = flr | b39 = target): man;
        next(dr) = l & (b38 = bx & (b39 = man | b39 = mantrg)) & (b37 = flr | b37 = target): man;
        next(dr) = d & (b38 = bx & (b28 = man | b28 = mantrg)) & (b48 = flr | b48 = target): man;
        next(dr) = u & (b38 = bx & (b48 = man | b48 = mantrg)) & (b28 = flr | b28 = target): man;

    --man to box on target
        next(dr) = r & (b38 = bxtrg & (b37 = man | b37 = mantrg)) & (b39 = flr | b39 = target): mantrg;
        next(dr) = l & (b38 = bxtrg & (b39 = man | b39 = mantrg)) & (b37 = flr | b37 = target): mantrg;
        next(dr) = d & (b38 = bxtrg & (b28 = man | b28 = mantrg)) & (b48 = flr | b48 = target): mantrg;
        next(dr) = u & (b38 = bxtrg & (b48 = man | b48 = mantrg)) & (b28 = flr | b28 = target): mantrg;

    TRUE: b38;
esac;
next(b39) := case
	--floor to floor
		next(dr) = l & (b39 = man & b38 =flr):flr;
		next(dr) = r & (b39 = man & b310 =flr):flr;
		next(dr) = u & (b39 = man & b29 =flr):flr;
		next(dr) = d & (b39 = man & b49 =flr):flr;


	--target to floor
		next(dr) = l & (b39 = mantrg & b38 =flr): target;
		next(dr) = r & (b39 = mantrg & b310 =flr): target;
		next(dr) = u & (b39 = mantrg & b29 =flr): target;
		next(dr) = d & (b39 = mantrg & b49 =flr): target;

	--floor to target
		next(dr) = l & (b39 = man & b38 = target):flr;
		next(dr) = r & (b39 = man & b310 = target):flr;
		next(dr) = u & (b39 = man & b29 = target):flr;
		next(dr) = d & (b39 = man & b49 = target):flr;

	--target to target
		next(dr) = l & (b39 = mantrg & b38 = target): target;
		next(dr) = r & (b39 = mantrg & b310 = target): target;
		next(dr) = u & (b39 = mantrg & b29 = target): target;
		next(dr) = d & (b39 = mantrg & b49 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b39 = man & b38 = bx) & (b37 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b39 = man & b29 = bx) & (b19 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b39 = man & b49 = bx) & (b59 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b39 = man & b38 = bx) & (b37 = target) & (9-2 > 0):flr;
		next(dr) = u & (b39 = man & b29 = bx) & (b19 = target) & (3-2 > 0):flr;
		next(dr) = d & (b39 = man & b49 = bx) & (b59 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b39 = man & b38 = bxtrg) & (b37 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b39 = man & b29 = bxtrg) & (b19 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b39 = man & b49 = bxtrg) & (b59 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b39 = man & b38 = bxtrg) & (b37 = target) & (9-2 > 0):flr;
		next(dr) = u & (b39 = man & b29 = bxtrg) & (b19 = target) & (3-2 > 0):flr;
		next(dr) = d & (b39 = man & b49 = bxtrg) & (b59 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b39 = mantrg & b38 = bx) & (b37 =flr) & (9-2 > 0): target;
		next(dr) = u & (b39 = mantrg & b29 = bx) & (b19 =flr) & (3-2 > 0): target;
		next(dr) = d & (b39 = mantrg & b49 = bx) & (b59 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b39 = mantrg & b38 = bx) & (b37 = target) & (9-2 > 0): target;
		next(dr) = u & (b39 = mantrg & b29 = bx) & (b19 = target) & (3-2 > 0): target;
		next(dr) = d & (b39 = mantrg & b49 = bx) & (b59 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b39 = mantrg & b38 = bxtrg) & (b37 =flr) & (9-2 > 0): target;
		next(dr) = u & (b39 = mantrg & b29 = bxtrg) & (b19 =flr) & (3-2 > 0): target;
		next(dr) = d & (b39 = mantrg & b49 = bxtrg) & (b59 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b39 = mantrg & b38 = bxtrg) & (b37 = target) & (9-2 > 0): target;
		next(dr) = u & (b39 = mantrg & b29 = bxtrg) & (b19 = target) & (3-2 > 0): target;
		next(dr) = d & (b39 = mantrg & b49 = bxtrg) & (b59 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b39 = flr & (b38 = man | b38 = mantrg)) : man;
        next(dr) = l & (b39 = flr & (b310 = man | b310 = mantrg)): man;
        next(dr) = d & (b39 = flr & (b29 = man | b29 = mantrg)): man;
        next(dr) = u & (b39 = flr & (b49 = man | b49 = mantrg)): man;

    --box to floor
        next(dr) = r & (b39 = flr & (b38 = bx | b38 = bxtrg)) & (b37 = man | b37 = mantrg): bx;
        next(dr) = d & (b39 = flr & (b29 = bx | b29 = bxtrg)) & (b19 = man | b19 = mantrg): bx;
        next(dr) = u & (b39 = flr & (b49 = bx | b49 = bxtrg)) & (b59 = man | b59 = mantrg): bx;

    --man to target
        next(dr) = r & (b39 = target & (b38 = man | b38 = mantrg)): mantrg;
        next(dr) = l & (b39 = target & (b310 = man | b310 = mantrg)): mantrg;
        next(dr) = d & (b39 = target & (b29 = man | b29 = mantrg)): mantrg;
        next(dr) = u & (b39 = target & (b49 = man | b49 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b39 = target & (b38 = bx | b38 = bxtrg)) & (b37 = man | b37 = mantrg): bxtrg;
        next(dr) = d & (b39 = target & (b29 = bx | b29 = bxtrg)) & (b19 = man | b19 = mantrg): bxtrg;
        next(dr) = u & (b39 = target & (b49 = bx | b49 = bxtrg)) & (b59 = man | b59 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b39 = bx & (b38 = man | b38 = mantrg)) & (b310 = flr | b310 = target): man;
        next(dr) = l & (b39 = bx & (b310 = man | b310 = mantrg)) & (b38 = flr | b38 = target): man;
        next(dr) = d & (b39 = bx & (b29 = man | b29 = mantrg)) & (b49 = flr | b49 = target): man;
        next(dr) = u & (b39 = bx & (b49 = man | b49 = mantrg)) & (b29 = flr | b29 = target): man;

    --man to box on target
        next(dr) = r & (b39 = bxtrg & (b38 = man | b38 = mantrg)) & (b310 = flr | b310 = target): mantrg;
        next(dr) = l & (b39 = bxtrg & (b310 = man | b310 = mantrg)) & (b38 = flr | b38 = target): mantrg;
        next(dr) = d & (b39 = bxtrg & (b29 = man | b29 = mantrg)) & (b49 = flr | b49 = target): mantrg;
        next(dr) = u & (b39 = bxtrg & (b49 = man | b49 = mantrg)) & (b29 = flr | b29 = target): mantrg;

    TRUE: b39;
esac;
next(b310) := case
	--floor to floor
		next(dr) = l & (b310 = man & b39 =flr):flr;
		next(dr) = u & (b310 = man & b210 =flr):flr;
		next(dr) = d & (b310 = man & b410 =flr):flr;


	--target to floor
		next(dr) = l & (b310 = mantrg & b39 =flr): target;
		next(dr) = u & (b310 = mantrg & b210 =flr): target;
		next(dr) = d & (b310 = mantrg & b410 =flr): target;

	--floor to target
		next(dr) = l & (b310 = man & b39 = target):flr;
		next(dr) = u & (b310 = man & b210 = target):flr;
		next(dr) = d & (b310 = man & b410 = target):flr;

	--target to target
		next(dr) = l & (b310 = mantrg & b39 = target): target;
		next(dr) = u & (b310 = mantrg & b210 = target): target;
		next(dr) = d & (b310 = mantrg & b410 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b310 = man & b39 = bx) & (b38 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b310 = man & b210 = bx) & (b110 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b310 = man & b410 = bx) & (b510 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b310 = man & b39 = bx) & (b38 = target) & (10-2 > 0):flr;
		next(dr) = u & (b310 = man & b210 = bx) & (b110 = target) & (3-2 > 0):flr;
		next(dr) = d & (b310 = man & b410 = bx) & (b510 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b310 = man & b39 = bxtrg) & (b38 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b310 = man & b210 = bxtrg) & (b110 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b310 = man & b410 = bxtrg) & (b510 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b310 = man & b39 = bxtrg) & (b38 = target) & (10-2 > 0):flr;
		next(dr) = u & (b310 = man & b210 = bxtrg) & (b110 = target) & (3-2 > 0):flr;
		next(dr) = d & (b310 = man & b410 = bxtrg) & (b510 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b310 = mantrg & b39 = bx) & (b38 =flr) & (10-2 > 0): target;
		next(dr) = u & (b310 = mantrg & b210 = bx) & (b110 =flr) & (3-2 > 0): target;
		next(dr) = d & (b310 = mantrg & b410 = bx) & (b510 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b310 = mantrg & b39 = bx) & (b38 = target) & (10-2 > 0): target;
		next(dr) = u & (b310 = mantrg & b210 = bx) & (b110 = target) & (3-2 > 0): target;
		next(dr) = d & (b310 = mantrg & b410 = bx) & (b510 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b310 = mantrg & b39 = bxtrg) & (b38 =flr) & (10-2 > 0): target;
		next(dr) = u & (b310 = mantrg & b210 = bxtrg) & (b110 =flr) & (3-2 > 0): target;
		next(dr) = d & (b310 = mantrg & b410 = bxtrg) & (b510 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b310 = mantrg & b39 = bxtrg) & (b38 = target) & (10-2 > 0): target;
		next(dr) = u & (b310 = mantrg & b210 = bxtrg) & (b110 = target) & (3-2 > 0): target;
		next(dr) = d & (b310 = mantrg & b410 = bxtrg) & (b510 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b310 = flr & (b39 = man | b39 = mantrg)) : man;
        next(dr) = d & (b310 = flr & (b210 = man | b210 = mantrg)): man;
        next(dr) = u & (b310 = flr & (b410 = man | b410 = mantrg)): man;

    --box to floor
        next(dr) = r & (b310 = flr & (b39 = bx | b39 = bxtrg)) & (b38 = man | b38 = mantrg): bx;
        next(dr) = d & (b310 = flr & (b210 = bx | b210 = bxtrg)) & (b110 = man | b110 = mantrg): bx;
        next(dr) = u & (b310 = flr & (b410 = bx | b410 = bxtrg)) & (b510 = man | b510 = mantrg): bx;

    --man to target
        next(dr) = r & (b310 = target & (b39 = man | b39 = mantrg)): mantrg;
        next(dr) = d & (b310 = target & (b210 = man | b210 = mantrg)): mantrg;
        next(dr) = u & (b310 = target & (b410 = man | b410 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b310 = target & (b39 = bx | b39 = bxtrg)) & (b38 = man | b38 = mantrg): bxtrg;
        next(dr) = d & (b310 = target & (b210 = bx | b210 = bxtrg)) & (b110 = man | b110 = mantrg): bxtrg;
        next(dr) = u & (b310 = target & (b410 = bx | b410 = bxtrg)) & (b510 = man | b510 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b310 = bx & (b210 = man | b210 = mantrg)) & (b410 = flr | b410 = target): man;
        next(dr) = u & (b310 = bx & (b410 = man | b410 = mantrg)) & (b210 = flr | b210 = target): man;

    --man to box on target
        next(dr) = d & (b310 = bxtrg & (b210 = man | b210 = mantrg)) & (b410 = flr | b410 = target): mantrg;
        next(dr) = u & (b310 = bxtrg & (b410 = man | b410 = mantrg)) & (b210 = flr | b210 = target): mantrg;

    TRUE: b310;
esac;
next(b40) := case
	--floor to floor
		next(dr) = r & (b40 = man & b41 =flr):flr;
		next(dr) = u & (b40 = man & b30 =flr):flr;
		next(dr) = d & (b40 = man & b50 =flr):flr;


	--target to floor
		next(dr) = r & (b40 = mantrg & b41 =flr): target;
		next(dr) = u & (b40 = mantrg & b30 =flr): target;
		next(dr) = d & (b40 = mantrg & b50 =flr): target;

	--floor to target
		next(dr) = r & (b40 = man & b41 = target):flr;
		next(dr) = u & (b40 = man & b30 = target):flr;
		next(dr) = d & (b40 = man & b50 = target):flr;

	--target to target
		next(dr) = r & (b40 = mantrg & b41 = target): target;
		next(dr) = u & (b40 = mantrg & b30 = target): target;
		next(dr) = d & (b40 = mantrg & b50 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b40 = man & b41 = bx) & (b42 =flr) & (0+2 < n):flr;
		next(dr) = u & (b40 = man & b30 = bx) & (b20 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b40 = man & b50 = bx) & (b60 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b40 = man & b41 = bx) & (b42 = target) & (0+2 < n):flr;
		next(dr) = u & (b40 = man & b30 = bx) & (b20 = target) & (4-2 > 0):flr;
		next(dr) = d & (b40 = man & b50 = bx) & (b60 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b40 = man & b41 = bxtrg) & (b42 =flr) & (0+2 < n):flr;
		next(dr) = u & (b40 = man & b30 = bxtrg) & (b20 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b40 = man & b50 = bxtrg) & (b60 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b40 = man & b41 = bxtrg) & (b42 = target) & (0+2 < n):flr;
		next(dr) = u & (b40 = man & b30 = bxtrg) & (b20 = target) & (4-2 > 0):flr;
		next(dr) = d & (b40 = man & b50 = bxtrg) & (b60 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b40 = mantrg & b41 = bx) & (b42 =flr) & (0+2 < n): target;
		next(dr) = u & (b40 = mantrg & b30 = bx) & (b20 =flr) & (4-2 > 0): target;
		next(dr) = d & (b40 = mantrg & b50 = bx) & (b60 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b40 = mantrg & b41 = bx) & (b42 = target) & (0+2 < n): target;
		next(dr) = u & (b40 = mantrg & b30 = bx) & (b20 = target) & (4-2 > 0): target;
		next(dr) = d & (b40 = mantrg & b50 = bx) & (b60 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b40 = mantrg & b41 = bxtrg) & (b42 =flr) & (0+2 < n): target;
		next(dr) = u & (b40 = mantrg & b30 = bxtrg) & (b20 =flr) & (4-2 > 0): target;
		next(dr) = d & (b40 = mantrg & b50 = bxtrg) & (b60 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b40 = mantrg & b41 = bxtrg) & (b42 = target) & (0+2 < n): target;
		next(dr) = u & (b40 = mantrg & b30 = bxtrg) & (b20 = target) & (4-2 > 0): target;
		next(dr) = d & (b40 = mantrg & b50 = bxtrg) & (b60 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = l & (b40 = flr & (b41 = man | b41 = mantrg)): man;
        next(dr) = d & (b40 = flr & (b30 = man | b30 = mantrg)): man;
        next(dr) = u & (b40 = flr & (b50 = man | b50 = mantrg)): man;

    --box to floor
        next(dr) = l & (b40 = flr & (b41 = bx | b41 = bxtrg)) & (b42 = man | b42 = mantrg): bx;
        next(dr) = d & (b40 = flr & (b30 = bx | b30 = bxtrg)) & (b20 = man | b20 = mantrg): bx;
        next(dr) = u & (b40 = flr & (b50 = bx | b50 = bxtrg)) & (b60 = man | b60 = mantrg): bx;

    --man to target
        next(dr) = l & (b40 = target & (b41 = man | b41 = mantrg)): mantrg;
        next(dr) = d & (b40 = target & (b30 = man | b30 = mantrg)): mantrg;
        next(dr) = u & (b40 = target & (b50 = man | b50 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b40 = target & (b41 = bx | b41 = bxtrg)) & (b42 = man | b42 = mantrg): bxtrg;
        next(dr) = d & (b40 = target & (b30 = bx | b30 = bxtrg)) & (b20 = man | b20 = mantrg): bxtrg;
        next(dr) = u & (b40 = target & (b50 = bx | b50 = bxtrg)) & (b60 = man | b60 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b40 = bx & (b30 = man | b30 = mantrg)) & (b50 = flr | b50 = target): man;
        next(dr) = u & (b40 = bx & (b50 = man | b50 = mantrg)) & (b30 = flr | b30 = target): man;

    --man to box on target
        next(dr) = d & (b40 = bxtrg & (b30 = man | b30 = mantrg)) & (b50 = flr | b50 = target): mantrg;
        next(dr) = u & (b40 = bxtrg & (b50 = man | b50 = mantrg)) & (b30 = flr | b30 = target): mantrg;

    TRUE: b40;
esac;
next(b41) := case
	--floor to floor
		next(dr) = l & (b41 = man & b40 =flr):flr;
		next(dr) = r & (b41 = man & b42 =flr):flr;
		next(dr) = u & (b41 = man & b31 =flr):flr;
		next(dr) = d & (b41 = man & b51 =flr):flr;


	--target to floor
		next(dr) = l & (b41 = mantrg & b40 =flr): target;
		next(dr) = r & (b41 = mantrg & b42 =flr): target;
		next(dr) = u & (b41 = mantrg & b31 =flr): target;
		next(dr) = d & (b41 = mantrg & b51 =flr): target;

	--floor to target
		next(dr) = l & (b41 = man & b40 = target):flr;
		next(dr) = r & (b41 = man & b42 = target):flr;
		next(dr) = u & (b41 = man & b31 = target):flr;
		next(dr) = d & (b41 = man & b51 = target):flr;

	--target to target
		next(dr) = l & (b41 = mantrg & b40 = target): target;
		next(dr) = r & (b41 = mantrg & b42 = target): target;
		next(dr) = u & (b41 = mantrg & b31 = target): target;
		next(dr) = d & (b41 = mantrg & b51 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b41 = man & b42 = bx) & (b43 =flr) & (1+2 < n):flr;
		next(dr) = u & (b41 = man & b31 = bx) & (b21 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b41 = man & b51 = bx) & (b61 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b41 = man & b42 = bx) & (b43 = target) & (1+2 < n):flr;
		next(dr) = u & (b41 = man & b31 = bx) & (b21 = target) & (4-2 > 0):flr;
		next(dr) = d & (b41 = man & b51 = bx) & (b61 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b41 = man & b42 = bxtrg) & (b43 =flr) & (1+2 < n):flr;
		next(dr) = u & (b41 = man & b31 = bxtrg) & (b21 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b41 = man & b51 = bxtrg) & (b61 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b41 = man & b42 = bxtrg) & (b43 = target) & (1+2 < n):flr;
		next(dr) = u & (b41 = man & b31 = bxtrg) & (b21 = target) & (4-2 > 0):flr;
		next(dr) = d & (b41 = man & b51 = bxtrg) & (b61 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b41 = mantrg & b42 = bx) & (b43 =flr) & (1+2 < n): target;
		next(dr) = u & (b41 = mantrg & b31 = bx) & (b21 =flr) & (4-2 > 0): target;
		next(dr) = d & (b41 = mantrg & b51 = bx) & (b61 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b41 = mantrg & b42 = bx) & (b43 = target) & (1+2 < n): target;
		next(dr) = u & (b41 = mantrg & b31 = bx) & (b21 = target) & (4-2 > 0): target;
		next(dr) = d & (b41 = mantrg & b51 = bx) & (b61 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b41 = mantrg & b42 = bxtrg) & (b43 =flr) & (1+2 < n): target;
		next(dr) = u & (b41 = mantrg & b31 = bxtrg) & (b21 =flr) & (4-2 > 0): target;
		next(dr) = d & (b41 = mantrg & b51 = bxtrg) & (b61 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b41 = mantrg & b42 = bxtrg) & (b43 = target) & (1+2 < n): target;
		next(dr) = u & (b41 = mantrg & b31 = bxtrg) & (b21 = target) & (4-2 > 0): target;
		next(dr) = d & (b41 = mantrg & b51 = bxtrg) & (b61 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b41 = flr & (b40 = man | b40 = mantrg)) : man;
        next(dr) = l & (b41 = flr & (b42 = man | b42 = mantrg)): man;
        next(dr) = d & (b41 = flr & (b31 = man | b31 = mantrg)): man;
        next(dr) = u & (b41 = flr & (b51 = man | b51 = mantrg)): man;

    --box to floor
        next(dr) = l & (b41 = flr & (b42 = bx | b42 = bxtrg)) & (b43 = man | b43 = mantrg): bx;
        next(dr) = d & (b41 = flr & (b31 = bx | b31 = bxtrg)) & (b21 = man | b21 = mantrg): bx;
        next(dr) = u & (b41 = flr & (b51 = bx | b51 = bxtrg)) & (b61 = man | b61 = mantrg): bx;

    --man to target
        next(dr) = r & (b41 = target & (b40 = man | b40 = mantrg)): mantrg;
        next(dr) = l & (b41 = target & (b42 = man | b42 = mantrg)): mantrg;
        next(dr) = d & (b41 = target & (b31 = man | b31 = mantrg)): mantrg;
        next(dr) = u & (b41 = target & (b51 = man | b51 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b41 = target & (b42 = bx | b42 = bxtrg)) & (b43 = man | b43 = mantrg): bxtrg;
        next(dr) = d & (b41 = target & (b31 = bx | b31 = bxtrg)) & (b21 = man | b21 = mantrg): bxtrg;
        next(dr) = u & (b41 = target & (b51 = bx | b51 = bxtrg)) & (b61 = man | b61 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b41 = bx & (b40 = man | b40 = mantrg)) & (b42 = flr | b42 = target): man;
        next(dr) = l & (b41 = bx & (b42 = man | b42 = mantrg)) & (b40 = flr | b40 = target): man;
        next(dr) = d & (b41 = bx & (b31 = man | b31 = mantrg)) & (b51 = flr | b51 = target): man;
        next(dr) = u & (b41 = bx & (b51 = man | b51 = mantrg)) & (b31 = flr | b31 = target): man;

    --man to box on target
        next(dr) = r & (b41 = bxtrg & (b40 = man | b40 = mantrg)) & (b42 = flr | b42 = target): mantrg;
        next(dr) = l & (b41 = bxtrg & (b42 = man | b42 = mantrg)) & (b40 = flr | b40 = target): mantrg;
        next(dr) = d & (b41 = bxtrg & (b31 = man | b31 = mantrg)) & (b51 = flr | b51 = target): mantrg;
        next(dr) = u & (b41 = bxtrg & (b51 = man | b51 = mantrg)) & (b31 = flr | b31 = target): mantrg;

    TRUE: b41;
esac;
next(b42) := case
	--floor to floor
		next(dr) = l & (b42 = man & b41 =flr):flr;
		next(dr) = r & (b42 = man & b43 =flr):flr;
		next(dr) = u & (b42 = man & b32 =flr):flr;
		next(dr) = d & (b42 = man & b52 =flr):flr;


	--target to floor
		next(dr) = l & (b42 = mantrg & b41 =flr): target;
		next(dr) = r & (b42 = mantrg & b43 =flr): target;
		next(dr) = u & (b42 = mantrg & b32 =flr): target;
		next(dr) = d & (b42 = mantrg & b52 =flr): target;

	--floor to target
		next(dr) = l & (b42 = man & b41 = target):flr;
		next(dr) = r & (b42 = man & b43 = target):flr;
		next(dr) = u & (b42 = man & b32 = target):flr;
		next(dr) = d & (b42 = man & b52 = target):flr;

	--target to target
		next(dr) = l & (b42 = mantrg & b41 = target): target;
		next(dr) = r & (b42 = mantrg & b43 = target): target;
		next(dr) = u & (b42 = mantrg & b32 = target): target;
		next(dr) = d & (b42 = mantrg & b52 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b42 = man & b41 = bx) & (b40 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b42 = man & b43 = bx) & (b44 =flr) & (2+2 < n):flr;
		next(dr) = u & (b42 = man & b32 = bx) & (b22 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b42 = man & b52 = bx) & (b62 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b42 = man & b41 = bx) & (b40 = target) & (2-2 > 0):flr;
		next(dr) = r & (b42 = man & b43 = bx) & (b44 = target) & (2+2 < n):flr;
		next(dr) = u & (b42 = man & b32 = bx) & (b22 = target) & (4-2 > 0):flr;
		next(dr) = d & (b42 = man & b52 = bx) & (b62 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b42 = man & b41 = bxtrg) & (b40 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b42 = man & b43 = bxtrg) & (b44 =flr) & (2+2 < n):flr;
		next(dr) = u & (b42 = man & b32 = bxtrg) & (b22 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b42 = man & b52 = bxtrg) & (b62 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b42 = man & b41 = bxtrg) & (b40 = target) & (2-2 > 0):flr;
		next(dr) = r & (b42 = man & b43 = bxtrg) & (b44 = target) & (2+2 < n):flr;
		next(dr) = u & (b42 = man & b32 = bxtrg) & (b22 = target) & (4-2 > 0):flr;
		next(dr) = d & (b42 = man & b52 = bxtrg) & (b62 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b42 = mantrg & b41 = bx) & (b40 =flr) & (2-2 > 0): target;
		next(dr) = r & (b42 = mantrg & b43 = bx) & (b44 =flr) & (2+2 < n): target;
		next(dr) = u & (b42 = mantrg & b32 = bx) & (b22 =flr) & (4-2 > 0): target;
		next(dr) = d & (b42 = mantrg & b52 = bx) & (b62 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b42 = mantrg & b41 = bx) & (b40 = target) & (2-2 > 0): target;
		next(dr) = r & (b42 = mantrg & b43 = bx) & (b44 = target) & (2+2 < n): target;
		next(dr) = u & (b42 = mantrg & b32 = bx) & (b22 = target) & (4-2 > 0): target;
		next(dr) = d & (b42 = mantrg & b52 = bx) & (b62 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b42 = mantrg & b41 = bxtrg) & (b40 =flr) & (2-2 > 0): target;
		next(dr) = r & (b42 = mantrg & b43 = bxtrg) & (b44 =flr) & (2+2 < n): target;
		next(dr) = u & (b42 = mantrg & b32 = bxtrg) & (b22 =flr) & (4-2 > 0): target;
		next(dr) = d & (b42 = mantrg & b52 = bxtrg) & (b62 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b42 = mantrg & b41 = bxtrg) & (b40 = target) & (2-2 > 0): target;
		next(dr) = r & (b42 = mantrg & b43 = bxtrg) & (b44 = target) & (2+2 < n): target;
		next(dr) = u & (b42 = mantrg & b32 = bxtrg) & (b22 = target) & (4-2 > 0): target;
		next(dr) = d & (b42 = mantrg & b52 = bxtrg) & (b62 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b42 = flr & (b41 = man | b41 = mantrg)) : man;
        next(dr) = l & (b42 = flr & (b43 = man | b43 = mantrg)): man;
        next(dr) = d & (b42 = flr & (b32 = man | b32 = mantrg)): man;
        next(dr) = u & (b42 = flr & (b52 = man | b52 = mantrg)): man;

    --box to floor
        next(dr) = r & (b42 = flr & (b41 = bx | b41 = bxtrg)) & (b40 = man | b40 = mantrg): bx;
        next(dr) = l & (b42 = flr & (b43 = bx | b43 = bxtrg)) & (b44 = man | b44 = mantrg): bx;
        next(dr) = d & (b42 = flr & (b32 = bx | b32 = bxtrg)) & (b22 = man | b22 = mantrg): bx;
        next(dr) = u & (b42 = flr & (b52 = bx | b52 = bxtrg)) & (b62 = man | b62 = mantrg): bx;

    --man to target
        next(dr) = r & (b42 = target & (b41 = man | b41 = mantrg)): mantrg;
        next(dr) = l & (b42 = target & (b43 = man | b43 = mantrg)): mantrg;
        next(dr) = d & (b42 = target & (b32 = man | b32 = mantrg)): mantrg;
        next(dr) = u & (b42 = target & (b52 = man | b52 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b42 = target & (b41 = bx | b41 = bxtrg)) & (b40 = man | b40 = mantrg): bxtrg;
        next(dr) = l & (b42 = target & (b43 = bx | b43 = bxtrg)) & (b44 = man | b44 = mantrg): bxtrg;
        next(dr) = d & (b42 = target & (b32 = bx | b32 = bxtrg)) & (b22 = man | b22 = mantrg): bxtrg;
        next(dr) = u & (b42 = target & (b52 = bx | b52 = bxtrg)) & (b62 = man | b62 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b42 = bx & (b41 = man | b41 = mantrg)) & (b43 = flr | b43 = target): man;
        next(dr) = l & (b42 = bx & (b43 = man | b43 = mantrg)) & (b41 = flr | b41 = target): man;
        next(dr) = d & (b42 = bx & (b32 = man | b32 = mantrg)) & (b52 = flr | b52 = target): man;
        next(dr) = u & (b42 = bx & (b52 = man | b52 = mantrg)) & (b32 = flr | b32 = target): man;

    --man to box on target
        next(dr) = r & (b42 = bxtrg & (b41 = man | b41 = mantrg)) & (b43 = flr | b43 = target): mantrg;
        next(dr) = l & (b42 = bxtrg & (b43 = man | b43 = mantrg)) & (b41 = flr | b41 = target): mantrg;
        next(dr) = d & (b42 = bxtrg & (b32 = man | b32 = mantrg)) & (b52 = flr | b52 = target): mantrg;
        next(dr) = u & (b42 = bxtrg & (b52 = man | b52 = mantrg)) & (b32 = flr | b32 = target): mantrg;

    TRUE: b42;
esac;
next(b43) := case
	--floor to floor
		next(dr) = l & (b43 = man & b42 =flr):flr;
		next(dr) = r & (b43 = man & b44 =flr):flr;
		next(dr) = u & (b43 = man & b33 =flr):flr;
		next(dr) = d & (b43 = man & b53 =flr):flr;


	--target to floor
		next(dr) = l & (b43 = mantrg & b42 =flr): target;
		next(dr) = r & (b43 = mantrg & b44 =flr): target;
		next(dr) = u & (b43 = mantrg & b33 =flr): target;
		next(dr) = d & (b43 = mantrg & b53 =flr): target;

	--floor to target
		next(dr) = l & (b43 = man & b42 = target):flr;
		next(dr) = r & (b43 = man & b44 = target):flr;
		next(dr) = u & (b43 = man & b33 = target):flr;
		next(dr) = d & (b43 = man & b53 = target):flr;

	--target to target
		next(dr) = l & (b43 = mantrg & b42 = target): target;
		next(dr) = r & (b43 = mantrg & b44 = target): target;
		next(dr) = u & (b43 = mantrg & b33 = target): target;
		next(dr) = d & (b43 = mantrg & b53 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b43 = man & b42 = bx) & (b41 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b43 = man & b44 = bx) & (b45 =flr) & (3+2 < n):flr;
		next(dr) = u & (b43 = man & b33 = bx) & (b23 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b43 = man & b53 = bx) & (b63 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b43 = man & b42 = bx) & (b41 = target) & (3-2 > 0):flr;
		next(dr) = r & (b43 = man & b44 = bx) & (b45 = target) & (3+2 < n):flr;
		next(dr) = u & (b43 = man & b33 = bx) & (b23 = target) & (4-2 > 0):flr;
		next(dr) = d & (b43 = man & b53 = bx) & (b63 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b43 = man & b42 = bxtrg) & (b41 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b43 = man & b44 = bxtrg) & (b45 =flr) & (3+2 < n):flr;
		next(dr) = u & (b43 = man & b33 = bxtrg) & (b23 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b43 = man & b53 = bxtrg) & (b63 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b43 = man & b42 = bxtrg) & (b41 = target) & (3-2 > 0):flr;
		next(dr) = r & (b43 = man & b44 = bxtrg) & (b45 = target) & (3+2 < n):flr;
		next(dr) = u & (b43 = man & b33 = bxtrg) & (b23 = target) & (4-2 > 0):flr;
		next(dr) = d & (b43 = man & b53 = bxtrg) & (b63 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b43 = mantrg & b42 = bx) & (b41 =flr) & (3-2 > 0): target;
		next(dr) = r & (b43 = mantrg & b44 = bx) & (b45 =flr) & (3+2 < n): target;
		next(dr) = u & (b43 = mantrg & b33 = bx) & (b23 =flr) & (4-2 > 0): target;
		next(dr) = d & (b43 = mantrg & b53 = bx) & (b63 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b43 = mantrg & b42 = bx) & (b41 = target) & (3-2 > 0): target;
		next(dr) = r & (b43 = mantrg & b44 = bx) & (b45 = target) & (3+2 < n): target;
		next(dr) = u & (b43 = mantrg & b33 = bx) & (b23 = target) & (4-2 > 0): target;
		next(dr) = d & (b43 = mantrg & b53 = bx) & (b63 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b43 = mantrg & b42 = bxtrg) & (b41 =flr) & (3-2 > 0): target;
		next(dr) = r & (b43 = mantrg & b44 = bxtrg) & (b45 =flr) & (3+2 < n): target;
		next(dr) = u & (b43 = mantrg & b33 = bxtrg) & (b23 =flr) & (4-2 > 0): target;
		next(dr) = d & (b43 = mantrg & b53 = bxtrg) & (b63 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b43 = mantrg & b42 = bxtrg) & (b41 = target) & (3-2 > 0): target;
		next(dr) = r & (b43 = mantrg & b44 = bxtrg) & (b45 = target) & (3+2 < n): target;
		next(dr) = u & (b43 = mantrg & b33 = bxtrg) & (b23 = target) & (4-2 > 0): target;
		next(dr) = d & (b43 = mantrg & b53 = bxtrg) & (b63 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b43 = flr & (b42 = man | b42 = mantrg)) : man;
        next(dr) = l & (b43 = flr & (b44 = man | b44 = mantrg)): man;
        next(dr) = d & (b43 = flr & (b33 = man | b33 = mantrg)): man;
        next(dr) = u & (b43 = flr & (b53 = man | b53 = mantrg)): man;

    --box to floor
        next(dr) = r & (b43 = flr & (b42 = bx | b42 = bxtrg)) & (b41 = man | b41 = mantrg): bx;
        next(dr) = l & (b43 = flr & (b44 = bx | b44 = bxtrg)) & (b45 = man | b45 = mantrg): bx;
        next(dr) = d & (b43 = flr & (b33 = bx | b33 = bxtrg)) & (b23 = man | b23 = mantrg): bx;
        next(dr) = u & (b43 = flr & (b53 = bx | b53 = bxtrg)) & (b63 = man | b63 = mantrg): bx;

    --man to target
        next(dr) = r & (b43 = target & (b42 = man | b42 = mantrg)): mantrg;
        next(dr) = l & (b43 = target & (b44 = man | b44 = mantrg)): mantrg;
        next(dr) = d & (b43 = target & (b33 = man | b33 = mantrg)): mantrg;
        next(dr) = u & (b43 = target & (b53 = man | b53 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b43 = target & (b42 = bx | b42 = bxtrg)) & (b41 = man | b41 = mantrg): bxtrg;
        next(dr) = l & (b43 = target & (b44 = bx | b44 = bxtrg)) & (b45 = man | b45 = mantrg): bxtrg;
        next(dr) = d & (b43 = target & (b33 = bx | b33 = bxtrg)) & (b23 = man | b23 = mantrg): bxtrg;
        next(dr) = u & (b43 = target & (b53 = bx | b53 = bxtrg)) & (b63 = man | b63 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b43 = bx & (b42 = man | b42 = mantrg)) & (b44 = flr | b44 = target): man;
        next(dr) = l & (b43 = bx & (b44 = man | b44 = mantrg)) & (b42 = flr | b42 = target): man;
        next(dr) = d & (b43 = bx & (b33 = man | b33 = mantrg)) & (b53 = flr | b53 = target): man;
        next(dr) = u & (b43 = bx & (b53 = man | b53 = mantrg)) & (b33 = flr | b33 = target): man;

    --man to box on target
        next(dr) = r & (b43 = bxtrg & (b42 = man | b42 = mantrg)) & (b44 = flr | b44 = target): mantrg;
        next(dr) = l & (b43 = bxtrg & (b44 = man | b44 = mantrg)) & (b42 = flr | b42 = target): mantrg;
        next(dr) = d & (b43 = bxtrg & (b33 = man | b33 = mantrg)) & (b53 = flr | b53 = target): mantrg;
        next(dr) = u & (b43 = bxtrg & (b53 = man | b53 = mantrg)) & (b33 = flr | b33 = target): mantrg;

    TRUE: b43;
esac;
next(b44) := case
	--floor to floor
		next(dr) = l & (b44 = man & b43 =flr):flr;
		next(dr) = r & (b44 = man & b45 =flr):flr;
		next(dr) = u & (b44 = man & b34 =flr):flr;
		next(dr) = d & (b44 = man & b54 =flr):flr;


	--target to floor
		next(dr) = l & (b44 = mantrg & b43 =flr): target;
		next(dr) = r & (b44 = mantrg & b45 =flr): target;
		next(dr) = u & (b44 = mantrg & b34 =flr): target;
		next(dr) = d & (b44 = mantrg & b54 =flr): target;

	--floor to target
		next(dr) = l & (b44 = man & b43 = target):flr;
		next(dr) = r & (b44 = man & b45 = target):flr;
		next(dr) = u & (b44 = man & b34 = target):flr;
		next(dr) = d & (b44 = man & b54 = target):flr;

	--target to target
		next(dr) = l & (b44 = mantrg & b43 = target): target;
		next(dr) = r & (b44 = mantrg & b45 = target): target;
		next(dr) = u & (b44 = mantrg & b34 = target): target;
		next(dr) = d & (b44 = mantrg & b54 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b44 = man & b43 = bx) & (b42 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b44 = man & b45 = bx) & (b46 =flr) & (4+2 < n):flr;
		next(dr) = u & (b44 = man & b34 = bx) & (b24 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b44 = man & b54 = bx) & (b64 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b44 = man & b43 = bx) & (b42 = target) & (4-2 > 0):flr;
		next(dr) = r & (b44 = man & b45 = bx) & (b46 = target) & (4+2 < n):flr;
		next(dr) = u & (b44 = man & b34 = bx) & (b24 = target) & (4-2 > 0):flr;
		next(dr) = d & (b44 = man & b54 = bx) & (b64 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b44 = man & b43 = bxtrg) & (b42 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b44 = man & b45 = bxtrg) & (b46 =flr) & (4+2 < n):flr;
		next(dr) = u & (b44 = man & b34 = bxtrg) & (b24 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b44 = man & b54 = bxtrg) & (b64 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b44 = man & b43 = bxtrg) & (b42 = target) & (4-2 > 0):flr;
		next(dr) = r & (b44 = man & b45 = bxtrg) & (b46 = target) & (4+2 < n):flr;
		next(dr) = u & (b44 = man & b34 = bxtrg) & (b24 = target) & (4-2 > 0):flr;
		next(dr) = d & (b44 = man & b54 = bxtrg) & (b64 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b44 = mantrg & b43 = bx) & (b42 =flr) & (4-2 > 0): target;
		next(dr) = r & (b44 = mantrg & b45 = bx) & (b46 =flr) & (4+2 < n): target;
		next(dr) = u & (b44 = mantrg & b34 = bx) & (b24 =flr) & (4-2 > 0): target;
		next(dr) = d & (b44 = mantrg & b54 = bx) & (b64 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b44 = mantrg & b43 = bx) & (b42 = target) & (4-2 > 0): target;
		next(dr) = r & (b44 = mantrg & b45 = bx) & (b46 = target) & (4+2 < n): target;
		next(dr) = u & (b44 = mantrg & b34 = bx) & (b24 = target) & (4-2 > 0): target;
		next(dr) = d & (b44 = mantrg & b54 = bx) & (b64 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b44 = mantrg & b43 = bxtrg) & (b42 =flr) & (4-2 > 0): target;
		next(dr) = r & (b44 = mantrg & b45 = bxtrg) & (b46 =flr) & (4+2 < n): target;
		next(dr) = u & (b44 = mantrg & b34 = bxtrg) & (b24 =flr) & (4-2 > 0): target;
		next(dr) = d & (b44 = mantrg & b54 = bxtrg) & (b64 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b44 = mantrg & b43 = bxtrg) & (b42 = target) & (4-2 > 0): target;
		next(dr) = r & (b44 = mantrg & b45 = bxtrg) & (b46 = target) & (4+2 < n): target;
		next(dr) = u & (b44 = mantrg & b34 = bxtrg) & (b24 = target) & (4-2 > 0): target;
		next(dr) = d & (b44 = mantrg & b54 = bxtrg) & (b64 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b44 = flr & (b43 = man | b43 = mantrg)) : man;
        next(dr) = l & (b44 = flr & (b45 = man | b45 = mantrg)): man;
        next(dr) = d & (b44 = flr & (b34 = man | b34 = mantrg)): man;
        next(dr) = u & (b44 = flr & (b54 = man | b54 = mantrg)): man;

    --box to floor
        next(dr) = r & (b44 = flr & (b43 = bx | b43 = bxtrg)) & (b42 = man | b42 = mantrg): bx;
        next(dr) = l & (b44 = flr & (b45 = bx | b45 = bxtrg)) & (b46 = man | b46 = mantrg): bx;
        next(dr) = d & (b44 = flr & (b34 = bx | b34 = bxtrg)) & (b24 = man | b24 = mantrg): bx;
        next(dr) = u & (b44 = flr & (b54 = bx | b54 = bxtrg)) & (b64 = man | b64 = mantrg): bx;

    --man to target
        next(dr) = r & (b44 = target & (b43 = man | b43 = mantrg)): mantrg;
        next(dr) = l & (b44 = target & (b45 = man | b45 = mantrg)): mantrg;
        next(dr) = d & (b44 = target & (b34 = man | b34 = mantrg)): mantrg;
        next(dr) = u & (b44 = target & (b54 = man | b54 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b44 = target & (b43 = bx | b43 = bxtrg)) & (b42 = man | b42 = mantrg): bxtrg;
        next(dr) = l & (b44 = target & (b45 = bx | b45 = bxtrg)) & (b46 = man | b46 = mantrg): bxtrg;
        next(dr) = d & (b44 = target & (b34 = bx | b34 = bxtrg)) & (b24 = man | b24 = mantrg): bxtrg;
        next(dr) = u & (b44 = target & (b54 = bx | b54 = bxtrg)) & (b64 = man | b64 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b44 = bx & (b43 = man | b43 = mantrg)) & (b45 = flr | b45 = target): man;
        next(dr) = l & (b44 = bx & (b45 = man | b45 = mantrg)) & (b43 = flr | b43 = target): man;
        next(dr) = d & (b44 = bx & (b34 = man | b34 = mantrg)) & (b54 = flr | b54 = target): man;
        next(dr) = u & (b44 = bx & (b54 = man | b54 = mantrg)) & (b34 = flr | b34 = target): man;

    --man to box on target
        next(dr) = r & (b44 = bxtrg & (b43 = man | b43 = mantrg)) & (b45 = flr | b45 = target): mantrg;
        next(dr) = l & (b44 = bxtrg & (b45 = man | b45 = mantrg)) & (b43 = flr | b43 = target): mantrg;
        next(dr) = d & (b44 = bxtrg & (b34 = man | b34 = mantrg)) & (b54 = flr | b54 = target): mantrg;
        next(dr) = u & (b44 = bxtrg & (b54 = man | b54 = mantrg)) & (b34 = flr | b34 = target): mantrg;

    TRUE: b44;
esac;
next(b45) := case
	--floor to floor
		next(dr) = l & (b45 = man & b44 =flr):flr;
		next(dr) = r & (b45 = man & b46 =flr):flr;
		next(dr) = u & (b45 = man & b35 =flr):flr;
		next(dr) = d & (b45 = man & b55 =flr):flr;


	--target to floor
		next(dr) = l & (b45 = mantrg & b44 =flr): target;
		next(dr) = r & (b45 = mantrg & b46 =flr): target;
		next(dr) = u & (b45 = mantrg & b35 =flr): target;
		next(dr) = d & (b45 = mantrg & b55 =flr): target;

	--floor to target
		next(dr) = l & (b45 = man & b44 = target):flr;
		next(dr) = r & (b45 = man & b46 = target):flr;
		next(dr) = u & (b45 = man & b35 = target):flr;
		next(dr) = d & (b45 = man & b55 = target):flr;

	--target to target
		next(dr) = l & (b45 = mantrg & b44 = target): target;
		next(dr) = r & (b45 = mantrg & b46 = target): target;
		next(dr) = u & (b45 = mantrg & b35 = target): target;
		next(dr) = d & (b45 = mantrg & b55 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b45 = man & b44 = bx) & (b43 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b45 = man & b46 = bx) & (b47 =flr) & (5+2 < n):flr;
		next(dr) = u & (b45 = man & b35 = bx) & (b25 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b45 = man & b55 = bx) & (b65 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b45 = man & b44 = bx) & (b43 = target) & (5-2 > 0):flr;
		next(dr) = r & (b45 = man & b46 = bx) & (b47 = target) & (5+2 < n):flr;
		next(dr) = u & (b45 = man & b35 = bx) & (b25 = target) & (4-2 > 0):flr;
		next(dr) = d & (b45 = man & b55 = bx) & (b65 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b45 = man & b44 = bxtrg) & (b43 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b45 = man & b46 = bxtrg) & (b47 =flr) & (5+2 < n):flr;
		next(dr) = u & (b45 = man & b35 = bxtrg) & (b25 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b45 = man & b55 = bxtrg) & (b65 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b45 = man & b44 = bxtrg) & (b43 = target) & (5-2 > 0):flr;
		next(dr) = r & (b45 = man & b46 = bxtrg) & (b47 = target) & (5+2 < n):flr;
		next(dr) = u & (b45 = man & b35 = bxtrg) & (b25 = target) & (4-2 > 0):flr;
		next(dr) = d & (b45 = man & b55 = bxtrg) & (b65 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b45 = mantrg & b44 = bx) & (b43 =flr) & (5-2 > 0): target;
		next(dr) = r & (b45 = mantrg & b46 = bx) & (b47 =flr) & (5+2 < n): target;
		next(dr) = u & (b45 = mantrg & b35 = bx) & (b25 =flr) & (4-2 > 0): target;
		next(dr) = d & (b45 = mantrg & b55 = bx) & (b65 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b45 = mantrg & b44 = bx) & (b43 = target) & (5-2 > 0): target;
		next(dr) = r & (b45 = mantrg & b46 = bx) & (b47 = target) & (5+2 < n): target;
		next(dr) = u & (b45 = mantrg & b35 = bx) & (b25 = target) & (4-2 > 0): target;
		next(dr) = d & (b45 = mantrg & b55 = bx) & (b65 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b45 = mantrg & b44 = bxtrg) & (b43 =flr) & (5-2 > 0): target;
		next(dr) = r & (b45 = mantrg & b46 = bxtrg) & (b47 =flr) & (5+2 < n): target;
		next(dr) = u & (b45 = mantrg & b35 = bxtrg) & (b25 =flr) & (4-2 > 0): target;
		next(dr) = d & (b45 = mantrg & b55 = bxtrg) & (b65 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b45 = mantrg & b44 = bxtrg) & (b43 = target) & (5-2 > 0): target;
		next(dr) = r & (b45 = mantrg & b46 = bxtrg) & (b47 = target) & (5+2 < n): target;
		next(dr) = u & (b45 = mantrg & b35 = bxtrg) & (b25 = target) & (4-2 > 0): target;
		next(dr) = d & (b45 = mantrg & b55 = bxtrg) & (b65 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b45 = flr & (b44 = man | b44 = mantrg)) : man;
        next(dr) = l & (b45 = flr & (b46 = man | b46 = mantrg)): man;
        next(dr) = d & (b45 = flr & (b35 = man | b35 = mantrg)): man;
        next(dr) = u & (b45 = flr & (b55 = man | b55 = mantrg)): man;

    --box to floor
        next(dr) = r & (b45 = flr & (b44 = bx | b44 = bxtrg)) & (b43 = man | b43 = mantrg): bx;
        next(dr) = l & (b45 = flr & (b46 = bx | b46 = bxtrg)) & (b47 = man | b47 = mantrg): bx;
        next(dr) = d & (b45 = flr & (b35 = bx | b35 = bxtrg)) & (b25 = man | b25 = mantrg): bx;
        next(dr) = u & (b45 = flr & (b55 = bx | b55 = bxtrg)) & (b65 = man | b65 = mantrg): bx;

    --man to target
        next(dr) = r & (b45 = target & (b44 = man | b44 = mantrg)): mantrg;
        next(dr) = l & (b45 = target & (b46 = man | b46 = mantrg)): mantrg;
        next(dr) = d & (b45 = target & (b35 = man | b35 = mantrg)): mantrg;
        next(dr) = u & (b45 = target & (b55 = man | b55 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b45 = target & (b44 = bx | b44 = bxtrg)) & (b43 = man | b43 = mantrg): bxtrg;
        next(dr) = l & (b45 = target & (b46 = bx | b46 = bxtrg)) & (b47 = man | b47 = mantrg): bxtrg;
        next(dr) = d & (b45 = target & (b35 = bx | b35 = bxtrg)) & (b25 = man | b25 = mantrg): bxtrg;
        next(dr) = u & (b45 = target & (b55 = bx | b55 = bxtrg)) & (b65 = man | b65 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b45 = bx & (b44 = man | b44 = mantrg)) & (b46 = flr | b46 = target): man;
        next(dr) = l & (b45 = bx & (b46 = man | b46 = mantrg)) & (b44 = flr | b44 = target): man;
        next(dr) = d & (b45 = bx & (b35 = man | b35 = mantrg)) & (b55 = flr | b55 = target): man;
        next(dr) = u & (b45 = bx & (b55 = man | b55 = mantrg)) & (b35 = flr | b35 = target): man;

    --man to box on target
        next(dr) = r & (b45 = bxtrg & (b44 = man | b44 = mantrg)) & (b46 = flr | b46 = target): mantrg;
        next(dr) = l & (b45 = bxtrg & (b46 = man | b46 = mantrg)) & (b44 = flr | b44 = target): mantrg;
        next(dr) = d & (b45 = bxtrg & (b35 = man | b35 = mantrg)) & (b55 = flr | b55 = target): mantrg;
        next(dr) = u & (b45 = bxtrg & (b55 = man | b55 = mantrg)) & (b35 = flr | b35 = target): mantrg;

    TRUE: b45;
esac;
next(b46) := case
	--floor to floor
		next(dr) = l & (b46 = man & b45 =flr):flr;
		next(dr) = r & (b46 = man & b47 =flr):flr;
		next(dr) = u & (b46 = man & b36 =flr):flr;
		next(dr) = d & (b46 = man & b56 =flr):flr;


	--target to floor
		next(dr) = l & (b46 = mantrg & b45 =flr): target;
		next(dr) = r & (b46 = mantrg & b47 =flr): target;
		next(dr) = u & (b46 = mantrg & b36 =flr): target;
		next(dr) = d & (b46 = mantrg & b56 =flr): target;

	--floor to target
		next(dr) = l & (b46 = man & b45 = target):flr;
		next(dr) = r & (b46 = man & b47 = target):flr;
		next(dr) = u & (b46 = man & b36 = target):flr;
		next(dr) = d & (b46 = man & b56 = target):flr;

	--target to target
		next(dr) = l & (b46 = mantrg & b45 = target): target;
		next(dr) = r & (b46 = mantrg & b47 = target): target;
		next(dr) = u & (b46 = mantrg & b36 = target): target;
		next(dr) = d & (b46 = mantrg & b56 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b46 = man & b45 = bx) & (b44 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b46 = man & b47 = bx) & (b48 =flr) & (6+2 < n):flr;
		next(dr) = u & (b46 = man & b36 = bx) & (b26 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b46 = man & b56 = bx) & (b66 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b46 = man & b45 = bx) & (b44 = target) & (6-2 > 0):flr;
		next(dr) = r & (b46 = man & b47 = bx) & (b48 = target) & (6+2 < n):flr;
		next(dr) = u & (b46 = man & b36 = bx) & (b26 = target) & (4-2 > 0):flr;
		next(dr) = d & (b46 = man & b56 = bx) & (b66 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b46 = man & b45 = bxtrg) & (b44 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b46 = man & b47 = bxtrg) & (b48 =flr) & (6+2 < n):flr;
		next(dr) = u & (b46 = man & b36 = bxtrg) & (b26 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b46 = man & b56 = bxtrg) & (b66 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b46 = man & b45 = bxtrg) & (b44 = target) & (6-2 > 0):flr;
		next(dr) = r & (b46 = man & b47 = bxtrg) & (b48 = target) & (6+2 < n):flr;
		next(dr) = u & (b46 = man & b36 = bxtrg) & (b26 = target) & (4-2 > 0):flr;
		next(dr) = d & (b46 = man & b56 = bxtrg) & (b66 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b46 = mantrg & b45 = bx) & (b44 =flr) & (6-2 > 0): target;
		next(dr) = r & (b46 = mantrg & b47 = bx) & (b48 =flr) & (6+2 < n): target;
		next(dr) = u & (b46 = mantrg & b36 = bx) & (b26 =flr) & (4-2 > 0): target;
		next(dr) = d & (b46 = mantrg & b56 = bx) & (b66 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b46 = mantrg & b45 = bx) & (b44 = target) & (6-2 > 0): target;
		next(dr) = r & (b46 = mantrg & b47 = bx) & (b48 = target) & (6+2 < n): target;
		next(dr) = u & (b46 = mantrg & b36 = bx) & (b26 = target) & (4-2 > 0): target;
		next(dr) = d & (b46 = mantrg & b56 = bx) & (b66 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b46 = mantrg & b45 = bxtrg) & (b44 =flr) & (6-2 > 0): target;
		next(dr) = r & (b46 = mantrg & b47 = bxtrg) & (b48 =flr) & (6+2 < n): target;
		next(dr) = u & (b46 = mantrg & b36 = bxtrg) & (b26 =flr) & (4-2 > 0): target;
		next(dr) = d & (b46 = mantrg & b56 = bxtrg) & (b66 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b46 = mantrg & b45 = bxtrg) & (b44 = target) & (6-2 > 0): target;
		next(dr) = r & (b46 = mantrg & b47 = bxtrg) & (b48 = target) & (6+2 < n): target;
		next(dr) = u & (b46 = mantrg & b36 = bxtrg) & (b26 = target) & (4-2 > 0): target;
		next(dr) = d & (b46 = mantrg & b56 = bxtrg) & (b66 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b46 = flr & (b45 = man | b45 = mantrg)) : man;
        next(dr) = l & (b46 = flr & (b47 = man | b47 = mantrg)): man;
        next(dr) = d & (b46 = flr & (b36 = man | b36 = mantrg)): man;
        next(dr) = u & (b46 = flr & (b56 = man | b56 = mantrg)): man;

    --box to floor
        next(dr) = r & (b46 = flr & (b45 = bx | b45 = bxtrg)) & (b44 = man | b44 = mantrg): bx;
        next(dr) = l & (b46 = flr & (b47 = bx | b47 = bxtrg)) & (b48 = man | b48 = mantrg): bx;
        next(dr) = d & (b46 = flr & (b36 = bx | b36 = bxtrg)) & (b26 = man | b26 = mantrg): bx;
        next(dr) = u & (b46 = flr & (b56 = bx | b56 = bxtrg)) & (b66 = man | b66 = mantrg): bx;

    --man to target
        next(dr) = r & (b46 = target & (b45 = man | b45 = mantrg)): mantrg;
        next(dr) = l & (b46 = target & (b47 = man | b47 = mantrg)): mantrg;
        next(dr) = d & (b46 = target & (b36 = man | b36 = mantrg)): mantrg;
        next(dr) = u & (b46 = target & (b56 = man | b56 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b46 = target & (b45 = bx | b45 = bxtrg)) & (b44 = man | b44 = mantrg): bxtrg;
        next(dr) = l & (b46 = target & (b47 = bx | b47 = bxtrg)) & (b48 = man | b48 = mantrg): bxtrg;
        next(dr) = d & (b46 = target & (b36 = bx | b36 = bxtrg)) & (b26 = man | b26 = mantrg): bxtrg;
        next(dr) = u & (b46 = target & (b56 = bx | b56 = bxtrg)) & (b66 = man | b66 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b46 = bx & (b45 = man | b45 = mantrg)) & (b47 = flr | b47 = target): man;
        next(dr) = l & (b46 = bx & (b47 = man | b47 = mantrg)) & (b45 = flr | b45 = target): man;
        next(dr) = d & (b46 = bx & (b36 = man | b36 = mantrg)) & (b56 = flr | b56 = target): man;
        next(dr) = u & (b46 = bx & (b56 = man | b56 = mantrg)) & (b36 = flr | b36 = target): man;

    --man to box on target
        next(dr) = r & (b46 = bxtrg & (b45 = man | b45 = mantrg)) & (b47 = flr | b47 = target): mantrg;
        next(dr) = l & (b46 = bxtrg & (b47 = man | b47 = mantrg)) & (b45 = flr | b45 = target): mantrg;
        next(dr) = d & (b46 = bxtrg & (b36 = man | b36 = mantrg)) & (b56 = flr | b56 = target): mantrg;
        next(dr) = u & (b46 = bxtrg & (b56 = man | b56 = mantrg)) & (b36 = flr | b36 = target): mantrg;

    TRUE: b46;
esac;
next(b47) := case
	--floor to floor
		next(dr) = l & (b47 = man & b46 =flr):flr;
		next(dr) = r & (b47 = man & b48 =flr):flr;
		next(dr) = u & (b47 = man & b37 =flr):flr;
		next(dr) = d & (b47 = man & b57 =flr):flr;


	--target to floor
		next(dr) = l & (b47 = mantrg & b46 =flr): target;
		next(dr) = r & (b47 = mantrg & b48 =flr): target;
		next(dr) = u & (b47 = mantrg & b37 =flr): target;
		next(dr) = d & (b47 = mantrg & b57 =flr): target;

	--floor to target
		next(dr) = l & (b47 = man & b46 = target):flr;
		next(dr) = r & (b47 = man & b48 = target):flr;
		next(dr) = u & (b47 = man & b37 = target):flr;
		next(dr) = d & (b47 = man & b57 = target):flr;

	--target to target
		next(dr) = l & (b47 = mantrg & b46 = target): target;
		next(dr) = r & (b47 = mantrg & b48 = target): target;
		next(dr) = u & (b47 = mantrg & b37 = target): target;
		next(dr) = d & (b47 = mantrg & b57 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b47 = man & b46 = bx) & (b45 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b47 = man & b48 = bx) & (b49 =flr) & (7+2 < n):flr;
		next(dr) = u & (b47 = man & b37 = bx) & (b27 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b47 = man & b57 = bx) & (b67 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b47 = man & b46 = bx) & (b45 = target) & (7-2 > 0):flr;
		next(dr) = r & (b47 = man & b48 = bx) & (b49 = target) & (7+2 < n):flr;
		next(dr) = u & (b47 = man & b37 = bx) & (b27 = target) & (4-2 > 0):flr;
		next(dr) = d & (b47 = man & b57 = bx) & (b67 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b47 = man & b46 = bxtrg) & (b45 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b47 = man & b48 = bxtrg) & (b49 =flr) & (7+2 < n):flr;
		next(dr) = u & (b47 = man & b37 = bxtrg) & (b27 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b47 = man & b57 = bxtrg) & (b67 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b47 = man & b46 = bxtrg) & (b45 = target) & (7-2 > 0):flr;
		next(dr) = r & (b47 = man & b48 = bxtrg) & (b49 = target) & (7+2 < n):flr;
		next(dr) = u & (b47 = man & b37 = bxtrg) & (b27 = target) & (4-2 > 0):flr;
		next(dr) = d & (b47 = man & b57 = bxtrg) & (b67 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b47 = mantrg & b46 = bx) & (b45 =flr) & (7-2 > 0): target;
		next(dr) = r & (b47 = mantrg & b48 = bx) & (b49 =flr) & (7+2 < n): target;
		next(dr) = u & (b47 = mantrg & b37 = bx) & (b27 =flr) & (4-2 > 0): target;
		next(dr) = d & (b47 = mantrg & b57 = bx) & (b67 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b47 = mantrg & b46 = bx) & (b45 = target) & (7-2 > 0): target;
		next(dr) = r & (b47 = mantrg & b48 = bx) & (b49 = target) & (7+2 < n): target;
		next(dr) = u & (b47 = mantrg & b37 = bx) & (b27 = target) & (4-2 > 0): target;
		next(dr) = d & (b47 = mantrg & b57 = bx) & (b67 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b47 = mantrg & b46 = bxtrg) & (b45 =flr) & (7-2 > 0): target;
		next(dr) = r & (b47 = mantrg & b48 = bxtrg) & (b49 =flr) & (7+2 < n): target;
		next(dr) = u & (b47 = mantrg & b37 = bxtrg) & (b27 =flr) & (4-2 > 0): target;
		next(dr) = d & (b47 = mantrg & b57 = bxtrg) & (b67 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b47 = mantrg & b46 = bxtrg) & (b45 = target) & (7-2 > 0): target;
		next(dr) = r & (b47 = mantrg & b48 = bxtrg) & (b49 = target) & (7+2 < n): target;
		next(dr) = u & (b47 = mantrg & b37 = bxtrg) & (b27 = target) & (4-2 > 0): target;
		next(dr) = d & (b47 = mantrg & b57 = bxtrg) & (b67 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b47 = flr & (b46 = man | b46 = mantrg)) : man;
        next(dr) = l & (b47 = flr & (b48 = man | b48 = mantrg)): man;
        next(dr) = d & (b47 = flr & (b37 = man | b37 = mantrg)): man;
        next(dr) = u & (b47 = flr & (b57 = man | b57 = mantrg)): man;

    --box to floor
        next(dr) = r & (b47 = flr & (b46 = bx | b46 = bxtrg)) & (b45 = man | b45 = mantrg): bx;
        next(dr) = l & (b47 = flr & (b48 = bx | b48 = bxtrg)) & (b49 = man | b49 = mantrg): bx;
        next(dr) = d & (b47 = flr & (b37 = bx | b37 = bxtrg)) & (b27 = man | b27 = mantrg): bx;
        next(dr) = u & (b47 = flr & (b57 = bx | b57 = bxtrg)) & (b67 = man | b67 = mantrg): bx;

    --man to target
        next(dr) = r & (b47 = target & (b46 = man | b46 = mantrg)): mantrg;
        next(dr) = l & (b47 = target & (b48 = man | b48 = mantrg)): mantrg;
        next(dr) = d & (b47 = target & (b37 = man | b37 = mantrg)): mantrg;
        next(dr) = u & (b47 = target & (b57 = man | b57 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b47 = target & (b46 = bx | b46 = bxtrg)) & (b45 = man | b45 = mantrg): bxtrg;
        next(dr) = l & (b47 = target & (b48 = bx | b48 = bxtrg)) & (b49 = man | b49 = mantrg): bxtrg;
        next(dr) = d & (b47 = target & (b37 = bx | b37 = bxtrg)) & (b27 = man | b27 = mantrg): bxtrg;
        next(dr) = u & (b47 = target & (b57 = bx | b57 = bxtrg)) & (b67 = man | b67 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b47 = bx & (b46 = man | b46 = mantrg)) & (b48 = flr | b48 = target): man;
        next(dr) = l & (b47 = bx & (b48 = man | b48 = mantrg)) & (b46 = flr | b46 = target): man;
        next(dr) = d & (b47 = bx & (b37 = man | b37 = mantrg)) & (b57 = flr | b57 = target): man;
        next(dr) = u & (b47 = bx & (b57 = man | b57 = mantrg)) & (b37 = flr | b37 = target): man;

    --man to box on target
        next(dr) = r & (b47 = bxtrg & (b46 = man | b46 = mantrg)) & (b48 = flr | b48 = target): mantrg;
        next(dr) = l & (b47 = bxtrg & (b48 = man | b48 = mantrg)) & (b46 = flr | b46 = target): mantrg;
        next(dr) = d & (b47 = bxtrg & (b37 = man | b37 = mantrg)) & (b57 = flr | b57 = target): mantrg;
        next(dr) = u & (b47 = bxtrg & (b57 = man | b57 = mantrg)) & (b37 = flr | b37 = target): mantrg;

    TRUE: b47;
esac;
next(b48) := case
	--floor to floor
		next(dr) = l & (b48 = man & b47 =flr):flr;
		next(dr) = r & (b48 = man & b49 =flr):flr;
		next(dr) = u & (b48 = man & b38 =flr):flr;
		next(dr) = d & (b48 = man & b58 =flr):flr;


	--target to floor
		next(dr) = l & (b48 = mantrg & b47 =flr): target;
		next(dr) = r & (b48 = mantrg & b49 =flr): target;
		next(dr) = u & (b48 = mantrg & b38 =flr): target;
		next(dr) = d & (b48 = mantrg & b58 =flr): target;

	--floor to target
		next(dr) = l & (b48 = man & b47 = target):flr;
		next(dr) = r & (b48 = man & b49 = target):flr;
		next(dr) = u & (b48 = man & b38 = target):flr;
		next(dr) = d & (b48 = man & b58 = target):flr;

	--target to target
		next(dr) = l & (b48 = mantrg & b47 = target): target;
		next(dr) = r & (b48 = mantrg & b49 = target): target;
		next(dr) = u & (b48 = mantrg & b38 = target): target;
		next(dr) = d & (b48 = mantrg & b58 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b48 = man & b47 = bx) & (b46 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b48 = man & b49 = bx) & (b410 =flr) & (8+2 < n):flr;
		next(dr) = u & (b48 = man & b38 = bx) & (b28 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b48 = man & b58 = bx) & (b68 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b48 = man & b47 = bx) & (b46 = target) & (8-2 > 0):flr;
		next(dr) = r & (b48 = man & b49 = bx) & (b410 = target) & (8+2 < n):flr;
		next(dr) = u & (b48 = man & b38 = bx) & (b28 = target) & (4-2 > 0):flr;
		next(dr) = d & (b48 = man & b58 = bx) & (b68 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b48 = man & b47 = bxtrg) & (b46 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b48 = man & b49 = bxtrg) & (b410 =flr) & (8+2 < n):flr;
		next(dr) = u & (b48 = man & b38 = bxtrg) & (b28 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b48 = man & b58 = bxtrg) & (b68 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b48 = man & b47 = bxtrg) & (b46 = target) & (8-2 > 0):flr;
		next(dr) = r & (b48 = man & b49 = bxtrg) & (b410 = target) & (8+2 < n):flr;
		next(dr) = u & (b48 = man & b38 = bxtrg) & (b28 = target) & (4-2 > 0):flr;
		next(dr) = d & (b48 = man & b58 = bxtrg) & (b68 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b48 = mantrg & b47 = bx) & (b46 =flr) & (8-2 > 0): target;
		next(dr) = r & (b48 = mantrg & b49 = bx) & (b410 =flr) & (8+2 < n): target;
		next(dr) = u & (b48 = mantrg & b38 = bx) & (b28 =flr) & (4-2 > 0): target;
		next(dr) = d & (b48 = mantrg & b58 = bx) & (b68 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b48 = mantrg & b47 = bx) & (b46 = target) & (8-2 > 0): target;
		next(dr) = r & (b48 = mantrg & b49 = bx) & (b410 = target) & (8+2 < n): target;
		next(dr) = u & (b48 = mantrg & b38 = bx) & (b28 = target) & (4-2 > 0): target;
		next(dr) = d & (b48 = mantrg & b58 = bx) & (b68 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b48 = mantrg & b47 = bxtrg) & (b46 =flr) & (8-2 > 0): target;
		next(dr) = r & (b48 = mantrg & b49 = bxtrg) & (b410 =flr) & (8+2 < n): target;
		next(dr) = u & (b48 = mantrg & b38 = bxtrg) & (b28 =flr) & (4-2 > 0): target;
		next(dr) = d & (b48 = mantrg & b58 = bxtrg) & (b68 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b48 = mantrg & b47 = bxtrg) & (b46 = target) & (8-2 > 0): target;
		next(dr) = r & (b48 = mantrg & b49 = bxtrg) & (b410 = target) & (8+2 < n): target;
		next(dr) = u & (b48 = mantrg & b38 = bxtrg) & (b28 = target) & (4-2 > 0): target;
		next(dr) = d & (b48 = mantrg & b58 = bxtrg) & (b68 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b48 = flr & (b47 = man | b47 = mantrg)) : man;
        next(dr) = l & (b48 = flr & (b49 = man | b49 = mantrg)): man;
        next(dr) = d & (b48 = flr & (b38 = man | b38 = mantrg)): man;
        next(dr) = u & (b48 = flr & (b58 = man | b58 = mantrg)): man;

    --box to floor
        next(dr) = r & (b48 = flr & (b47 = bx | b47 = bxtrg)) & (b46 = man | b46 = mantrg): bx;
        next(dr) = l & (b48 = flr & (b49 = bx | b49 = bxtrg)) & (b410 = man | b410 = mantrg): bx;
        next(dr) = d & (b48 = flr & (b38 = bx | b38 = bxtrg)) & (b28 = man | b28 = mantrg): bx;
        next(dr) = u & (b48 = flr & (b58 = bx | b58 = bxtrg)) & (b68 = man | b68 = mantrg): bx;

    --man to target
        next(dr) = r & (b48 = target & (b47 = man | b47 = mantrg)): mantrg;
        next(dr) = l & (b48 = target & (b49 = man | b49 = mantrg)): mantrg;
        next(dr) = d & (b48 = target & (b38 = man | b38 = mantrg)): mantrg;
        next(dr) = u & (b48 = target & (b58 = man | b58 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b48 = target & (b47 = bx | b47 = bxtrg)) & (b46 = man | b46 = mantrg): bxtrg;
        next(dr) = l & (b48 = target & (b49 = bx | b49 = bxtrg)) & (b410 = man | b410 = mantrg): bxtrg;
        next(dr) = d & (b48 = target & (b38 = bx | b38 = bxtrg)) & (b28 = man | b28 = mantrg): bxtrg;
        next(dr) = u & (b48 = target & (b58 = bx | b58 = bxtrg)) & (b68 = man | b68 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b48 = bx & (b47 = man | b47 = mantrg)) & (b49 = flr | b49 = target): man;
        next(dr) = l & (b48 = bx & (b49 = man | b49 = mantrg)) & (b47 = flr | b47 = target): man;
        next(dr) = d & (b48 = bx & (b38 = man | b38 = mantrg)) & (b58 = flr | b58 = target): man;
        next(dr) = u & (b48 = bx & (b58 = man | b58 = mantrg)) & (b38 = flr | b38 = target): man;

    --man to box on target
        next(dr) = r & (b48 = bxtrg & (b47 = man | b47 = mantrg)) & (b49 = flr | b49 = target): mantrg;
        next(dr) = l & (b48 = bxtrg & (b49 = man | b49 = mantrg)) & (b47 = flr | b47 = target): mantrg;
        next(dr) = d & (b48 = bxtrg & (b38 = man | b38 = mantrg)) & (b58 = flr | b58 = target): mantrg;
        next(dr) = u & (b48 = bxtrg & (b58 = man | b58 = mantrg)) & (b38 = flr | b38 = target): mantrg;

    TRUE: b48;
esac;
next(b49) := case
	--floor to floor
		next(dr) = l & (b49 = man & b48 =flr):flr;
		next(dr) = r & (b49 = man & b410 =flr):flr;
		next(dr) = u & (b49 = man & b39 =flr):flr;
		next(dr) = d & (b49 = man & b59 =flr):flr;


	--target to floor
		next(dr) = l & (b49 = mantrg & b48 =flr): target;
		next(dr) = r & (b49 = mantrg & b410 =flr): target;
		next(dr) = u & (b49 = mantrg & b39 =flr): target;
		next(dr) = d & (b49 = mantrg & b59 =flr): target;

	--floor to target
		next(dr) = l & (b49 = man & b48 = target):flr;
		next(dr) = r & (b49 = man & b410 = target):flr;
		next(dr) = u & (b49 = man & b39 = target):flr;
		next(dr) = d & (b49 = man & b59 = target):flr;

	--target to target
		next(dr) = l & (b49 = mantrg & b48 = target): target;
		next(dr) = r & (b49 = mantrg & b410 = target): target;
		next(dr) = u & (b49 = mantrg & b39 = target): target;
		next(dr) = d & (b49 = mantrg & b59 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b49 = man & b48 = bx) & (b47 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b49 = man & b39 = bx) & (b29 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b49 = man & b59 = bx) & (b69 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b49 = man & b48 = bx) & (b47 = target) & (9-2 > 0):flr;
		next(dr) = u & (b49 = man & b39 = bx) & (b29 = target) & (4-2 > 0):flr;
		next(dr) = d & (b49 = man & b59 = bx) & (b69 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b49 = man & b48 = bxtrg) & (b47 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b49 = man & b39 = bxtrg) & (b29 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b49 = man & b59 = bxtrg) & (b69 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b49 = man & b48 = bxtrg) & (b47 = target) & (9-2 > 0):flr;
		next(dr) = u & (b49 = man & b39 = bxtrg) & (b29 = target) & (4-2 > 0):flr;
		next(dr) = d & (b49 = man & b59 = bxtrg) & (b69 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b49 = mantrg & b48 = bx) & (b47 =flr) & (9-2 > 0): target;
		next(dr) = u & (b49 = mantrg & b39 = bx) & (b29 =flr) & (4-2 > 0): target;
		next(dr) = d & (b49 = mantrg & b59 = bx) & (b69 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b49 = mantrg & b48 = bx) & (b47 = target) & (9-2 > 0): target;
		next(dr) = u & (b49 = mantrg & b39 = bx) & (b29 = target) & (4-2 > 0): target;
		next(dr) = d & (b49 = mantrg & b59 = bx) & (b69 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b49 = mantrg & b48 = bxtrg) & (b47 =flr) & (9-2 > 0): target;
		next(dr) = u & (b49 = mantrg & b39 = bxtrg) & (b29 =flr) & (4-2 > 0): target;
		next(dr) = d & (b49 = mantrg & b59 = bxtrg) & (b69 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b49 = mantrg & b48 = bxtrg) & (b47 = target) & (9-2 > 0): target;
		next(dr) = u & (b49 = mantrg & b39 = bxtrg) & (b29 = target) & (4-2 > 0): target;
		next(dr) = d & (b49 = mantrg & b59 = bxtrg) & (b69 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b49 = flr & (b48 = man | b48 = mantrg)) : man;
        next(dr) = l & (b49 = flr & (b410 = man | b410 = mantrg)): man;
        next(dr) = d & (b49 = flr & (b39 = man | b39 = mantrg)): man;
        next(dr) = u & (b49 = flr & (b59 = man | b59 = mantrg)): man;

    --box to floor
        next(dr) = r & (b49 = flr & (b48 = bx | b48 = bxtrg)) & (b47 = man | b47 = mantrg): bx;
        next(dr) = d & (b49 = flr & (b39 = bx | b39 = bxtrg)) & (b29 = man | b29 = mantrg): bx;
        next(dr) = u & (b49 = flr & (b59 = bx | b59 = bxtrg)) & (b69 = man | b69 = mantrg): bx;

    --man to target
        next(dr) = r & (b49 = target & (b48 = man | b48 = mantrg)): mantrg;
        next(dr) = l & (b49 = target & (b410 = man | b410 = mantrg)): mantrg;
        next(dr) = d & (b49 = target & (b39 = man | b39 = mantrg)): mantrg;
        next(dr) = u & (b49 = target & (b59 = man | b59 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b49 = target & (b48 = bx | b48 = bxtrg)) & (b47 = man | b47 = mantrg): bxtrg;
        next(dr) = d & (b49 = target & (b39 = bx | b39 = bxtrg)) & (b29 = man | b29 = mantrg): bxtrg;
        next(dr) = u & (b49 = target & (b59 = bx | b59 = bxtrg)) & (b69 = man | b69 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b49 = bx & (b48 = man | b48 = mantrg)) & (b410 = flr | b410 = target): man;
        next(dr) = l & (b49 = bx & (b410 = man | b410 = mantrg)) & (b48 = flr | b48 = target): man;
        next(dr) = d & (b49 = bx & (b39 = man | b39 = mantrg)) & (b59 = flr | b59 = target): man;
        next(dr) = u & (b49 = bx & (b59 = man | b59 = mantrg)) & (b39 = flr | b39 = target): man;

    --man to box on target
        next(dr) = r & (b49 = bxtrg & (b48 = man | b48 = mantrg)) & (b410 = flr | b410 = target): mantrg;
        next(dr) = l & (b49 = bxtrg & (b410 = man | b410 = mantrg)) & (b48 = flr | b48 = target): mantrg;
        next(dr) = d & (b49 = bxtrg & (b39 = man | b39 = mantrg)) & (b59 = flr | b59 = target): mantrg;
        next(dr) = u & (b49 = bxtrg & (b59 = man | b59 = mantrg)) & (b39 = flr | b39 = target): mantrg;

    TRUE: b49;
esac;
next(b410) := case
	--floor to floor
		next(dr) = l & (b410 = man & b49 =flr):flr;
		next(dr) = u & (b410 = man & b310 =flr):flr;
		next(dr) = d & (b410 = man & b510 =flr):flr;


	--target to floor
		next(dr) = l & (b410 = mantrg & b49 =flr): target;
		next(dr) = u & (b410 = mantrg & b310 =flr): target;
		next(dr) = d & (b410 = mantrg & b510 =flr): target;

	--floor to target
		next(dr) = l & (b410 = man & b49 = target):flr;
		next(dr) = u & (b410 = man & b310 = target):flr;
		next(dr) = d & (b410 = man & b510 = target):flr;

	--target to target
		next(dr) = l & (b410 = mantrg & b49 = target): target;
		next(dr) = u & (b410 = mantrg & b310 = target): target;
		next(dr) = d & (b410 = mantrg & b510 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b410 = man & b49 = bx) & (b48 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b410 = man & b310 = bx) & (b210 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b410 = man & b510 = bx) & (b610 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b410 = man & b49 = bx) & (b48 = target) & (10-2 > 0):flr;
		next(dr) = u & (b410 = man & b310 = bx) & (b210 = target) & (4-2 > 0):flr;
		next(dr) = d & (b410 = man & b510 = bx) & (b610 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b410 = man & b49 = bxtrg) & (b48 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b410 = man & b310 = bxtrg) & (b210 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b410 = man & b510 = bxtrg) & (b610 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b410 = man & b49 = bxtrg) & (b48 = target) & (10-2 > 0):flr;
		next(dr) = u & (b410 = man & b310 = bxtrg) & (b210 = target) & (4-2 > 0):flr;
		next(dr) = d & (b410 = man & b510 = bxtrg) & (b610 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b410 = mantrg & b49 = bx) & (b48 =flr) & (10-2 > 0): target;
		next(dr) = u & (b410 = mantrg & b310 = bx) & (b210 =flr) & (4-2 > 0): target;
		next(dr) = d & (b410 = mantrg & b510 = bx) & (b610 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b410 = mantrg & b49 = bx) & (b48 = target) & (10-2 > 0): target;
		next(dr) = u & (b410 = mantrg & b310 = bx) & (b210 = target) & (4-2 > 0): target;
		next(dr) = d & (b410 = mantrg & b510 = bx) & (b610 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b410 = mantrg & b49 = bxtrg) & (b48 =flr) & (10-2 > 0): target;
		next(dr) = u & (b410 = mantrg & b310 = bxtrg) & (b210 =flr) & (4-2 > 0): target;
		next(dr) = d & (b410 = mantrg & b510 = bxtrg) & (b610 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b410 = mantrg & b49 = bxtrg) & (b48 = target) & (10-2 > 0): target;
		next(dr) = u & (b410 = mantrg & b310 = bxtrg) & (b210 = target) & (4-2 > 0): target;
		next(dr) = d & (b410 = mantrg & b510 = bxtrg) & (b610 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b410 = flr & (b49 = man | b49 = mantrg)) : man;
        next(dr) = d & (b410 = flr & (b310 = man | b310 = mantrg)): man;
        next(dr) = u & (b410 = flr & (b510 = man | b510 = mantrg)): man;

    --box to floor
        next(dr) = r & (b410 = flr & (b49 = bx | b49 = bxtrg)) & (b48 = man | b48 = mantrg): bx;
        next(dr) = d & (b410 = flr & (b310 = bx | b310 = bxtrg)) & (b210 = man | b210 = mantrg): bx;
        next(dr) = u & (b410 = flr & (b510 = bx | b510 = bxtrg)) & (b610 = man | b610 = mantrg): bx;

    --man to target
        next(dr) = r & (b410 = target & (b49 = man | b49 = mantrg)): mantrg;
        next(dr) = d & (b410 = target & (b310 = man | b310 = mantrg)): mantrg;
        next(dr) = u & (b410 = target & (b510 = man | b510 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b410 = target & (b49 = bx | b49 = bxtrg)) & (b48 = man | b48 = mantrg): bxtrg;
        next(dr) = d & (b410 = target & (b310 = bx | b310 = bxtrg)) & (b210 = man | b210 = mantrg): bxtrg;
        next(dr) = u & (b410 = target & (b510 = bx | b510 = bxtrg)) & (b610 = man | b610 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b410 = bx & (b310 = man | b310 = mantrg)) & (b510 = flr | b510 = target): man;
        next(dr) = u & (b410 = bx & (b510 = man | b510 = mantrg)) & (b310 = flr | b310 = target): man;

    --man to box on target
        next(dr) = d & (b410 = bxtrg & (b310 = man | b310 = mantrg)) & (b510 = flr | b510 = target): mantrg;
        next(dr) = u & (b410 = bxtrg & (b510 = man | b510 = mantrg)) & (b310 = flr | b310 = target): mantrg;

    TRUE: b410;
esac;
next(b50) := case
	--floor to floor
		next(dr) = r & (b50 = man & b51 =flr):flr;
		next(dr) = u & (b50 = man & b40 =flr):flr;
		next(dr) = d & (b50 = man & b60 =flr):flr;


	--target to floor
		next(dr) = r & (b50 = mantrg & b51 =flr): target;
		next(dr) = u & (b50 = mantrg & b40 =flr): target;
		next(dr) = d & (b50 = mantrg & b60 =flr): target;

	--floor to target
		next(dr) = r & (b50 = man & b51 = target):flr;
		next(dr) = u & (b50 = man & b40 = target):flr;
		next(dr) = d & (b50 = man & b60 = target):flr;

	--target to target
		next(dr) = r & (b50 = mantrg & b51 = target): target;
		next(dr) = u & (b50 = mantrg & b40 = target): target;
		next(dr) = d & (b50 = mantrg & b60 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b50 = man & b51 = bx) & (b52 =flr) & (0+2 < n):flr;
		next(dr) = u & (b50 = man & b40 = bx) & (b30 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b50 = man & b60 = bx) & (b70 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b50 = man & b51 = bx) & (b52 = target) & (0+2 < n):flr;
		next(dr) = u & (b50 = man & b40 = bx) & (b30 = target) & (5-2 > 0):flr;
		next(dr) = d & (b50 = man & b60 = bx) & (b70 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b50 = man & b51 = bxtrg) & (b52 =flr) & (0+2 < n):flr;
		next(dr) = u & (b50 = man & b40 = bxtrg) & (b30 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b50 = man & b60 = bxtrg) & (b70 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b50 = man & b51 = bxtrg) & (b52 = target) & (0+2 < n):flr;
		next(dr) = u & (b50 = man & b40 = bxtrg) & (b30 = target) & (5-2 > 0):flr;
		next(dr) = d & (b50 = man & b60 = bxtrg) & (b70 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b50 = mantrg & b51 = bx) & (b52 =flr) & (0+2 < n): target;
		next(dr) = u & (b50 = mantrg & b40 = bx) & (b30 =flr) & (5-2 > 0): target;
		next(dr) = d & (b50 = mantrg & b60 = bx) & (b70 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b50 = mantrg & b51 = bx) & (b52 = target) & (0+2 < n): target;
		next(dr) = u & (b50 = mantrg & b40 = bx) & (b30 = target) & (5-2 > 0): target;
		next(dr) = d & (b50 = mantrg & b60 = bx) & (b70 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b50 = mantrg & b51 = bxtrg) & (b52 =flr) & (0+2 < n): target;
		next(dr) = u & (b50 = mantrg & b40 = bxtrg) & (b30 =flr) & (5-2 > 0): target;
		next(dr) = d & (b50 = mantrg & b60 = bxtrg) & (b70 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b50 = mantrg & b51 = bxtrg) & (b52 = target) & (0+2 < n): target;
		next(dr) = u & (b50 = mantrg & b40 = bxtrg) & (b30 = target) & (5-2 > 0): target;
		next(dr) = d & (b50 = mantrg & b60 = bxtrg) & (b70 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = l & (b50 = flr & (b51 = man | b51 = mantrg)): man;
        next(dr) = d & (b50 = flr & (b40 = man | b40 = mantrg)): man;
        next(dr) = u & (b50 = flr & (b60 = man | b60 = mantrg)): man;

    --box to floor
        next(dr) = l & (b50 = flr & (b51 = bx | b51 = bxtrg)) & (b52 = man | b52 = mantrg): bx;
        next(dr) = d & (b50 = flr & (b40 = bx | b40 = bxtrg)) & (b30 = man | b30 = mantrg): bx;
        next(dr) = u & (b50 = flr & (b60 = bx | b60 = bxtrg)) & (b70 = man | b70 = mantrg): bx;

    --man to target
        next(dr) = l & (b50 = target & (b51 = man | b51 = mantrg)): mantrg;
        next(dr) = d & (b50 = target & (b40 = man | b40 = mantrg)): mantrg;
        next(dr) = u & (b50 = target & (b60 = man | b60 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b50 = target & (b51 = bx | b51 = bxtrg)) & (b52 = man | b52 = mantrg): bxtrg;
        next(dr) = d & (b50 = target & (b40 = bx | b40 = bxtrg)) & (b30 = man | b30 = mantrg): bxtrg;
        next(dr) = u & (b50 = target & (b60 = bx | b60 = bxtrg)) & (b70 = man | b70 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b50 = bx & (b40 = man | b40 = mantrg)) & (b60 = flr | b60 = target): man;
        next(dr) = u & (b50 = bx & (b60 = man | b60 = mantrg)) & (b40 = flr | b40 = target): man;

    --man to box on target
        next(dr) = d & (b50 = bxtrg & (b40 = man | b40 = mantrg)) & (b60 = flr | b60 = target): mantrg;
        next(dr) = u & (b50 = bxtrg & (b60 = man | b60 = mantrg)) & (b40 = flr | b40 = target): mantrg;

    TRUE: b50;
esac;
next(b51) := case
	--floor to floor
		next(dr) = l & (b51 = man & b50 =flr):flr;
		next(dr) = r & (b51 = man & b52 =flr):flr;
		next(dr) = u & (b51 = man & b41 =flr):flr;
		next(dr) = d & (b51 = man & b61 =flr):flr;


	--target to floor
		next(dr) = l & (b51 = mantrg & b50 =flr): target;
		next(dr) = r & (b51 = mantrg & b52 =flr): target;
		next(dr) = u & (b51 = mantrg & b41 =flr): target;
		next(dr) = d & (b51 = mantrg & b61 =flr): target;

	--floor to target
		next(dr) = l & (b51 = man & b50 = target):flr;
		next(dr) = r & (b51 = man & b52 = target):flr;
		next(dr) = u & (b51 = man & b41 = target):flr;
		next(dr) = d & (b51 = man & b61 = target):flr;

	--target to target
		next(dr) = l & (b51 = mantrg & b50 = target): target;
		next(dr) = r & (b51 = mantrg & b52 = target): target;
		next(dr) = u & (b51 = mantrg & b41 = target): target;
		next(dr) = d & (b51 = mantrg & b61 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b51 = man & b52 = bx) & (b53 =flr) & (1+2 < n):flr;
		next(dr) = u & (b51 = man & b41 = bx) & (b31 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b51 = man & b61 = bx) & (b71 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b51 = man & b52 = bx) & (b53 = target) & (1+2 < n):flr;
		next(dr) = u & (b51 = man & b41 = bx) & (b31 = target) & (5-2 > 0):flr;
		next(dr) = d & (b51 = man & b61 = bx) & (b71 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b51 = man & b52 = bxtrg) & (b53 =flr) & (1+2 < n):flr;
		next(dr) = u & (b51 = man & b41 = bxtrg) & (b31 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b51 = man & b61 = bxtrg) & (b71 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b51 = man & b52 = bxtrg) & (b53 = target) & (1+2 < n):flr;
		next(dr) = u & (b51 = man & b41 = bxtrg) & (b31 = target) & (5-2 > 0):flr;
		next(dr) = d & (b51 = man & b61 = bxtrg) & (b71 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b51 = mantrg & b52 = bx) & (b53 =flr) & (1+2 < n): target;
		next(dr) = u & (b51 = mantrg & b41 = bx) & (b31 =flr) & (5-2 > 0): target;
		next(dr) = d & (b51 = mantrg & b61 = bx) & (b71 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b51 = mantrg & b52 = bx) & (b53 = target) & (1+2 < n): target;
		next(dr) = u & (b51 = mantrg & b41 = bx) & (b31 = target) & (5-2 > 0): target;
		next(dr) = d & (b51 = mantrg & b61 = bx) & (b71 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b51 = mantrg & b52 = bxtrg) & (b53 =flr) & (1+2 < n): target;
		next(dr) = u & (b51 = mantrg & b41 = bxtrg) & (b31 =flr) & (5-2 > 0): target;
		next(dr) = d & (b51 = mantrg & b61 = bxtrg) & (b71 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b51 = mantrg & b52 = bxtrg) & (b53 = target) & (1+2 < n): target;
		next(dr) = u & (b51 = mantrg & b41 = bxtrg) & (b31 = target) & (5-2 > 0): target;
		next(dr) = d & (b51 = mantrg & b61 = bxtrg) & (b71 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b51 = flr & (b50 = man | b50 = mantrg)) : man;
        next(dr) = l & (b51 = flr & (b52 = man | b52 = mantrg)): man;
        next(dr) = d & (b51 = flr & (b41 = man | b41 = mantrg)): man;
        next(dr) = u & (b51 = flr & (b61 = man | b61 = mantrg)): man;

    --box to floor
        next(dr) = l & (b51 = flr & (b52 = bx | b52 = bxtrg)) & (b53 = man | b53 = mantrg): bx;
        next(dr) = d & (b51 = flr & (b41 = bx | b41 = bxtrg)) & (b31 = man | b31 = mantrg): bx;
        next(dr) = u & (b51 = flr & (b61 = bx | b61 = bxtrg)) & (b71 = man | b71 = mantrg): bx;

    --man to target
        next(dr) = r & (b51 = target & (b50 = man | b50 = mantrg)): mantrg;
        next(dr) = l & (b51 = target & (b52 = man | b52 = mantrg)): mantrg;
        next(dr) = d & (b51 = target & (b41 = man | b41 = mantrg)): mantrg;
        next(dr) = u & (b51 = target & (b61 = man | b61 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b51 = target & (b52 = bx | b52 = bxtrg)) & (b53 = man | b53 = mantrg): bxtrg;
        next(dr) = d & (b51 = target & (b41 = bx | b41 = bxtrg)) & (b31 = man | b31 = mantrg): bxtrg;
        next(dr) = u & (b51 = target & (b61 = bx | b61 = bxtrg)) & (b71 = man | b71 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b51 = bx & (b50 = man | b50 = mantrg)) & (b52 = flr | b52 = target): man;
        next(dr) = l & (b51 = bx & (b52 = man | b52 = mantrg)) & (b50 = flr | b50 = target): man;
        next(dr) = d & (b51 = bx & (b41 = man | b41 = mantrg)) & (b61 = flr | b61 = target): man;
        next(dr) = u & (b51 = bx & (b61 = man | b61 = mantrg)) & (b41 = flr | b41 = target): man;

    --man to box on target
        next(dr) = r & (b51 = bxtrg & (b50 = man | b50 = mantrg)) & (b52 = flr | b52 = target): mantrg;
        next(dr) = l & (b51 = bxtrg & (b52 = man | b52 = mantrg)) & (b50 = flr | b50 = target): mantrg;
        next(dr) = d & (b51 = bxtrg & (b41 = man | b41 = mantrg)) & (b61 = flr | b61 = target): mantrg;
        next(dr) = u & (b51 = bxtrg & (b61 = man | b61 = mantrg)) & (b41 = flr | b41 = target): mantrg;

    TRUE: b51;
esac;
next(b52) := case
	--floor to floor
		next(dr) = l & (b52 = man & b51 =flr):flr;
		next(dr) = r & (b52 = man & b53 =flr):flr;
		next(dr) = u & (b52 = man & b42 =flr):flr;
		next(dr) = d & (b52 = man & b62 =flr):flr;


	--target to floor
		next(dr) = l & (b52 = mantrg & b51 =flr): target;
		next(dr) = r & (b52 = mantrg & b53 =flr): target;
		next(dr) = u & (b52 = mantrg & b42 =flr): target;
		next(dr) = d & (b52 = mantrg & b62 =flr): target;

	--floor to target
		next(dr) = l & (b52 = man & b51 = target):flr;
		next(dr) = r & (b52 = man & b53 = target):flr;
		next(dr) = u & (b52 = man & b42 = target):flr;
		next(dr) = d & (b52 = man & b62 = target):flr;

	--target to target
		next(dr) = l & (b52 = mantrg & b51 = target): target;
		next(dr) = r & (b52 = mantrg & b53 = target): target;
		next(dr) = u & (b52 = mantrg & b42 = target): target;
		next(dr) = d & (b52 = mantrg & b62 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b52 = man & b51 = bx) & (b50 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b52 = man & b53 = bx) & (b54 =flr) & (2+2 < n):flr;
		next(dr) = u & (b52 = man & b42 = bx) & (b32 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b52 = man & b62 = bx) & (b72 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b52 = man & b51 = bx) & (b50 = target) & (2-2 > 0):flr;
		next(dr) = r & (b52 = man & b53 = bx) & (b54 = target) & (2+2 < n):flr;
		next(dr) = u & (b52 = man & b42 = bx) & (b32 = target) & (5-2 > 0):flr;
		next(dr) = d & (b52 = man & b62 = bx) & (b72 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b52 = man & b51 = bxtrg) & (b50 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b52 = man & b53 = bxtrg) & (b54 =flr) & (2+2 < n):flr;
		next(dr) = u & (b52 = man & b42 = bxtrg) & (b32 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b52 = man & b62 = bxtrg) & (b72 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b52 = man & b51 = bxtrg) & (b50 = target) & (2-2 > 0):flr;
		next(dr) = r & (b52 = man & b53 = bxtrg) & (b54 = target) & (2+2 < n):flr;
		next(dr) = u & (b52 = man & b42 = bxtrg) & (b32 = target) & (5-2 > 0):flr;
		next(dr) = d & (b52 = man & b62 = bxtrg) & (b72 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b52 = mantrg & b51 = bx) & (b50 =flr) & (2-2 > 0): target;
		next(dr) = r & (b52 = mantrg & b53 = bx) & (b54 =flr) & (2+2 < n): target;
		next(dr) = u & (b52 = mantrg & b42 = bx) & (b32 =flr) & (5-2 > 0): target;
		next(dr) = d & (b52 = mantrg & b62 = bx) & (b72 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b52 = mantrg & b51 = bx) & (b50 = target) & (2-2 > 0): target;
		next(dr) = r & (b52 = mantrg & b53 = bx) & (b54 = target) & (2+2 < n): target;
		next(dr) = u & (b52 = mantrg & b42 = bx) & (b32 = target) & (5-2 > 0): target;
		next(dr) = d & (b52 = mantrg & b62 = bx) & (b72 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b52 = mantrg & b51 = bxtrg) & (b50 =flr) & (2-2 > 0): target;
		next(dr) = r & (b52 = mantrg & b53 = bxtrg) & (b54 =flr) & (2+2 < n): target;
		next(dr) = u & (b52 = mantrg & b42 = bxtrg) & (b32 =flr) & (5-2 > 0): target;
		next(dr) = d & (b52 = mantrg & b62 = bxtrg) & (b72 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b52 = mantrg & b51 = bxtrg) & (b50 = target) & (2-2 > 0): target;
		next(dr) = r & (b52 = mantrg & b53 = bxtrg) & (b54 = target) & (2+2 < n): target;
		next(dr) = u & (b52 = mantrg & b42 = bxtrg) & (b32 = target) & (5-2 > 0): target;
		next(dr) = d & (b52 = mantrg & b62 = bxtrg) & (b72 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b52 = flr & (b51 = man | b51 = mantrg)) : man;
        next(dr) = l & (b52 = flr & (b53 = man | b53 = mantrg)): man;
        next(dr) = d & (b52 = flr & (b42 = man | b42 = mantrg)): man;
        next(dr) = u & (b52 = flr & (b62 = man | b62 = mantrg)): man;

    --box to floor
        next(dr) = r & (b52 = flr & (b51 = bx | b51 = bxtrg)) & (b50 = man | b50 = mantrg): bx;
        next(dr) = l & (b52 = flr & (b53 = bx | b53 = bxtrg)) & (b54 = man | b54 = mantrg): bx;
        next(dr) = d & (b52 = flr & (b42 = bx | b42 = bxtrg)) & (b32 = man | b32 = mantrg): bx;
        next(dr) = u & (b52 = flr & (b62 = bx | b62 = bxtrg)) & (b72 = man | b72 = mantrg): bx;

    --man to target
        next(dr) = r & (b52 = target & (b51 = man | b51 = mantrg)): mantrg;
        next(dr) = l & (b52 = target & (b53 = man | b53 = mantrg)): mantrg;
        next(dr) = d & (b52 = target & (b42 = man | b42 = mantrg)): mantrg;
        next(dr) = u & (b52 = target & (b62 = man | b62 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b52 = target & (b51 = bx | b51 = bxtrg)) & (b50 = man | b50 = mantrg): bxtrg;
        next(dr) = l & (b52 = target & (b53 = bx | b53 = bxtrg)) & (b54 = man | b54 = mantrg): bxtrg;
        next(dr) = d & (b52 = target & (b42 = bx | b42 = bxtrg)) & (b32 = man | b32 = mantrg): bxtrg;
        next(dr) = u & (b52 = target & (b62 = bx | b62 = bxtrg)) & (b72 = man | b72 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b52 = bx & (b51 = man | b51 = mantrg)) & (b53 = flr | b53 = target): man;
        next(dr) = l & (b52 = bx & (b53 = man | b53 = mantrg)) & (b51 = flr | b51 = target): man;
        next(dr) = d & (b52 = bx & (b42 = man | b42 = mantrg)) & (b62 = flr | b62 = target): man;
        next(dr) = u & (b52 = bx & (b62 = man | b62 = mantrg)) & (b42 = flr | b42 = target): man;

    --man to box on target
        next(dr) = r & (b52 = bxtrg & (b51 = man | b51 = mantrg)) & (b53 = flr | b53 = target): mantrg;
        next(dr) = l & (b52 = bxtrg & (b53 = man | b53 = mantrg)) & (b51 = flr | b51 = target): mantrg;
        next(dr) = d & (b52 = bxtrg & (b42 = man | b42 = mantrg)) & (b62 = flr | b62 = target): mantrg;
        next(dr) = u & (b52 = bxtrg & (b62 = man | b62 = mantrg)) & (b42 = flr | b42 = target): mantrg;

    TRUE: b52;
esac;
next(b53) := case
	--floor to floor
		next(dr) = l & (b53 = man & b52 =flr):flr;
		next(dr) = r & (b53 = man & b54 =flr):flr;
		next(dr) = u & (b53 = man & b43 =flr):flr;
		next(dr) = d & (b53 = man & b63 =flr):flr;


	--target to floor
		next(dr) = l & (b53 = mantrg & b52 =flr): target;
		next(dr) = r & (b53 = mantrg & b54 =flr): target;
		next(dr) = u & (b53 = mantrg & b43 =flr): target;
		next(dr) = d & (b53 = mantrg & b63 =flr): target;

	--floor to target
		next(dr) = l & (b53 = man & b52 = target):flr;
		next(dr) = r & (b53 = man & b54 = target):flr;
		next(dr) = u & (b53 = man & b43 = target):flr;
		next(dr) = d & (b53 = man & b63 = target):flr;

	--target to target
		next(dr) = l & (b53 = mantrg & b52 = target): target;
		next(dr) = r & (b53 = mantrg & b54 = target): target;
		next(dr) = u & (b53 = mantrg & b43 = target): target;
		next(dr) = d & (b53 = mantrg & b63 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b53 = man & b52 = bx) & (b51 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b53 = man & b54 = bx) & (b55 =flr) & (3+2 < n):flr;
		next(dr) = u & (b53 = man & b43 = bx) & (b33 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b53 = man & b63 = bx) & (b73 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b53 = man & b52 = bx) & (b51 = target) & (3-2 > 0):flr;
		next(dr) = r & (b53 = man & b54 = bx) & (b55 = target) & (3+2 < n):flr;
		next(dr) = u & (b53 = man & b43 = bx) & (b33 = target) & (5-2 > 0):flr;
		next(dr) = d & (b53 = man & b63 = bx) & (b73 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b53 = man & b52 = bxtrg) & (b51 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b53 = man & b54 = bxtrg) & (b55 =flr) & (3+2 < n):flr;
		next(dr) = u & (b53 = man & b43 = bxtrg) & (b33 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b53 = man & b63 = bxtrg) & (b73 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b53 = man & b52 = bxtrg) & (b51 = target) & (3-2 > 0):flr;
		next(dr) = r & (b53 = man & b54 = bxtrg) & (b55 = target) & (3+2 < n):flr;
		next(dr) = u & (b53 = man & b43 = bxtrg) & (b33 = target) & (5-2 > 0):flr;
		next(dr) = d & (b53 = man & b63 = bxtrg) & (b73 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b53 = mantrg & b52 = bx) & (b51 =flr) & (3-2 > 0): target;
		next(dr) = r & (b53 = mantrg & b54 = bx) & (b55 =flr) & (3+2 < n): target;
		next(dr) = u & (b53 = mantrg & b43 = bx) & (b33 =flr) & (5-2 > 0): target;
		next(dr) = d & (b53 = mantrg & b63 = bx) & (b73 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b53 = mantrg & b52 = bx) & (b51 = target) & (3-2 > 0): target;
		next(dr) = r & (b53 = mantrg & b54 = bx) & (b55 = target) & (3+2 < n): target;
		next(dr) = u & (b53 = mantrg & b43 = bx) & (b33 = target) & (5-2 > 0): target;
		next(dr) = d & (b53 = mantrg & b63 = bx) & (b73 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b53 = mantrg & b52 = bxtrg) & (b51 =flr) & (3-2 > 0): target;
		next(dr) = r & (b53 = mantrg & b54 = bxtrg) & (b55 =flr) & (3+2 < n): target;
		next(dr) = u & (b53 = mantrg & b43 = bxtrg) & (b33 =flr) & (5-2 > 0): target;
		next(dr) = d & (b53 = mantrg & b63 = bxtrg) & (b73 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b53 = mantrg & b52 = bxtrg) & (b51 = target) & (3-2 > 0): target;
		next(dr) = r & (b53 = mantrg & b54 = bxtrg) & (b55 = target) & (3+2 < n): target;
		next(dr) = u & (b53 = mantrg & b43 = bxtrg) & (b33 = target) & (5-2 > 0): target;
		next(dr) = d & (b53 = mantrg & b63 = bxtrg) & (b73 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b53 = flr & (b52 = man | b52 = mantrg)) : man;
        next(dr) = l & (b53 = flr & (b54 = man | b54 = mantrg)): man;
        next(dr) = d & (b53 = flr & (b43 = man | b43 = mantrg)): man;
        next(dr) = u & (b53 = flr & (b63 = man | b63 = mantrg)): man;

    --box to floor
        next(dr) = r & (b53 = flr & (b52 = bx | b52 = bxtrg)) & (b51 = man | b51 = mantrg): bx;
        next(dr) = l & (b53 = flr & (b54 = bx | b54 = bxtrg)) & (b55 = man | b55 = mantrg): bx;
        next(dr) = d & (b53 = flr & (b43 = bx | b43 = bxtrg)) & (b33 = man | b33 = mantrg): bx;
        next(dr) = u & (b53 = flr & (b63 = bx | b63 = bxtrg)) & (b73 = man | b73 = mantrg): bx;

    --man to target
        next(dr) = r & (b53 = target & (b52 = man | b52 = mantrg)): mantrg;
        next(dr) = l & (b53 = target & (b54 = man | b54 = mantrg)): mantrg;
        next(dr) = d & (b53 = target & (b43 = man | b43 = mantrg)): mantrg;
        next(dr) = u & (b53 = target & (b63 = man | b63 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b53 = target & (b52 = bx | b52 = bxtrg)) & (b51 = man | b51 = mantrg): bxtrg;
        next(dr) = l & (b53 = target & (b54 = bx | b54 = bxtrg)) & (b55 = man | b55 = mantrg): bxtrg;
        next(dr) = d & (b53 = target & (b43 = bx | b43 = bxtrg)) & (b33 = man | b33 = mantrg): bxtrg;
        next(dr) = u & (b53 = target & (b63 = bx | b63 = bxtrg)) & (b73 = man | b73 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b53 = bx & (b52 = man | b52 = mantrg)) & (b54 = flr | b54 = target): man;
        next(dr) = l & (b53 = bx & (b54 = man | b54 = mantrg)) & (b52 = flr | b52 = target): man;
        next(dr) = d & (b53 = bx & (b43 = man | b43 = mantrg)) & (b63 = flr | b63 = target): man;
        next(dr) = u & (b53 = bx & (b63 = man | b63 = mantrg)) & (b43 = flr | b43 = target): man;

    --man to box on target
        next(dr) = r & (b53 = bxtrg & (b52 = man | b52 = mantrg)) & (b54 = flr | b54 = target): mantrg;
        next(dr) = l & (b53 = bxtrg & (b54 = man | b54 = mantrg)) & (b52 = flr | b52 = target): mantrg;
        next(dr) = d & (b53 = bxtrg & (b43 = man | b43 = mantrg)) & (b63 = flr | b63 = target): mantrg;
        next(dr) = u & (b53 = bxtrg & (b63 = man | b63 = mantrg)) & (b43 = flr | b43 = target): mantrg;

    TRUE: b53;
esac;
next(b54) := case
	--floor to floor
		next(dr) = l & (b54 = man & b53 =flr):flr;
		next(dr) = r & (b54 = man & b55 =flr):flr;
		next(dr) = u & (b54 = man & b44 =flr):flr;
		next(dr) = d & (b54 = man & b64 =flr):flr;


	--target to floor
		next(dr) = l & (b54 = mantrg & b53 =flr): target;
		next(dr) = r & (b54 = mantrg & b55 =flr): target;
		next(dr) = u & (b54 = mantrg & b44 =flr): target;
		next(dr) = d & (b54 = mantrg & b64 =flr): target;

	--floor to target
		next(dr) = l & (b54 = man & b53 = target):flr;
		next(dr) = r & (b54 = man & b55 = target):flr;
		next(dr) = u & (b54 = man & b44 = target):flr;
		next(dr) = d & (b54 = man & b64 = target):flr;

	--target to target
		next(dr) = l & (b54 = mantrg & b53 = target): target;
		next(dr) = r & (b54 = mantrg & b55 = target): target;
		next(dr) = u & (b54 = mantrg & b44 = target): target;
		next(dr) = d & (b54 = mantrg & b64 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b54 = man & b53 = bx) & (b52 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b54 = man & b55 = bx) & (b56 =flr) & (4+2 < n):flr;
		next(dr) = u & (b54 = man & b44 = bx) & (b34 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b54 = man & b64 = bx) & (b74 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b54 = man & b53 = bx) & (b52 = target) & (4-2 > 0):flr;
		next(dr) = r & (b54 = man & b55 = bx) & (b56 = target) & (4+2 < n):flr;
		next(dr) = u & (b54 = man & b44 = bx) & (b34 = target) & (5-2 > 0):flr;
		next(dr) = d & (b54 = man & b64 = bx) & (b74 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b54 = man & b53 = bxtrg) & (b52 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b54 = man & b55 = bxtrg) & (b56 =flr) & (4+2 < n):flr;
		next(dr) = u & (b54 = man & b44 = bxtrg) & (b34 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b54 = man & b64 = bxtrg) & (b74 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b54 = man & b53 = bxtrg) & (b52 = target) & (4-2 > 0):flr;
		next(dr) = r & (b54 = man & b55 = bxtrg) & (b56 = target) & (4+2 < n):flr;
		next(dr) = u & (b54 = man & b44 = bxtrg) & (b34 = target) & (5-2 > 0):flr;
		next(dr) = d & (b54 = man & b64 = bxtrg) & (b74 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b54 = mantrg & b53 = bx) & (b52 =flr) & (4-2 > 0): target;
		next(dr) = r & (b54 = mantrg & b55 = bx) & (b56 =flr) & (4+2 < n): target;
		next(dr) = u & (b54 = mantrg & b44 = bx) & (b34 =flr) & (5-2 > 0): target;
		next(dr) = d & (b54 = mantrg & b64 = bx) & (b74 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b54 = mantrg & b53 = bx) & (b52 = target) & (4-2 > 0): target;
		next(dr) = r & (b54 = mantrg & b55 = bx) & (b56 = target) & (4+2 < n): target;
		next(dr) = u & (b54 = mantrg & b44 = bx) & (b34 = target) & (5-2 > 0): target;
		next(dr) = d & (b54 = mantrg & b64 = bx) & (b74 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b54 = mantrg & b53 = bxtrg) & (b52 =flr) & (4-2 > 0): target;
		next(dr) = r & (b54 = mantrg & b55 = bxtrg) & (b56 =flr) & (4+2 < n): target;
		next(dr) = u & (b54 = mantrg & b44 = bxtrg) & (b34 =flr) & (5-2 > 0): target;
		next(dr) = d & (b54 = mantrg & b64 = bxtrg) & (b74 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b54 = mantrg & b53 = bxtrg) & (b52 = target) & (4-2 > 0): target;
		next(dr) = r & (b54 = mantrg & b55 = bxtrg) & (b56 = target) & (4+2 < n): target;
		next(dr) = u & (b54 = mantrg & b44 = bxtrg) & (b34 = target) & (5-2 > 0): target;
		next(dr) = d & (b54 = mantrg & b64 = bxtrg) & (b74 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b54 = flr & (b53 = man | b53 = mantrg)) : man;
        next(dr) = l & (b54 = flr & (b55 = man | b55 = mantrg)): man;
        next(dr) = d & (b54 = flr & (b44 = man | b44 = mantrg)): man;
        next(dr) = u & (b54 = flr & (b64 = man | b64 = mantrg)): man;

    --box to floor
        next(dr) = r & (b54 = flr & (b53 = bx | b53 = bxtrg)) & (b52 = man | b52 = mantrg): bx;
        next(dr) = l & (b54 = flr & (b55 = bx | b55 = bxtrg)) & (b56 = man | b56 = mantrg): bx;
        next(dr) = d & (b54 = flr & (b44 = bx | b44 = bxtrg)) & (b34 = man | b34 = mantrg): bx;
        next(dr) = u & (b54 = flr & (b64 = bx | b64 = bxtrg)) & (b74 = man | b74 = mantrg): bx;

    --man to target
        next(dr) = r & (b54 = target & (b53 = man | b53 = mantrg)): mantrg;
        next(dr) = l & (b54 = target & (b55 = man | b55 = mantrg)): mantrg;
        next(dr) = d & (b54 = target & (b44 = man | b44 = mantrg)): mantrg;
        next(dr) = u & (b54 = target & (b64 = man | b64 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b54 = target & (b53 = bx | b53 = bxtrg)) & (b52 = man | b52 = mantrg): bxtrg;
        next(dr) = l & (b54 = target & (b55 = bx | b55 = bxtrg)) & (b56 = man | b56 = mantrg): bxtrg;
        next(dr) = d & (b54 = target & (b44 = bx | b44 = bxtrg)) & (b34 = man | b34 = mantrg): bxtrg;
        next(dr) = u & (b54 = target & (b64 = bx | b64 = bxtrg)) & (b74 = man | b74 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b54 = bx & (b53 = man | b53 = mantrg)) & (b55 = flr | b55 = target): man;
        next(dr) = l & (b54 = bx & (b55 = man | b55 = mantrg)) & (b53 = flr | b53 = target): man;
        next(dr) = d & (b54 = bx & (b44 = man | b44 = mantrg)) & (b64 = flr | b64 = target): man;
        next(dr) = u & (b54 = bx & (b64 = man | b64 = mantrg)) & (b44 = flr | b44 = target): man;

    --man to box on target
        next(dr) = r & (b54 = bxtrg & (b53 = man | b53 = mantrg)) & (b55 = flr | b55 = target): mantrg;
        next(dr) = l & (b54 = bxtrg & (b55 = man | b55 = mantrg)) & (b53 = flr | b53 = target): mantrg;
        next(dr) = d & (b54 = bxtrg & (b44 = man | b44 = mantrg)) & (b64 = flr | b64 = target): mantrg;
        next(dr) = u & (b54 = bxtrg & (b64 = man | b64 = mantrg)) & (b44 = flr | b44 = target): mantrg;

    TRUE: b54;
esac;
next(b55) := case
	--floor to floor
		next(dr) = l & (b55 = man & b54 =flr):flr;
		next(dr) = r & (b55 = man & b56 =flr):flr;
		next(dr) = u & (b55 = man & b45 =flr):flr;
		next(dr) = d & (b55 = man & b65 =flr):flr;


	--target to floor
		next(dr) = l & (b55 = mantrg & b54 =flr): target;
		next(dr) = r & (b55 = mantrg & b56 =flr): target;
		next(dr) = u & (b55 = mantrg & b45 =flr): target;
		next(dr) = d & (b55 = mantrg & b65 =flr): target;

	--floor to target
		next(dr) = l & (b55 = man & b54 = target):flr;
		next(dr) = r & (b55 = man & b56 = target):flr;
		next(dr) = u & (b55 = man & b45 = target):flr;
		next(dr) = d & (b55 = man & b65 = target):flr;

	--target to target
		next(dr) = l & (b55 = mantrg & b54 = target): target;
		next(dr) = r & (b55 = mantrg & b56 = target): target;
		next(dr) = u & (b55 = mantrg & b45 = target): target;
		next(dr) = d & (b55 = mantrg & b65 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b55 = man & b54 = bx) & (b53 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b55 = man & b56 = bx) & (b57 =flr) & (5+2 < n):flr;
		next(dr) = u & (b55 = man & b45 = bx) & (b35 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b55 = man & b65 = bx) & (b75 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b55 = man & b54 = bx) & (b53 = target) & (5-2 > 0):flr;
		next(dr) = r & (b55 = man & b56 = bx) & (b57 = target) & (5+2 < n):flr;
		next(dr) = u & (b55 = man & b45 = bx) & (b35 = target) & (5-2 > 0):flr;
		next(dr) = d & (b55 = man & b65 = bx) & (b75 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b55 = man & b54 = bxtrg) & (b53 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b55 = man & b56 = bxtrg) & (b57 =flr) & (5+2 < n):flr;
		next(dr) = u & (b55 = man & b45 = bxtrg) & (b35 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b55 = man & b65 = bxtrg) & (b75 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b55 = man & b54 = bxtrg) & (b53 = target) & (5-2 > 0):flr;
		next(dr) = r & (b55 = man & b56 = bxtrg) & (b57 = target) & (5+2 < n):flr;
		next(dr) = u & (b55 = man & b45 = bxtrg) & (b35 = target) & (5-2 > 0):flr;
		next(dr) = d & (b55 = man & b65 = bxtrg) & (b75 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b55 = mantrg & b54 = bx) & (b53 =flr) & (5-2 > 0): target;
		next(dr) = r & (b55 = mantrg & b56 = bx) & (b57 =flr) & (5+2 < n): target;
		next(dr) = u & (b55 = mantrg & b45 = bx) & (b35 =flr) & (5-2 > 0): target;
		next(dr) = d & (b55 = mantrg & b65 = bx) & (b75 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b55 = mantrg & b54 = bx) & (b53 = target) & (5-2 > 0): target;
		next(dr) = r & (b55 = mantrg & b56 = bx) & (b57 = target) & (5+2 < n): target;
		next(dr) = u & (b55 = mantrg & b45 = bx) & (b35 = target) & (5-2 > 0): target;
		next(dr) = d & (b55 = mantrg & b65 = bx) & (b75 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b55 = mantrg & b54 = bxtrg) & (b53 =flr) & (5-2 > 0): target;
		next(dr) = r & (b55 = mantrg & b56 = bxtrg) & (b57 =flr) & (5+2 < n): target;
		next(dr) = u & (b55 = mantrg & b45 = bxtrg) & (b35 =flr) & (5-2 > 0): target;
		next(dr) = d & (b55 = mantrg & b65 = bxtrg) & (b75 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b55 = mantrg & b54 = bxtrg) & (b53 = target) & (5-2 > 0): target;
		next(dr) = r & (b55 = mantrg & b56 = bxtrg) & (b57 = target) & (5+2 < n): target;
		next(dr) = u & (b55 = mantrg & b45 = bxtrg) & (b35 = target) & (5-2 > 0): target;
		next(dr) = d & (b55 = mantrg & b65 = bxtrg) & (b75 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b55 = flr & (b54 = man | b54 = mantrg)) : man;
        next(dr) = l & (b55 = flr & (b56 = man | b56 = mantrg)): man;
        next(dr) = d & (b55 = flr & (b45 = man | b45 = mantrg)): man;
        next(dr) = u & (b55 = flr & (b65 = man | b65 = mantrg)): man;

    --box to floor
        next(dr) = r & (b55 = flr & (b54 = bx | b54 = bxtrg)) & (b53 = man | b53 = mantrg): bx;
        next(dr) = l & (b55 = flr & (b56 = bx | b56 = bxtrg)) & (b57 = man | b57 = mantrg): bx;
        next(dr) = d & (b55 = flr & (b45 = bx | b45 = bxtrg)) & (b35 = man | b35 = mantrg): bx;
        next(dr) = u & (b55 = flr & (b65 = bx | b65 = bxtrg)) & (b75 = man | b75 = mantrg): bx;

    --man to target
        next(dr) = r & (b55 = target & (b54 = man | b54 = mantrg)): mantrg;
        next(dr) = l & (b55 = target & (b56 = man | b56 = mantrg)): mantrg;
        next(dr) = d & (b55 = target & (b45 = man | b45 = mantrg)): mantrg;
        next(dr) = u & (b55 = target & (b65 = man | b65 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b55 = target & (b54 = bx | b54 = bxtrg)) & (b53 = man | b53 = mantrg): bxtrg;
        next(dr) = l & (b55 = target & (b56 = bx | b56 = bxtrg)) & (b57 = man | b57 = mantrg): bxtrg;
        next(dr) = d & (b55 = target & (b45 = bx | b45 = bxtrg)) & (b35 = man | b35 = mantrg): bxtrg;
        next(dr) = u & (b55 = target & (b65 = bx | b65 = bxtrg)) & (b75 = man | b75 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b55 = bx & (b54 = man | b54 = mantrg)) & (b56 = flr | b56 = target): man;
        next(dr) = l & (b55 = bx & (b56 = man | b56 = mantrg)) & (b54 = flr | b54 = target): man;
        next(dr) = d & (b55 = bx & (b45 = man | b45 = mantrg)) & (b65 = flr | b65 = target): man;
        next(dr) = u & (b55 = bx & (b65 = man | b65 = mantrg)) & (b45 = flr | b45 = target): man;

    --man to box on target
        next(dr) = r & (b55 = bxtrg & (b54 = man | b54 = mantrg)) & (b56 = flr | b56 = target): mantrg;
        next(dr) = l & (b55 = bxtrg & (b56 = man | b56 = mantrg)) & (b54 = flr | b54 = target): mantrg;
        next(dr) = d & (b55 = bxtrg & (b45 = man | b45 = mantrg)) & (b65 = flr | b65 = target): mantrg;
        next(dr) = u & (b55 = bxtrg & (b65 = man | b65 = mantrg)) & (b45 = flr | b45 = target): mantrg;

    TRUE: b55;
esac;
next(b56) := case
	--floor to floor
		next(dr) = l & (b56 = man & b55 =flr):flr;
		next(dr) = r & (b56 = man & b57 =flr):flr;
		next(dr) = u & (b56 = man & b46 =flr):flr;
		next(dr) = d & (b56 = man & b66 =flr):flr;


	--target to floor
		next(dr) = l & (b56 = mantrg & b55 =flr): target;
		next(dr) = r & (b56 = mantrg & b57 =flr): target;
		next(dr) = u & (b56 = mantrg & b46 =flr): target;
		next(dr) = d & (b56 = mantrg & b66 =flr): target;

	--floor to target
		next(dr) = l & (b56 = man & b55 = target):flr;
		next(dr) = r & (b56 = man & b57 = target):flr;
		next(dr) = u & (b56 = man & b46 = target):flr;
		next(dr) = d & (b56 = man & b66 = target):flr;

	--target to target
		next(dr) = l & (b56 = mantrg & b55 = target): target;
		next(dr) = r & (b56 = mantrg & b57 = target): target;
		next(dr) = u & (b56 = mantrg & b46 = target): target;
		next(dr) = d & (b56 = mantrg & b66 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b56 = man & b55 = bx) & (b54 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b56 = man & b57 = bx) & (b58 =flr) & (6+2 < n):flr;
		next(dr) = u & (b56 = man & b46 = bx) & (b36 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b56 = man & b66 = bx) & (b76 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b56 = man & b55 = bx) & (b54 = target) & (6-2 > 0):flr;
		next(dr) = r & (b56 = man & b57 = bx) & (b58 = target) & (6+2 < n):flr;
		next(dr) = u & (b56 = man & b46 = bx) & (b36 = target) & (5-2 > 0):flr;
		next(dr) = d & (b56 = man & b66 = bx) & (b76 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b56 = man & b55 = bxtrg) & (b54 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b56 = man & b57 = bxtrg) & (b58 =flr) & (6+2 < n):flr;
		next(dr) = u & (b56 = man & b46 = bxtrg) & (b36 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b56 = man & b66 = bxtrg) & (b76 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b56 = man & b55 = bxtrg) & (b54 = target) & (6-2 > 0):flr;
		next(dr) = r & (b56 = man & b57 = bxtrg) & (b58 = target) & (6+2 < n):flr;
		next(dr) = u & (b56 = man & b46 = bxtrg) & (b36 = target) & (5-2 > 0):flr;
		next(dr) = d & (b56 = man & b66 = bxtrg) & (b76 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b56 = mantrg & b55 = bx) & (b54 =flr) & (6-2 > 0): target;
		next(dr) = r & (b56 = mantrg & b57 = bx) & (b58 =flr) & (6+2 < n): target;
		next(dr) = u & (b56 = mantrg & b46 = bx) & (b36 =flr) & (5-2 > 0): target;
		next(dr) = d & (b56 = mantrg & b66 = bx) & (b76 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b56 = mantrg & b55 = bx) & (b54 = target) & (6-2 > 0): target;
		next(dr) = r & (b56 = mantrg & b57 = bx) & (b58 = target) & (6+2 < n): target;
		next(dr) = u & (b56 = mantrg & b46 = bx) & (b36 = target) & (5-2 > 0): target;
		next(dr) = d & (b56 = mantrg & b66 = bx) & (b76 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b56 = mantrg & b55 = bxtrg) & (b54 =flr) & (6-2 > 0): target;
		next(dr) = r & (b56 = mantrg & b57 = bxtrg) & (b58 =flr) & (6+2 < n): target;
		next(dr) = u & (b56 = mantrg & b46 = bxtrg) & (b36 =flr) & (5-2 > 0): target;
		next(dr) = d & (b56 = mantrg & b66 = bxtrg) & (b76 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b56 = mantrg & b55 = bxtrg) & (b54 = target) & (6-2 > 0): target;
		next(dr) = r & (b56 = mantrg & b57 = bxtrg) & (b58 = target) & (6+2 < n): target;
		next(dr) = u & (b56 = mantrg & b46 = bxtrg) & (b36 = target) & (5-2 > 0): target;
		next(dr) = d & (b56 = mantrg & b66 = bxtrg) & (b76 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b56 = flr & (b55 = man | b55 = mantrg)) : man;
        next(dr) = l & (b56 = flr & (b57 = man | b57 = mantrg)): man;
        next(dr) = d & (b56 = flr & (b46 = man | b46 = mantrg)): man;
        next(dr) = u & (b56 = flr & (b66 = man | b66 = mantrg)): man;

    --box to floor
        next(dr) = r & (b56 = flr & (b55 = bx | b55 = bxtrg)) & (b54 = man | b54 = mantrg): bx;
        next(dr) = l & (b56 = flr & (b57 = bx | b57 = bxtrg)) & (b58 = man | b58 = mantrg): bx;
        next(dr) = d & (b56 = flr & (b46 = bx | b46 = bxtrg)) & (b36 = man | b36 = mantrg): bx;
        next(dr) = u & (b56 = flr & (b66 = bx | b66 = bxtrg)) & (b76 = man | b76 = mantrg): bx;

    --man to target
        next(dr) = r & (b56 = target & (b55 = man | b55 = mantrg)): mantrg;
        next(dr) = l & (b56 = target & (b57 = man | b57 = mantrg)): mantrg;
        next(dr) = d & (b56 = target & (b46 = man | b46 = mantrg)): mantrg;
        next(dr) = u & (b56 = target & (b66 = man | b66 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b56 = target & (b55 = bx | b55 = bxtrg)) & (b54 = man | b54 = mantrg): bxtrg;
        next(dr) = l & (b56 = target & (b57 = bx | b57 = bxtrg)) & (b58 = man | b58 = mantrg): bxtrg;
        next(dr) = d & (b56 = target & (b46 = bx | b46 = bxtrg)) & (b36 = man | b36 = mantrg): bxtrg;
        next(dr) = u & (b56 = target & (b66 = bx | b66 = bxtrg)) & (b76 = man | b76 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b56 = bx & (b55 = man | b55 = mantrg)) & (b57 = flr | b57 = target): man;
        next(dr) = l & (b56 = bx & (b57 = man | b57 = mantrg)) & (b55 = flr | b55 = target): man;
        next(dr) = d & (b56 = bx & (b46 = man | b46 = mantrg)) & (b66 = flr | b66 = target): man;
        next(dr) = u & (b56 = bx & (b66 = man | b66 = mantrg)) & (b46 = flr | b46 = target): man;

    --man to box on target
        next(dr) = r & (b56 = bxtrg & (b55 = man | b55 = mantrg)) & (b57 = flr | b57 = target): mantrg;
        next(dr) = l & (b56 = bxtrg & (b57 = man | b57 = mantrg)) & (b55 = flr | b55 = target): mantrg;
        next(dr) = d & (b56 = bxtrg & (b46 = man | b46 = mantrg)) & (b66 = flr | b66 = target): mantrg;
        next(dr) = u & (b56 = bxtrg & (b66 = man | b66 = mantrg)) & (b46 = flr | b46 = target): mantrg;

    TRUE: b56;
esac;
next(b57) := case
	--floor to floor
		next(dr) = l & (b57 = man & b56 =flr):flr;
		next(dr) = r & (b57 = man & b58 =flr):flr;
		next(dr) = u & (b57 = man & b47 =flr):flr;
		next(dr) = d & (b57 = man & b67 =flr):flr;


	--target to floor
		next(dr) = l & (b57 = mantrg & b56 =flr): target;
		next(dr) = r & (b57 = mantrg & b58 =flr): target;
		next(dr) = u & (b57 = mantrg & b47 =flr): target;
		next(dr) = d & (b57 = mantrg & b67 =flr): target;

	--floor to target
		next(dr) = l & (b57 = man & b56 = target):flr;
		next(dr) = r & (b57 = man & b58 = target):flr;
		next(dr) = u & (b57 = man & b47 = target):flr;
		next(dr) = d & (b57 = man & b67 = target):flr;

	--target to target
		next(dr) = l & (b57 = mantrg & b56 = target): target;
		next(dr) = r & (b57 = mantrg & b58 = target): target;
		next(dr) = u & (b57 = mantrg & b47 = target): target;
		next(dr) = d & (b57 = mantrg & b67 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b57 = man & b56 = bx) & (b55 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b57 = man & b58 = bx) & (b59 =flr) & (7+2 < n):flr;
		next(dr) = u & (b57 = man & b47 = bx) & (b37 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b57 = man & b67 = bx) & (b77 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b57 = man & b56 = bx) & (b55 = target) & (7-2 > 0):flr;
		next(dr) = r & (b57 = man & b58 = bx) & (b59 = target) & (7+2 < n):flr;
		next(dr) = u & (b57 = man & b47 = bx) & (b37 = target) & (5-2 > 0):flr;
		next(dr) = d & (b57 = man & b67 = bx) & (b77 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b57 = man & b56 = bxtrg) & (b55 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b57 = man & b58 = bxtrg) & (b59 =flr) & (7+2 < n):flr;
		next(dr) = u & (b57 = man & b47 = bxtrg) & (b37 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b57 = man & b67 = bxtrg) & (b77 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b57 = man & b56 = bxtrg) & (b55 = target) & (7-2 > 0):flr;
		next(dr) = r & (b57 = man & b58 = bxtrg) & (b59 = target) & (7+2 < n):flr;
		next(dr) = u & (b57 = man & b47 = bxtrg) & (b37 = target) & (5-2 > 0):flr;
		next(dr) = d & (b57 = man & b67 = bxtrg) & (b77 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b57 = mantrg & b56 = bx) & (b55 =flr) & (7-2 > 0): target;
		next(dr) = r & (b57 = mantrg & b58 = bx) & (b59 =flr) & (7+2 < n): target;
		next(dr) = u & (b57 = mantrg & b47 = bx) & (b37 =flr) & (5-2 > 0): target;
		next(dr) = d & (b57 = mantrg & b67 = bx) & (b77 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b57 = mantrg & b56 = bx) & (b55 = target) & (7-2 > 0): target;
		next(dr) = r & (b57 = mantrg & b58 = bx) & (b59 = target) & (7+2 < n): target;
		next(dr) = u & (b57 = mantrg & b47 = bx) & (b37 = target) & (5-2 > 0): target;
		next(dr) = d & (b57 = mantrg & b67 = bx) & (b77 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b57 = mantrg & b56 = bxtrg) & (b55 =flr) & (7-2 > 0): target;
		next(dr) = r & (b57 = mantrg & b58 = bxtrg) & (b59 =flr) & (7+2 < n): target;
		next(dr) = u & (b57 = mantrg & b47 = bxtrg) & (b37 =flr) & (5-2 > 0): target;
		next(dr) = d & (b57 = mantrg & b67 = bxtrg) & (b77 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b57 = mantrg & b56 = bxtrg) & (b55 = target) & (7-2 > 0): target;
		next(dr) = r & (b57 = mantrg & b58 = bxtrg) & (b59 = target) & (7+2 < n): target;
		next(dr) = u & (b57 = mantrg & b47 = bxtrg) & (b37 = target) & (5-2 > 0): target;
		next(dr) = d & (b57 = mantrg & b67 = bxtrg) & (b77 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b57 = flr & (b56 = man | b56 = mantrg)) : man;
        next(dr) = l & (b57 = flr & (b58 = man | b58 = mantrg)): man;
        next(dr) = d & (b57 = flr & (b47 = man | b47 = mantrg)): man;
        next(dr) = u & (b57 = flr & (b67 = man | b67 = mantrg)): man;

    --box to floor
        next(dr) = r & (b57 = flr & (b56 = bx | b56 = bxtrg)) & (b55 = man | b55 = mantrg): bx;
        next(dr) = l & (b57 = flr & (b58 = bx | b58 = bxtrg)) & (b59 = man | b59 = mantrg): bx;
        next(dr) = d & (b57 = flr & (b47 = bx | b47 = bxtrg)) & (b37 = man | b37 = mantrg): bx;
        next(dr) = u & (b57 = flr & (b67 = bx | b67 = bxtrg)) & (b77 = man | b77 = mantrg): bx;

    --man to target
        next(dr) = r & (b57 = target & (b56 = man | b56 = mantrg)): mantrg;
        next(dr) = l & (b57 = target & (b58 = man | b58 = mantrg)): mantrg;
        next(dr) = d & (b57 = target & (b47 = man | b47 = mantrg)): mantrg;
        next(dr) = u & (b57 = target & (b67 = man | b67 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b57 = target & (b56 = bx | b56 = bxtrg)) & (b55 = man | b55 = mantrg): bxtrg;
        next(dr) = l & (b57 = target & (b58 = bx | b58 = bxtrg)) & (b59 = man | b59 = mantrg): bxtrg;
        next(dr) = d & (b57 = target & (b47 = bx | b47 = bxtrg)) & (b37 = man | b37 = mantrg): bxtrg;
        next(dr) = u & (b57 = target & (b67 = bx | b67 = bxtrg)) & (b77 = man | b77 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b57 = bx & (b56 = man | b56 = mantrg)) & (b58 = flr | b58 = target): man;
        next(dr) = l & (b57 = bx & (b58 = man | b58 = mantrg)) & (b56 = flr | b56 = target): man;
        next(dr) = d & (b57 = bx & (b47 = man | b47 = mantrg)) & (b67 = flr | b67 = target): man;
        next(dr) = u & (b57 = bx & (b67 = man | b67 = mantrg)) & (b47 = flr | b47 = target): man;

    --man to box on target
        next(dr) = r & (b57 = bxtrg & (b56 = man | b56 = mantrg)) & (b58 = flr | b58 = target): mantrg;
        next(dr) = l & (b57 = bxtrg & (b58 = man | b58 = mantrg)) & (b56 = flr | b56 = target): mantrg;
        next(dr) = d & (b57 = bxtrg & (b47 = man | b47 = mantrg)) & (b67 = flr | b67 = target): mantrg;
        next(dr) = u & (b57 = bxtrg & (b67 = man | b67 = mantrg)) & (b47 = flr | b47 = target): mantrg;

    TRUE: b57;
esac;
next(b58) := case
	--floor to floor
		next(dr) = l & (b58 = man & b57 =flr):flr;
		next(dr) = r & (b58 = man & b59 =flr):flr;
		next(dr) = u & (b58 = man & b48 =flr):flr;
		next(dr) = d & (b58 = man & b68 =flr):flr;


	--target to floor
		next(dr) = l & (b58 = mantrg & b57 =flr): target;
		next(dr) = r & (b58 = mantrg & b59 =flr): target;
		next(dr) = u & (b58 = mantrg & b48 =flr): target;
		next(dr) = d & (b58 = mantrg & b68 =flr): target;

	--floor to target
		next(dr) = l & (b58 = man & b57 = target):flr;
		next(dr) = r & (b58 = man & b59 = target):flr;
		next(dr) = u & (b58 = man & b48 = target):flr;
		next(dr) = d & (b58 = man & b68 = target):flr;

	--target to target
		next(dr) = l & (b58 = mantrg & b57 = target): target;
		next(dr) = r & (b58 = mantrg & b59 = target): target;
		next(dr) = u & (b58 = mantrg & b48 = target): target;
		next(dr) = d & (b58 = mantrg & b68 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b58 = man & b57 = bx) & (b56 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b58 = man & b59 = bx) & (b510 =flr) & (8+2 < n):flr;
		next(dr) = u & (b58 = man & b48 = bx) & (b38 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b58 = man & b68 = bx) & (b78 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b58 = man & b57 = bx) & (b56 = target) & (8-2 > 0):flr;
		next(dr) = r & (b58 = man & b59 = bx) & (b510 = target) & (8+2 < n):flr;
		next(dr) = u & (b58 = man & b48 = bx) & (b38 = target) & (5-2 > 0):flr;
		next(dr) = d & (b58 = man & b68 = bx) & (b78 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b58 = man & b57 = bxtrg) & (b56 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b58 = man & b59 = bxtrg) & (b510 =flr) & (8+2 < n):flr;
		next(dr) = u & (b58 = man & b48 = bxtrg) & (b38 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b58 = man & b68 = bxtrg) & (b78 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b58 = man & b57 = bxtrg) & (b56 = target) & (8-2 > 0):flr;
		next(dr) = r & (b58 = man & b59 = bxtrg) & (b510 = target) & (8+2 < n):flr;
		next(dr) = u & (b58 = man & b48 = bxtrg) & (b38 = target) & (5-2 > 0):flr;
		next(dr) = d & (b58 = man & b68 = bxtrg) & (b78 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b58 = mantrg & b57 = bx) & (b56 =flr) & (8-2 > 0): target;
		next(dr) = r & (b58 = mantrg & b59 = bx) & (b510 =flr) & (8+2 < n): target;
		next(dr) = u & (b58 = mantrg & b48 = bx) & (b38 =flr) & (5-2 > 0): target;
		next(dr) = d & (b58 = mantrg & b68 = bx) & (b78 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b58 = mantrg & b57 = bx) & (b56 = target) & (8-2 > 0): target;
		next(dr) = r & (b58 = mantrg & b59 = bx) & (b510 = target) & (8+2 < n): target;
		next(dr) = u & (b58 = mantrg & b48 = bx) & (b38 = target) & (5-2 > 0): target;
		next(dr) = d & (b58 = mantrg & b68 = bx) & (b78 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b58 = mantrg & b57 = bxtrg) & (b56 =flr) & (8-2 > 0): target;
		next(dr) = r & (b58 = mantrg & b59 = bxtrg) & (b510 =flr) & (8+2 < n): target;
		next(dr) = u & (b58 = mantrg & b48 = bxtrg) & (b38 =flr) & (5-2 > 0): target;
		next(dr) = d & (b58 = mantrg & b68 = bxtrg) & (b78 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b58 = mantrg & b57 = bxtrg) & (b56 = target) & (8-2 > 0): target;
		next(dr) = r & (b58 = mantrg & b59 = bxtrg) & (b510 = target) & (8+2 < n): target;
		next(dr) = u & (b58 = mantrg & b48 = bxtrg) & (b38 = target) & (5-2 > 0): target;
		next(dr) = d & (b58 = mantrg & b68 = bxtrg) & (b78 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b58 = flr & (b57 = man | b57 = mantrg)) : man;
        next(dr) = l & (b58 = flr & (b59 = man | b59 = mantrg)): man;
        next(dr) = d & (b58 = flr & (b48 = man | b48 = mantrg)): man;
        next(dr) = u & (b58 = flr & (b68 = man | b68 = mantrg)): man;

    --box to floor
        next(dr) = r & (b58 = flr & (b57 = bx | b57 = bxtrg)) & (b56 = man | b56 = mantrg): bx;
        next(dr) = l & (b58 = flr & (b59 = bx | b59 = bxtrg)) & (b510 = man | b510 = mantrg): bx;
        next(dr) = d & (b58 = flr & (b48 = bx | b48 = bxtrg)) & (b38 = man | b38 = mantrg): bx;
        next(dr) = u & (b58 = flr & (b68 = bx | b68 = bxtrg)) & (b78 = man | b78 = mantrg): bx;

    --man to target
        next(dr) = r & (b58 = target & (b57 = man | b57 = mantrg)): mantrg;
        next(dr) = l & (b58 = target & (b59 = man | b59 = mantrg)): mantrg;
        next(dr) = d & (b58 = target & (b48 = man | b48 = mantrg)): mantrg;
        next(dr) = u & (b58 = target & (b68 = man | b68 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b58 = target & (b57 = bx | b57 = bxtrg)) & (b56 = man | b56 = mantrg): bxtrg;
        next(dr) = l & (b58 = target & (b59 = bx | b59 = bxtrg)) & (b510 = man | b510 = mantrg): bxtrg;
        next(dr) = d & (b58 = target & (b48 = bx | b48 = bxtrg)) & (b38 = man | b38 = mantrg): bxtrg;
        next(dr) = u & (b58 = target & (b68 = bx | b68 = bxtrg)) & (b78 = man | b78 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b58 = bx & (b57 = man | b57 = mantrg)) & (b59 = flr | b59 = target): man;
        next(dr) = l & (b58 = bx & (b59 = man | b59 = mantrg)) & (b57 = flr | b57 = target): man;
        next(dr) = d & (b58 = bx & (b48 = man | b48 = mantrg)) & (b68 = flr | b68 = target): man;
        next(dr) = u & (b58 = bx & (b68 = man | b68 = mantrg)) & (b48 = flr | b48 = target): man;

    --man to box on target
        next(dr) = r & (b58 = bxtrg & (b57 = man | b57 = mantrg)) & (b59 = flr | b59 = target): mantrg;
        next(dr) = l & (b58 = bxtrg & (b59 = man | b59 = mantrg)) & (b57 = flr | b57 = target): mantrg;
        next(dr) = d & (b58 = bxtrg & (b48 = man | b48 = mantrg)) & (b68 = flr | b68 = target): mantrg;
        next(dr) = u & (b58 = bxtrg & (b68 = man | b68 = mantrg)) & (b48 = flr | b48 = target): mantrg;

    TRUE: b58;
esac;
next(b59) := case
	--floor to floor
		next(dr) = l & (b59 = man & b58 =flr):flr;
		next(dr) = r & (b59 = man & b510 =flr):flr;
		next(dr) = u & (b59 = man & b49 =flr):flr;
		next(dr) = d & (b59 = man & b69 =flr):flr;


	--target to floor
		next(dr) = l & (b59 = mantrg & b58 =flr): target;
		next(dr) = r & (b59 = mantrg & b510 =flr): target;
		next(dr) = u & (b59 = mantrg & b49 =flr): target;
		next(dr) = d & (b59 = mantrg & b69 =flr): target;

	--floor to target
		next(dr) = l & (b59 = man & b58 = target):flr;
		next(dr) = r & (b59 = man & b510 = target):flr;
		next(dr) = u & (b59 = man & b49 = target):flr;
		next(dr) = d & (b59 = man & b69 = target):flr;

	--target to target
		next(dr) = l & (b59 = mantrg & b58 = target): target;
		next(dr) = r & (b59 = mantrg & b510 = target): target;
		next(dr) = u & (b59 = mantrg & b49 = target): target;
		next(dr) = d & (b59 = mantrg & b69 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b59 = man & b58 = bx) & (b57 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b59 = man & b49 = bx) & (b39 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b59 = man & b69 = bx) & (b79 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b59 = man & b58 = bx) & (b57 = target) & (9-2 > 0):flr;
		next(dr) = u & (b59 = man & b49 = bx) & (b39 = target) & (5-2 > 0):flr;
		next(dr) = d & (b59 = man & b69 = bx) & (b79 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b59 = man & b58 = bxtrg) & (b57 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b59 = man & b49 = bxtrg) & (b39 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b59 = man & b69 = bxtrg) & (b79 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b59 = man & b58 = bxtrg) & (b57 = target) & (9-2 > 0):flr;
		next(dr) = u & (b59 = man & b49 = bxtrg) & (b39 = target) & (5-2 > 0):flr;
		next(dr) = d & (b59 = man & b69 = bxtrg) & (b79 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b59 = mantrg & b58 = bx) & (b57 =flr) & (9-2 > 0): target;
		next(dr) = u & (b59 = mantrg & b49 = bx) & (b39 =flr) & (5-2 > 0): target;
		next(dr) = d & (b59 = mantrg & b69 = bx) & (b79 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b59 = mantrg & b58 = bx) & (b57 = target) & (9-2 > 0): target;
		next(dr) = u & (b59 = mantrg & b49 = bx) & (b39 = target) & (5-2 > 0): target;
		next(dr) = d & (b59 = mantrg & b69 = bx) & (b79 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b59 = mantrg & b58 = bxtrg) & (b57 =flr) & (9-2 > 0): target;
		next(dr) = u & (b59 = mantrg & b49 = bxtrg) & (b39 =flr) & (5-2 > 0): target;
		next(dr) = d & (b59 = mantrg & b69 = bxtrg) & (b79 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b59 = mantrg & b58 = bxtrg) & (b57 = target) & (9-2 > 0): target;
		next(dr) = u & (b59 = mantrg & b49 = bxtrg) & (b39 = target) & (5-2 > 0): target;
		next(dr) = d & (b59 = mantrg & b69 = bxtrg) & (b79 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b59 = flr & (b58 = man | b58 = mantrg)) : man;
        next(dr) = l & (b59 = flr & (b510 = man | b510 = mantrg)): man;
        next(dr) = d & (b59 = flr & (b49 = man | b49 = mantrg)): man;
        next(dr) = u & (b59 = flr & (b69 = man | b69 = mantrg)): man;

    --box to floor
        next(dr) = r & (b59 = flr & (b58 = bx | b58 = bxtrg)) & (b57 = man | b57 = mantrg): bx;
        next(dr) = d & (b59 = flr & (b49 = bx | b49 = bxtrg)) & (b39 = man | b39 = mantrg): bx;
        next(dr) = u & (b59 = flr & (b69 = bx | b69 = bxtrg)) & (b79 = man | b79 = mantrg): bx;

    --man to target
        next(dr) = r & (b59 = target & (b58 = man | b58 = mantrg)): mantrg;
        next(dr) = l & (b59 = target & (b510 = man | b510 = mantrg)): mantrg;
        next(dr) = d & (b59 = target & (b49 = man | b49 = mantrg)): mantrg;
        next(dr) = u & (b59 = target & (b69 = man | b69 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b59 = target & (b58 = bx | b58 = bxtrg)) & (b57 = man | b57 = mantrg): bxtrg;
        next(dr) = d & (b59 = target & (b49 = bx | b49 = bxtrg)) & (b39 = man | b39 = mantrg): bxtrg;
        next(dr) = u & (b59 = target & (b69 = bx | b69 = bxtrg)) & (b79 = man | b79 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b59 = bx & (b58 = man | b58 = mantrg)) & (b510 = flr | b510 = target): man;
        next(dr) = l & (b59 = bx & (b510 = man | b510 = mantrg)) & (b58 = flr | b58 = target): man;
        next(dr) = d & (b59 = bx & (b49 = man | b49 = mantrg)) & (b69 = flr | b69 = target): man;
        next(dr) = u & (b59 = bx & (b69 = man | b69 = mantrg)) & (b49 = flr | b49 = target): man;

    --man to box on target
        next(dr) = r & (b59 = bxtrg & (b58 = man | b58 = mantrg)) & (b510 = flr | b510 = target): mantrg;
        next(dr) = l & (b59 = bxtrg & (b510 = man | b510 = mantrg)) & (b58 = flr | b58 = target): mantrg;
        next(dr) = d & (b59 = bxtrg & (b49 = man | b49 = mantrg)) & (b69 = flr | b69 = target): mantrg;
        next(dr) = u & (b59 = bxtrg & (b69 = man | b69 = mantrg)) & (b49 = flr | b49 = target): mantrg;

    TRUE: b59;
esac;
next(b510) := case
	--floor to floor
		next(dr) = l & (b510 = man & b59 =flr):flr;
		next(dr) = u & (b510 = man & b410 =flr):flr;
		next(dr) = d & (b510 = man & b610 =flr):flr;


	--target to floor
		next(dr) = l & (b510 = mantrg & b59 =flr): target;
		next(dr) = u & (b510 = mantrg & b410 =flr): target;
		next(dr) = d & (b510 = mantrg & b610 =flr): target;

	--floor to target
		next(dr) = l & (b510 = man & b59 = target):flr;
		next(dr) = u & (b510 = man & b410 = target):flr;
		next(dr) = d & (b510 = man & b610 = target):flr;

	--target to target
		next(dr) = l & (b510 = mantrg & b59 = target): target;
		next(dr) = u & (b510 = mantrg & b410 = target): target;
		next(dr) = d & (b510 = mantrg & b610 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b510 = man & b59 = bx) & (b58 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b510 = man & b410 = bx) & (b310 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b510 = man & b610 = bx) & (b710 =flr) & (5+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b510 = man & b59 = bx) & (b58 = target) & (10-2 > 0):flr;
		next(dr) = u & (b510 = man & b410 = bx) & (b310 = target) & (5-2 > 0):flr;
		next(dr) = d & (b510 = man & b610 = bx) & (b710 = target) & (5+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b510 = man & b59 = bxtrg) & (b58 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b510 = man & b410 = bxtrg) & (b310 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b510 = man & b610 = bxtrg) & (b710 =flr) & (5-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b510 = man & b59 = bxtrg) & (b58 = target) & (10-2 > 0):flr;
		next(dr) = u & (b510 = man & b410 = bxtrg) & (b310 = target) & (5-2 > 0):flr;
		next(dr) = d & (b510 = man & b610 = bxtrg) & (b710 = target) & (5+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b510 = mantrg & b59 = bx) & (b58 =flr) & (10-2 > 0): target;
		next(dr) = u & (b510 = mantrg & b410 = bx) & (b310 =flr) & (5-2 > 0): target;
		next(dr) = d & (b510 = mantrg & b610 = bx) & (b710 =flr) & (5+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b510 = mantrg & b59 = bx) & (b58 = target) & (10-2 > 0): target;
		next(dr) = u & (b510 = mantrg & b410 = bx) & (b310 = target) & (5-2 > 0): target;
		next(dr) = d & (b510 = mantrg & b610 = bx) & (b710 = target) & (5+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b510 = mantrg & b59 = bxtrg) & (b58 =flr) & (10-2 > 0): target;
		next(dr) = u & (b510 = mantrg & b410 = bxtrg) & (b310 =flr) & (5-2 > 0): target;
		next(dr) = d & (b510 = mantrg & b610 = bxtrg) & (b710 =flr) & (5+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b510 = mantrg & b59 = bxtrg) & (b58 = target) & (10-2 > 0): target;
		next(dr) = u & (b510 = mantrg & b410 = bxtrg) & (b310 = target) & (5-2 > 0): target;
		next(dr) = d & (b510 = mantrg & b610 = bxtrg) & (b710 = target) & (5+2 < m): target;

    --man to floor
        next(dr) = r & (b510 = flr & (b59 = man | b59 = mantrg)) : man;
        next(dr) = d & (b510 = flr & (b410 = man | b410 = mantrg)): man;
        next(dr) = u & (b510 = flr & (b610 = man | b610 = mantrg)): man;

    --box to floor
        next(dr) = r & (b510 = flr & (b59 = bx | b59 = bxtrg)) & (b58 = man | b58 = mantrg): bx;
        next(dr) = d & (b510 = flr & (b410 = bx | b410 = bxtrg)) & (b310 = man | b310 = mantrg): bx;
        next(dr) = u & (b510 = flr & (b610 = bx | b610 = bxtrg)) & (b710 = man | b710 = mantrg): bx;

    --man to target
        next(dr) = r & (b510 = target & (b59 = man | b59 = mantrg)): mantrg;
        next(dr) = d & (b510 = target & (b410 = man | b410 = mantrg)): mantrg;
        next(dr) = u & (b510 = target & (b610 = man | b610 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b510 = target & (b59 = bx | b59 = bxtrg)) & (b58 = man | b58 = mantrg): bxtrg;
        next(dr) = d & (b510 = target & (b410 = bx | b410 = bxtrg)) & (b310 = man | b310 = mantrg): bxtrg;
        next(dr) = u & (b510 = target & (b610 = bx | b610 = bxtrg)) & (b710 = man | b710 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b510 = bx & (b410 = man | b410 = mantrg)) & (b610 = flr | b610 = target): man;
        next(dr) = u & (b510 = bx & (b610 = man | b610 = mantrg)) & (b410 = flr | b410 = target): man;

    --man to box on target
        next(dr) = d & (b510 = bxtrg & (b410 = man | b410 = mantrg)) & (b610 = flr | b610 = target): mantrg;
        next(dr) = u & (b510 = bxtrg & (b610 = man | b610 = mantrg)) & (b410 = flr | b410 = target): mantrg;

    TRUE: b510;
esac;
next(b60) := case
	--floor to floor
		next(dr) = r & (b60 = man & b61 =flr):flr;
		next(dr) = u & (b60 = man & b50 =flr):flr;
		next(dr) = d & (b60 = man & b70 =flr):flr;


	--target to floor
		next(dr) = r & (b60 = mantrg & b61 =flr): target;
		next(dr) = u & (b60 = mantrg & b50 =flr): target;
		next(dr) = d & (b60 = mantrg & b70 =flr): target;

	--floor to target
		next(dr) = r & (b60 = man & b61 = target):flr;
		next(dr) = u & (b60 = man & b50 = target):flr;
		next(dr) = d & (b60 = man & b70 = target):flr;

	--target to target
		next(dr) = r & (b60 = mantrg & b61 = target): target;
		next(dr) = u & (b60 = mantrg & b50 = target): target;
		next(dr) = d & (b60 = mantrg & b70 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b60 = man & b61 = bx) & (b62 =flr) & (0+2 < n):flr;
		next(dr) = u & (b60 = man & b50 = bx) & (b40 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b60 = man & b70 = bx) & (b80 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b60 = man & b61 = bx) & (b62 = target) & (0+2 < n):flr;
		next(dr) = u & (b60 = man & b50 = bx) & (b40 = target) & (6-2 > 0):flr;
		next(dr) = d & (b60 = man & b70 = bx) & (b80 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b60 = man & b61 = bxtrg) & (b62 =flr) & (0+2 < n):flr;
		next(dr) = u & (b60 = man & b50 = bxtrg) & (b40 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b60 = man & b70 = bxtrg) & (b80 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b60 = man & b61 = bxtrg) & (b62 = target) & (0+2 < n):flr;
		next(dr) = u & (b60 = man & b50 = bxtrg) & (b40 = target) & (6-2 > 0):flr;
		next(dr) = d & (b60 = man & b70 = bxtrg) & (b80 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b60 = mantrg & b61 = bx) & (b62 =flr) & (0+2 < n): target;
		next(dr) = u & (b60 = mantrg & b50 = bx) & (b40 =flr) & (6-2 > 0): target;
		next(dr) = d & (b60 = mantrg & b70 = bx) & (b80 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b60 = mantrg & b61 = bx) & (b62 = target) & (0+2 < n): target;
		next(dr) = u & (b60 = mantrg & b50 = bx) & (b40 = target) & (6-2 > 0): target;
		next(dr) = d & (b60 = mantrg & b70 = bx) & (b80 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b60 = mantrg & b61 = bxtrg) & (b62 =flr) & (0+2 < n): target;
		next(dr) = u & (b60 = mantrg & b50 = bxtrg) & (b40 =flr) & (6-2 > 0): target;
		next(dr) = d & (b60 = mantrg & b70 = bxtrg) & (b80 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b60 = mantrg & b61 = bxtrg) & (b62 = target) & (0+2 < n): target;
		next(dr) = u & (b60 = mantrg & b50 = bxtrg) & (b40 = target) & (6-2 > 0): target;
		next(dr) = d & (b60 = mantrg & b70 = bxtrg) & (b80 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = l & (b60 = flr & (b61 = man | b61 = mantrg)): man;
        next(dr) = d & (b60 = flr & (b50 = man | b50 = mantrg)): man;
        next(dr) = u & (b60 = flr & (b70 = man | b70 = mantrg)): man;

    --box to floor
        next(dr) = l & (b60 = flr & (b61 = bx | b61 = bxtrg)) & (b62 = man | b62 = mantrg): bx;
        next(dr) = d & (b60 = flr & (b50 = bx | b50 = bxtrg)) & (b40 = man | b40 = mantrg): bx;
        next(dr) = u & (b60 = flr & (b70 = bx | b70 = bxtrg)) & (b80 = man | b80 = mantrg): bx;

    --man to target
        next(dr) = l & (b60 = target & (b61 = man | b61 = mantrg)): mantrg;
        next(dr) = d & (b60 = target & (b50 = man | b50 = mantrg)): mantrg;
        next(dr) = u & (b60 = target & (b70 = man | b70 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b60 = target & (b61 = bx | b61 = bxtrg)) & (b62 = man | b62 = mantrg): bxtrg;
        next(dr) = d & (b60 = target & (b50 = bx | b50 = bxtrg)) & (b40 = man | b40 = mantrg): bxtrg;
        next(dr) = u & (b60 = target & (b70 = bx | b70 = bxtrg)) & (b80 = man | b80 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b60 = bx & (b50 = man | b50 = mantrg)) & (b70 = flr | b70 = target): man;
        next(dr) = u & (b60 = bx & (b70 = man | b70 = mantrg)) & (b50 = flr | b50 = target): man;

    --man to box on target
        next(dr) = d & (b60 = bxtrg & (b50 = man | b50 = mantrg)) & (b70 = flr | b70 = target): mantrg;
        next(dr) = u & (b60 = bxtrg & (b70 = man | b70 = mantrg)) & (b50 = flr | b50 = target): mantrg;

    TRUE: b60;
esac;
next(b61) := case
	--floor to floor
		next(dr) = l & (b61 = man & b60 =flr):flr;
		next(dr) = r & (b61 = man & b62 =flr):flr;
		next(dr) = u & (b61 = man & b51 =flr):flr;
		next(dr) = d & (b61 = man & b71 =flr):flr;


	--target to floor
		next(dr) = l & (b61 = mantrg & b60 =flr): target;
		next(dr) = r & (b61 = mantrg & b62 =flr): target;
		next(dr) = u & (b61 = mantrg & b51 =flr): target;
		next(dr) = d & (b61 = mantrg & b71 =flr): target;

	--floor to target
		next(dr) = l & (b61 = man & b60 = target):flr;
		next(dr) = r & (b61 = man & b62 = target):flr;
		next(dr) = u & (b61 = man & b51 = target):flr;
		next(dr) = d & (b61 = man & b71 = target):flr;

	--target to target
		next(dr) = l & (b61 = mantrg & b60 = target): target;
		next(dr) = r & (b61 = mantrg & b62 = target): target;
		next(dr) = u & (b61 = mantrg & b51 = target): target;
		next(dr) = d & (b61 = mantrg & b71 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b61 = man & b62 = bx) & (b63 =flr) & (1+2 < n):flr;
		next(dr) = u & (b61 = man & b51 = bx) & (b41 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b61 = man & b71 = bx) & (b81 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b61 = man & b62 = bx) & (b63 = target) & (1+2 < n):flr;
		next(dr) = u & (b61 = man & b51 = bx) & (b41 = target) & (6-2 > 0):flr;
		next(dr) = d & (b61 = man & b71 = bx) & (b81 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b61 = man & b62 = bxtrg) & (b63 =flr) & (1+2 < n):flr;
		next(dr) = u & (b61 = man & b51 = bxtrg) & (b41 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b61 = man & b71 = bxtrg) & (b81 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b61 = man & b62 = bxtrg) & (b63 = target) & (1+2 < n):flr;
		next(dr) = u & (b61 = man & b51 = bxtrg) & (b41 = target) & (6-2 > 0):flr;
		next(dr) = d & (b61 = man & b71 = bxtrg) & (b81 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b61 = mantrg & b62 = bx) & (b63 =flr) & (1+2 < n): target;
		next(dr) = u & (b61 = mantrg & b51 = bx) & (b41 =flr) & (6-2 > 0): target;
		next(dr) = d & (b61 = mantrg & b71 = bx) & (b81 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b61 = mantrg & b62 = bx) & (b63 = target) & (1+2 < n): target;
		next(dr) = u & (b61 = mantrg & b51 = bx) & (b41 = target) & (6-2 > 0): target;
		next(dr) = d & (b61 = mantrg & b71 = bx) & (b81 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b61 = mantrg & b62 = bxtrg) & (b63 =flr) & (1+2 < n): target;
		next(dr) = u & (b61 = mantrg & b51 = bxtrg) & (b41 =flr) & (6-2 > 0): target;
		next(dr) = d & (b61 = mantrg & b71 = bxtrg) & (b81 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b61 = mantrg & b62 = bxtrg) & (b63 = target) & (1+2 < n): target;
		next(dr) = u & (b61 = mantrg & b51 = bxtrg) & (b41 = target) & (6-2 > 0): target;
		next(dr) = d & (b61 = mantrg & b71 = bxtrg) & (b81 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b61 = flr & (b60 = man | b60 = mantrg)) : man;
        next(dr) = l & (b61 = flr & (b62 = man | b62 = mantrg)): man;
        next(dr) = d & (b61 = flr & (b51 = man | b51 = mantrg)): man;
        next(dr) = u & (b61 = flr & (b71 = man | b71 = mantrg)): man;

    --box to floor
        next(dr) = l & (b61 = flr & (b62 = bx | b62 = bxtrg)) & (b63 = man | b63 = mantrg): bx;
        next(dr) = d & (b61 = flr & (b51 = bx | b51 = bxtrg)) & (b41 = man | b41 = mantrg): bx;
        next(dr) = u & (b61 = flr & (b71 = bx | b71 = bxtrg)) & (b81 = man | b81 = mantrg): bx;

    --man to target
        next(dr) = r & (b61 = target & (b60 = man | b60 = mantrg)): mantrg;
        next(dr) = l & (b61 = target & (b62 = man | b62 = mantrg)): mantrg;
        next(dr) = d & (b61 = target & (b51 = man | b51 = mantrg)): mantrg;
        next(dr) = u & (b61 = target & (b71 = man | b71 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b61 = target & (b62 = bx | b62 = bxtrg)) & (b63 = man | b63 = mantrg): bxtrg;
        next(dr) = d & (b61 = target & (b51 = bx | b51 = bxtrg)) & (b41 = man | b41 = mantrg): bxtrg;
        next(dr) = u & (b61 = target & (b71 = bx | b71 = bxtrg)) & (b81 = man | b81 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b61 = bx & (b60 = man | b60 = mantrg)) & (b62 = flr | b62 = target): man;
        next(dr) = l & (b61 = bx & (b62 = man | b62 = mantrg)) & (b60 = flr | b60 = target): man;
        next(dr) = d & (b61 = bx & (b51 = man | b51 = mantrg)) & (b71 = flr | b71 = target): man;
        next(dr) = u & (b61 = bx & (b71 = man | b71 = mantrg)) & (b51 = flr | b51 = target): man;

    --man to box on target
        next(dr) = r & (b61 = bxtrg & (b60 = man | b60 = mantrg)) & (b62 = flr | b62 = target): mantrg;
        next(dr) = l & (b61 = bxtrg & (b62 = man | b62 = mantrg)) & (b60 = flr | b60 = target): mantrg;
        next(dr) = d & (b61 = bxtrg & (b51 = man | b51 = mantrg)) & (b71 = flr | b71 = target): mantrg;
        next(dr) = u & (b61 = bxtrg & (b71 = man | b71 = mantrg)) & (b51 = flr | b51 = target): mantrg;

    TRUE: b61;
esac;
next(b62) := case
	--floor to floor
		next(dr) = l & (b62 = man & b61 =flr):flr;
		next(dr) = r & (b62 = man & b63 =flr):flr;
		next(dr) = u & (b62 = man & b52 =flr):flr;
		next(dr) = d & (b62 = man & b72 =flr):flr;


	--target to floor
		next(dr) = l & (b62 = mantrg & b61 =flr): target;
		next(dr) = r & (b62 = mantrg & b63 =flr): target;
		next(dr) = u & (b62 = mantrg & b52 =flr): target;
		next(dr) = d & (b62 = mantrg & b72 =flr): target;

	--floor to target
		next(dr) = l & (b62 = man & b61 = target):flr;
		next(dr) = r & (b62 = man & b63 = target):flr;
		next(dr) = u & (b62 = man & b52 = target):flr;
		next(dr) = d & (b62 = man & b72 = target):flr;

	--target to target
		next(dr) = l & (b62 = mantrg & b61 = target): target;
		next(dr) = r & (b62 = mantrg & b63 = target): target;
		next(dr) = u & (b62 = mantrg & b52 = target): target;
		next(dr) = d & (b62 = mantrg & b72 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b62 = man & b61 = bx) & (b60 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b62 = man & b63 = bx) & (b64 =flr) & (2+2 < n):flr;
		next(dr) = u & (b62 = man & b52 = bx) & (b42 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b62 = man & b72 = bx) & (b82 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b62 = man & b61 = bx) & (b60 = target) & (2-2 > 0):flr;
		next(dr) = r & (b62 = man & b63 = bx) & (b64 = target) & (2+2 < n):flr;
		next(dr) = u & (b62 = man & b52 = bx) & (b42 = target) & (6-2 > 0):flr;
		next(dr) = d & (b62 = man & b72 = bx) & (b82 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b62 = man & b61 = bxtrg) & (b60 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b62 = man & b63 = bxtrg) & (b64 =flr) & (2+2 < n):flr;
		next(dr) = u & (b62 = man & b52 = bxtrg) & (b42 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b62 = man & b72 = bxtrg) & (b82 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b62 = man & b61 = bxtrg) & (b60 = target) & (2-2 > 0):flr;
		next(dr) = r & (b62 = man & b63 = bxtrg) & (b64 = target) & (2+2 < n):flr;
		next(dr) = u & (b62 = man & b52 = bxtrg) & (b42 = target) & (6-2 > 0):flr;
		next(dr) = d & (b62 = man & b72 = bxtrg) & (b82 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b62 = mantrg & b61 = bx) & (b60 =flr) & (2-2 > 0): target;
		next(dr) = r & (b62 = mantrg & b63 = bx) & (b64 =flr) & (2+2 < n): target;
		next(dr) = u & (b62 = mantrg & b52 = bx) & (b42 =flr) & (6-2 > 0): target;
		next(dr) = d & (b62 = mantrg & b72 = bx) & (b82 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b62 = mantrg & b61 = bx) & (b60 = target) & (2-2 > 0): target;
		next(dr) = r & (b62 = mantrg & b63 = bx) & (b64 = target) & (2+2 < n): target;
		next(dr) = u & (b62 = mantrg & b52 = bx) & (b42 = target) & (6-2 > 0): target;
		next(dr) = d & (b62 = mantrg & b72 = bx) & (b82 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b62 = mantrg & b61 = bxtrg) & (b60 =flr) & (2-2 > 0): target;
		next(dr) = r & (b62 = mantrg & b63 = bxtrg) & (b64 =flr) & (2+2 < n): target;
		next(dr) = u & (b62 = mantrg & b52 = bxtrg) & (b42 =flr) & (6-2 > 0): target;
		next(dr) = d & (b62 = mantrg & b72 = bxtrg) & (b82 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b62 = mantrg & b61 = bxtrg) & (b60 = target) & (2-2 > 0): target;
		next(dr) = r & (b62 = mantrg & b63 = bxtrg) & (b64 = target) & (2+2 < n): target;
		next(dr) = u & (b62 = mantrg & b52 = bxtrg) & (b42 = target) & (6-2 > 0): target;
		next(dr) = d & (b62 = mantrg & b72 = bxtrg) & (b82 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b62 = flr & (b61 = man | b61 = mantrg)) : man;
        next(dr) = l & (b62 = flr & (b63 = man | b63 = mantrg)): man;
        next(dr) = d & (b62 = flr & (b52 = man | b52 = mantrg)): man;
        next(dr) = u & (b62 = flr & (b72 = man | b72 = mantrg)): man;

    --box to floor
        next(dr) = r & (b62 = flr & (b61 = bx | b61 = bxtrg)) & (b60 = man | b60 = mantrg): bx;
        next(dr) = l & (b62 = flr & (b63 = bx | b63 = bxtrg)) & (b64 = man | b64 = mantrg): bx;
        next(dr) = d & (b62 = flr & (b52 = bx | b52 = bxtrg)) & (b42 = man | b42 = mantrg): bx;
        next(dr) = u & (b62 = flr & (b72 = bx | b72 = bxtrg)) & (b82 = man | b82 = mantrg): bx;

    --man to target
        next(dr) = r & (b62 = target & (b61 = man | b61 = mantrg)): mantrg;
        next(dr) = l & (b62 = target & (b63 = man | b63 = mantrg)): mantrg;
        next(dr) = d & (b62 = target & (b52 = man | b52 = mantrg)): mantrg;
        next(dr) = u & (b62 = target & (b72 = man | b72 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b62 = target & (b61 = bx | b61 = bxtrg)) & (b60 = man | b60 = mantrg): bxtrg;
        next(dr) = l & (b62 = target & (b63 = bx | b63 = bxtrg)) & (b64 = man | b64 = mantrg): bxtrg;
        next(dr) = d & (b62 = target & (b52 = bx | b52 = bxtrg)) & (b42 = man | b42 = mantrg): bxtrg;
        next(dr) = u & (b62 = target & (b72 = bx | b72 = bxtrg)) & (b82 = man | b82 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b62 = bx & (b61 = man | b61 = mantrg)) & (b63 = flr | b63 = target): man;
        next(dr) = l & (b62 = bx & (b63 = man | b63 = mantrg)) & (b61 = flr | b61 = target): man;
        next(dr) = d & (b62 = bx & (b52 = man | b52 = mantrg)) & (b72 = flr | b72 = target): man;
        next(dr) = u & (b62 = bx & (b72 = man | b72 = mantrg)) & (b52 = flr | b52 = target): man;

    --man to box on target
        next(dr) = r & (b62 = bxtrg & (b61 = man | b61 = mantrg)) & (b63 = flr | b63 = target): mantrg;
        next(dr) = l & (b62 = bxtrg & (b63 = man | b63 = mantrg)) & (b61 = flr | b61 = target): mantrg;
        next(dr) = d & (b62 = bxtrg & (b52 = man | b52 = mantrg)) & (b72 = flr | b72 = target): mantrg;
        next(dr) = u & (b62 = bxtrg & (b72 = man | b72 = mantrg)) & (b52 = flr | b52 = target): mantrg;

    TRUE: b62;
esac;
next(b63) := case
	--floor to floor
		next(dr) = l & (b63 = man & b62 =flr):flr;
		next(dr) = r & (b63 = man & b64 =flr):flr;
		next(dr) = u & (b63 = man & b53 =flr):flr;
		next(dr) = d & (b63 = man & b73 =flr):flr;


	--target to floor
		next(dr) = l & (b63 = mantrg & b62 =flr): target;
		next(dr) = r & (b63 = mantrg & b64 =flr): target;
		next(dr) = u & (b63 = mantrg & b53 =flr): target;
		next(dr) = d & (b63 = mantrg & b73 =flr): target;

	--floor to target
		next(dr) = l & (b63 = man & b62 = target):flr;
		next(dr) = r & (b63 = man & b64 = target):flr;
		next(dr) = u & (b63 = man & b53 = target):flr;
		next(dr) = d & (b63 = man & b73 = target):flr;

	--target to target
		next(dr) = l & (b63 = mantrg & b62 = target): target;
		next(dr) = r & (b63 = mantrg & b64 = target): target;
		next(dr) = u & (b63 = mantrg & b53 = target): target;
		next(dr) = d & (b63 = mantrg & b73 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b63 = man & b62 = bx) & (b61 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b63 = man & b64 = bx) & (b65 =flr) & (3+2 < n):flr;
		next(dr) = u & (b63 = man & b53 = bx) & (b43 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b63 = man & b73 = bx) & (b83 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b63 = man & b62 = bx) & (b61 = target) & (3-2 > 0):flr;
		next(dr) = r & (b63 = man & b64 = bx) & (b65 = target) & (3+2 < n):flr;
		next(dr) = u & (b63 = man & b53 = bx) & (b43 = target) & (6-2 > 0):flr;
		next(dr) = d & (b63 = man & b73 = bx) & (b83 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b63 = man & b62 = bxtrg) & (b61 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b63 = man & b64 = bxtrg) & (b65 =flr) & (3+2 < n):flr;
		next(dr) = u & (b63 = man & b53 = bxtrg) & (b43 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b63 = man & b73 = bxtrg) & (b83 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b63 = man & b62 = bxtrg) & (b61 = target) & (3-2 > 0):flr;
		next(dr) = r & (b63 = man & b64 = bxtrg) & (b65 = target) & (3+2 < n):flr;
		next(dr) = u & (b63 = man & b53 = bxtrg) & (b43 = target) & (6-2 > 0):flr;
		next(dr) = d & (b63 = man & b73 = bxtrg) & (b83 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b63 = mantrg & b62 = bx) & (b61 =flr) & (3-2 > 0): target;
		next(dr) = r & (b63 = mantrg & b64 = bx) & (b65 =flr) & (3+2 < n): target;
		next(dr) = u & (b63 = mantrg & b53 = bx) & (b43 =flr) & (6-2 > 0): target;
		next(dr) = d & (b63 = mantrg & b73 = bx) & (b83 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b63 = mantrg & b62 = bx) & (b61 = target) & (3-2 > 0): target;
		next(dr) = r & (b63 = mantrg & b64 = bx) & (b65 = target) & (3+2 < n): target;
		next(dr) = u & (b63 = mantrg & b53 = bx) & (b43 = target) & (6-2 > 0): target;
		next(dr) = d & (b63 = mantrg & b73 = bx) & (b83 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b63 = mantrg & b62 = bxtrg) & (b61 =flr) & (3-2 > 0): target;
		next(dr) = r & (b63 = mantrg & b64 = bxtrg) & (b65 =flr) & (3+2 < n): target;
		next(dr) = u & (b63 = mantrg & b53 = bxtrg) & (b43 =flr) & (6-2 > 0): target;
		next(dr) = d & (b63 = mantrg & b73 = bxtrg) & (b83 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b63 = mantrg & b62 = bxtrg) & (b61 = target) & (3-2 > 0): target;
		next(dr) = r & (b63 = mantrg & b64 = bxtrg) & (b65 = target) & (3+2 < n): target;
		next(dr) = u & (b63 = mantrg & b53 = bxtrg) & (b43 = target) & (6-2 > 0): target;
		next(dr) = d & (b63 = mantrg & b73 = bxtrg) & (b83 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b63 = flr & (b62 = man | b62 = mantrg)) : man;
        next(dr) = l & (b63 = flr & (b64 = man | b64 = mantrg)): man;
        next(dr) = d & (b63 = flr & (b53 = man | b53 = mantrg)): man;
        next(dr) = u & (b63 = flr & (b73 = man | b73 = mantrg)): man;

    --box to floor
        next(dr) = r & (b63 = flr & (b62 = bx | b62 = bxtrg)) & (b61 = man | b61 = mantrg): bx;
        next(dr) = l & (b63 = flr & (b64 = bx | b64 = bxtrg)) & (b65 = man | b65 = mantrg): bx;
        next(dr) = d & (b63 = flr & (b53 = bx | b53 = bxtrg)) & (b43 = man | b43 = mantrg): bx;
        next(dr) = u & (b63 = flr & (b73 = bx | b73 = bxtrg)) & (b83 = man | b83 = mantrg): bx;

    --man to target
        next(dr) = r & (b63 = target & (b62 = man | b62 = mantrg)): mantrg;
        next(dr) = l & (b63 = target & (b64 = man | b64 = mantrg)): mantrg;
        next(dr) = d & (b63 = target & (b53 = man | b53 = mantrg)): mantrg;
        next(dr) = u & (b63 = target & (b73 = man | b73 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b63 = target & (b62 = bx | b62 = bxtrg)) & (b61 = man | b61 = mantrg): bxtrg;
        next(dr) = l & (b63 = target & (b64 = bx | b64 = bxtrg)) & (b65 = man | b65 = mantrg): bxtrg;
        next(dr) = d & (b63 = target & (b53 = bx | b53 = bxtrg)) & (b43 = man | b43 = mantrg): bxtrg;
        next(dr) = u & (b63 = target & (b73 = bx | b73 = bxtrg)) & (b83 = man | b83 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b63 = bx & (b62 = man | b62 = mantrg)) & (b64 = flr | b64 = target): man;
        next(dr) = l & (b63 = bx & (b64 = man | b64 = mantrg)) & (b62 = flr | b62 = target): man;
        next(dr) = d & (b63 = bx & (b53 = man | b53 = mantrg)) & (b73 = flr | b73 = target): man;
        next(dr) = u & (b63 = bx & (b73 = man | b73 = mantrg)) & (b53 = flr | b53 = target): man;

    --man to box on target
        next(dr) = r & (b63 = bxtrg & (b62 = man | b62 = mantrg)) & (b64 = flr | b64 = target): mantrg;
        next(dr) = l & (b63 = bxtrg & (b64 = man | b64 = mantrg)) & (b62 = flr | b62 = target): mantrg;
        next(dr) = d & (b63 = bxtrg & (b53 = man | b53 = mantrg)) & (b73 = flr | b73 = target): mantrg;
        next(dr) = u & (b63 = bxtrg & (b73 = man | b73 = mantrg)) & (b53 = flr | b53 = target): mantrg;

    TRUE: b63;
esac;
next(b64) := case
	--floor to floor
		next(dr) = l & (b64 = man & b63 =flr):flr;
		next(dr) = r & (b64 = man & b65 =flr):flr;
		next(dr) = u & (b64 = man & b54 =flr):flr;
		next(dr) = d & (b64 = man & b74 =flr):flr;


	--target to floor
		next(dr) = l & (b64 = mantrg & b63 =flr): target;
		next(dr) = r & (b64 = mantrg & b65 =flr): target;
		next(dr) = u & (b64 = mantrg & b54 =flr): target;
		next(dr) = d & (b64 = mantrg & b74 =flr): target;

	--floor to target
		next(dr) = l & (b64 = man & b63 = target):flr;
		next(dr) = r & (b64 = man & b65 = target):flr;
		next(dr) = u & (b64 = man & b54 = target):flr;
		next(dr) = d & (b64 = man & b74 = target):flr;

	--target to target
		next(dr) = l & (b64 = mantrg & b63 = target): target;
		next(dr) = r & (b64 = mantrg & b65 = target): target;
		next(dr) = u & (b64 = mantrg & b54 = target): target;
		next(dr) = d & (b64 = mantrg & b74 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b64 = man & b63 = bx) & (b62 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b64 = man & b65 = bx) & (b66 =flr) & (4+2 < n):flr;
		next(dr) = u & (b64 = man & b54 = bx) & (b44 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b64 = man & b74 = bx) & (b84 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b64 = man & b63 = bx) & (b62 = target) & (4-2 > 0):flr;
		next(dr) = r & (b64 = man & b65 = bx) & (b66 = target) & (4+2 < n):flr;
		next(dr) = u & (b64 = man & b54 = bx) & (b44 = target) & (6-2 > 0):flr;
		next(dr) = d & (b64 = man & b74 = bx) & (b84 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b64 = man & b63 = bxtrg) & (b62 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b64 = man & b65 = bxtrg) & (b66 =flr) & (4+2 < n):flr;
		next(dr) = u & (b64 = man & b54 = bxtrg) & (b44 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b64 = man & b74 = bxtrg) & (b84 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b64 = man & b63 = bxtrg) & (b62 = target) & (4-2 > 0):flr;
		next(dr) = r & (b64 = man & b65 = bxtrg) & (b66 = target) & (4+2 < n):flr;
		next(dr) = u & (b64 = man & b54 = bxtrg) & (b44 = target) & (6-2 > 0):flr;
		next(dr) = d & (b64 = man & b74 = bxtrg) & (b84 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b64 = mantrg & b63 = bx) & (b62 =flr) & (4-2 > 0): target;
		next(dr) = r & (b64 = mantrg & b65 = bx) & (b66 =flr) & (4+2 < n): target;
		next(dr) = u & (b64 = mantrg & b54 = bx) & (b44 =flr) & (6-2 > 0): target;
		next(dr) = d & (b64 = mantrg & b74 = bx) & (b84 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b64 = mantrg & b63 = bx) & (b62 = target) & (4-2 > 0): target;
		next(dr) = r & (b64 = mantrg & b65 = bx) & (b66 = target) & (4+2 < n): target;
		next(dr) = u & (b64 = mantrg & b54 = bx) & (b44 = target) & (6-2 > 0): target;
		next(dr) = d & (b64 = mantrg & b74 = bx) & (b84 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b64 = mantrg & b63 = bxtrg) & (b62 =flr) & (4-2 > 0): target;
		next(dr) = r & (b64 = mantrg & b65 = bxtrg) & (b66 =flr) & (4+2 < n): target;
		next(dr) = u & (b64 = mantrg & b54 = bxtrg) & (b44 =flr) & (6-2 > 0): target;
		next(dr) = d & (b64 = mantrg & b74 = bxtrg) & (b84 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b64 = mantrg & b63 = bxtrg) & (b62 = target) & (4-2 > 0): target;
		next(dr) = r & (b64 = mantrg & b65 = bxtrg) & (b66 = target) & (4+2 < n): target;
		next(dr) = u & (b64 = mantrg & b54 = bxtrg) & (b44 = target) & (6-2 > 0): target;
		next(dr) = d & (b64 = mantrg & b74 = bxtrg) & (b84 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b64 = flr & (b63 = man | b63 = mantrg)) : man;
        next(dr) = l & (b64 = flr & (b65 = man | b65 = mantrg)): man;
        next(dr) = d & (b64 = flr & (b54 = man | b54 = mantrg)): man;
        next(dr) = u & (b64 = flr & (b74 = man | b74 = mantrg)): man;

    --box to floor
        next(dr) = r & (b64 = flr & (b63 = bx | b63 = bxtrg)) & (b62 = man | b62 = mantrg): bx;
        next(dr) = l & (b64 = flr & (b65 = bx | b65 = bxtrg)) & (b66 = man | b66 = mantrg): bx;
        next(dr) = d & (b64 = flr & (b54 = bx | b54 = bxtrg)) & (b44 = man | b44 = mantrg): bx;
        next(dr) = u & (b64 = flr & (b74 = bx | b74 = bxtrg)) & (b84 = man | b84 = mantrg): bx;

    --man to target
        next(dr) = r & (b64 = target & (b63 = man | b63 = mantrg)): mantrg;
        next(dr) = l & (b64 = target & (b65 = man | b65 = mantrg)): mantrg;
        next(dr) = d & (b64 = target & (b54 = man | b54 = mantrg)): mantrg;
        next(dr) = u & (b64 = target & (b74 = man | b74 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b64 = target & (b63 = bx | b63 = bxtrg)) & (b62 = man | b62 = mantrg): bxtrg;
        next(dr) = l & (b64 = target & (b65 = bx | b65 = bxtrg)) & (b66 = man | b66 = mantrg): bxtrg;
        next(dr) = d & (b64 = target & (b54 = bx | b54 = bxtrg)) & (b44 = man | b44 = mantrg): bxtrg;
        next(dr) = u & (b64 = target & (b74 = bx | b74 = bxtrg)) & (b84 = man | b84 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b64 = bx & (b63 = man | b63 = mantrg)) & (b65 = flr | b65 = target): man;
        next(dr) = l & (b64 = bx & (b65 = man | b65 = mantrg)) & (b63 = flr | b63 = target): man;
        next(dr) = d & (b64 = bx & (b54 = man | b54 = mantrg)) & (b74 = flr | b74 = target): man;
        next(dr) = u & (b64 = bx & (b74 = man | b74 = mantrg)) & (b54 = flr | b54 = target): man;

    --man to box on target
        next(dr) = r & (b64 = bxtrg & (b63 = man | b63 = mantrg)) & (b65 = flr | b65 = target): mantrg;
        next(dr) = l & (b64 = bxtrg & (b65 = man | b65 = mantrg)) & (b63 = flr | b63 = target): mantrg;
        next(dr) = d & (b64 = bxtrg & (b54 = man | b54 = mantrg)) & (b74 = flr | b74 = target): mantrg;
        next(dr) = u & (b64 = bxtrg & (b74 = man | b74 = mantrg)) & (b54 = flr | b54 = target): mantrg;

    TRUE: b64;
esac;
next(b65) := case
	--floor to floor
		next(dr) = l & (b65 = man & b64 =flr):flr;
		next(dr) = r & (b65 = man & b66 =flr):flr;
		next(dr) = u & (b65 = man & b55 =flr):flr;
		next(dr) = d & (b65 = man & b75 =flr):flr;


	--target to floor
		next(dr) = l & (b65 = mantrg & b64 =flr): target;
		next(dr) = r & (b65 = mantrg & b66 =flr): target;
		next(dr) = u & (b65 = mantrg & b55 =flr): target;
		next(dr) = d & (b65 = mantrg & b75 =flr): target;

	--floor to target
		next(dr) = l & (b65 = man & b64 = target):flr;
		next(dr) = r & (b65 = man & b66 = target):flr;
		next(dr) = u & (b65 = man & b55 = target):flr;
		next(dr) = d & (b65 = man & b75 = target):flr;

	--target to target
		next(dr) = l & (b65 = mantrg & b64 = target): target;
		next(dr) = r & (b65 = mantrg & b66 = target): target;
		next(dr) = u & (b65 = mantrg & b55 = target): target;
		next(dr) = d & (b65 = mantrg & b75 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b65 = man & b64 = bx) & (b63 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b65 = man & b66 = bx) & (b67 =flr) & (5+2 < n):flr;
		next(dr) = u & (b65 = man & b55 = bx) & (b45 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b65 = man & b75 = bx) & (b85 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b65 = man & b64 = bx) & (b63 = target) & (5-2 > 0):flr;
		next(dr) = r & (b65 = man & b66 = bx) & (b67 = target) & (5+2 < n):flr;
		next(dr) = u & (b65 = man & b55 = bx) & (b45 = target) & (6-2 > 0):flr;
		next(dr) = d & (b65 = man & b75 = bx) & (b85 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b65 = man & b64 = bxtrg) & (b63 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b65 = man & b66 = bxtrg) & (b67 =flr) & (5+2 < n):flr;
		next(dr) = u & (b65 = man & b55 = bxtrg) & (b45 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b65 = man & b75 = bxtrg) & (b85 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b65 = man & b64 = bxtrg) & (b63 = target) & (5-2 > 0):flr;
		next(dr) = r & (b65 = man & b66 = bxtrg) & (b67 = target) & (5+2 < n):flr;
		next(dr) = u & (b65 = man & b55 = bxtrg) & (b45 = target) & (6-2 > 0):flr;
		next(dr) = d & (b65 = man & b75 = bxtrg) & (b85 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b65 = mantrg & b64 = bx) & (b63 =flr) & (5-2 > 0): target;
		next(dr) = r & (b65 = mantrg & b66 = bx) & (b67 =flr) & (5+2 < n): target;
		next(dr) = u & (b65 = mantrg & b55 = bx) & (b45 =flr) & (6-2 > 0): target;
		next(dr) = d & (b65 = mantrg & b75 = bx) & (b85 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b65 = mantrg & b64 = bx) & (b63 = target) & (5-2 > 0): target;
		next(dr) = r & (b65 = mantrg & b66 = bx) & (b67 = target) & (5+2 < n): target;
		next(dr) = u & (b65 = mantrg & b55 = bx) & (b45 = target) & (6-2 > 0): target;
		next(dr) = d & (b65 = mantrg & b75 = bx) & (b85 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b65 = mantrg & b64 = bxtrg) & (b63 =flr) & (5-2 > 0): target;
		next(dr) = r & (b65 = mantrg & b66 = bxtrg) & (b67 =flr) & (5+2 < n): target;
		next(dr) = u & (b65 = mantrg & b55 = bxtrg) & (b45 =flr) & (6-2 > 0): target;
		next(dr) = d & (b65 = mantrg & b75 = bxtrg) & (b85 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b65 = mantrg & b64 = bxtrg) & (b63 = target) & (5-2 > 0): target;
		next(dr) = r & (b65 = mantrg & b66 = bxtrg) & (b67 = target) & (5+2 < n): target;
		next(dr) = u & (b65 = mantrg & b55 = bxtrg) & (b45 = target) & (6-2 > 0): target;
		next(dr) = d & (b65 = mantrg & b75 = bxtrg) & (b85 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b65 = flr & (b64 = man | b64 = mantrg)) : man;
        next(dr) = l & (b65 = flr & (b66 = man | b66 = mantrg)): man;
        next(dr) = d & (b65 = flr & (b55 = man | b55 = mantrg)): man;
        next(dr) = u & (b65 = flr & (b75 = man | b75 = mantrg)): man;

    --box to floor
        next(dr) = r & (b65 = flr & (b64 = bx | b64 = bxtrg)) & (b63 = man | b63 = mantrg): bx;
        next(dr) = l & (b65 = flr & (b66 = bx | b66 = bxtrg)) & (b67 = man | b67 = mantrg): bx;
        next(dr) = d & (b65 = flr & (b55 = bx | b55 = bxtrg)) & (b45 = man | b45 = mantrg): bx;
        next(dr) = u & (b65 = flr & (b75 = bx | b75 = bxtrg)) & (b85 = man | b85 = mantrg): bx;

    --man to target
        next(dr) = r & (b65 = target & (b64 = man | b64 = mantrg)): mantrg;
        next(dr) = l & (b65 = target & (b66 = man | b66 = mantrg)): mantrg;
        next(dr) = d & (b65 = target & (b55 = man | b55 = mantrg)): mantrg;
        next(dr) = u & (b65 = target & (b75 = man | b75 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b65 = target & (b64 = bx | b64 = bxtrg)) & (b63 = man | b63 = mantrg): bxtrg;
        next(dr) = l & (b65 = target & (b66 = bx | b66 = bxtrg)) & (b67 = man | b67 = mantrg): bxtrg;
        next(dr) = d & (b65 = target & (b55 = bx | b55 = bxtrg)) & (b45 = man | b45 = mantrg): bxtrg;
        next(dr) = u & (b65 = target & (b75 = bx | b75 = bxtrg)) & (b85 = man | b85 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b65 = bx & (b64 = man | b64 = mantrg)) & (b66 = flr | b66 = target): man;
        next(dr) = l & (b65 = bx & (b66 = man | b66 = mantrg)) & (b64 = flr | b64 = target): man;
        next(dr) = d & (b65 = bx & (b55 = man | b55 = mantrg)) & (b75 = flr | b75 = target): man;
        next(dr) = u & (b65 = bx & (b75 = man | b75 = mantrg)) & (b55 = flr | b55 = target): man;

    --man to box on target
        next(dr) = r & (b65 = bxtrg & (b64 = man | b64 = mantrg)) & (b66 = flr | b66 = target): mantrg;
        next(dr) = l & (b65 = bxtrg & (b66 = man | b66 = mantrg)) & (b64 = flr | b64 = target): mantrg;
        next(dr) = d & (b65 = bxtrg & (b55 = man | b55 = mantrg)) & (b75 = flr | b75 = target): mantrg;
        next(dr) = u & (b65 = bxtrg & (b75 = man | b75 = mantrg)) & (b55 = flr | b55 = target): mantrg;

    TRUE: b65;
esac;
next(b66) := case
	--floor to floor
		next(dr) = l & (b66 = man & b65 =flr):flr;
		next(dr) = r & (b66 = man & b67 =flr):flr;
		next(dr) = u & (b66 = man & b56 =flr):flr;
		next(dr) = d & (b66 = man & b76 =flr):flr;


	--target to floor
		next(dr) = l & (b66 = mantrg & b65 =flr): target;
		next(dr) = r & (b66 = mantrg & b67 =flr): target;
		next(dr) = u & (b66 = mantrg & b56 =flr): target;
		next(dr) = d & (b66 = mantrg & b76 =flr): target;

	--floor to target
		next(dr) = l & (b66 = man & b65 = target):flr;
		next(dr) = r & (b66 = man & b67 = target):flr;
		next(dr) = u & (b66 = man & b56 = target):flr;
		next(dr) = d & (b66 = man & b76 = target):flr;

	--target to target
		next(dr) = l & (b66 = mantrg & b65 = target): target;
		next(dr) = r & (b66 = mantrg & b67 = target): target;
		next(dr) = u & (b66 = mantrg & b56 = target): target;
		next(dr) = d & (b66 = mantrg & b76 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b66 = man & b65 = bx) & (b64 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b66 = man & b67 = bx) & (b68 =flr) & (6+2 < n):flr;
		next(dr) = u & (b66 = man & b56 = bx) & (b46 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b66 = man & b76 = bx) & (b86 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b66 = man & b65 = bx) & (b64 = target) & (6-2 > 0):flr;
		next(dr) = r & (b66 = man & b67 = bx) & (b68 = target) & (6+2 < n):flr;
		next(dr) = u & (b66 = man & b56 = bx) & (b46 = target) & (6-2 > 0):flr;
		next(dr) = d & (b66 = man & b76 = bx) & (b86 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b66 = man & b65 = bxtrg) & (b64 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b66 = man & b67 = bxtrg) & (b68 =flr) & (6+2 < n):flr;
		next(dr) = u & (b66 = man & b56 = bxtrg) & (b46 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b66 = man & b76 = bxtrg) & (b86 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b66 = man & b65 = bxtrg) & (b64 = target) & (6-2 > 0):flr;
		next(dr) = r & (b66 = man & b67 = bxtrg) & (b68 = target) & (6+2 < n):flr;
		next(dr) = u & (b66 = man & b56 = bxtrg) & (b46 = target) & (6-2 > 0):flr;
		next(dr) = d & (b66 = man & b76 = bxtrg) & (b86 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b66 = mantrg & b65 = bx) & (b64 =flr) & (6-2 > 0): target;
		next(dr) = r & (b66 = mantrg & b67 = bx) & (b68 =flr) & (6+2 < n): target;
		next(dr) = u & (b66 = mantrg & b56 = bx) & (b46 =flr) & (6-2 > 0): target;
		next(dr) = d & (b66 = mantrg & b76 = bx) & (b86 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b66 = mantrg & b65 = bx) & (b64 = target) & (6-2 > 0): target;
		next(dr) = r & (b66 = mantrg & b67 = bx) & (b68 = target) & (6+2 < n): target;
		next(dr) = u & (b66 = mantrg & b56 = bx) & (b46 = target) & (6-2 > 0): target;
		next(dr) = d & (b66 = mantrg & b76 = bx) & (b86 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b66 = mantrg & b65 = bxtrg) & (b64 =flr) & (6-2 > 0): target;
		next(dr) = r & (b66 = mantrg & b67 = bxtrg) & (b68 =flr) & (6+2 < n): target;
		next(dr) = u & (b66 = mantrg & b56 = bxtrg) & (b46 =flr) & (6-2 > 0): target;
		next(dr) = d & (b66 = mantrg & b76 = bxtrg) & (b86 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b66 = mantrg & b65 = bxtrg) & (b64 = target) & (6-2 > 0): target;
		next(dr) = r & (b66 = mantrg & b67 = bxtrg) & (b68 = target) & (6+2 < n): target;
		next(dr) = u & (b66 = mantrg & b56 = bxtrg) & (b46 = target) & (6-2 > 0): target;
		next(dr) = d & (b66 = mantrg & b76 = bxtrg) & (b86 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b66 = flr & (b65 = man | b65 = mantrg)) : man;
        next(dr) = l & (b66 = flr & (b67 = man | b67 = mantrg)): man;
        next(dr) = d & (b66 = flr & (b56 = man | b56 = mantrg)): man;
        next(dr) = u & (b66 = flr & (b76 = man | b76 = mantrg)): man;

    --box to floor
        next(dr) = r & (b66 = flr & (b65 = bx | b65 = bxtrg)) & (b64 = man | b64 = mantrg): bx;
        next(dr) = l & (b66 = flr & (b67 = bx | b67 = bxtrg)) & (b68 = man | b68 = mantrg): bx;
        next(dr) = d & (b66 = flr & (b56 = bx | b56 = bxtrg)) & (b46 = man | b46 = mantrg): bx;
        next(dr) = u & (b66 = flr & (b76 = bx | b76 = bxtrg)) & (b86 = man | b86 = mantrg): bx;

    --man to target
        next(dr) = r & (b66 = target & (b65 = man | b65 = mantrg)): mantrg;
        next(dr) = l & (b66 = target & (b67 = man | b67 = mantrg)): mantrg;
        next(dr) = d & (b66 = target & (b56 = man | b56 = mantrg)): mantrg;
        next(dr) = u & (b66 = target & (b76 = man | b76 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b66 = target & (b65 = bx | b65 = bxtrg)) & (b64 = man | b64 = mantrg): bxtrg;
        next(dr) = l & (b66 = target & (b67 = bx | b67 = bxtrg)) & (b68 = man | b68 = mantrg): bxtrg;
        next(dr) = d & (b66 = target & (b56 = bx | b56 = bxtrg)) & (b46 = man | b46 = mantrg): bxtrg;
        next(dr) = u & (b66 = target & (b76 = bx | b76 = bxtrg)) & (b86 = man | b86 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b66 = bx & (b65 = man | b65 = mantrg)) & (b67 = flr | b67 = target): man;
        next(dr) = l & (b66 = bx & (b67 = man | b67 = mantrg)) & (b65 = flr | b65 = target): man;
        next(dr) = d & (b66 = bx & (b56 = man | b56 = mantrg)) & (b76 = flr | b76 = target): man;
        next(dr) = u & (b66 = bx & (b76 = man | b76 = mantrg)) & (b56 = flr | b56 = target): man;

    --man to box on target
        next(dr) = r & (b66 = bxtrg & (b65 = man | b65 = mantrg)) & (b67 = flr | b67 = target): mantrg;
        next(dr) = l & (b66 = bxtrg & (b67 = man | b67 = mantrg)) & (b65 = flr | b65 = target): mantrg;
        next(dr) = d & (b66 = bxtrg & (b56 = man | b56 = mantrg)) & (b76 = flr | b76 = target): mantrg;
        next(dr) = u & (b66 = bxtrg & (b76 = man | b76 = mantrg)) & (b56 = flr | b56 = target): mantrg;

    TRUE: b66;
esac;
next(b67) := case
	--floor to floor
		next(dr) = l & (b67 = man & b66 =flr):flr;
		next(dr) = r & (b67 = man & b68 =flr):flr;
		next(dr) = u & (b67 = man & b57 =flr):flr;
		next(dr) = d & (b67 = man & b77 =flr):flr;


	--target to floor
		next(dr) = l & (b67 = mantrg & b66 =flr): target;
		next(dr) = r & (b67 = mantrg & b68 =flr): target;
		next(dr) = u & (b67 = mantrg & b57 =flr): target;
		next(dr) = d & (b67 = mantrg & b77 =flr): target;

	--floor to target
		next(dr) = l & (b67 = man & b66 = target):flr;
		next(dr) = r & (b67 = man & b68 = target):flr;
		next(dr) = u & (b67 = man & b57 = target):flr;
		next(dr) = d & (b67 = man & b77 = target):flr;

	--target to target
		next(dr) = l & (b67 = mantrg & b66 = target): target;
		next(dr) = r & (b67 = mantrg & b68 = target): target;
		next(dr) = u & (b67 = mantrg & b57 = target): target;
		next(dr) = d & (b67 = mantrg & b77 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b67 = man & b66 = bx) & (b65 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b67 = man & b68 = bx) & (b69 =flr) & (7+2 < n):flr;
		next(dr) = u & (b67 = man & b57 = bx) & (b47 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b67 = man & b77 = bx) & (b87 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b67 = man & b66 = bx) & (b65 = target) & (7-2 > 0):flr;
		next(dr) = r & (b67 = man & b68 = bx) & (b69 = target) & (7+2 < n):flr;
		next(dr) = u & (b67 = man & b57 = bx) & (b47 = target) & (6-2 > 0):flr;
		next(dr) = d & (b67 = man & b77 = bx) & (b87 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b67 = man & b66 = bxtrg) & (b65 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b67 = man & b68 = bxtrg) & (b69 =flr) & (7+2 < n):flr;
		next(dr) = u & (b67 = man & b57 = bxtrg) & (b47 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b67 = man & b77 = bxtrg) & (b87 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b67 = man & b66 = bxtrg) & (b65 = target) & (7-2 > 0):flr;
		next(dr) = r & (b67 = man & b68 = bxtrg) & (b69 = target) & (7+2 < n):flr;
		next(dr) = u & (b67 = man & b57 = bxtrg) & (b47 = target) & (6-2 > 0):flr;
		next(dr) = d & (b67 = man & b77 = bxtrg) & (b87 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b67 = mantrg & b66 = bx) & (b65 =flr) & (7-2 > 0): target;
		next(dr) = r & (b67 = mantrg & b68 = bx) & (b69 =flr) & (7+2 < n): target;
		next(dr) = u & (b67 = mantrg & b57 = bx) & (b47 =flr) & (6-2 > 0): target;
		next(dr) = d & (b67 = mantrg & b77 = bx) & (b87 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b67 = mantrg & b66 = bx) & (b65 = target) & (7-2 > 0): target;
		next(dr) = r & (b67 = mantrg & b68 = bx) & (b69 = target) & (7+2 < n): target;
		next(dr) = u & (b67 = mantrg & b57 = bx) & (b47 = target) & (6-2 > 0): target;
		next(dr) = d & (b67 = mantrg & b77 = bx) & (b87 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b67 = mantrg & b66 = bxtrg) & (b65 =flr) & (7-2 > 0): target;
		next(dr) = r & (b67 = mantrg & b68 = bxtrg) & (b69 =flr) & (7+2 < n): target;
		next(dr) = u & (b67 = mantrg & b57 = bxtrg) & (b47 =flr) & (6-2 > 0): target;
		next(dr) = d & (b67 = mantrg & b77 = bxtrg) & (b87 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b67 = mantrg & b66 = bxtrg) & (b65 = target) & (7-2 > 0): target;
		next(dr) = r & (b67 = mantrg & b68 = bxtrg) & (b69 = target) & (7+2 < n): target;
		next(dr) = u & (b67 = mantrg & b57 = bxtrg) & (b47 = target) & (6-2 > 0): target;
		next(dr) = d & (b67 = mantrg & b77 = bxtrg) & (b87 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b67 = flr & (b66 = man | b66 = mantrg)) : man;
        next(dr) = l & (b67 = flr & (b68 = man | b68 = mantrg)): man;
        next(dr) = d & (b67 = flr & (b57 = man | b57 = mantrg)): man;
        next(dr) = u & (b67 = flr & (b77 = man | b77 = mantrg)): man;

    --box to floor
        next(dr) = r & (b67 = flr & (b66 = bx | b66 = bxtrg)) & (b65 = man | b65 = mantrg): bx;
        next(dr) = l & (b67 = flr & (b68 = bx | b68 = bxtrg)) & (b69 = man | b69 = mantrg): bx;
        next(dr) = d & (b67 = flr & (b57 = bx | b57 = bxtrg)) & (b47 = man | b47 = mantrg): bx;
        next(dr) = u & (b67 = flr & (b77 = bx | b77 = bxtrg)) & (b87 = man | b87 = mantrg): bx;

    --man to target
        next(dr) = r & (b67 = target & (b66 = man | b66 = mantrg)): mantrg;
        next(dr) = l & (b67 = target & (b68 = man | b68 = mantrg)): mantrg;
        next(dr) = d & (b67 = target & (b57 = man | b57 = mantrg)): mantrg;
        next(dr) = u & (b67 = target & (b77 = man | b77 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b67 = target & (b66 = bx | b66 = bxtrg)) & (b65 = man | b65 = mantrg): bxtrg;
        next(dr) = l & (b67 = target & (b68 = bx | b68 = bxtrg)) & (b69 = man | b69 = mantrg): bxtrg;
        next(dr) = d & (b67 = target & (b57 = bx | b57 = bxtrg)) & (b47 = man | b47 = mantrg): bxtrg;
        next(dr) = u & (b67 = target & (b77 = bx | b77 = bxtrg)) & (b87 = man | b87 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b67 = bx & (b66 = man | b66 = mantrg)) & (b68 = flr | b68 = target): man;
        next(dr) = l & (b67 = bx & (b68 = man | b68 = mantrg)) & (b66 = flr | b66 = target): man;
        next(dr) = d & (b67 = bx & (b57 = man | b57 = mantrg)) & (b77 = flr | b77 = target): man;
        next(dr) = u & (b67 = bx & (b77 = man | b77 = mantrg)) & (b57 = flr | b57 = target): man;

    --man to box on target
        next(dr) = r & (b67 = bxtrg & (b66 = man | b66 = mantrg)) & (b68 = flr | b68 = target): mantrg;
        next(dr) = l & (b67 = bxtrg & (b68 = man | b68 = mantrg)) & (b66 = flr | b66 = target): mantrg;
        next(dr) = d & (b67 = bxtrg & (b57 = man | b57 = mantrg)) & (b77 = flr | b77 = target): mantrg;
        next(dr) = u & (b67 = bxtrg & (b77 = man | b77 = mantrg)) & (b57 = flr | b57 = target): mantrg;

    TRUE: b67;
esac;
next(b68) := case
	--floor to floor
		next(dr) = l & (b68 = man & b67 =flr):flr;
		next(dr) = r & (b68 = man & b69 =flr):flr;
		next(dr) = u & (b68 = man & b58 =flr):flr;
		next(dr) = d & (b68 = man & b78 =flr):flr;


	--target to floor
		next(dr) = l & (b68 = mantrg & b67 =flr): target;
		next(dr) = r & (b68 = mantrg & b69 =flr): target;
		next(dr) = u & (b68 = mantrg & b58 =flr): target;
		next(dr) = d & (b68 = mantrg & b78 =flr): target;

	--floor to target
		next(dr) = l & (b68 = man & b67 = target):flr;
		next(dr) = r & (b68 = man & b69 = target):flr;
		next(dr) = u & (b68 = man & b58 = target):flr;
		next(dr) = d & (b68 = man & b78 = target):flr;

	--target to target
		next(dr) = l & (b68 = mantrg & b67 = target): target;
		next(dr) = r & (b68 = mantrg & b69 = target): target;
		next(dr) = u & (b68 = mantrg & b58 = target): target;
		next(dr) = d & (b68 = mantrg & b78 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b68 = man & b67 = bx) & (b66 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b68 = man & b69 = bx) & (b610 =flr) & (8+2 < n):flr;
		next(dr) = u & (b68 = man & b58 = bx) & (b48 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b68 = man & b78 = bx) & (b88 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b68 = man & b67 = bx) & (b66 = target) & (8-2 > 0):flr;
		next(dr) = r & (b68 = man & b69 = bx) & (b610 = target) & (8+2 < n):flr;
		next(dr) = u & (b68 = man & b58 = bx) & (b48 = target) & (6-2 > 0):flr;
		next(dr) = d & (b68 = man & b78 = bx) & (b88 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b68 = man & b67 = bxtrg) & (b66 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b68 = man & b69 = bxtrg) & (b610 =flr) & (8+2 < n):flr;
		next(dr) = u & (b68 = man & b58 = bxtrg) & (b48 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b68 = man & b78 = bxtrg) & (b88 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b68 = man & b67 = bxtrg) & (b66 = target) & (8-2 > 0):flr;
		next(dr) = r & (b68 = man & b69 = bxtrg) & (b610 = target) & (8+2 < n):flr;
		next(dr) = u & (b68 = man & b58 = bxtrg) & (b48 = target) & (6-2 > 0):flr;
		next(dr) = d & (b68 = man & b78 = bxtrg) & (b88 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b68 = mantrg & b67 = bx) & (b66 =flr) & (8-2 > 0): target;
		next(dr) = r & (b68 = mantrg & b69 = bx) & (b610 =flr) & (8+2 < n): target;
		next(dr) = u & (b68 = mantrg & b58 = bx) & (b48 =flr) & (6-2 > 0): target;
		next(dr) = d & (b68 = mantrg & b78 = bx) & (b88 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b68 = mantrg & b67 = bx) & (b66 = target) & (8-2 > 0): target;
		next(dr) = r & (b68 = mantrg & b69 = bx) & (b610 = target) & (8+2 < n): target;
		next(dr) = u & (b68 = mantrg & b58 = bx) & (b48 = target) & (6-2 > 0): target;
		next(dr) = d & (b68 = mantrg & b78 = bx) & (b88 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b68 = mantrg & b67 = bxtrg) & (b66 =flr) & (8-2 > 0): target;
		next(dr) = r & (b68 = mantrg & b69 = bxtrg) & (b610 =flr) & (8+2 < n): target;
		next(dr) = u & (b68 = mantrg & b58 = bxtrg) & (b48 =flr) & (6-2 > 0): target;
		next(dr) = d & (b68 = mantrg & b78 = bxtrg) & (b88 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b68 = mantrg & b67 = bxtrg) & (b66 = target) & (8-2 > 0): target;
		next(dr) = r & (b68 = mantrg & b69 = bxtrg) & (b610 = target) & (8+2 < n): target;
		next(dr) = u & (b68 = mantrg & b58 = bxtrg) & (b48 = target) & (6-2 > 0): target;
		next(dr) = d & (b68 = mantrg & b78 = bxtrg) & (b88 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b68 = flr & (b67 = man | b67 = mantrg)) : man;
        next(dr) = l & (b68 = flr & (b69 = man | b69 = mantrg)): man;
        next(dr) = d & (b68 = flr & (b58 = man | b58 = mantrg)): man;
        next(dr) = u & (b68 = flr & (b78 = man | b78 = mantrg)): man;

    --box to floor
        next(dr) = r & (b68 = flr & (b67 = bx | b67 = bxtrg)) & (b66 = man | b66 = mantrg): bx;
        next(dr) = l & (b68 = flr & (b69 = bx | b69 = bxtrg)) & (b610 = man | b610 = mantrg): bx;
        next(dr) = d & (b68 = flr & (b58 = bx | b58 = bxtrg)) & (b48 = man | b48 = mantrg): bx;
        next(dr) = u & (b68 = flr & (b78 = bx | b78 = bxtrg)) & (b88 = man | b88 = mantrg): bx;

    --man to target
        next(dr) = r & (b68 = target & (b67 = man | b67 = mantrg)): mantrg;
        next(dr) = l & (b68 = target & (b69 = man | b69 = mantrg)): mantrg;
        next(dr) = d & (b68 = target & (b58 = man | b58 = mantrg)): mantrg;
        next(dr) = u & (b68 = target & (b78 = man | b78 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b68 = target & (b67 = bx | b67 = bxtrg)) & (b66 = man | b66 = mantrg): bxtrg;
        next(dr) = l & (b68 = target & (b69 = bx | b69 = bxtrg)) & (b610 = man | b610 = mantrg): bxtrg;
        next(dr) = d & (b68 = target & (b58 = bx | b58 = bxtrg)) & (b48 = man | b48 = mantrg): bxtrg;
        next(dr) = u & (b68 = target & (b78 = bx | b78 = bxtrg)) & (b88 = man | b88 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b68 = bx & (b67 = man | b67 = mantrg)) & (b69 = flr | b69 = target): man;
        next(dr) = l & (b68 = bx & (b69 = man | b69 = mantrg)) & (b67 = flr | b67 = target): man;
        next(dr) = d & (b68 = bx & (b58 = man | b58 = mantrg)) & (b78 = flr | b78 = target): man;
        next(dr) = u & (b68 = bx & (b78 = man | b78 = mantrg)) & (b58 = flr | b58 = target): man;

    --man to box on target
        next(dr) = r & (b68 = bxtrg & (b67 = man | b67 = mantrg)) & (b69 = flr | b69 = target): mantrg;
        next(dr) = l & (b68 = bxtrg & (b69 = man | b69 = mantrg)) & (b67 = flr | b67 = target): mantrg;
        next(dr) = d & (b68 = bxtrg & (b58 = man | b58 = mantrg)) & (b78 = flr | b78 = target): mantrg;
        next(dr) = u & (b68 = bxtrg & (b78 = man | b78 = mantrg)) & (b58 = flr | b58 = target): mantrg;

    TRUE: b68;
esac;
next(b69) := case
	--floor to floor
		next(dr) = l & (b69 = man & b68 =flr):flr;
		next(dr) = r & (b69 = man & b610 =flr):flr;
		next(dr) = u & (b69 = man & b59 =flr):flr;
		next(dr) = d & (b69 = man & b79 =flr):flr;


	--target to floor
		next(dr) = l & (b69 = mantrg & b68 =flr): target;
		next(dr) = r & (b69 = mantrg & b610 =flr): target;
		next(dr) = u & (b69 = mantrg & b59 =flr): target;
		next(dr) = d & (b69 = mantrg & b79 =flr): target;

	--floor to target
		next(dr) = l & (b69 = man & b68 = target):flr;
		next(dr) = r & (b69 = man & b610 = target):flr;
		next(dr) = u & (b69 = man & b59 = target):flr;
		next(dr) = d & (b69 = man & b79 = target):flr;

	--target to target
		next(dr) = l & (b69 = mantrg & b68 = target): target;
		next(dr) = r & (b69 = mantrg & b610 = target): target;
		next(dr) = u & (b69 = mantrg & b59 = target): target;
		next(dr) = d & (b69 = mantrg & b79 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b69 = man & b68 = bx) & (b67 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b69 = man & b59 = bx) & (b49 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b69 = man & b79 = bx) & (b89 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b69 = man & b68 = bx) & (b67 = target) & (9-2 > 0):flr;
		next(dr) = u & (b69 = man & b59 = bx) & (b49 = target) & (6-2 > 0):flr;
		next(dr) = d & (b69 = man & b79 = bx) & (b89 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b69 = man & b68 = bxtrg) & (b67 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b69 = man & b59 = bxtrg) & (b49 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b69 = man & b79 = bxtrg) & (b89 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b69 = man & b68 = bxtrg) & (b67 = target) & (9-2 > 0):flr;
		next(dr) = u & (b69 = man & b59 = bxtrg) & (b49 = target) & (6-2 > 0):flr;
		next(dr) = d & (b69 = man & b79 = bxtrg) & (b89 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b69 = mantrg & b68 = bx) & (b67 =flr) & (9-2 > 0): target;
		next(dr) = u & (b69 = mantrg & b59 = bx) & (b49 =flr) & (6-2 > 0): target;
		next(dr) = d & (b69 = mantrg & b79 = bx) & (b89 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b69 = mantrg & b68 = bx) & (b67 = target) & (9-2 > 0): target;
		next(dr) = u & (b69 = mantrg & b59 = bx) & (b49 = target) & (6-2 > 0): target;
		next(dr) = d & (b69 = mantrg & b79 = bx) & (b89 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b69 = mantrg & b68 = bxtrg) & (b67 =flr) & (9-2 > 0): target;
		next(dr) = u & (b69 = mantrg & b59 = bxtrg) & (b49 =flr) & (6-2 > 0): target;
		next(dr) = d & (b69 = mantrg & b79 = bxtrg) & (b89 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b69 = mantrg & b68 = bxtrg) & (b67 = target) & (9-2 > 0): target;
		next(dr) = u & (b69 = mantrg & b59 = bxtrg) & (b49 = target) & (6-2 > 0): target;
		next(dr) = d & (b69 = mantrg & b79 = bxtrg) & (b89 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b69 = flr & (b68 = man | b68 = mantrg)) : man;
        next(dr) = l & (b69 = flr & (b610 = man | b610 = mantrg)): man;
        next(dr) = d & (b69 = flr & (b59 = man | b59 = mantrg)): man;
        next(dr) = u & (b69 = flr & (b79 = man | b79 = mantrg)): man;

    --box to floor
        next(dr) = r & (b69 = flr & (b68 = bx | b68 = bxtrg)) & (b67 = man | b67 = mantrg): bx;
        next(dr) = d & (b69 = flr & (b59 = bx | b59 = bxtrg)) & (b49 = man | b49 = mantrg): bx;
        next(dr) = u & (b69 = flr & (b79 = bx | b79 = bxtrg)) & (b89 = man | b89 = mantrg): bx;

    --man to target
        next(dr) = r & (b69 = target & (b68 = man | b68 = mantrg)): mantrg;
        next(dr) = l & (b69 = target & (b610 = man | b610 = mantrg)): mantrg;
        next(dr) = d & (b69 = target & (b59 = man | b59 = mantrg)): mantrg;
        next(dr) = u & (b69 = target & (b79 = man | b79 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b69 = target & (b68 = bx | b68 = bxtrg)) & (b67 = man | b67 = mantrg): bxtrg;
        next(dr) = d & (b69 = target & (b59 = bx | b59 = bxtrg)) & (b49 = man | b49 = mantrg): bxtrg;
        next(dr) = u & (b69 = target & (b79 = bx | b79 = bxtrg)) & (b89 = man | b89 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b69 = bx & (b68 = man | b68 = mantrg)) & (b610 = flr | b610 = target): man;
        next(dr) = l & (b69 = bx & (b610 = man | b610 = mantrg)) & (b68 = flr | b68 = target): man;
        next(dr) = d & (b69 = bx & (b59 = man | b59 = mantrg)) & (b79 = flr | b79 = target): man;
        next(dr) = u & (b69 = bx & (b79 = man | b79 = mantrg)) & (b59 = flr | b59 = target): man;

    --man to box on target
        next(dr) = r & (b69 = bxtrg & (b68 = man | b68 = mantrg)) & (b610 = flr | b610 = target): mantrg;
        next(dr) = l & (b69 = bxtrg & (b610 = man | b610 = mantrg)) & (b68 = flr | b68 = target): mantrg;
        next(dr) = d & (b69 = bxtrg & (b59 = man | b59 = mantrg)) & (b79 = flr | b79 = target): mantrg;
        next(dr) = u & (b69 = bxtrg & (b79 = man | b79 = mantrg)) & (b59 = flr | b59 = target): mantrg;

    TRUE: b69;
esac;
next(b610) := case
	--floor to floor
		next(dr) = l & (b610 = man & b69 =flr):flr;
		next(dr) = u & (b610 = man & b510 =flr):flr;
		next(dr) = d & (b610 = man & b710 =flr):flr;


	--target to floor
		next(dr) = l & (b610 = mantrg & b69 =flr): target;
		next(dr) = u & (b610 = mantrg & b510 =flr): target;
		next(dr) = d & (b610 = mantrg & b710 =flr): target;

	--floor to target
		next(dr) = l & (b610 = man & b69 = target):flr;
		next(dr) = u & (b610 = man & b510 = target):flr;
		next(dr) = d & (b610 = man & b710 = target):flr;

	--target to target
		next(dr) = l & (b610 = mantrg & b69 = target): target;
		next(dr) = u & (b610 = mantrg & b510 = target): target;
		next(dr) = d & (b610 = mantrg & b710 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b610 = man & b69 = bx) & (b68 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b610 = man & b510 = bx) & (b410 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b610 = man & b710 = bx) & (b810 =flr) & (6+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b610 = man & b69 = bx) & (b68 = target) & (10-2 > 0):flr;
		next(dr) = u & (b610 = man & b510 = bx) & (b410 = target) & (6-2 > 0):flr;
		next(dr) = d & (b610 = man & b710 = bx) & (b810 = target) & (6+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b610 = man & b69 = bxtrg) & (b68 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b610 = man & b510 = bxtrg) & (b410 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b610 = man & b710 = bxtrg) & (b810 =flr) & (6-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b610 = man & b69 = bxtrg) & (b68 = target) & (10-2 > 0):flr;
		next(dr) = u & (b610 = man & b510 = bxtrg) & (b410 = target) & (6-2 > 0):flr;
		next(dr) = d & (b610 = man & b710 = bxtrg) & (b810 = target) & (6+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b610 = mantrg & b69 = bx) & (b68 =flr) & (10-2 > 0): target;
		next(dr) = u & (b610 = mantrg & b510 = bx) & (b410 =flr) & (6-2 > 0): target;
		next(dr) = d & (b610 = mantrg & b710 = bx) & (b810 =flr) & (6+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b610 = mantrg & b69 = bx) & (b68 = target) & (10-2 > 0): target;
		next(dr) = u & (b610 = mantrg & b510 = bx) & (b410 = target) & (6-2 > 0): target;
		next(dr) = d & (b610 = mantrg & b710 = bx) & (b810 = target) & (6+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b610 = mantrg & b69 = bxtrg) & (b68 =flr) & (10-2 > 0): target;
		next(dr) = u & (b610 = mantrg & b510 = bxtrg) & (b410 =flr) & (6-2 > 0): target;
		next(dr) = d & (b610 = mantrg & b710 = bxtrg) & (b810 =flr) & (6+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b610 = mantrg & b69 = bxtrg) & (b68 = target) & (10-2 > 0): target;
		next(dr) = u & (b610 = mantrg & b510 = bxtrg) & (b410 = target) & (6-2 > 0): target;
		next(dr) = d & (b610 = mantrg & b710 = bxtrg) & (b810 = target) & (6+2 < m): target;

    --man to floor
        next(dr) = r & (b610 = flr & (b69 = man | b69 = mantrg)) : man;
        next(dr) = d & (b610 = flr & (b510 = man | b510 = mantrg)): man;
        next(dr) = u & (b610 = flr & (b710 = man | b710 = mantrg)): man;

    --box to floor
        next(dr) = r & (b610 = flr & (b69 = bx | b69 = bxtrg)) & (b68 = man | b68 = mantrg): bx;
        next(dr) = d & (b610 = flr & (b510 = bx | b510 = bxtrg)) & (b410 = man | b410 = mantrg): bx;
        next(dr) = u & (b610 = flr & (b710 = bx | b710 = bxtrg)) & (b810 = man | b810 = mantrg): bx;

    --man to target
        next(dr) = r & (b610 = target & (b69 = man | b69 = mantrg)): mantrg;
        next(dr) = d & (b610 = target & (b510 = man | b510 = mantrg)): mantrg;
        next(dr) = u & (b610 = target & (b710 = man | b710 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b610 = target & (b69 = bx | b69 = bxtrg)) & (b68 = man | b68 = mantrg): bxtrg;
        next(dr) = d & (b610 = target & (b510 = bx | b510 = bxtrg)) & (b410 = man | b410 = mantrg): bxtrg;
        next(dr) = u & (b610 = target & (b710 = bx | b710 = bxtrg)) & (b810 = man | b810 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b610 = bx & (b510 = man | b510 = mantrg)) & (b710 = flr | b710 = target): man;
        next(dr) = u & (b610 = bx & (b710 = man | b710 = mantrg)) & (b510 = flr | b510 = target): man;

    --man to box on target
        next(dr) = d & (b610 = bxtrg & (b510 = man | b510 = mantrg)) & (b710 = flr | b710 = target): mantrg;
        next(dr) = u & (b610 = bxtrg & (b710 = man | b710 = mantrg)) & (b510 = flr | b510 = target): mantrg;

    TRUE: b610;
esac;
next(b70) := case
	--floor to floor
		next(dr) = r & (b70 = man & b71 =flr):flr;
		next(dr) = u & (b70 = man & b60 =flr):flr;
		next(dr) = d & (b70 = man & b80 =flr):flr;


	--target to floor
		next(dr) = r & (b70 = mantrg & b71 =flr): target;
		next(dr) = u & (b70 = mantrg & b60 =flr): target;
		next(dr) = d & (b70 = mantrg & b80 =flr): target;

	--floor to target
		next(dr) = r & (b70 = man & b71 = target):flr;
		next(dr) = u & (b70 = man & b60 = target):flr;
		next(dr) = d & (b70 = man & b80 = target):flr;

	--target to target
		next(dr) = r & (b70 = mantrg & b71 = target): target;
		next(dr) = u & (b70 = mantrg & b60 = target): target;
		next(dr) = d & (b70 = mantrg & b80 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b70 = man & b71 = bx) & (b72 =flr) & (0+2 < n):flr;
		next(dr) = u & (b70 = man & b60 = bx) & (b50 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b70 = man & b80 = bx) & (b90 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b70 = man & b71 = bx) & (b72 = target) & (0+2 < n):flr;
		next(dr) = u & (b70 = man & b60 = bx) & (b50 = target) & (7-2 > 0):flr;
		next(dr) = d & (b70 = man & b80 = bx) & (b90 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b70 = man & b71 = bxtrg) & (b72 =flr) & (0+2 < n):flr;
		next(dr) = u & (b70 = man & b60 = bxtrg) & (b50 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b70 = man & b80 = bxtrg) & (b90 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b70 = man & b71 = bxtrg) & (b72 = target) & (0+2 < n):flr;
		next(dr) = u & (b70 = man & b60 = bxtrg) & (b50 = target) & (7-2 > 0):flr;
		next(dr) = d & (b70 = man & b80 = bxtrg) & (b90 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b70 = mantrg & b71 = bx) & (b72 =flr) & (0+2 < n): target;
		next(dr) = u & (b70 = mantrg & b60 = bx) & (b50 =flr) & (7-2 > 0): target;
		next(dr) = d & (b70 = mantrg & b80 = bx) & (b90 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b70 = mantrg & b71 = bx) & (b72 = target) & (0+2 < n): target;
		next(dr) = u & (b70 = mantrg & b60 = bx) & (b50 = target) & (7-2 > 0): target;
		next(dr) = d & (b70 = mantrg & b80 = bx) & (b90 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b70 = mantrg & b71 = bxtrg) & (b72 =flr) & (0+2 < n): target;
		next(dr) = u & (b70 = mantrg & b60 = bxtrg) & (b50 =flr) & (7-2 > 0): target;
		next(dr) = d & (b70 = mantrg & b80 = bxtrg) & (b90 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b70 = mantrg & b71 = bxtrg) & (b72 = target) & (0+2 < n): target;
		next(dr) = u & (b70 = mantrg & b60 = bxtrg) & (b50 = target) & (7-2 > 0): target;
		next(dr) = d & (b70 = mantrg & b80 = bxtrg) & (b90 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = l & (b70 = flr & (b71 = man | b71 = mantrg)): man;
        next(dr) = d & (b70 = flr & (b60 = man | b60 = mantrg)): man;
        next(dr) = u & (b70 = flr & (b80 = man | b80 = mantrg)): man;

    --box to floor
        next(dr) = l & (b70 = flr & (b71 = bx | b71 = bxtrg)) & (b72 = man | b72 = mantrg): bx;
        next(dr) = d & (b70 = flr & (b60 = bx | b60 = bxtrg)) & (b50 = man | b50 = mantrg): bx;
        next(dr) = u & (b70 = flr & (b80 = bx | b80 = bxtrg)) & (b90 = man | b90 = mantrg): bx;

    --man to target
        next(dr) = l & (b70 = target & (b71 = man | b71 = mantrg)): mantrg;
        next(dr) = d & (b70 = target & (b60 = man | b60 = mantrg)): mantrg;
        next(dr) = u & (b70 = target & (b80 = man | b80 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b70 = target & (b71 = bx | b71 = bxtrg)) & (b72 = man | b72 = mantrg): bxtrg;
        next(dr) = d & (b70 = target & (b60 = bx | b60 = bxtrg)) & (b50 = man | b50 = mantrg): bxtrg;
        next(dr) = u & (b70 = target & (b80 = bx | b80 = bxtrg)) & (b90 = man | b90 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b70 = bx & (b60 = man | b60 = mantrg)) & (b80 = flr | b80 = target): man;
        next(dr) = u & (b70 = bx & (b80 = man | b80 = mantrg)) & (b60 = flr | b60 = target): man;

    --man to box on target
        next(dr) = d & (b70 = bxtrg & (b60 = man | b60 = mantrg)) & (b80 = flr | b80 = target): mantrg;
        next(dr) = u & (b70 = bxtrg & (b80 = man | b80 = mantrg)) & (b60 = flr | b60 = target): mantrg;

    TRUE: b70;
esac;
next(b71) := case
	--floor to floor
		next(dr) = l & (b71 = man & b70 =flr):flr;
		next(dr) = r & (b71 = man & b72 =flr):flr;
		next(dr) = u & (b71 = man & b61 =flr):flr;
		next(dr) = d & (b71 = man & b81 =flr):flr;


	--target to floor
		next(dr) = l & (b71 = mantrg & b70 =flr): target;
		next(dr) = r & (b71 = mantrg & b72 =flr): target;
		next(dr) = u & (b71 = mantrg & b61 =flr): target;
		next(dr) = d & (b71 = mantrg & b81 =flr): target;

	--floor to target
		next(dr) = l & (b71 = man & b70 = target):flr;
		next(dr) = r & (b71 = man & b72 = target):flr;
		next(dr) = u & (b71 = man & b61 = target):flr;
		next(dr) = d & (b71 = man & b81 = target):flr;

	--target to target
		next(dr) = l & (b71 = mantrg & b70 = target): target;
		next(dr) = r & (b71 = mantrg & b72 = target): target;
		next(dr) = u & (b71 = mantrg & b61 = target): target;
		next(dr) = d & (b71 = mantrg & b81 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b71 = man & b72 = bx) & (b73 =flr) & (1+2 < n):flr;
		next(dr) = u & (b71 = man & b61 = bx) & (b51 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b71 = man & b81 = bx) & (b91 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b71 = man & b72 = bx) & (b73 = target) & (1+2 < n):flr;
		next(dr) = u & (b71 = man & b61 = bx) & (b51 = target) & (7-2 > 0):flr;
		next(dr) = d & (b71 = man & b81 = bx) & (b91 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b71 = man & b72 = bxtrg) & (b73 =flr) & (1+2 < n):flr;
		next(dr) = u & (b71 = man & b61 = bxtrg) & (b51 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b71 = man & b81 = bxtrg) & (b91 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b71 = man & b72 = bxtrg) & (b73 = target) & (1+2 < n):flr;
		next(dr) = u & (b71 = man & b61 = bxtrg) & (b51 = target) & (7-2 > 0):flr;
		next(dr) = d & (b71 = man & b81 = bxtrg) & (b91 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b71 = mantrg & b72 = bx) & (b73 =flr) & (1+2 < n): target;
		next(dr) = u & (b71 = mantrg & b61 = bx) & (b51 =flr) & (7-2 > 0): target;
		next(dr) = d & (b71 = mantrg & b81 = bx) & (b91 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b71 = mantrg & b72 = bx) & (b73 = target) & (1+2 < n): target;
		next(dr) = u & (b71 = mantrg & b61 = bx) & (b51 = target) & (7-2 > 0): target;
		next(dr) = d & (b71 = mantrg & b81 = bx) & (b91 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b71 = mantrg & b72 = bxtrg) & (b73 =flr) & (1+2 < n): target;
		next(dr) = u & (b71 = mantrg & b61 = bxtrg) & (b51 =flr) & (7-2 > 0): target;
		next(dr) = d & (b71 = mantrg & b81 = bxtrg) & (b91 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b71 = mantrg & b72 = bxtrg) & (b73 = target) & (1+2 < n): target;
		next(dr) = u & (b71 = mantrg & b61 = bxtrg) & (b51 = target) & (7-2 > 0): target;
		next(dr) = d & (b71 = mantrg & b81 = bxtrg) & (b91 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b71 = flr & (b70 = man | b70 = mantrg)) : man;
        next(dr) = l & (b71 = flr & (b72 = man | b72 = mantrg)): man;
        next(dr) = d & (b71 = flr & (b61 = man | b61 = mantrg)): man;
        next(dr) = u & (b71 = flr & (b81 = man | b81 = mantrg)): man;

    --box to floor
        next(dr) = l & (b71 = flr & (b72 = bx | b72 = bxtrg)) & (b73 = man | b73 = mantrg): bx;
        next(dr) = d & (b71 = flr & (b61 = bx | b61 = bxtrg)) & (b51 = man | b51 = mantrg): bx;
        next(dr) = u & (b71 = flr & (b81 = bx | b81 = bxtrg)) & (b91 = man | b91 = mantrg): bx;

    --man to target
        next(dr) = r & (b71 = target & (b70 = man | b70 = mantrg)): mantrg;
        next(dr) = l & (b71 = target & (b72 = man | b72 = mantrg)): mantrg;
        next(dr) = d & (b71 = target & (b61 = man | b61 = mantrg)): mantrg;
        next(dr) = u & (b71 = target & (b81 = man | b81 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b71 = target & (b72 = bx | b72 = bxtrg)) & (b73 = man | b73 = mantrg): bxtrg;
        next(dr) = d & (b71 = target & (b61 = bx | b61 = bxtrg)) & (b51 = man | b51 = mantrg): bxtrg;
        next(dr) = u & (b71 = target & (b81 = bx | b81 = bxtrg)) & (b91 = man | b91 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b71 = bx & (b70 = man | b70 = mantrg)) & (b72 = flr | b72 = target): man;
        next(dr) = l & (b71 = bx & (b72 = man | b72 = mantrg)) & (b70 = flr | b70 = target): man;
        next(dr) = d & (b71 = bx & (b61 = man | b61 = mantrg)) & (b81 = flr | b81 = target): man;
        next(dr) = u & (b71 = bx & (b81 = man | b81 = mantrg)) & (b61 = flr | b61 = target): man;

    --man to box on target
        next(dr) = r & (b71 = bxtrg & (b70 = man | b70 = mantrg)) & (b72 = flr | b72 = target): mantrg;
        next(dr) = l & (b71 = bxtrg & (b72 = man | b72 = mantrg)) & (b70 = flr | b70 = target): mantrg;
        next(dr) = d & (b71 = bxtrg & (b61 = man | b61 = mantrg)) & (b81 = flr | b81 = target): mantrg;
        next(dr) = u & (b71 = bxtrg & (b81 = man | b81 = mantrg)) & (b61 = flr | b61 = target): mantrg;

    TRUE: b71;
esac;
next(b72) := case
	--floor to floor
		next(dr) = l & (b72 = man & b71 =flr):flr;
		next(dr) = r & (b72 = man & b73 =flr):flr;
		next(dr) = u & (b72 = man & b62 =flr):flr;
		next(dr) = d & (b72 = man & b82 =flr):flr;


	--target to floor
		next(dr) = l & (b72 = mantrg & b71 =flr): target;
		next(dr) = r & (b72 = mantrg & b73 =flr): target;
		next(dr) = u & (b72 = mantrg & b62 =flr): target;
		next(dr) = d & (b72 = mantrg & b82 =flr): target;

	--floor to target
		next(dr) = l & (b72 = man & b71 = target):flr;
		next(dr) = r & (b72 = man & b73 = target):flr;
		next(dr) = u & (b72 = man & b62 = target):flr;
		next(dr) = d & (b72 = man & b82 = target):flr;

	--target to target
		next(dr) = l & (b72 = mantrg & b71 = target): target;
		next(dr) = r & (b72 = mantrg & b73 = target): target;
		next(dr) = u & (b72 = mantrg & b62 = target): target;
		next(dr) = d & (b72 = mantrg & b82 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b72 = man & b71 = bx) & (b70 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b72 = man & b73 = bx) & (b74 =flr) & (2+2 < n):flr;
		next(dr) = u & (b72 = man & b62 = bx) & (b52 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b72 = man & b82 = bx) & (b92 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b72 = man & b71 = bx) & (b70 = target) & (2-2 > 0):flr;
		next(dr) = r & (b72 = man & b73 = bx) & (b74 = target) & (2+2 < n):flr;
		next(dr) = u & (b72 = man & b62 = bx) & (b52 = target) & (7-2 > 0):flr;
		next(dr) = d & (b72 = man & b82 = bx) & (b92 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b72 = man & b71 = bxtrg) & (b70 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b72 = man & b73 = bxtrg) & (b74 =flr) & (2+2 < n):flr;
		next(dr) = u & (b72 = man & b62 = bxtrg) & (b52 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b72 = man & b82 = bxtrg) & (b92 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b72 = man & b71 = bxtrg) & (b70 = target) & (2-2 > 0):flr;
		next(dr) = r & (b72 = man & b73 = bxtrg) & (b74 = target) & (2+2 < n):flr;
		next(dr) = u & (b72 = man & b62 = bxtrg) & (b52 = target) & (7-2 > 0):flr;
		next(dr) = d & (b72 = man & b82 = bxtrg) & (b92 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b72 = mantrg & b71 = bx) & (b70 =flr) & (2-2 > 0): target;
		next(dr) = r & (b72 = mantrg & b73 = bx) & (b74 =flr) & (2+2 < n): target;
		next(dr) = u & (b72 = mantrg & b62 = bx) & (b52 =flr) & (7-2 > 0): target;
		next(dr) = d & (b72 = mantrg & b82 = bx) & (b92 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b72 = mantrg & b71 = bx) & (b70 = target) & (2-2 > 0): target;
		next(dr) = r & (b72 = mantrg & b73 = bx) & (b74 = target) & (2+2 < n): target;
		next(dr) = u & (b72 = mantrg & b62 = bx) & (b52 = target) & (7-2 > 0): target;
		next(dr) = d & (b72 = mantrg & b82 = bx) & (b92 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b72 = mantrg & b71 = bxtrg) & (b70 =flr) & (2-2 > 0): target;
		next(dr) = r & (b72 = mantrg & b73 = bxtrg) & (b74 =flr) & (2+2 < n): target;
		next(dr) = u & (b72 = mantrg & b62 = bxtrg) & (b52 =flr) & (7-2 > 0): target;
		next(dr) = d & (b72 = mantrg & b82 = bxtrg) & (b92 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b72 = mantrg & b71 = bxtrg) & (b70 = target) & (2-2 > 0): target;
		next(dr) = r & (b72 = mantrg & b73 = bxtrg) & (b74 = target) & (2+2 < n): target;
		next(dr) = u & (b72 = mantrg & b62 = bxtrg) & (b52 = target) & (7-2 > 0): target;
		next(dr) = d & (b72 = mantrg & b82 = bxtrg) & (b92 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b72 = flr & (b71 = man | b71 = mantrg)) : man;
        next(dr) = l & (b72 = flr & (b73 = man | b73 = mantrg)): man;
        next(dr) = d & (b72 = flr & (b62 = man | b62 = mantrg)): man;
        next(dr) = u & (b72 = flr & (b82 = man | b82 = mantrg)): man;

    --box to floor
        next(dr) = r & (b72 = flr & (b71 = bx | b71 = bxtrg)) & (b70 = man | b70 = mantrg): bx;
        next(dr) = l & (b72 = flr & (b73 = bx | b73 = bxtrg)) & (b74 = man | b74 = mantrg): bx;
        next(dr) = d & (b72 = flr & (b62 = bx | b62 = bxtrg)) & (b52 = man | b52 = mantrg): bx;
        next(dr) = u & (b72 = flr & (b82 = bx | b82 = bxtrg)) & (b92 = man | b92 = mantrg): bx;

    --man to target
        next(dr) = r & (b72 = target & (b71 = man | b71 = mantrg)): mantrg;
        next(dr) = l & (b72 = target & (b73 = man | b73 = mantrg)): mantrg;
        next(dr) = d & (b72 = target & (b62 = man | b62 = mantrg)): mantrg;
        next(dr) = u & (b72 = target & (b82 = man | b82 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b72 = target & (b71 = bx | b71 = bxtrg)) & (b70 = man | b70 = mantrg): bxtrg;
        next(dr) = l & (b72 = target & (b73 = bx | b73 = bxtrg)) & (b74 = man | b74 = mantrg): bxtrg;
        next(dr) = d & (b72 = target & (b62 = bx | b62 = bxtrg)) & (b52 = man | b52 = mantrg): bxtrg;
        next(dr) = u & (b72 = target & (b82 = bx | b82 = bxtrg)) & (b92 = man | b92 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b72 = bx & (b71 = man | b71 = mantrg)) & (b73 = flr | b73 = target): man;
        next(dr) = l & (b72 = bx & (b73 = man | b73 = mantrg)) & (b71 = flr | b71 = target): man;
        next(dr) = d & (b72 = bx & (b62 = man | b62 = mantrg)) & (b82 = flr | b82 = target): man;
        next(dr) = u & (b72 = bx & (b82 = man | b82 = mantrg)) & (b62 = flr | b62 = target): man;

    --man to box on target
        next(dr) = r & (b72 = bxtrg & (b71 = man | b71 = mantrg)) & (b73 = flr | b73 = target): mantrg;
        next(dr) = l & (b72 = bxtrg & (b73 = man | b73 = mantrg)) & (b71 = flr | b71 = target): mantrg;
        next(dr) = d & (b72 = bxtrg & (b62 = man | b62 = mantrg)) & (b82 = flr | b82 = target): mantrg;
        next(dr) = u & (b72 = bxtrg & (b82 = man | b82 = mantrg)) & (b62 = flr | b62 = target): mantrg;

    TRUE: b72;
esac;
next(b73) := case
	--floor to floor
		next(dr) = l & (b73 = man & b72 =flr):flr;
		next(dr) = r & (b73 = man & b74 =flr):flr;
		next(dr) = u & (b73 = man & b63 =flr):flr;
		next(dr) = d & (b73 = man & b83 =flr):flr;


	--target to floor
		next(dr) = l & (b73 = mantrg & b72 =flr): target;
		next(dr) = r & (b73 = mantrg & b74 =flr): target;
		next(dr) = u & (b73 = mantrg & b63 =flr): target;
		next(dr) = d & (b73 = mantrg & b83 =flr): target;

	--floor to target
		next(dr) = l & (b73 = man & b72 = target):flr;
		next(dr) = r & (b73 = man & b74 = target):flr;
		next(dr) = u & (b73 = man & b63 = target):flr;
		next(dr) = d & (b73 = man & b83 = target):flr;

	--target to target
		next(dr) = l & (b73 = mantrg & b72 = target): target;
		next(dr) = r & (b73 = mantrg & b74 = target): target;
		next(dr) = u & (b73 = mantrg & b63 = target): target;
		next(dr) = d & (b73 = mantrg & b83 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b73 = man & b72 = bx) & (b71 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b73 = man & b74 = bx) & (b75 =flr) & (3+2 < n):flr;
		next(dr) = u & (b73 = man & b63 = bx) & (b53 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b73 = man & b83 = bx) & (b93 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b73 = man & b72 = bx) & (b71 = target) & (3-2 > 0):flr;
		next(dr) = r & (b73 = man & b74 = bx) & (b75 = target) & (3+2 < n):flr;
		next(dr) = u & (b73 = man & b63 = bx) & (b53 = target) & (7-2 > 0):flr;
		next(dr) = d & (b73 = man & b83 = bx) & (b93 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b73 = man & b72 = bxtrg) & (b71 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b73 = man & b74 = bxtrg) & (b75 =flr) & (3+2 < n):flr;
		next(dr) = u & (b73 = man & b63 = bxtrg) & (b53 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b73 = man & b83 = bxtrg) & (b93 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b73 = man & b72 = bxtrg) & (b71 = target) & (3-2 > 0):flr;
		next(dr) = r & (b73 = man & b74 = bxtrg) & (b75 = target) & (3+2 < n):flr;
		next(dr) = u & (b73 = man & b63 = bxtrg) & (b53 = target) & (7-2 > 0):flr;
		next(dr) = d & (b73 = man & b83 = bxtrg) & (b93 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b73 = mantrg & b72 = bx) & (b71 =flr) & (3-2 > 0): target;
		next(dr) = r & (b73 = mantrg & b74 = bx) & (b75 =flr) & (3+2 < n): target;
		next(dr) = u & (b73 = mantrg & b63 = bx) & (b53 =flr) & (7-2 > 0): target;
		next(dr) = d & (b73 = mantrg & b83 = bx) & (b93 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b73 = mantrg & b72 = bx) & (b71 = target) & (3-2 > 0): target;
		next(dr) = r & (b73 = mantrg & b74 = bx) & (b75 = target) & (3+2 < n): target;
		next(dr) = u & (b73 = mantrg & b63 = bx) & (b53 = target) & (7-2 > 0): target;
		next(dr) = d & (b73 = mantrg & b83 = bx) & (b93 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b73 = mantrg & b72 = bxtrg) & (b71 =flr) & (3-2 > 0): target;
		next(dr) = r & (b73 = mantrg & b74 = bxtrg) & (b75 =flr) & (3+2 < n): target;
		next(dr) = u & (b73 = mantrg & b63 = bxtrg) & (b53 =flr) & (7-2 > 0): target;
		next(dr) = d & (b73 = mantrg & b83 = bxtrg) & (b93 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b73 = mantrg & b72 = bxtrg) & (b71 = target) & (3-2 > 0): target;
		next(dr) = r & (b73 = mantrg & b74 = bxtrg) & (b75 = target) & (3+2 < n): target;
		next(dr) = u & (b73 = mantrg & b63 = bxtrg) & (b53 = target) & (7-2 > 0): target;
		next(dr) = d & (b73 = mantrg & b83 = bxtrg) & (b93 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b73 = flr & (b72 = man | b72 = mantrg)) : man;
        next(dr) = l & (b73 = flr & (b74 = man | b74 = mantrg)): man;
        next(dr) = d & (b73 = flr & (b63 = man | b63 = mantrg)): man;
        next(dr) = u & (b73 = flr & (b83 = man | b83 = mantrg)): man;

    --box to floor
        next(dr) = r & (b73 = flr & (b72 = bx | b72 = bxtrg)) & (b71 = man | b71 = mantrg): bx;
        next(dr) = l & (b73 = flr & (b74 = bx | b74 = bxtrg)) & (b75 = man | b75 = mantrg): bx;
        next(dr) = d & (b73 = flr & (b63 = bx | b63 = bxtrg)) & (b53 = man | b53 = mantrg): bx;
        next(dr) = u & (b73 = flr & (b83 = bx | b83 = bxtrg)) & (b93 = man | b93 = mantrg): bx;

    --man to target
        next(dr) = r & (b73 = target & (b72 = man | b72 = mantrg)): mantrg;
        next(dr) = l & (b73 = target & (b74 = man | b74 = mantrg)): mantrg;
        next(dr) = d & (b73 = target & (b63 = man | b63 = mantrg)): mantrg;
        next(dr) = u & (b73 = target & (b83 = man | b83 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b73 = target & (b72 = bx | b72 = bxtrg)) & (b71 = man | b71 = mantrg): bxtrg;
        next(dr) = l & (b73 = target & (b74 = bx | b74 = bxtrg)) & (b75 = man | b75 = mantrg): bxtrg;
        next(dr) = d & (b73 = target & (b63 = bx | b63 = bxtrg)) & (b53 = man | b53 = mantrg): bxtrg;
        next(dr) = u & (b73 = target & (b83 = bx | b83 = bxtrg)) & (b93 = man | b93 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b73 = bx & (b72 = man | b72 = mantrg)) & (b74 = flr | b74 = target): man;
        next(dr) = l & (b73 = bx & (b74 = man | b74 = mantrg)) & (b72 = flr | b72 = target): man;
        next(dr) = d & (b73 = bx & (b63 = man | b63 = mantrg)) & (b83 = flr | b83 = target): man;
        next(dr) = u & (b73 = bx & (b83 = man | b83 = mantrg)) & (b63 = flr | b63 = target): man;

    --man to box on target
        next(dr) = r & (b73 = bxtrg & (b72 = man | b72 = mantrg)) & (b74 = flr | b74 = target): mantrg;
        next(dr) = l & (b73 = bxtrg & (b74 = man | b74 = mantrg)) & (b72 = flr | b72 = target): mantrg;
        next(dr) = d & (b73 = bxtrg & (b63 = man | b63 = mantrg)) & (b83 = flr | b83 = target): mantrg;
        next(dr) = u & (b73 = bxtrg & (b83 = man | b83 = mantrg)) & (b63 = flr | b63 = target): mantrg;

    TRUE: b73;
esac;
next(b74) := case
	--floor to floor
		next(dr) = l & (b74 = man & b73 =flr):flr;
		next(dr) = r & (b74 = man & b75 =flr):flr;
		next(dr) = u & (b74 = man & b64 =flr):flr;
		next(dr) = d & (b74 = man & b84 =flr):flr;


	--target to floor
		next(dr) = l & (b74 = mantrg & b73 =flr): target;
		next(dr) = r & (b74 = mantrg & b75 =flr): target;
		next(dr) = u & (b74 = mantrg & b64 =flr): target;
		next(dr) = d & (b74 = mantrg & b84 =flr): target;

	--floor to target
		next(dr) = l & (b74 = man & b73 = target):flr;
		next(dr) = r & (b74 = man & b75 = target):flr;
		next(dr) = u & (b74 = man & b64 = target):flr;
		next(dr) = d & (b74 = man & b84 = target):flr;

	--target to target
		next(dr) = l & (b74 = mantrg & b73 = target): target;
		next(dr) = r & (b74 = mantrg & b75 = target): target;
		next(dr) = u & (b74 = mantrg & b64 = target): target;
		next(dr) = d & (b74 = mantrg & b84 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b74 = man & b73 = bx) & (b72 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b74 = man & b75 = bx) & (b76 =flr) & (4+2 < n):flr;
		next(dr) = u & (b74 = man & b64 = bx) & (b54 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b74 = man & b84 = bx) & (b94 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b74 = man & b73 = bx) & (b72 = target) & (4-2 > 0):flr;
		next(dr) = r & (b74 = man & b75 = bx) & (b76 = target) & (4+2 < n):flr;
		next(dr) = u & (b74 = man & b64 = bx) & (b54 = target) & (7-2 > 0):flr;
		next(dr) = d & (b74 = man & b84 = bx) & (b94 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b74 = man & b73 = bxtrg) & (b72 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b74 = man & b75 = bxtrg) & (b76 =flr) & (4+2 < n):flr;
		next(dr) = u & (b74 = man & b64 = bxtrg) & (b54 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b74 = man & b84 = bxtrg) & (b94 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b74 = man & b73 = bxtrg) & (b72 = target) & (4-2 > 0):flr;
		next(dr) = r & (b74 = man & b75 = bxtrg) & (b76 = target) & (4+2 < n):flr;
		next(dr) = u & (b74 = man & b64 = bxtrg) & (b54 = target) & (7-2 > 0):flr;
		next(dr) = d & (b74 = man & b84 = bxtrg) & (b94 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b74 = mantrg & b73 = bx) & (b72 =flr) & (4-2 > 0): target;
		next(dr) = r & (b74 = mantrg & b75 = bx) & (b76 =flr) & (4+2 < n): target;
		next(dr) = u & (b74 = mantrg & b64 = bx) & (b54 =flr) & (7-2 > 0): target;
		next(dr) = d & (b74 = mantrg & b84 = bx) & (b94 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b74 = mantrg & b73 = bx) & (b72 = target) & (4-2 > 0): target;
		next(dr) = r & (b74 = mantrg & b75 = bx) & (b76 = target) & (4+2 < n): target;
		next(dr) = u & (b74 = mantrg & b64 = bx) & (b54 = target) & (7-2 > 0): target;
		next(dr) = d & (b74 = mantrg & b84 = bx) & (b94 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b74 = mantrg & b73 = bxtrg) & (b72 =flr) & (4-2 > 0): target;
		next(dr) = r & (b74 = mantrg & b75 = bxtrg) & (b76 =flr) & (4+2 < n): target;
		next(dr) = u & (b74 = mantrg & b64 = bxtrg) & (b54 =flr) & (7-2 > 0): target;
		next(dr) = d & (b74 = mantrg & b84 = bxtrg) & (b94 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b74 = mantrg & b73 = bxtrg) & (b72 = target) & (4-2 > 0): target;
		next(dr) = r & (b74 = mantrg & b75 = bxtrg) & (b76 = target) & (4+2 < n): target;
		next(dr) = u & (b74 = mantrg & b64 = bxtrg) & (b54 = target) & (7-2 > 0): target;
		next(dr) = d & (b74 = mantrg & b84 = bxtrg) & (b94 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b74 = flr & (b73 = man | b73 = mantrg)) : man;
        next(dr) = l & (b74 = flr & (b75 = man | b75 = mantrg)): man;
        next(dr) = d & (b74 = flr & (b64 = man | b64 = mantrg)): man;
        next(dr) = u & (b74 = flr & (b84 = man | b84 = mantrg)): man;

    --box to floor
        next(dr) = r & (b74 = flr & (b73 = bx | b73 = bxtrg)) & (b72 = man | b72 = mantrg): bx;
        next(dr) = l & (b74 = flr & (b75 = bx | b75 = bxtrg)) & (b76 = man | b76 = mantrg): bx;
        next(dr) = d & (b74 = flr & (b64 = bx | b64 = bxtrg)) & (b54 = man | b54 = mantrg): bx;
        next(dr) = u & (b74 = flr & (b84 = bx | b84 = bxtrg)) & (b94 = man | b94 = mantrg): bx;

    --man to target
        next(dr) = r & (b74 = target & (b73 = man | b73 = mantrg)): mantrg;
        next(dr) = l & (b74 = target & (b75 = man | b75 = mantrg)): mantrg;
        next(dr) = d & (b74 = target & (b64 = man | b64 = mantrg)): mantrg;
        next(dr) = u & (b74 = target & (b84 = man | b84 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b74 = target & (b73 = bx | b73 = bxtrg)) & (b72 = man | b72 = mantrg): bxtrg;
        next(dr) = l & (b74 = target & (b75 = bx | b75 = bxtrg)) & (b76 = man | b76 = mantrg): bxtrg;
        next(dr) = d & (b74 = target & (b64 = bx | b64 = bxtrg)) & (b54 = man | b54 = mantrg): bxtrg;
        next(dr) = u & (b74 = target & (b84 = bx | b84 = bxtrg)) & (b94 = man | b94 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b74 = bx & (b73 = man | b73 = mantrg)) & (b75 = flr | b75 = target): man;
        next(dr) = l & (b74 = bx & (b75 = man | b75 = mantrg)) & (b73 = flr | b73 = target): man;
        next(dr) = d & (b74 = bx & (b64 = man | b64 = mantrg)) & (b84 = flr | b84 = target): man;
        next(dr) = u & (b74 = bx & (b84 = man | b84 = mantrg)) & (b64 = flr | b64 = target): man;

    --man to box on target
        next(dr) = r & (b74 = bxtrg & (b73 = man | b73 = mantrg)) & (b75 = flr | b75 = target): mantrg;
        next(dr) = l & (b74 = bxtrg & (b75 = man | b75 = mantrg)) & (b73 = flr | b73 = target): mantrg;
        next(dr) = d & (b74 = bxtrg & (b64 = man | b64 = mantrg)) & (b84 = flr | b84 = target): mantrg;
        next(dr) = u & (b74 = bxtrg & (b84 = man | b84 = mantrg)) & (b64 = flr | b64 = target): mantrg;

    TRUE: b74;
esac;
next(b75) := case
	--floor to floor
		next(dr) = l & (b75 = man & b74 =flr):flr;
		next(dr) = r & (b75 = man & b76 =flr):flr;
		next(dr) = u & (b75 = man & b65 =flr):flr;
		next(dr) = d & (b75 = man & b85 =flr):flr;


	--target to floor
		next(dr) = l & (b75 = mantrg & b74 =flr): target;
		next(dr) = r & (b75 = mantrg & b76 =flr): target;
		next(dr) = u & (b75 = mantrg & b65 =flr): target;
		next(dr) = d & (b75 = mantrg & b85 =flr): target;

	--floor to target
		next(dr) = l & (b75 = man & b74 = target):flr;
		next(dr) = r & (b75 = man & b76 = target):flr;
		next(dr) = u & (b75 = man & b65 = target):flr;
		next(dr) = d & (b75 = man & b85 = target):flr;

	--target to target
		next(dr) = l & (b75 = mantrg & b74 = target): target;
		next(dr) = r & (b75 = mantrg & b76 = target): target;
		next(dr) = u & (b75 = mantrg & b65 = target): target;
		next(dr) = d & (b75 = mantrg & b85 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b75 = man & b74 = bx) & (b73 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b75 = man & b76 = bx) & (b77 =flr) & (5+2 < n):flr;
		next(dr) = u & (b75 = man & b65 = bx) & (b55 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b75 = man & b85 = bx) & (b95 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b75 = man & b74 = bx) & (b73 = target) & (5-2 > 0):flr;
		next(dr) = r & (b75 = man & b76 = bx) & (b77 = target) & (5+2 < n):flr;
		next(dr) = u & (b75 = man & b65 = bx) & (b55 = target) & (7-2 > 0):flr;
		next(dr) = d & (b75 = man & b85 = bx) & (b95 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b75 = man & b74 = bxtrg) & (b73 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b75 = man & b76 = bxtrg) & (b77 =flr) & (5+2 < n):flr;
		next(dr) = u & (b75 = man & b65 = bxtrg) & (b55 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b75 = man & b85 = bxtrg) & (b95 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b75 = man & b74 = bxtrg) & (b73 = target) & (5-2 > 0):flr;
		next(dr) = r & (b75 = man & b76 = bxtrg) & (b77 = target) & (5+2 < n):flr;
		next(dr) = u & (b75 = man & b65 = bxtrg) & (b55 = target) & (7-2 > 0):flr;
		next(dr) = d & (b75 = man & b85 = bxtrg) & (b95 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b75 = mantrg & b74 = bx) & (b73 =flr) & (5-2 > 0): target;
		next(dr) = r & (b75 = mantrg & b76 = bx) & (b77 =flr) & (5+2 < n): target;
		next(dr) = u & (b75 = mantrg & b65 = bx) & (b55 =flr) & (7-2 > 0): target;
		next(dr) = d & (b75 = mantrg & b85 = bx) & (b95 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b75 = mantrg & b74 = bx) & (b73 = target) & (5-2 > 0): target;
		next(dr) = r & (b75 = mantrg & b76 = bx) & (b77 = target) & (5+2 < n): target;
		next(dr) = u & (b75 = mantrg & b65 = bx) & (b55 = target) & (7-2 > 0): target;
		next(dr) = d & (b75 = mantrg & b85 = bx) & (b95 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b75 = mantrg & b74 = bxtrg) & (b73 =flr) & (5-2 > 0): target;
		next(dr) = r & (b75 = mantrg & b76 = bxtrg) & (b77 =flr) & (5+2 < n): target;
		next(dr) = u & (b75 = mantrg & b65 = bxtrg) & (b55 =flr) & (7-2 > 0): target;
		next(dr) = d & (b75 = mantrg & b85 = bxtrg) & (b95 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b75 = mantrg & b74 = bxtrg) & (b73 = target) & (5-2 > 0): target;
		next(dr) = r & (b75 = mantrg & b76 = bxtrg) & (b77 = target) & (5+2 < n): target;
		next(dr) = u & (b75 = mantrg & b65 = bxtrg) & (b55 = target) & (7-2 > 0): target;
		next(dr) = d & (b75 = mantrg & b85 = bxtrg) & (b95 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b75 = flr & (b74 = man | b74 = mantrg)) : man;
        next(dr) = l & (b75 = flr & (b76 = man | b76 = mantrg)): man;
        next(dr) = d & (b75 = flr & (b65 = man | b65 = mantrg)): man;
        next(dr) = u & (b75 = flr & (b85 = man | b85 = mantrg)): man;

    --box to floor
        next(dr) = r & (b75 = flr & (b74 = bx | b74 = bxtrg)) & (b73 = man | b73 = mantrg): bx;
        next(dr) = l & (b75 = flr & (b76 = bx | b76 = bxtrg)) & (b77 = man | b77 = mantrg): bx;
        next(dr) = d & (b75 = flr & (b65 = bx | b65 = bxtrg)) & (b55 = man | b55 = mantrg): bx;
        next(dr) = u & (b75 = flr & (b85 = bx | b85 = bxtrg)) & (b95 = man | b95 = mantrg): bx;

    --man to target
        next(dr) = r & (b75 = target & (b74 = man | b74 = mantrg)): mantrg;
        next(dr) = l & (b75 = target & (b76 = man | b76 = mantrg)): mantrg;
        next(dr) = d & (b75 = target & (b65 = man | b65 = mantrg)): mantrg;
        next(dr) = u & (b75 = target & (b85 = man | b85 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b75 = target & (b74 = bx | b74 = bxtrg)) & (b73 = man | b73 = mantrg): bxtrg;
        next(dr) = l & (b75 = target & (b76 = bx | b76 = bxtrg)) & (b77 = man | b77 = mantrg): bxtrg;
        next(dr) = d & (b75 = target & (b65 = bx | b65 = bxtrg)) & (b55 = man | b55 = mantrg): bxtrg;
        next(dr) = u & (b75 = target & (b85 = bx | b85 = bxtrg)) & (b95 = man | b95 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b75 = bx & (b74 = man | b74 = mantrg)) & (b76 = flr | b76 = target): man;
        next(dr) = l & (b75 = bx & (b76 = man | b76 = mantrg)) & (b74 = flr | b74 = target): man;
        next(dr) = d & (b75 = bx & (b65 = man | b65 = mantrg)) & (b85 = flr | b85 = target): man;
        next(dr) = u & (b75 = bx & (b85 = man | b85 = mantrg)) & (b65 = flr | b65 = target): man;

    --man to box on target
        next(dr) = r & (b75 = bxtrg & (b74 = man | b74 = mantrg)) & (b76 = flr | b76 = target): mantrg;
        next(dr) = l & (b75 = bxtrg & (b76 = man | b76 = mantrg)) & (b74 = flr | b74 = target): mantrg;
        next(dr) = d & (b75 = bxtrg & (b65 = man | b65 = mantrg)) & (b85 = flr | b85 = target): mantrg;
        next(dr) = u & (b75 = bxtrg & (b85 = man | b85 = mantrg)) & (b65 = flr | b65 = target): mantrg;

    TRUE: b75;
esac;
next(b76) := case
	--floor to floor
		next(dr) = l & (b76 = man & b75 =flr):flr;
		next(dr) = r & (b76 = man & b77 =flr):flr;
		next(dr) = u & (b76 = man & b66 =flr):flr;
		next(dr) = d & (b76 = man & b86 =flr):flr;


	--target to floor
		next(dr) = l & (b76 = mantrg & b75 =flr): target;
		next(dr) = r & (b76 = mantrg & b77 =flr): target;
		next(dr) = u & (b76 = mantrg & b66 =flr): target;
		next(dr) = d & (b76 = mantrg & b86 =flr): target;

	--floor to target
		next(dr) = l & (b76 = man & b75 = target):flr;
		next(dr) = r & (b76 = man & b77 = target):flr;
		next(dr) = u & (b76 = man & b66 = target):flr;
		next(dr) = d & (b76 = man & b86 = target):flr;

	--target to target
		next(dr) = l & (b76 = mantrg & b75 = target): target;
		next(dr) = r & (b76 = mantrg & b77 = target): target;
		next(dr) = u & (b76 = mantrg & b66 = target): target;
		next(dr) = d & (b76 = mantrg & b86 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b76 = man & b75 = bx) & (b74 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b76 = man & b77 = bx) & (b78 =flr) & (6+2 < n):flr;
		next(dr) = u & (b76 = man & b66 = bx) & (b56 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b76 = man & b86 = bx) & (b96 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b76 = man & b75 = bx) & (b74 = target) & (6-2 > 0):flr;
		next(dr) = r & (b76 = man & b77 = bx) & (b78 = target) & (6+2 < n):flr;
		next(dr) = u & (b76 = man & b66 = bx) & (b56 = target) & (7-2 > 0):flr;
		next(dr) = d & (b76 = man & b86 = bx) & (b96 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b76 = man & b75 = bxtrg) & (b74 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b76 = man & b77 = bxtrg) & (b78 =flr) & (6+2 < n):flr;
		next(dr) = u & (b76 = man & b66 = bxtrg) & (b56 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b76 = man & b86 = bxtrg) & (b96 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b76 = man & b75 = bxtrg) & (b74 = target) & (6-2 > 0):flr;
		next(dr) = r & (b76 = man & b77 = bxtrg) & (b78 = target) & (6+2 < n):flr;
		next(dr) = u & (b76 = man & b66 = bxtrg) & (b56 = target) & (7-2 > 0):flr;
		next(dr) = d & (b76 = man & b86 = bxtrg) & (b96 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b76 = mantrg & b75 = bx) & (b74 =flr) & (6-2 > 0): target;
		next(dr) = r & (b76 = mantrg & b77 = bx) & (b78 =flr) & (6+2 < n): target;
		next(dr) = u & (b76 = mantrg & b66 = bx) & (b56 =flr) & (7-2 > 0): target;
		next(dr) = d & (b76 = mantrg & b86 = bx) & (b96 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b76 = mantrg & b75 = bx) & (b74 = target) & (6-2 > 0): target;
		next(dr) = r & (b76 = mantrg & b77 = bx) & (b78 = target) & (6+2 < n): target;
		next(dr) = u & (b76 = mantrg & b66 = bx) & (b56 = target) & (7-2 > 0): target;
		next(dr) = d & (b76 = mantrg & b86 = bx) & (b96 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b76 = mantrg & b75 = bxtrg) & (b74 =flr) & (6-2 > 0): target;
		next(dr) = r & (b76 = mantrg & b77 = bxtrg) & (b78 =flr) & (6+2 < n): target;
		next(dr) = u & (b76 = mantrg & b66 = bxtrg) & (b56 =flr) & (7-2 > 0): target;
		next(dr) = d & (b76 = mantrg & b86 = bxtrg) & (b96 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b76 = mantrg & b75 = bxtrg) & (b74 = target) & (6-2 > 0): target;
		next(dr) = r & (b76 = mantrg & b77 = bxtrg) & (b78 = target) & (6+2 < n): target;
		next(dr) = u & (b76 = mantrg & b66 = bxtrg) & (b56 = target) & (7-2 > 0): target;
		next(dr) = d & (b76 = mantrg & b86 = bxtrg) & (b96 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b76 = flr & (b75 = man | b75 = mantrg)) : man;
        next(dr) = l & (b76 = flr & (b77 = man | b77 = mantrg)): man;
        next(dr) = d & (b76 = flr & (b66 = man | b66 = mantrg)): man;
        next(dr) = u & (b76 = flr & (b86 = man | b86 = mantrg)): man;

    --box to floor
        next(dr) = r & (b76 = flr & (b75 = bx | b75 = bxtrg)) & (b74 = man | b74 = mantrg): bx;
        next(dr) = l & (b76 = flr & (b77 = bx | b77 = bxtrg)) & (b78 = man | b78 = mantrg): bx;
        next(dr) = d & (b76 = flr & (b66 = bx | b66 = bxtrg)) & (b56 = man | b56 = mantrg): bx;
        next(dr) = u & (b76 = flr & (b86 = bx | b86 = bxtrg)) & (b96 = man | b96 = mantrg): bx;

    --man to target
        next(dr) = r & (b76 = target & (b75 = man | b75 = mantrg)): mantrg;
        next(dr) = l & (b76 = target & (b77 = man | b77 = mantrg)): mantrg;
        next(dr) = d & (b76 = target & (b66 = man | b66 = mantrg)): mantrg;
        next(dr) = u & (b76 = target & (b86 = man | b86 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b76 = target & (b75 = bx | b75 = bxtrg)) & (b74 = man | b74 = mantrg): bxtrg;
        next(dr) = l & (b76 = target & (b77 = bx | b77 = bxtrg)) & (b78 = man | b78 = mantrg): bxtrg;
        next(dr) = d & (b76 = target & (b66 = bx | b66 = bxtrg)) & (b56 = man | b56 = mantrg): bxtrg;
        next(dr) = u & (b76 = target & (b86 = bx | b86 = bxtrg)) & (b96 = man | b96 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b76 = bx & (b75 = man | b75 = mantrg)) & (b77 = flr | b77 = target): man;
        next(dr) = l & (b76 = bx & (b77 = man | b77 = mantrg)) & (b75 = flr | b75 = target): man;
        next(dr) = d & (b76 = bx & (b66 = man | b66 = mantrg)) & (b86 = flr | b86 = target): man;
        next(dr) = u & (b76 = bx & (b86 = man | b86 = mantrg)) & (b66 = flr | b66 = target): man;

    --man to box on target
        next(dr) = r & (b76 = bxtrg & (b75 = man | b75 = mantrg)) & (b77 = flr | b77 = target): mantrg;
        next(dr) = l & (b76 = bxtrg & (b77 = man | b77 = mantrg)) & (b75 = flr | b75 = target): mantrg;
        next(dr) = d & (b76 = bxtrg & (b66 = man | b66 = mantrg)) & (b86 = flr | b86 = target): mantrg;
        next(dr) = u & (b76 = bxtrg & (b86 = man | b86 = mantrg)) & (b66 = flr | b66 = target): mantrg;

    TRUE: b76;
esac;
next(b77) := case
	--floor to floor
		next(dr) = l & (b77 = man & b76 =flr):flr;
		next(dr) = r & (b77 = man & b78 =flr):flr;
		next(dr) = u & (b77 = man & b67 =flr):flr;
		next(dr) = d & (b77 = man & b87 =flr):flr;


	--target to floor
		next(dr) = l & (b77 = mantrg & b76 =flr): target;
		next(dr) = r & (b77 = mantrg & b78 =flr): target;
		next(dr) = u & (b77 = mantrg & b67 =flr): target;
		next(dr) = d & (b77 = mantrg & b87 =flr): target;

	--floor to target
		next(dr) = l & (b77 = man & b76 = target):flr;
		next(dr) = r & (b77 = man & b78 = target):flr;
		next(dr) = u & (b77 = man & b67 = target):flr;
		next(dr) = d & (b77 = man & b87 = target):flr;

	--target to target
		next(dr) = l & (b77 = mantrg & b76 = target): target;
		next(dr) = r & (b77 = mantrg & b78 = target): target;
		next(dr) = u & (b77 = mantrg & b67 = target): target;
		next(dr) = d & (b77 = mantrg & b87 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b77 = man & b76 = bx) & (b75 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b77 = man & b78 = bx) & (b79 =flr) & (7+2 < n):flr;
		next(dr) = u & (b77 = man & b67 = bx) & (b57 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b77 = man & b87 = bx) & (b97 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b77 = man & b76 = bx) & (b75 = target) & (7-2 > 0):flr;
		next(dr) = r & (b77 = man & b78 = bx) & (b79 = target) & (7+2 < n):flr;
		next(dr) = u & (b77 = man & b67 = bx) & (b57 = target) & (7-2 > 0):flr;
		next(dr) = d & (b77 = man & b87 = bx) & (b97 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b77 = man & b76 = bxtrg) & (b75 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b77 = man & b78 = bxtrg) & (b79 =flr) & (7+2 < n):flr;
		next(dr) = u & (b77 = man & b67 = bxtrg) & (b57 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b77 = man & b87 = bxtrg) & (b97 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b77 = man & b76 = bxtrg) & (b75 = target) & (7-2 > 0):flr;
		next(dr) = r & (b77 = man & b78 = bxtrg) & (b79 = target) & (7+2 < n):flr;
		next(dr) = u & (b77 = man & b67 = bxtrg) & (b57 = target) & (7-2 > 0):flr;
		next(dr) = d & (b77 = man & b87 = bxtrg) & (b97 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b77 = mantrg & b76 = bx) & (b75 =flr) & (7-2 > 0): target;
		next(dr) = r & (b77 = mantrg & b78 = bx) & (b79 =flr) & (7+2 < n): target;
		next(dr) = u & (b77 = mantrg & b67 = bx) & (b57 =flr) & (7-2 > 0): target;
		next(dr) = d & (b77 = mantrg & b87 = bx) & (b97 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b77 = mantrg & b76 = bx) & (b75 = target) & (7-2 > 0): target;
		next(dr) = r & (b77 = mantrg & b78 = bx) & (b79 = target) & (7+2 < n): target;
		next(dr) = u & (b77 = mantrg & b67 = bx) & (b57 = target) & (7-2 > 0): target;
		next(dr) = d & (b77 = mantrg & b87 = bx) & (b97 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b77 = mantrg & b76 = bxtrg) & (b75 =flr) & (7-2 > 0): target;
		next(dr) = r & (b77 = mantrg & b78 = bxtrg) & (b79 =flr) & (7+2 < n): target;
		next(dr) = u & (b77 = mantrg & b67 = bxtrg) & (b57 =flr) & (7-2 > 0): target;
		next(dr) = d & (b77 = mantrg & b87 = bxtrg) & (b97 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b77 = mantrg & b76 = bxtrg) & (b75 = target) & (7-2 > 0): target;
		next(dr) = r & (b77 = mantrg & b78 = bxtrg) & (b79 = target) & (7+2 < n): target;
		next(dr) = u & (b77 = mantrg & b67 = bxtrg) & (b57 = target) & (7-2 > 0): target;
		next(dr) = d & (b77 = mantrg & b87 = bxtrg) & (b97 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b77 = flr & (b76 = man | b76 = mantrg)) : man;
        next(dr) = l & (b77 = flr & (b78 = man | b78 = mantrg)): man;
        next(dr) = d & (b77 = flr & (b67 = man | b67 = mantrg)): man;
        next(dr) = u & (b77 = flr & (b87 = man | b87 = mantrg)): man;

    --box to floor
        next(dr) = r & (b77 = flr & (b76 = bx | b76 = bxtrg)) & (b75 = man | b75 = mantrg): bx;
        next(dr) = l & (b77 = flr & (b78 = bx | b78 = bxtrg)) & (b79 = man | b79 = mantrg): bx;
        next(dr) = d & (b77 = flr & (b67 = bx | b67 = bxtrg)) & (b57 = man | b57 = mantrg): bx;
        next(dr) = u & (b77 = flr & (b87 = bx | b87 = bxtrg)) & (b97 = man | b97 = mantrg): bx;

    --man to target
        next(dr) = r & (b77 = target & (b76 = man | b76 = mantrg)): mantrg;
        next(dr) = l & (b77 = target & (b78 = man | b78 = mantrg)): mantrg;
        next(dr) = d & (b77 = target & (b67 = man | b67 = mantrg)): mantrg;
        next(dr) = u & (b77 = target & (b87 = man | b87 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b77 = target & (b76 = bx | b76 = bxtrg)) & (b75 = man | b75 = mantrg): bxtrg;
        next(dr) = l & (b77 = target & (b78 = bx | b78 = bxtrg)) & (b79 = man | b79 = mantrg): bxtrg;
        next(dr) = d & (b77 = target & (b67 = bx | b67 = bxtrg)) & (b57 = man | b57 = mantrg): bxtrg;
        next(dr) = u & (b77 = target & (b87 = bx | b87 = bxtrg)) & (b97 = man | b97 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b77 = bx & (b76 = man | b76 = mantrg)) & (b78 = flr | b78 = target): man;
        next(dr) = l & (b77 = bx & (b78 = man | b78 = mantrg)) & (b76 = flr | b76 = target): man;
        next(dr) = d & (b77 = bx & (b67 = man | b67 = mantrg)) & (b87 = flr | b87 = target): man;
        next(dr) = u & (b77 = bx & (b87 = man | b87 = mantrg)) & (b67 = flr | b67 = target): man;

    --man to box on target
        next(dr) = r & (b77 = bxtrg & (b76 = man | b76 = mantrg)) & (b78 = flr | b78 = target): mantrg;
        next(dr) = l & (b77 = bxtrg & (b78 = man | b78 = mantrg)) & (b76 = flr | b76 = target): mantrg;
        next(dr) = d & (b77 = bxtrg & (b67 = man | b67 = mantrg)) & (b87 = flr | b87 = target): mantrg;
        next(dr) = u & (b77 = bxtrg & (b87 = man | b87 = mantrg)) & (b67 = flr | b67 = target): mantrg;

    TRUE: b77;
esac;
next(b78) := case
	--floor to floor
		next(dr) = l & (b78 = man & b77 =flr):flr;
		next(dr) = r & (b78 = man & b79 =flr):flr;
		next(dr) = u & (b78 = man & b68 =flr):flr;
		next(dr) = d & (b78 = man & b88 =flr):flr;


	--target to floor
		next(dr) = l & (b78 = mantrg & b77 =flr): target;
		next(dr) = r & (b78 = mantrg & b79 =flr): target;
		next(dr) = u & (b78 = mantrg & b68 =flr): target;
		next(dr) = d & (b78 = mantrg & b88 =flr): target;

	--floor to target
		next(dr) = l & (b78 = man & b77 = target):flr;
		next(dr) = r & (b78 = man & b79 = target):flr;
		next(dr) = u & (b78 = man & b68 = target):flr;
		next(dr) = d & (b78 = man & b88 = target):flr;

	--target to target
		next(dr) = l & (b78 = mantrg & b77 = target): target;
		next(dr) = r & (b78 = mantrg & b79 = target): target;
		next(dr) = u & (b78 = mantrg & b68 = target): target;
		next(dr) = d & (b78 = mantrg & b88 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b78 = man & b77 = bx) & (b76 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b78 = man & b79 = bx) & (b710 =flr) & (8+2 < n):flr;
		next(dr) = u & (b78 = man & b68 = bx) & (b58 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b78 = man & b88 = bx) & (b98 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b78 = man & b77 = bx) & (b76 = target) & (8-2 > 0):flr;
		next(dr) = r & (b78 = man & b79 = bx) & (b710 = target) & (8+2 < n):flr;
		next(dr) = u & (b78 = man & b68 = bx) & (b58 = target) & (7-2 > 0):flr;
		next(dr) = d & (b78 = man & b88 = bx) & (b98 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b78 = man & b77 = bxtrg) & (b76 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b78 = man & b79 = bxtrg) & (b710 =flr) & (8+2 < n):flr;
		next(dr) = u & (b78 = man & b68 = bxtrg) & (b58 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b78 = man & b88 = bxtrg) & (b98 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b78 = man & b77 = bxtrg) & (b76 = target) & (8-2 > 0):flr;
		next(dr) = r & (b78 = man & b79 = bxtrg) & (b710 = target) & (8+2 < n):flr;
		next(dr) = u & (b78 = man & b68 = bxtrg) & (b58 = target) & (7-2 > 0):flr;
		next(dr) = d & (b78 = man & b88 = bxtrg) & (b98 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b78 = mantrg & b77 = bx) & (b76 =flr) & (8-2 > 0): target;
		next(dr) = r & (b78 = mantrg & b79 = bx) & (b710 =flr) & (8+2 < n): target;
		next(dr) = u & (b78 = mantrg & b68 = bx) & (b58 =flr) & (7-2 > 0): target;
		next(dr) = d & (b78 = mantrg & b88 = bx) & (b98 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b78 = mantrg & b77 = bx) & (b76 = target) & (8-2 > 0): target;
		next(dr) = r & (b78 = mantrg & b79 = bx) & (b710 = target) & (8+2 < n): target;
		next(dr) = u & (b78 = mantrg & b68 = bx) & (b58 = target) & (7-2 > 0): target;
		next(dr) = d & (b78 = mantrg & b88 = bx) & (b98 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b78 = mantrg & b77 = bxtrg) & (b76 =flr) & (8-2 > 0): target;
		next(dr) = r & (b78 = mantrg & b79 = bxtrg) & (b710 =flr) & (8+2 < n): target;
		next(dr) = u & (b78 = mantrg & b68 = bxtrg) & (b58 =flr) & (7-2 > 0): target;
		next(dr) = d & (b78 = mantrg & b88 = bxtrg) & (b98 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b78 = mantrg & b77 = bxtrg) & (b76 = target) & (8-2 > 0): target;
		next(dr) = r & (b78 = mantrg & b79 = bxtrg) & (b710 = target) & (8+2 < n): target;
		next(dr) = u & (b78 = mantrg & b68 = bxtrg) & (b58 = target) & (7-2 > 0): target;
		next(dr) = d & (b78 = mantrg & b88 = bxtrg) & (b98 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b78 = flr & (b77 = man | b77 = mantrg)) : man;
        next(dr) = l & (b78 = flr & (b79 = man | b79 = mantrg)): man;
        next(dr) = d & (b78 = flr & (b68 = man | b68 = mantrg)): man;
        next(dr) = u & (b78 = flr & (b88 = man | b88 = mantrg)): man;

    --box to floor
        next(dr) = r & (b78 = flr & (b77 = bx | b77 = bxtrg)) & (b76 = man | b76 = mantrg): bx;
        next(dr) = l & (b78 = flr & (b79 = bx | b79 = bxtrg)) & (b710 = man | b710 = mantrg): bx;
        next(dr) = d & (b78 = flr & (b68 = bx | b68 = bxtrg)) & (b58 = man | b58 = mantrg): bx;
        next(dr) = u & (b78 = flr & (b88 = bx | b88 = bxtrg)) & (b98 = man | b98 = mantrg): bx;

    --man to target
        next(dr) = r & (b78 = target & (b77 = man | b77 = mantrg)): mantrg;
        next(dr) = l & (b78 = target & (b79 = man | b79 = mantrg)): mantrg;
        next(dr) = d & (b78 = target & (b68 = man | b68 = mantrg)): mantrg;
        next(dr) = u & (b78 = target & (b88 = man | b88 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b78 = target & (b77 = bx | b77 = bxtrg)) & (b76 = man | b76 = mantrg): bxtrg;
        next(dr) = l & (b78 = target & (b79 = bx | b79 = bxtrg)) & (b710 = man | b710 = mantrg): bxtrg;
        next(dr) = d & (b78 = target & (b68 = bx | b68 = bxtrg)) & (b58 = man | b58 = mantrg): bxtrg;
        next(dr) = u & (b78 = target & (b88 = bx | b88 = bxtrg)) & (b98 = man | b98 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b78 = bx & (b77 = man | b77 = mantrg)) & (b79 = flr | b79 = target): man;
        next(dr) = l & (b78 = bx & (b79 = man | b79 = mantrg)) & (b77 = flr | b77 = target): man;
        next(dr) = d & (b78 = bx & (b68 = man | b68 = mantrg)) & (b88 = flr | b88 = target): man;
        next(dr) = u & (b78 = bx & (b88 = man | b88 = mantrg)) & (b68 = flr | b68 = target): man;

    --man to box on target
        next(dr) = r & (b78 = bxtrg & (b77 = man | b77 = mantrg)) & (b79 = flr | b79 = target): mantrg;
        next(dr) = l & (b78 = bxtrg & (b79 = man | b79 = mantrg)) & (b77 = flr | b77 = target): mantrg;
        next(dr) = d & (b78 = bxtrg & (b68 = man | b68 = mantrg)) & (b88 = flr | b88 = target): mantrg;
        next(dr) = u & (b78 = bxtrg & (b88 = man | b88 = mantrg)) & (b68 = flr | b68 = target): mantrg;

    TRUE: b78;
esac;
next(b79) := case
	--floor to floor
		next(dr) = l & (b79 = man & b78 =flr):flr;
		next(dr) = r & (b79 = man & b710 =flr):flr;
		next(dr) = u & (b79 = man & b69 =flr):flr;
		next(dr) = d & (b79 = man & b89 =flr):flr;


	--target to floor
		next(dr) = l & (b79 = mantrg & b78 =flr): target;
		next(dr) = r & (b79 = mantrg & b710 =flr): target;
		next(dr) = u & (b79 = mantrg & b69 =flr): target;
		next(dr) = d & (b79 = mantrg & b89 =flr): target;

	--floor to target
		next(dr) = l & (b79 = man & b78 = target):flr;
		next(dr) = r & (b79 = man & b710 = target):flr;
		next(dr) = u & (b79 = man & b69 = target):flr;
		next(dr) = d & (b79 = man & b89 = target):flr;

	--target to target
		next(dr) = l & (b79 = mantrg & b78 = target): target;
		next(dr) = r & (b79 = mantrg & b710 = target): target;
		next(dr) = u & (b79 = mantrg & b69 = target): target;
		next(dr) = d & (b79 = mantrg & b89 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b79 = man & b78 = bx) & (b77 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b79 = man & b69 = bx) & (b59 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b79 = man & b89 = bx) & (b99 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b79 = man & b78 = bx) & (b77 = target) & (9-2 > 0):flr;
		next(dr) = u & (b79 = man & b69 = bx) & (b59 = target) & (7-2 > 0):flr;
		next(dr) = d & (b79 = man & b89 = bx) & (b99 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b79 = man & b78 = bxtrg) & (b77 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b79 = man & b69 = bxtrg) & (b59 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b79 = man & b89 = bxtrg) & (b99 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b79 = man & b78 = bxtrg) & (b77 = target) & (9-2 > 0):flr;
		next(dr) = u & (b79 = man & b69 = bxtrg) & (b59 = target) & (7-2 > 0):flr;
		next(dr) = d & (b79 = man & b89 = bxtrg) & (b99 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b79 = mantrg & b78 = bx) & (b77 =flr) & (9-2 > 0): target;
		next(dr) = u & (b79 = mantrg & b69 = bx) & (b59 =flr) & (7-2 > 0): target;
		next(dr) = d & (b79 = mantrg & b89 = bx) & (b99 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b79 = mantrg & b78 = bx) & (b77 = target) & (9-2 > 0): target;
		next(dr) = u & (b79 = mantrg & b69 = bx) & (b59 = target) & (7-2 > 0): target;
		next(dr) = d & (b79 = mantrg & b89 = bx) & (b99 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b79 = mantrg & b78 = bxtrg) & (b77 =flr) & (9-2 > 0): target;
		next(dr) = u & (b79 = mantrg & b69 = bxtrg) & (b59 =flr) & (7-2 > 0): target;
		next(dr) = d & (b79 = mantrg & b89 = bxtrg) & (b99 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b79 = mantrg & b78 = bxtrg) & (b77 = target) & (9-2 > 0): target;
		next(dr) = u & (b79 = mantrg & b69 = bxtrg) & (b59 = target) & (7-2 > 0): target;
		next(dr) = d & (b79 = mantrg & b89 = bxtrg) & (b99 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b79 = flr & (b78 = man | b78 = mantrg)) : man;
        next(dr) = l & (b79 = flr & (b710 = man | b710 = mantrg)): man;
        next(dr) = d & (b79 = flr & (b69 = man | b69 = mantrg)): man;
        next(dr) = u & (b79 = flr & (b89 = man | b89 = mantrg)): man;

    --box to floor
        next(dr) = r & (b79 = flr & (b78 = bx | b78 = bxtrg)) & (b77 = man | b77 = mantrg): bx;
        next(dr) = d & (b79 = flr & (b69 = bx | b69 = bxtrg)) & (b59 = man | b59 = mantrg): bx;
        next(dr) = u & (b79 = flr & (b89 = bx | b89 = bxtrg)) & (b99 = man | b99 = mantrg): bx;

    --man to target
        next(dr) = r & (b79 = target & (b78 = man | b78 = mantrg)): mantrg;
        next(dr) = l & (b79 = target & (b710 = man | b710 = mantrg)): mantrg;
        next(dr) = d & (b79 = target & (b69 = man | b69 = mantrg)): mantrg;
        next(dr) = u & (b79 = target & (b89 = man | b89 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b79 = target & (b78 = bx | b78 = bxtrg)) & (b77 = man | b77 = mantrg): bxtrg;
        next(dr) = d & (b79 = target & (b69 = bx | b69 = bxtrg)) & (b59 = man | b59 = mantrg): bxtrg;
        next(dr) = u & (b79 = target & (b89 = bx | b89 = bxtrg)) & (b99 = man | b99 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b79 = bx & (b78 = man | b78 = mantrg)) & (b710 = flr | b710 = target): man;
        next(dr) = l & (b79 = bx & (b710 = man | b710 = mantrg)) & (b78 = flr | b78 = target): man;
        next(dr) = d & (b79 = bx & (b69 = man | b69 = mantrg)) & (b89 = flr | b89 = target): man;
        next(dr) = u & (b79 = bx & (b89 = man | b89 = mantrg)) & (b69 = flr | b69 = target): man;

    --man to box on target
        next(dr) = r & (b79 = bxtrg & (b78 = man | b78 = mantrg)) & (b710 = flr | b710 = target): mantrg;
        next(dr) = l & (b79 = bxtrg & (b710 = man | b710 = mantrg)) & (b78 = flr | b78 = target): mantrg;
        next(dr) = d & (b79 = bxtrg & (b69 = man | b69 = mantrg)) & (b89 = flr | b89 = target): mantrg;
        next(dr) = u & (b79 = bxtrg & (b89 = man | b89 = mantrg)) & (b69 = flr | b69 = target): mantrg;

    TRUE: b79;
esac;
next(b710) := case
	--floor to floor
		next(dr) = l & (b710 = man & b79 =flr):flr;
		next(dr) = u & (b710 = man & b610 =flr):flr;
		next(dr) = d & (b710 = man & b810 =flr):flr;


	--target to floor
		next(dr) = l & (b710 = mantrg & b79 =flr): target;
		next(dr) = u & (b710 = mantrg & b610 =flr): target;
		next(dr) = d & (b710 = mantrg & b810 =flr): target;

	--floor to target
		next(dr) = l & (b710 = man & b79 = target):flr;
		next(dr) = u & (b710 = man & b610 = target):flr;
		next(dr) = d & (b710 = man & b810 = target):flr;

	--target to target
		next(dr) = l & (b710 = mantrg & b79 = target): target;
		next(dr) = u & (b710 = mantrg & b610 = target): target;
		next(dr) = d & (b710 = mantrg & b810 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b710 = man & b79 = bx) & (b78 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b710 = man & b610 = bx) & (b510 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b710 = man & b810 = bx) & (b910 =flr) & (7+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b710 = man & b79 = bx) & (b78 = target) & (10-2 > 0):flr;
		next(dr) = u & (b710 = man & b610 = bx) & (b510 = target) & (7-2 > 0):flr;
		next(dr) = d & (b710 = man & b810 = bx) & (b910 = target) & (7+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b710 = man & b79 = bxtrg) & (b78 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b710 = man & b610 = bxtrg) & (b510 =flr) & (7-2 > 0):flr;
		next(dr) = d & (b710 = man & b810 = bxtrg) & (b910 =flr) & (7-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b710 = man & b79 = bxtrg) & (b78 = target) & (10-2 > 0):flr;
		next(dr) = u & (b710 = man & b610 = bxtrg) & (b510 = target) & (7-2 > 0):flr;
		next(dr) = d & (b710 = man & b810 = bxtrg) & (b910 = target) & (7+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b710 = mantrg & b79 = bx) & (b78 =flr) & (10-2 > 0): target;
		next(dr) = u & (b710 = mantrg & b610 = bx) & (b510 =flr) & (7-2 > 0): target;
		next(dr) = d & (b710 = mantrg & b810 = bx) & (b910 =flr) & (7+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b710 = mantrg & b79 = bx) & (b78 = target) & (10-2 > 0): target;
		next(dr) = u & (b710 = mantrg & b610 = bx) & (b510 = target) & (7-2 > 0): target;
		next(dr) = d & (b710 = mantrg & b810 = bx) & (b910 = target) & (7+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b710 = mantrg & b79 = bxtrg) & (b78 =flr) & (10-2 > 0): target;
		next(dr) = u & (b710 = mantrg & b610 = bxtrg) & (b510 =flr) & (7-2 > 0): target;
		next(dr) = d & (b710 = mantrg & b810 = bxtrg) & (b910 =flr) & (7+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b710 = mantrg & b79 = bxtrg) & (b78 = target) & (10-2 > 0): target;
		next(dr) = u & (b710 = mantrg & b610 = bxtrg) & (b510 = target) & (7-2 > 0): target;
		next(dr) = d & (b710 = mantrg & b810 = bxtrg) & (b910 = target) & (7+2 < m): target;

    --man to floor
        next(dr) = r & (b710 = flr & (b79 = man | b79 = mantrg)) : man;
        next(dr) = d & (b710 = flr & (b610 = man | b610 = mantrg)): man;
        next(dr) = u & (b710 = flr & (b810 = man | b810 = mantrg)): man;

    --box to floor
        next(dr) = r & (b710 = flr & (b79 = bx | b79 = bxtrg)) & (b78 = man | b78 = mantrg): bx;
        next(dr) = d & (b710 = flr & (b610 = bx | b610 = bxtrg)) & (b510 = man | b510 = mantrg): bx;
        next(dr) = u & (b710 = flr & (b810 = bx | b810 = bxtrg)) & (b910 = man | b910 = mantrg): bx;

    --man to target
        next(dr) = r & (b710 = target & (b79 = man | b79 = mantrg)): mantrg;
        next(dr) = d & (b710 = target & (b610 = man | b610 = mantrg)): mantrg;
        next(dr) = u & (b710 = target & (b810 = man | b810 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b710 = target & (b79 = bx | b79 = bxtrg)) & (b78 = man | b78 = mantrg): bxtrg;
        next(dr) = d & (b710 = target & (b610 = bx | b610 = bxtrg)) & (b510 = man | b510 = mantrg): bxtrg;
        next(dr) = u & (b710 = target & (b810 = bx | b810 = bxtrg)) & (b910 = man | b910 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b710 = bx & (b610 = man | b610 = mantrg)) & (b810 = flr | b810 = target): man;
        next(dr) = u & (b710 = bx & (b810 = man | b810 = mantrg)) & (b610 = flr | b610 = target): man;

    --man to box on target
        next(dr) = d & (b710 = bxtrg & (b610 = man | b610 = mantrg)) & (b810 = flr | b810 = target): mantrg;
        next(dr) = u & (b710 = bxtrg & (b810 = man | b810 = mantrg)) & (b610 = flr | b610 = target): mantrg;

    TRUE: b710;
esac;
next(b80) := case
	--floor to floor
		next(dr) = r & (b80 = man & b81 =flr):flr;
		next(dr) = u & (b80 = man & b70 =flr):flr;
		next(dr) = d & (b80 = man & b90 =flr):flr;


	--target to floor
		next(dr) = r & (b80 = mantrg & b81 =flr): target;
		next(dr) = u & (b80 = mantrg & b70 =flr): target;
		next(dr) = d & (b80 = mantrg & b90 =flr): target;

	--floor to target
		next(dr) = r & (b80 = man & b81 = target):flr;
		next(dr) = u & (b80 = man & b70 = target):flr;
		next(dr) = d & (b80 = man & b90 = target):flr;

	--target to target
		next(dr) = r & (b80 = mantrg & b81 = target): target;
		next(dr) = u & (b80 = mantrg & b70 = target): target;
		next(dr) = d & (b80 = mantrg & b90 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b80 = man & b81 = bx) & (b82 =flr) & (0+2 < n):flr;
		next(dr) = u & (b80 = man & b70 = bx) & (b60 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = r & (b80 = man & b81 = bx) & (b82 = target) & (0+2 < n):flr;
		next(dr) = u & (b80 = man & b70 = bx) & (b60 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = r & (b80 = man & b81 = bxtrg) & (b82 =flr) & (0+2 < n):flr;
		next(dr) = u & (b80 = man & b70 = bxtrg) & (b60 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = r & (b80 = man & b81 = bxtrg) & (b82 = target) & (0+2 < n):flr;
		next(dr) = u & (b80 = man & b70 = bxtrg) & (b60 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = r & (b80 = mantrg & b81 = bx) & (b82 =flr) & (0+2 < n): target;
		next(dr) = u & (b80 = mantrg & b70 = bx) & (b60 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = r & (b80 = mantrg & b81 = bx) & (b82 = target) & (0+2 < n): target;
		next(dr) = u & (b80 = mantrg & b70 = bx) & (b60 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = r & (b80 = mantrg & b81 = bxtrg) & (b82 =flr) & (0+2 < n): target;
		next(dr) = u & (b80 = mantrg & b70 = bxtrg) & (b60 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = r & (b80 = mantrg & b81 = bxtrg) & (b82 = target) & (0+2 < n): target;
		next(dr) = u & (b80 = mantrg & b70 = bxtrg) & (b60 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = l & (b80 = flr & (b81 = man | b81 = mantrg)): man;
        next(dr) = d & (b80 = flr & (b70 = man | b70 = mantrg)): man;
        next(dr) = u & (b80 = flr & (b90 = man | b90 = mantrg)): man;

    --box to floor
        next(dr) = l & (b80 = flr & (b81 = bx | b81 = bxtrg)) & (b82 = man | b82 = mantrg): bx;
        next(dr) = d & (b80 = flr & (b70 = bx | b70 = bxtrg)) & (b60 = man | b60 = mantrg): bx;

    --man to target
        next(dr) = l & (b80 = target & (b81 = man | b81 = mantrg)): mantrg;
        next(dr) = d & (b80 = target & (b70 = man | b70 = mantrg)): mantrg;
        next(dr) = u & (b80 = target & (b90 = man | b90 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b80 = target & (b81 = bx | b81 = bxtrg)) & (b82 = man | b82 = mantrg): bxtrg;
        next(dr) = d & (b80 = target & (b70 = bx | b70 = bxtrg)) & (b60 = man | b60 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b80 = bx & (b70 = man | b70 = mantrg)) & (b90 = flr | b90 = target): man;
        next(dr) = u & (b80 = bx & (b90 = man | b90 = mantrg)) & (b70 = flr | b70 = target): man;

    --man to box on target
        next(dr) = d & (b80 = bxtrg & (b70 = man | b70 = mantrg)) & (b90 = flr | b90 = target): mantrg;
        next(dr) = u & (b80 = bxtrg & (b90 = man | b90 = mantrg)) & (b70 = flr | b70 = target): mantrg;

    TRUE: b80;
esac;
next(b81) := case
	--floor to floor
		next(dr) = l & (b81 = man & b80 =flr):flr;
		next(dr) = r & (b81 = man & b82 =flr):flr;
		next(dr) = u & (b81 = man & b71 =flr):flr;
		next(dr) = d & (b81 = man & b91 =flr):flr;


	--target to floor
		next(dr) = l & (b81 = mantrg & b80 =flr): target;
		next(dr) = r & (b81 = mantrg & b82 =flr): target;
		next(dr) = u & (b81 = mantrg & b71 =flr): target;
		next(dr) = d & (b81 = mantrg & b91 =flr): target;

	--floor to target
		next(dr) = l & (b81 = man & b80 = target):flr;
		next(dr) = r & (b81 = man & b82 = target):flr;
		next(dr) = u & (b81 = man & b71 = target):flr;
		next(dr) = d & (b81 = man & b91 = target):flr;

	--target to target
		next(dr) = l & (b81 = mantrg & b80 = target): target;
		next(dr) = r & (b81 = mantrg & b82 = target): target;
		next(dr) = u & (b81 = mantrg & b71 = target): target;
		next(dr) = d & (b81 = mantrg & b91 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b81 = man & b82 = bx) & (b83 =flr) & (1+2 < n):flr;
		next(dr) = u & (b81 = man & b71 = bx) & (b61 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = r & (b81 = man & b82 = bx) & (b83 = target) & (1+2 < n):flr;
		next(dr) = u & (b81 = man & b71 = bx) & (b61 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = r & (b81 = man & b82 = bxtrg) & (b83 =flr) & (1+2 < n):flr;
		next(dr) = u & (b81 = man & b71 = bxtrg) & (b61 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = r & (b81 = man & b82 = bxtrg) & (b83 = target) & (1+2 < n):flr;
		next(dr) = u & (b81 = man & b71 = bxtrg) & (b61 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = r & (b81 = mantrg & b82 = bx) & (b83 =flr) & (1+2 < n): target;
		next(dr) = u & (b81 = mantrg & b71 = bx) & (b61 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = r & (b81 = mantrg & b82 = bx) & (b83 = target) & (1+2 < n): target;
		next(dr) = u & (b81 = mantrg & b71 = bx) & (b61 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = r & (b81 = mantrg & b82 = bxtrg) & (b83 =flr) & (1+2 < n): target;
		next(dr) = u & (b81 = mantrg & b71 = bxtrg) & (b61 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = r & (b81 = mantrg & b82 = bxtrg) & (b83 = target) & (1+2 < n): target;
		next(dr) = u & (b81 = mantrg & b71 = bxtrg) & (b61 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b81 = flr & (b80 = man | b80 = mantrg)) : man;
        next(dr) = l & (b81 = flr & (b82 = man | b82 = mantrg)): man;
        next(dr) = d & (b81 = flr & (b71 = man | b71 = mantrg)): man;
        next(dr) = u & (b81 = flr & (b91 = man | b91 = mantrg)): man;

    --box to floor
        next(dr) = l & (b81 = flr & (b82 = bx | b82 = bxtrg)) & (b83 = man | b83 = mantrg): bx;
        next(dr) = d & (b81 = flr & (b71 = bx | b71 = bxtrg)) & (b61 = man | b61 = mantrg): bx;

    --man to target
        next(dr) = r & (b81 = target & (b80 = man | b80 = mantrg)): mantrg;
        next(dr) = l & (b81 = target & (b82 = man | b82 = mantrg)): mantrg;
        next(dr) = d & (b81 = target & (b71 = man | b71 = mantrg)): mantrg;
        next(dr) = u & (b81 = target & (b91 = man | b91 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b81 = target & (b82 = bx | b82 = bxtrg)) & (b83 = man | b83 = mantrg): bxtrg;
        next(dr) = d & (b81 = target & (b71 = bx | b71 = bxtrg)) & (b61 = man | b61 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b81 = bx & (b80 = man | b80 = mantrg)) & (b82 = flr | b82 = target): man;
        next(dr) = l & (b81 = bx & (b82 = man | b82 = mantrg)) & (b80 = flr | b80 = target): man;
        next(dr) = d & (b81 = bx & (b71 = man | b71 = mantrg)) & (b91 = flr | b91 = target): man;
        next(dr) = u & (b81 = bx & (b91 = man | b91 = mantrg)) & (b71 = flr | b71 = target): man;

    --man to box on target
        next(dr) = r & (b81 = bxtrg & (b80 = man | b80 = mantrg)) & (b82 = flr | b82 = target): mantrg;
        next(dr) = l & (b81 = bxtrg & (b82 = man | b82 = mantrg)) & (b80 = flr | b80 = target): mantrg;
        next(dr) = d & (b81 = bxtrg & (b71 = man | b71 = mantrg)) & (b91 = flr | b91 = target): mantrg;
        next(dr) = u & (b81 = bxtrg & (b91 = man | b91 = mantrg)) & (b71 = flr | b71 = target): mantrg;

    TRUE: b81;
esac;
next(b82) := case
	--floor to floor
		next(dr) = l & (b82 = man & b81 =flr):flr;
		next(dr) = r & (b82 = man & b83 =flr):flr;
		next(dr) = u & (b82 = man & b72 =flr):flr;
		next(dr) = d & (b82 = man & b92 =flr):flr;


	--target to floor
		next(dr) = l & (b82 = mantrg & b81 =flr): target;
		next(dr) = r & (b82 = mantrg & b83 =flr): target;
		next(dr) = u & (b82 = mantrg & b72 =flr): target;
		next(dr) = d & (b82 = mantrg & b92 =flr): target;

	--floor to target
		next(dr) = l & (b82 = man & b81 = target):flr;
		next(dr) = r & (b82 = man & b83 = target):flr;
		next(dr) = u & (b82 = man & b72 = target):flr;
		next(dr) = d & (b82 = man & b92 = target):flr;

	--target to target
		next(dr) = l & (b82 = mantrg & b81 = target): target;
		next(dr) = r & (b82 = mantrg & b83 = target): target;
		next(dr) = u & (b82 = mantrg & b72 = target): target;
		next(dr) = d & (b82 = mantrg & b92 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b82 = man & b81 = bx) & (b80 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b82 = man & b83 = bx) & (b84 =flr) & (2+2 < n):flr;
		next(dr) = u & (b82 = man & b72 = bx) & (b62 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b82 = man & b81 = bx) & (b80 = target) & (2-2 > 0):flr;
		next(dr) = r & (b82 = man & b83 = bx) & (b84 = target) & (2+2 < n):flr;
		next(dr) = u & (b82 = man & b72 = bx) & (b62 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b82 = man & b81 = bxtrg) & (b80 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b82 = man & b83 = bxtrg) & (b84 =flr) & (2+2 < n):flr;
		next(dr) = u & (b82 = man & b72 = bxtrg) & (b62 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b82 = man & b81 = bxtrg) & (b80 = target) & (2-2 > 0):flr;
		next(dr) = r & (b82 = man & b83 = bxtrg) & (b84 = target) & (2+2 < n):flr;
		next(dr) = u & (b82 = man & b72 = bxtrg) & (b62 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b82 = mantrg & b81 = bx) & (b80 =flr) & (2-2 > 0): target;
		next(dr) = r & (b82 = mantrg & b83 = bx) & (b84 =flr) & (2+2 < n): target;
		next(dr) = u & (b82 = mantrg & b72 = bx) & (b62 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b82 = mantrg & b81 = bx) & (b80 = target) & (2-2 > 0): target;
		next(dr) = r & (b82 = mantrg & b83 = bx) & (b84 = target) & (2+2 < n): target;
		next(dr) = u & (b82 = mantrg & b72 = bx) & (b62 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b82 = mantrg & b81 = bxtrg) & (b80 =flr) & (2-2 > 0): target;
		next(dr) = r & (b82 = mantrg & b83 = bxtrg) & (b84 =flr) & (2+2 < n): target;
		next(dr) = u & (b82 = mantrg & b72 = bxtrg) & (b62 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b82 = mantrg & b81 = bxtrg) & (b80 = target) & (2-2 > 0): target;
		next(dr) = r & (b82 = mantrg & b83 = bxtrg) & (b84 = target) & (2+2 < n): target;
		next(dr) = u & (b82 = mantrg & b72 = bxtrg) & (b62 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b82 = flr & (b81 = man | b81 = mantrg)) : man;
        next(dr) = l & (b82 = flr & (b83 = man | b83 = mantrg)): man;
        next(dr) = d & (b82 = flr & (b72 = man | b72 = mantrg)): man;
        next(dr) = u & (b82 = flr & (b92 = man | b92 = mantrg)): man;

    --box to floor
        next(dr) = r & (b82 = flr & (b81 = bx | b81 = bxtrg)) & (b80 = man | b80 = mantrg): bx;
        next(dr) = l & (b82 = flr & (b83 = bx | b83 = bxtrg)) & (b84 = man | b84 = mantrg): bx;
        next(dr) = d & (b82 = flr & (b72 = bx | b72 = bxtrg)) & (b62 = man | b62 = mantrg): bx;

    --man to target
        next(dr) = r & (b82 = target & (b81 = man | b81 = mantrg)): mantrg;
        next(dr) = l & (b82 = target & (b83 = man | b83 = mantrg)): mantrg;
        next(dr) = d & (b82 = target & (b72 = man | b72 = mantrg)): mantrg;
        next(dr) = u & (b82 = target & (b92 = man | b92 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b82 = target & (b81 = bx | b81 = bxtrg)) & (b80 = man | b80 = mantrg): bxtrg;
        next(dr) = l & (b82 = target & (b83 = bx | b83 = bxtrg)) & (b84 = man | b84 = mantrg): bxtrg;
        next(dr) = d & (b82 = target & (b72 = bx | b72 = bxtrg)) & (b62 = man | b62 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b82 = bx & (b81 = man | b81 = mantrg)) & (b83 = flr | b83 = target): man;
        next(dr) = l & (b82 = bx & (b83 = man | b83 = mantrg)) & (b81 = flr | b81 = target): man;
        next(dr) = d & (b82 = bx & (b72 = man | b72 = mantrg)) & (b92 = flr | b92 = target): man;
        next(dr) = u & (b82 = bx & (b92 = man | b92 = mantrg)) & (b72 = flr | b72 = target): man;

    --man to box on target
        next(dr) = r & (b82 = bxtrg & (b81 = man | b81 = mantrg)) & (b83 = flr | b83 = target): mantrg;
        next(dr) = l & (b82 = bxtrg & (b83 = man | b83 = mantrg)) & (b81 = flr | b81 = target): mantrg;
        next(dr) = d & (b82 = bxtrg & (b72 = man | b72 = mantrg)) & (b92 = flr | b92 = target): mantrg;
        next(dr) = u & (b82 = bxtrg & (b92 = man | b92 = mantrg)) & (b72 = flr | b72 = target): mantrg;

    TRUE: b82;
esac;
next(b83) := case
	--floor to floor
		next(dr) = l & (b83 = man & b82 =flr):flr;
		next(dr) = r & (b83 = man & b84 =flr):flr;
		next(dr) = u & (b83 = man & b73 =flr):flr;
		next(dr) = d & (b83 = man & b93 =flr):flr;


	--target to floor
		next(dr) = l & (b83 = mantrg & b82 =flr): target;
		next(dr) = r & (b83 = mantrg & b84 =flr): target;
		next(dr) = u & (b83 = mantrg & b73 =flr): target;
		next(dr) = d & (b83 = mantrg & b93 =flr): target;

	--floor to target
		next(dr) = l & (b83 = man & b82 = target):flr;
		next(dr) = r & (b83 = man & b84 = target):flr;
		next(dr) = u & (b83 = man & b73 = target):flr;
		next(dr) = d & (b83 = man & b93 = target):flr;

	--target to target
		next(dr) = l & (b83 = mantrg & b82 = target): target;
		next(dr) = r & (b83 = mantrg & b84 = target): target;
		next(dr) = u & (b83 = mantrg & b73 = target): target;
		next(dr) = d & (b83 = mantrg & b93 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b83 = man & b82 = bx) & (b81 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b83 = man & b84 = bx) & (b85 =flr) & (3+2 < n):flr;
		next(dr) = u & (b83 = man & b73 = bx) & (b63 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b83 = man & b82 = bx) & (b81 = target) & (3-2 > 0):flr;
		next(dr) = r & (b83 = man & b84 = bx) & (b85 = target) & (3+2 < n):flr;
		next(dr) = u & (b83 = man & b73 = bx) & (b63 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b83 = man & b82 = bxtrg) & (b81 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b83 = man & b84 = bxtrg) & (b85 =flr) & (3+2 < n):flr;
		next(dr) = u & (b83 = man & b73 = bxtrg) & (b63 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b83 = man & b82 = bxtrg) & (b81 = target) & (3-2 > 0):flr;
		next(dr) = r & (b83 = man & b84 = bxtrg) & (b85 = target) & (3+2 < n):flr;
		next(dr) = u & (b83 = man & b73 = bxtrg) & (b63 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b83 = mantrg & b82 = bx) & (b81 =flr) & (3-2 > 0): target;
		next(dr) = r & (b83 = mantrg & b84 = bx) & (b85 =flr) & (3+2 < n): target;
		next(dr) = u & (b83 = mantrg & b73 = bx) & (b63 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b83 = mantrg & b82 = bx) & (b81 = target) & (3-2 > 0): target;
		next(dr) = r & (b83 = mantrg & b84 = bx) & (b85 = target) & (3+2 < n): target;
		next(dr) = u & (b83 = mantrg & b73 = bx) & (b63 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b83 = mantrg & b82 = bxtrg) & (b81 =flr) & (3-2 > 0): target;
		next(dr) = r & (b83 = mantrg & b84 = bxtrg) & (b85 =flr) & (3+2 < n): target;
		next(dr) = u & (b83 = mantrg & b73 = bxtrg) & (b63 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b83 = mantrg & b82 = bxtrg) & (b81 = target) & (3-2 > 0): target;
		next(dr) = r & (b83 = mantrg & b84 = bxtrg) & (b85 = target) & (3+2 < n): target;
		next(dr) = u & (b83 = mantrg & b73 = bxtrg) & (b63 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b83 = flr & (b82 = man | b82 = mantrg)) : man;
        next(dr) = l & (b83 = flr & (b84 = man | b84 = mantrg)): man;
        next(dr) = d & (b83 = flr & (b73 = man | b73 = mantrg)): man;
        next(dr) = u & (b83 = flr & (b93 = man | b93 = mantrg)): man;

    --box to floor
        next(dr) = r & (b83 = flr & (b82 = bx | b82 = bxtrg)) & (b81 = man | b81 = mantrg): bx;
        next(dr) = l & (b83 = flr & (b84 = bx | b84 = bxtrg)) & (b85 = man | b85 = mantrg): bx;
        next(dr) = d & (b83 = flr & (b73 = bx | b73 = bxtrg)) & (b63 = man | b63 = mantrg): bx;

    --man to target
        next(dr) = r & (b83 = target & (b82 = man | b82 = mantrg)): mantrg;
        next(dr) = l & (b83 = target & (b84 = man | b84 = mantrg)): mantrg;
        next(dr) = d & (b83 = target & (b73 = man | b73 = mantrg)): mantrg;
        next(dr) = u & (b83 = target & (b93 = man | b93 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b83 = target & (b82 = bx | b82 = bxtrg)) & (b81 = man | b81 = mantrg): bxtrg;
        next(dr) = l & (b83 = target & (b84 = bx | b84 = bxtrg)) & (b85 = man | b85 = mantrg): bxtrg;
        next(dr) = d & (b83 = target & (b73 = bx | b73 = bxtrg)) & (b63 = man | b63 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b83 = bx & (b82 = man | b82 = mantrg)) & (b84 = flr | b84 = target): man;
        next(dr) = l & (b83 = bx & (b84 = man | b84 = mantrg)) & (b82 = flr | b82 = target): man;
        next(dr) = d & (b83 = bx & (b73 = man | b73 = mantrg)) & (b93 = flr | b93 = target): man;
        next(dr) = u & (b83 = bx & (b93 = man | b93 = mantrg)) & (b73 = flr | b73 = target): man;

    --man to box on target
        next(dr) = r & (b83 = bxtrg & (b82 = man | b82 = mantrg)) & (b84 = flr | b84 = target): mantrg;
        next(dr) = l & (b83 = bxtrg & (b84 = man | b84 = mantrg)) & (b82 = flr | b82 = target): mantrg;
        next(dr) = d & (b83 = bxtrg & (b73 = man | b73 = mantrg)) & (b93 = flr | b93 = target): mantrg;
        next(dr) = u & (b83 = bxtrg & (b93 = man | b93 = mantrg)) & (b73 = flr | b73 = target): mantrg;

    TRUE: b83;
esac;
next(b84) := case
	--floor to floor
		next(dr) = l & (b84 = man & b83 =flr):flr;
		next(dr) = r & (b84 = man & b85 =flr):flr;
		next(dr) = u & (b84 = man & b74 =flr):flr;
		next(dr) = d & (b84 = man & b94 =flr):flr;


	--target to floor
		next(dr) = l & (b84 = mantrg & b83 =flr): target;
		next(dr) = r & (b84 = mantrg & b85 =flr): target;
		next(dr) = u & (b84 = mantrg & b74 =flr): target;
		next(dr) = d & (b84 = mantrg & b94 =flr): target;

	--floor to target
		next(dr) = l & (b84 = man & b83 = target):flr;
		next(dr) = r & (b84 = man & b85 = target):flr;
		next(dr) = u & (b84 = man & b74 = target):flr;
		next(dr) = d & (b84 = man & b94 = target):flr;

	--target to target
		next(dr) = l & (b84 = mantrg & b83 = target): target;
		next(dr) = r & (b84 = mantrg & b85 = target): target;
		next(dr) = u & (b84 = mantrg & b74 = target): target;
		next(dr) = d & (b84 = mantrg & b94 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b84 = man & b83 = bx) & (b82 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b84 = man & b85 = bx) & (b86 =flr) & (4+2 < n):flr;
		next(dr) = u & (b84 = man & b74 = bx) & (b64 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b84 = man & b83 = bx) & (b82 = target) & (4-2 > 0):flr;
		next(dr) = r & (b84 = man & b85 = bx) & (b86 = target) & (4+2 < n):flr;
		next(dr) = u & (b84 = man & b74 = bx) & (b64 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b84 = man & b83 = bxtrg) & (b82 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b84 = man & b85 = bxtrg) & (b86 =flr) & (4+2 < n):flr;
		next(dr) = u & (b84 = man & b74 = bxtrg) & (b64 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b84 = man & b83 = bxtrg) & (b82 = target) & (4-2 > 0):flr;
		next(dr) = r & (b84 = man & b85 = bxtrg) & (b86 = target) & (4+2 < n):flr;
		next(dr) = u & (b84 = man & b74 = bxtrg) & (b64 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b84 = mantrg & b83 = bx) & (b82 =flr) & (4-2 > 0): target;
		next(dr) = r & (b84 = mantrg & b85 = bx) & (b86 =flr) & (4+2 < n): target;
		next(dr) = u & (b84 = mantrg & b74 = bx) & (b64 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b84 = mantrg & b83 = bx) & (b82 = target) & (4-2 > 0): target;
		next(dr) = r & (b84 = mantrg & b85 = bx) & (b86 = target) & (4+2 < n): target;
		next(dr) = u & (b84 = mantrg & b74 = bx) & (b64 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b84 = mantrg & b83 = bxtrg) & (b82 =flr) & (4-2 > 0): target;
		next(dr) = r & (b84 = mantrg & b85 = bxtrg) & (b86 =flr) & (4+2 < n): target;
		next(dr) = u & (b84 = mantrg & b74 = bxtrg) & (b64 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b84 = mantrg & b83 = bxtrg) & (b82 = target) & (4-2 > 0): target;
		next(dr) = r & (b84 = mantrg & b85 = bxtrg) & (b86 = target) & (4+2 < n): target;
		next(dr) = u & (b84 = mantrg & b74 = bxtrg) & (b64 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b84 = flr & (b83 = man | b83 = mantrg)) : man;
        next(dr) = l & (b84 = flr & (b85 = man | b85 = mantrg)): man;
        next(dr) = d & (b84 = flr & (b74 = man | b74 = mantrg)): man;
        next(dr) = u & (b84 = flr & (b94 = man | b94 = mantrg)): man;

    --box to floor
        next(dr) = r & (b84 = flr & (b83 = bx | b83 = bxtrg)) & (b82 = man | b82 = mantrg): bx;
        next(dr) = l & (b84 = flr & (b85 = bx | b85 = bxtrg)) & (b86 = man | b86 = mantrg): bx;
        next(dr) = d & (b84 = flr & (b74 = bx | b74 = bxtrg)) & (b64 = man | b64 = mantrg): bx;

    --man to target
        next(dr) = r & (b84 = target & (b83 = man | b83 = mantrg)): mantrg;
        next(dr) = l & (b84 = target & (b85 = man | b85 = mantrg)): mantrg;
        next(dr) = d & (b84 = target & (b74 = man | b74 = mantrg)): mantrg;
        next(dr) = u & (b84 = target & (b94 = man | b94 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b84 = target & (b83 = bx | b83 = bxtrg)) & (b82 = man | b82 = mantrg): bxtrg;
        next(dr) = l & (b84 = target & (b85 = bx | b85 = bxtrg)) & (b86 = man | b86 = mantrg): bxtrg;
        next(dr) = d & (b84 = target & (b74 = bx | b74 = bxtrg)) & (b64 = man | b64 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b84 = bx & (b83 = man | b83 = mantrg)) & (b85 = flr | b85 = target): man;
        next(dr) = l & (b84 = bx & (b85 = man | b85 = mantrg)) & (b83 = flr | b83 = target): man;
        next(dr) = d & (b84 = bx & (b74 = man | b74 = mantrg)) & (b94 = flr | b94 = target): man;
        next(dr) = u & (b84 = bx & (b94 = man | b94 = mantrg)) & (b74 = flr | b74 = target): man;

    --man to box on target
        next(dr) = r & (b84 = bxtrg & (b83 = man | b83 = mantrg)) & (b85 = flr | b85 = target): mantrg;
        next(dr) = l & (b84 = bxtrg & (b85 = man | b85 = mantrg)) & (b83 = flr | b83 = target): mantrg;
        next(dr) = d & (b84 = bxtrg & (b74 = man | b74 = mantrg)) & (b94 = flr | b94 = target): mantrg;
        next(dr) = u & (b84 = bxtrg & (b94 = man | b94 = mantrg)) & (b74 = flr | b74 = target): mantrg;

    TRUE: b84;
esac;
next(b85) := case
	--floor to floor
		next(dr) = l & (b85 = man & b84 =flr):flr;
		next(dr) = r & (b85 = man & b86 =flr):flr;
		next(dr) = u & (b85 = man & b75 =flr):flr;
		next(dr) = d & (b85 = man & b95 =flr):flr;


	--target to floor
		next(dr) = l & (b85 = mantrg & b84 =flr): target;
		next(dr) = r & (b85 = mantrg & b86 =flr): target;
		next(dr) = u & (b85 = mantrg & b75 =flr): target;
		next(dr) = d & (b85 = mantrg & b95 =flr): target;

	--floor to target
		next(dr) = l & (b85 = man & b84 = target):flr;
		next(dr) = r & (b85 = man & b86 = target):flr;
		next(dr) = u & (b85 = man & b75 = target):flr;
		next(dr) = d & (b85 = man & b95 = target):flr;

	--target to target
		next(dr) = l & (b85 = mantrg & b84 = target): target;
		next(dr) = r & (b85 = mantrg & b86 = target): target;
		next(dr) = u & (b85 = mantrg & b75 = target): target;
		next(dr) = d & (b85 = mantrg & b95 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b85 = man & b84 = bx) & (b83 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b85 = man & b86 = bx) & (b87 =flr) & (5+2 < n):flr;
		next(dr) = u & (b85 = man & b75 = bx) & (b65 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b85 = man & b84 = bx) & (b83 = target) & (5-2 > 0):flr;
		next(dr) = r & (b85 = man & b86 = bx) & (b87 = target) & (5+2 < n):flr;
		next(dr) = u & (b85 = man & b75 = bx) & (b65 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b85 = man & b84 = bxtrg) & (b83 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b85 = man & b86 = bxtrg) & (b87 =flr) & (5+2 < n):flr;
		next(dr) = u & (b85 = man & b75 = bxtrg) & (b65 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b85 = man & b84 = bxtrg) & (b83 = target) & (5-2 > 0):flr;
		next(dr) = r & (b85 = man & b86 = bxtrg) & (b87 = target) & (5+2 < n):flr;
		next(dr) = u & (b85 = man & b75 = bxtrg) & (b65 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b85 = mantrg & b84 = bx) & (b83 =flr) & (5-2 > 0): target;
		next(dr) = r & (b85 = mantrg & b86 = bx) & (b87 =flr) & (5+2 < n): target;
		next(dr) = u & (b85 = mantrg & b75 = bx) & (b65 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b85 = mantrg & b84 = bx) & (b83 = target) & (5-2 > 0): target;
		next(dr) = r & (b85 = mantrg & b86 = bx) & (b87 = target) & (5+2 < n): target;
		next(dr) = u & (b85 = mantrg & b75 = bx) & (b65 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b85 = mantrg & b84 = bxtrg) & (b83 =flr) & (5-2 > 0): target;
		next(dr) = r & (b85 = mantrg & b86 = bxtrg) & (b87 =flr) & (5+2 < n): target;
		next(dr) = u & (b85 = mantrg & b75 = bxtrg) & (b65 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b85 = mantrg & b84 = bxtrg) & (b83 = target) & (5-2 > 0): target;
		next(dr) = r & (b85 = mantrg & b86 = bxtrg) & (b87 = target) & (5+2 < n): target;
		next(dr) = u & (b85 = mantrg & b75 = bxtrg) & (b65 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b85 = flr & (b84 = man | b84 = mantrg)) : man;
        next(dr) = l & (b85 = flr & (b86 = man | b86 = mantrg)): man;
        next(dr) = d & (b85 = flr & (b75 = man | b75 = mantrg)): man;
        next(dr) = u & (b85 = flr & (b95 = man | b95 = mantrg)): man;

    --box to floor
        next(dr) = r & (b85 = flr & (b84 = bx | b84 = bxtrg)) & (b83 = man | b83 = mantrg): bx;
        next(dr) = l & (b85 = flr & (b86 = bx | b86 = bxtrg)) & (b87 = man | b87 = mantrg): bx;
        next(dr) = d & (b85 = flr & (b75 = bx | b75 = bxtrg)) & (b65 = man | b65 = mantrg): bx;

    --man to target
        next(dr) = r & (b85 = target & (b84 = man | b84 = mantrg)): mantrg;
        next(dr) = l & (b85 = target & (b86 = man | b86 = mantrg)): mantrg;
        next(dr) = d & (b85 = target & (b75 = man | b75 = mantrg)): mantrg;
        next(dr) = u & (b85 = target & (b95 = man | b95 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b85 = target & (b84 = bx | b84 = bxtrg)) & (b83 = man | b83 = mantrg): bxtrg;
        next(dr) = l & (b85 = target & (b86 = bx | b86 = bxtrg)) & (b87 = man | b87 = mantrg): bxtrg;
        next(dr) = d & (b85 = target & (b75 = bx | b75 = bxtrg)) & (b65 = man | b65 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b85 = bx & (b84 = man | b84 = mantrg)) & (b86 = flr | b86 = target): man;
        next(dr) = l & (b85 = bx & (b86 = man | b86 = mantrg)) & (b84 = flr | b84 = target): man;
        next(dr) = d & (b85 = bx & (b75 = man | b75 = mantrg)) & (b95 = flr | b95 = target): man;
        next(dr) = u & (b85 = bx & (b95 = man | b95 = mantrg)) & (b75 = flr | b75 = target): man;

    --man to box on target
        next(dr) = r & (b85 = bxtrg & (b84 = man | b84 = mantrg)) & (b86 = flr | b86 = target): mantrg;
        next(dr) = l & (b85 = bxtrg & (b86 = man | b86 = mantrg)) & (b84 = flr | b84 = target): mantrg;
        next(dr) = d & (b85 = bxtrg & (b75 = man | b75 = mantrg)) & (b95 = flr | b95 = target): mantrg;
        next(dr) = u & (b85 = bxtrg & (b95 = man | b95 = mantrg)) & (b75 = flr | b75 = target): mantrg;

    TRUE: b85;
esac;
next(b86) := case
	--floor to floor
		next(dr) = l & (b86 = man & b85 =flr):flr;
		next(dr) = r & (b86 = man & b87 =flr):flr;
		next(dr) = u & (b86 = man & b76 =flr):flr;
		next(dr) = d & (b86 = man & b96 =flr):flr;


	--target to floor
		next(dr) = l & (b86 = mantrg & b85 =flr): target;
		next(dr) = r & (b86 = mantrg & b87 =flr): target;
		next(dr) = u & (b86 = mantrg & b76 =flr): target;
		next(dr) = d & (b86 = mantrg & b96 =flr): target;

	--floor to target
		next(dr) = l & (b86 = man & b85 = target):flr;
		next(dr) = r & (b86 = man & b87 = target):flr;
		next(dr) = u & (b86 = man & b76 = target):flr;
		next(dr) = d & (b86 = man & b96 = target):flr;

	--target to target
		next(dr) = l & (b86 = mantrg & b85 = target): target;
		next(dr) = r & (b86 = mantrg & b87 = target): target;
		next(dr) = u & (b86 = mantrg & b76 = target): target;
		next(dr) = d & (b86 = mantrg & b96 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b86 = man & b85 = bx) & (b84 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b86 = man & b87 = bx) & (b88 =flr) & (6+2 < n):flr;
		next(dr) = u & (b86 = man & b76 = bx) & (b66 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b86 = man & b85 = bx) & (b84 = target) & (6-2 > 0):flr;
		next(dr) = r & (b86 = man & b87 = bx) & (b88 = target) & (6+2 < n):flr;
		next(dr) = u & (b86 = man & b76 = bx) & (b66 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b86 = man & b85 = bxtrg) & (b84 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b86 = man & b87 = bxtrg) & (b88 =flr) & (6+2 < n):flr;
		next(dr) = u & (b86 = man & b76 = bxtrg) & (b66 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b86 = man & b85 = bxtrg) & (b84 = target) & (6-2 > 0):flr;
		next(dr) = r & (b86 = man & b87 = bxtrg) & (b88 = target) & (6+2 < n):flr;
		next(dr) = u & (b86 = man & b76 = bxtrg) & (b66 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b86 = mantrg & b85 = bx) & (b84 =flr) & (6-2 > 0): target;
		next(dr) = r & (b86 = mantrg & b87 = bx) & (b88 =flr) & (6+2 < n): target;
		next(dr) = u & (b86 = mantrg & b76 = bx) & (b66 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b86 = mantrg & b85 = bx) & (b84 = target) & (6-2 > 0): target;
		next(dr) = r & (b86 = mantrg & b87 = bx) & (b88 = target) & (6+2 < n): target;
		next(dr) = u & (b86 = mantrg & b76 = bx) & (b66 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b86 = mantrg & b85 = bxtrg) & (b84 =flr) & (6-2 > 0): target;
		next(dr) = r & (b86 = mantrg & b87 = bxtrg) & (b88 =flr) & (6+2 < n): target;
		next(dr) = u & (b86 = mantrg & b76 = bxtrg) & (b66 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b86 = mantrg & b85 = bxtrg) & (b84 = target) & (6-2 > 0): target;
		next(dr) = r & (b86 = mantrg & b87 = bxtrg) & (b88 = target) & (6+2 < n): target;
		next(dr) = u & (b86 = mantrg & b76 = bxtrg) & (b66 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b86 = flr & (b85 = man | b85 = mantrg)) : man;
        next(dr) = l & (b86 = flr & (b87 = man | b87 = mantrg)): man;
        next(dr) = d & (b86 = flr & (b76 = man | b76 = mantrg)): man;
        next(dr) = u & (b86 = flr & (b96 = man | b96 = mantrg)): man;

    --box to floor
        next(dr) = r & (b86 = flr & (b85 = bx | b85 = bxtrg)) & (b84 = man | b84 = mantrg): bx;
        next(dr) = l & (b86 = flr & (b87 = bx | b87 = bxtrg)) & (b88 = man | b88 = mantrg): bx;
        next(dr) = d & (b86 = flr & (b76 = bx | b76 = bxtrg)) & (b66 = man | b66 = mantrg): bx;

    --man to target
        next(dr) = r & (b86 = target & (b85 = man | b85 = mantrg)): mantrg;
        next(dr) = l & (b86 = target & (b87 = man | b87 = mantrg)): mantrg;
        next(dr) = d & (b86 = target & (b76 = man | b76 = mantrg)): mantrg;
        next(dr) = u & (b86 = target & (b96 = man | b96 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b86 = target & (b85 = bx | b85 = bxtrg)) & (b84 = man | b84 = mantrg): bxtrg;
        next(dr) = l & (b86 = target & (b87 = bx | b87 = bxtrg)) & (b88 = man | b88 = mantrg): bxtrg;
        next(dr) = d & (b86 = target & (b76 = bx | b76 = bxtrg)) & (b66 = man | b66 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b86 = bx & (b85 = man | b85 = mantrg)) & (b87 = flr | b87 = target): man;
        next(dr) = l & (b86 = bx & (b87 = man | b87 = mantrg)) & (b85 = flr | b85 = target): man;
        next(dr) = d & (b86 = bx & (b76 = man | b76 = mantrg)) & (b96 = flr | b96 = target): man;
        next(dr) = u & (b86 = bx & (b96 = man | b96 = mantrg)) & (b76 = flr | b76 = target): man;

    --man to box on target
        next(dr) = r & (b86 = bxtrg & (b85 = man | b85 = mantrg)) & (b87 = flr | b87 = target): mantrg;
        next(dr) = l & (b86 = bxtrg & (b87 = man | b87 = mantrg)) & (b85 = flr | b85 = target): mantrg;
        next(dr) = d & (b86 = bxtrg & (b76 = man | b76 = mantrg)) & (b96 = flr | b96 = target): mantrg;
        next(dr) = u & (b86 = bxtrg & (b96 = man | b96 = mantrg)) & (b76 = flr | b76 = target): mantrg;

    TRUE: b86;
esac;
next(b87) := case
	--floor to floor
		next(dr) = l & (b87 = man & b86 =flr):flr;
		next(dr) = r & (b87 = man & b88 =flr):flr;
		next(dr) = u & (b87 = man & b77 =flr):flr;
		next(dr) = d & (b87 = man & b97 =flr):flr;


	--target to floor
		next(dr) = l & (b87 = mantrg & b86 =flr): target;
		next(dr) = r & (b87 = mantrg & b88 =flr): target;
		next(dr) = u & (b87 = mantrg & b77 =flr): target;
		next(dr) = d & (b87 = mantrg & b97 =flr): target;

	--floor to target
		next(dr) = l & (b87 = man & b86 = target):flr;
		next(dr) = r & (b87 = man & b88 = target):flr;
		next(dr) = u & (b87 = man & b77 = target):flr;
		next(dr) = d & (b87 = man & b97 = target):flr;

	--target to target
		next(dr) = l & (b87 = mantrg & b86 = target): target;
		next(dr) = r & (b87 = mantrg & b88 = target): target;
		next(dr) = u & (b87 = mantrg & b77 = target): target;
		next(dr) = d & (b87 = mantrg & b97 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b87 = man & b86 = bx) & (b85 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b87 = man & b88 = bx) & (b89 =flr) & (7+2 < n):flr;
		next(dr) = u & (b87 = man & b77 = bx) & (b67 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b87 = man & b86 = bx) & (b85 = target) & (7-2 > 0):flr;
		next(dr) = r & (b87 = man & b88 = bx) & (b89 = target) & (7+2 < n):flr;
		next(dr) = u & (b87 = man & b77 = bx) & (b67 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b87 = man & b86 = bxtrg) & (b85 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b87 = man & b88 = bxtrg) & (b89 =flr) & (7+2 < n):flr;
		next(dr) = u & (b87 = man & b77 = bxtrg) & (b67 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b87 = man & b86 = bxtrg) & (b85 = target) & (7-2 > 0):flr;
		next(dr) = r & (b87 = man & b88 = bxtrg) & (b89 = target) & (7+2 < n):flr;
		next(dr) = u & (b87 = man & b77 = bxtrg) & (b67 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b87 = mantrg & b86 = bx) & (b85 =flr) & (7-2 > 0): target;
		next(dr) = r & (b87 = mantrg & b88 = bx) & (b89 =flr) & (7+2 < n): target;
		next(dr) = u & (b87 = mantrg & b77 = bx) & (b67 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b87 = mantrg & b86 = bx) & (b85 = target) & (7-2 > 0): target;
		next(dr) = r & (b87 = mantrg & b88 = bx) & (b89 = target) & (7+2 < n): target;
		next(dr) = u & (b87 = mantrg & b77 = bx) & (b67 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b87 = mantrg & b86 = bxtrg) & (b85 =flr) & (7-2 > 0): target;
		next(dr) = r & (b87 = mantrg & b88 = bxtrg) & (b89 =flr) & (7+2 < n): target;
		next(dr) = u & (b87 = mantrg & b77 = bxtrg) & (b67 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b87 = mantrg & b86 = bxtrg) & (b85 = target) & (7-2 > 0): target;
		next(dr) = r & (b87 = mantrg & b88 = bxtrg) & (b89 = target) & (7+2 < n): target;
		next(dr) = u & (b87 = mantrg & b77 = bxtrg) & (b67 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b87 = flr & (b86 = man | b86 = mantrg)) : man;
        next(dr) = l & (b87 = flr & (b88 = man | b88 = mantrg)): man;
        next(dr) = d & (b87 = flr & (b77 = man | b77 = mantrg)): man;
        next(dr) = u & (b87 = flr & (b97 = man | b97 = mantrg)): man;

    --box to floor
        next(dr) = r & (b87 = flr & (b86 = bx | b86 = bxtrg)) & (b85 = man | b85 = mantrg): bx;
        next(dr) = l & (b87 = flr & (b88 = bx | b88 = bxtrg)) & (b89 = man | b89 = mantrg): bx;
        next(dr) = d & (b87 = flr & (b77 = bx | b77 = bxtrg)) & (b67 = man | b67 = mantrg): bx;

    --man to target
        next(dr) = r & (b87 = target & (b86 = man | b86 = mantrg)): mantrg;
        next(dr) = l & (b87 = target & (b88 = man | b88 = mantrg)): mantrg;
        next(dr) = d & (b87 = target & (b77 = man | b77 = mantrg)): mantrg;
        next(dr) = u & (b87 = target & (b97 = man | b97 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b87 = target & (b86 = bx | b86 = bxtrg)) & (b85 = man | b85 = mantrg): bxtrg;
        next(dr) = l & (b87 = target & (b88 = bx | b88 = bxtrg)) & (b89 = man | b89 = mantrg): bxtrg;
        next(dr) = d & (b87 = target & (b77 = bx | b77 = bxtrg)) & (b67 = man | b67 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b87 = bx & (b86 = man | b86 = mantrg)) & (b88 = flr | b88 = target): man;
        next(dr) = l & (b87 = bx & (b88 = man | b88 = mantrg)) & (b86 = flr | b86 = target): man;
        next(dr) = d & (b87 = bx & (b77 = man | b77 = mantrg)) & (b97 = flr | b97 = target): man;
        next(dr) = u & (b87 = bx & (b97 = man | b97 = mantrg)) & (b77 = flr | b77 = target): man;

    --man to box on target
        next(dr) = r & (b87 = bxtrg & (b86 = man | b86 = mantrg)) & (b88 = flr | b88 = target): mantrg;
        next(dr) = l & (b87 = bxtrg & (b88 = man | b88 = mantrg)) & (b86 = flr | b86 = target): mantrg;
        next(dr) = d & (b87 = bxtrg & (b77 = man | b77 = mantrg)) & (b97 = flr | b97 = target): mantrg;
        next(dr) = u & (b87 = bxtrg & (b97 = man | b97 = mantrg)) & (b77 = flr | b77 = target): mantrg;

    TRUE: b87;
esac;
next(b88) := case
	--floor to floor
		next(dr) = l & (b88 = man & b87 =flr):flr;
		next(dr) = r & (b88 = man & b89 =flr):flr;
		next(dr) = u & (b88 = man & b78 =flr):flr;
		next(dr) = d & (b88 = man & b98 =flr):flr;


	--target to floor
		next(dr) = l & (b88 = mantrg & b87 =flr): target;
		next(dr) = r & (b88 = mantrg & b89 =flr): target;
		next(dr) = u & (b88 = mantrg & b78 =flr): target;
		next(dr) = d & (b88 = mantrg & b98 =flr): target;

	--floor to target
		next(dr) = l & (b88 = man & b87 = target):flr;
		next(dr) = r & (b88 = man & b89 = target):flr;
		next(dr) = u & (b88 = man & b78 = target):flr;
		next(dr) = d & (b88 = man & b98 = target):flr;

	--target to target
		next(dr) = l & (b88 = mantrg & b87 = target): target;
		next(dr) = r & (b88 = mantrg & b89 = target): target;
		next(dr) = u & (b88 = mantrg & b78 = target): target;
		next(dr) = d & (b88 = mantrg & b98 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b88 = man & b87 = bx) & (b86 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b88 = man & b89 = bx) & (b810 =flr) & (8+2 < n):flr;
		next(dr) = u & (b88 = man & b78 = bx) & (b68 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b88 = man & b87 = bx) & (b86 = target) & (8-2 > 0):flr;
		next(dr) = r & (b88 = man & b89 = bx) & (b810 = target) & (8+2 < n):flr;
		next(dr) = u & (b88 = man & b78 = bx) & (b68 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b88 = man & b87 = bxtrg) & (b86 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b88 = man & b89 = bxtrg) & (b810 =flr) & (8+2 < n):flr;
		next(dr) = u & (b88 = man & b78 = bxtrg) & (b68 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b88 = man & b87 = bxtrg) & (b86 = target) & (8-2 > 0):flr;
		next(dr) = r & (b88 = man & b89 = bxtrg) & (b810 = target) & (8+2 < n):flr;
		next(dr) = u & (b88 = man & b78 = bxtrg) & (b68 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b88 = mantrg & b87 = bx) & (b86 =flr) & (8-2 > 0): target;
		next(dr) = r & (b88 = mantrg & b89 = bx) & (b810 =flr) & (8+2 < n): target;
		next(dr) = u & (b88 = mantrg & b78 = bx) & (b68 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b88 = mantrg & b87 = bx) & (b86 = target) & (8-2 > 0): target;
		next(dr) = r & (b88 = mantrg & b89 = bx) & (b810 = target) & (8+2 < n): target;
		next(dr) = u & (b88 = mantrg & b78 = bx) & (b68 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b88 = mantrg & b87 = bxtrg) & (b86 =flr) & (8-2 > 0): target;
		next(dr) = r & (b88 = mantrg & b89 = bxtrg) & (b810 =flr) & (8+2 < n): target;
		next(dr) = u & (b88 = mantrg & b78 = bxtrg) & (b68 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b88 = mantrg & b87 = bxtrg) & (b86 = target) & (8-2 > 0): target;
		next(dr) = r & (b88 = mantrg & b89 = bxtrg) & (b810 = target) & (8+2 < n): target;
		next(dr) = u & (b88 = mantrg & b78 = bxtrg) & (b68 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b88 = flr & (b87 = man | b87 = mantrg)) : man;
        next(dr) = l & (b88 = flr & (b89 = man | b89 = mantrg)): man;
        next(dr) = d & (b88 = flr & (b78 = man | b78 = mantrg)): man;
        next(dr) = u & (b88 = flr & (b98 = man | b98 = mantrg)): man;

    --box to floor
        next(dr) = r & (b88 = flr & (b87 = bx | b87 = bxtrg)) & (b86 = man | b86 = mantrg): bx;
        next(dr) = l & (b88 = flr & (b89 = bx | b89 = bxtrg)) & (b810 = man | b810 = mantrg): bx;
        next(dr) = d & (b88 = flr & (b78 = bx | b78 = bxtrg)) & (b68 = man | b68 = mantrg): bx;

    --man to target
        next(dr) = r & (b88 = target & (b87 = man | b87 = mantrg)): mantrg;
        next(dr) = l & (b88 = target & (b89 = man | b89 = mantrg)): mantrg;
        next(dr) = d & (b88 = target & (b78 = man | b78 = mantrg)): mantrg;
        next(dr) = u & (b88 = target & (b98 = man | b98 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b88 = target & (b87 = bx | b87 = bxtrg)) & (b86 = man | b86 = mantrg): bxtrg;
        next(dr) = l & (b88 = target & (b89 = bx | b89 = bxtrg)) & (b810 = man | b810 = mantrg): bxtrg;
        next(dr) = d & (b88 = target & (b78 = bx | b78 = bxtrg)) & (b68 = man | b68 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b88 = bx & (b87 = man | b87 = mantrg)) & (b89 = flr | b89 = target): man;
        next(dr) = l & (b88 = bx & (b89 = man | b89 = mantrg)) & (b87 = flr | b87 = target): man;
        next(dr) = d & (b88 = bx & (b78 = man | b78 = mantrg)) & (b98 = flr | b98 = target): man;
        next(dr) = u & (b88 = bx & (b98 = man | b98 = mantrg)) & (b78 = flr | b78 = target): man;

    --man to box on target
        next(dr) = r & (b88 = bxtrg & (b87 = man | b87 = mantrg)) & (b89 = flr | b89 = target): mantrg;
        next(dr) = l & (b88 = bxtrg & (b89 = man | b89 = mantrg)) & (b87 = flr | b87 = target): mantrg;
        next(dr) = d & (b88 = bxtrg & (b78 = man | b78 = mantrg)) & (b98 = flr | b98 = target): mantrg;
        next(dr) = u & (b88 = bxtrg & (b98 = man | b98 = mantrg)) & (b78 = flr | b78 = target): mantrg;

    TRUE: b88;
esac;
next(b89) := case
	--floor to floor
		next(dr) = l & (b89 = man & b88 =flr):flr;
		next(dr) = r & (b89 = man & b810 =flr):flr;
		next(dr) = u & (b89 = man & b79 =flr):flr;
		next(dr) = d & (b89 = man & b99 =flr):flr;


	--target to floor
		next(dr) = l & (b89 = mantrg & b88 =flr): target;
		next(dr) = r & (b89 = mantrg & b810 =flr): target;
		next(dr) = u & (b89 = mantrg & b79 =flr): target;
		next(dr) = d & (b89 = mantrg & b99 =flr): target;

	--floor to target
		next(dr) = l & (b89 = man & b88 = target):flr;
		next(dr) = r & (b89 = man & b810 = target):flr;
		next(dr) = u & (b89 = man & b79 = target):flr;
		next(dr) = d & (b89 = man & b99 = target):flr;

	--target to target
		next(dr) = l & (b89 = mantrg & b88 = target): target;
		next(dr) = r & (b89 = mantrg & b810 = target): target;
		next(dr) = u & (b89 = mantrg & b79 = target): target;
		next(dr) = d & (b89 = mantrg & b99 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b89 = man & b88 = bx) & (b87 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b89 = man & b79 = bx) & (b69 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b89 = man & b88 = bx) & (b87 = target) & (9-2 > 0):flr;
		next(dr) = u & (b89 = man & b79 = bx) & (b69 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b89 = man & b88 = bxtrg) & (b87 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b89 = man & b79 = bxtrg) & (b69 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b89 = man & b88 = bxtrg) & (b87 = target) & (9-2 > 0):flr;
		next(dr) = u & (b89 = man & b79 = bxtrg) & (b69 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b89 = mantrg & b88 = bx) & (b87 =flr) & (9-2 > 0): target;
		next(dr) = u & (b89 = mantrg & b79 = bx) & (b69 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b89 = mantrg & b88 = bx) & (b87 = target) & (9-2 > 0): target;
		next(dr) = u & (b89 = mantrg & b79 = bx) & (b69 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b89 = mantrg & b88 = bxtrg) & (b87 =flr) & (9-2 > 0): target;
		next(dr) = u & (b89 = mantrg & b79 = bxtrg) & (b69 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b89 = mantrg & b88 = bxtrg) & (b87 = target) & (9-2 > 0): target;
		next(dr) = u & (b89 = mantrg & b79 = bxtrg) & (b69 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b89 = flr & (b88 = man | b88 = mantrg)) : man;
        next(dr) = l & (b89 = flr & (b810 = man | b810 = mantrg)): man;
        next(dr) = d & (b89 = flr & (b79 = man | b79 = mantrg)): man;
        next(dr) = u & (b89 = flr & (b99 = man | b99 = mantrg)): man;

    --box to floor
        next(dr) = r & (b89 = flr & (b88 = bx | b88 = bxtrg)) & (b87 = man | b87 = mantrg): bx;
        next(dr) = d & (b89 = flr & (b79 = bx | b79 = bxtrg)) & (b69 = man | b69 = mantrg): bx;

    --man to target
        next(dr) = r & (b89 = target & (b88 = man | b88 = mantrg)): mantrg;
        next(dr) = l & (b89 = target & (b810 = man | b810 = mantrg)): mantrg;
        next(dr) = d & (b89 = target & (b79 = man | b79 = mantrg)): mantrg;
        next(dr) = u & (b89 = target & (b99 = man | b99 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b89 = target & (b88 = bx | b88 = bxtrg)) & (b87 = man | b87 = mantrg): bxtrg;
        next(dr) = d & (b89 = target & (b79 = bx | b79 = bxtrg)) & (b69 = man | b69 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b89 = bx & (b88 = man | b88 = mantrg)) & (b810 = flr | b810 = target): man;
        next(dr) = l & (b89 = bx & (b810 = man | b810 = mantrg)) & (b88 = flr | b88 = target): man;
        next(dr) = d & (b89 = bx & (b79 = man | b79 = mantrg)) & (b99 = flr | b99 = target): man;
        next(dr) = u & (b89 = bx & (b99 = man | b99 = mantrg)) & (b79 = flr | b79 = target): man;

    --man to box on target
        next(dr) = r & (b89 = bxtrg & (b88 = man | b88 = mantrg)) & (b810 = flr | b810 = target): mantrg;
        next(dr) = l & (b89 = bxtrg & (b810 = man | b810 = mantrg)) & (b88 = flr | b88 = target): mantrg;
        next(dr) = d & (b89 = bxtrg & (b79 = man | b79 = mantrg)) & (b99 = flr | b99 = target): mantrg;
        next(dr) = u & (b89 = bxtrg & (b99 = man | b99 = mantrg)) & (b79 = flr | b79 = target): mantrg;

    TRUE: b89;
esac;
next(b810) := case
	--floor to floor
		next(dr) = l & (b810 = man & b89 =flr):flr;
		next(dr) = u & (b810 = man & b710 =flr):flr;
		next(dr) = d & (b810 = man & b910 =flr):flr;


	--target to floor
		next(dr) = l & (b810 = mantrg & b89 =flr): target;
		next(dr) = u & (b810 = mantrg & b710 =flr): target;
		next(dr) = d & (b810 = mantrg & b910 =flr): target;

	--floor to target
		next(dr) = l & (b810 = man & b89 = target):flr;
		next(dr) = u & (b810 = man & b710 = target):flr;
		next(dr) = d & (b810 = man & b910 = target):flr;

	--target to target
		next(dr) = l & (b810 = mantrg & b89 = target): target;
		next(dr) = u & (b810 = mantrg & b710 = target): target;
		next(dr) = d & (b810 = mantrg & b910 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b810 = man & b89 = bx) & (b88 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b810 = man & b710 = bx) & (b610 =flr) & (8-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b810 = man & b89 = bx) & (b88 = target) & (10-2 > 0):flr;
		next(dr) = u & (b810 = man & b710 = bx) & (b610 = target) & (8-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b810 = man & b89 = bxtrg) & (b88 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b810 = man & b710 = bxtrg) & (b610 =flr) & (8-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b810 = man & b89 = bxtrg) & (b88 = target) & (10-2 > 0):flr;
		next(dr) = u & (b810 = man & b710 = bxtrg) & (b610 = target) & (8-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b810 = mantrg & b89 = bx) & (b88 =flr) & (10-2 > 0): target;
		next(dr) = u & (b810 = mantrg & b710 = bx) & (b610 =flr) & (8-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b810 = mantrg & b89 = bx) & (b88 = target) & (10-2 > 0): target;
		next(dr) = u & (b810 = mantrg & b710 = bx) & (b610 = target) & (8-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b810 = mantrg & b89 = bxtrg) & (b88 =flr) & (10-2 > 0): target;
		next(dr) = u & (b810 = mantrg & b710 = bxtrg) & (b610 =flr) & (8-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b810 = mantrg & b89 = bxtrg) & (b88 = target) & (10-2 > 0): target;
		next(dr) = u & (b810 = mantrg & b710 = bxtrg) & (b610 = target) & (8-2 > 0): target;

    --man to floor
        next(dr) = r & (b810 = flr & (b89 = man | b89 = mantrg)) : man;
        next(dr) = d & (b810 = flr & (b710 = man | b710 = mantrg)): man;
        next(dr) = u & (b810 = flr & (b910 = man | b910 = mantrg)): man;

    --box to floor
        next(dr) = r & (b810 = flr & (b89 = bx | b89 = bxtrg)) & (b88 = man | b88 = mantrg): bx;
        next(dr) = d & (b810 = flr & (b710 = bx | b710 = bxtrg)) & (b610 = man | b610 = mantrg): bx;

    --man to target
        next(dr) = r & (b810 = target & (b89 = man | b89 = mantrg)): mantrg;
        next(dr) = d & (b810 = target & (b710 = man | b710 = mantrg)): mantrg;
        next(dr) = u & (b810 = target & (b910 = man | b910 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b810 = target & (b89 = bx | b89 = bxtrg)) & (b88 = man | b88 = mantrg): bxtrg;
        next(dr) = d & (b810 = target & (b710 = bx | b710 = bxtrg)) & (b610 = man | b610 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b810 = bx & (b710 = man | b710 = mantrg)) & (b910 = flr | b910 = target): man;
        next(dr) = u & (b810 = bx & (b910 = man | b910 = mantrg)) & (b710 = flr | b710 = target): man;

    --man to box on target
        next(dr) = d & (b810 = bxtrg & (b710 = man | b710 = mantrg)) & (b910 = flr | b910 = target): mantrg;
        next(dr) = u & (b810 = bxtrg & (b910 = man | b910 = mantrg)) & (b710 = flr | b710 = target): mantrg;

    TRUE: b810;
esac;
next(b90) := case
	--floor to floor
		next(dr) = r & (b90 = man & b91 =flr):flr;
		next(dr) = u & (b90 = man & b80 =flr):flr;


	--target to floor
		next(dr) = r & (b90 = mantrg & b91 =flr): target;
		next(dr) = u & (b90 = mantrg & b80 =flr): target;

	--floor to target
		next(dr) = r & (b90 = man & b91 = target):flr;
		next(dr) = u & (b90 = man & b80 = target):flr;

	--target to target
		next(dr) = r & (b90 = mantrg & b91 = target): target;
		next(dr) = u & (b90 = mantrg & b80 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b90 = man & b91 = bx) & (b92 =flr) & (0+2 < n):flr;
		next(dr) = u & (b90 = man & b80 = bx) & (b70 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = r & (b90 = man & b91 = bx) & (b92 = target) & (0+2 < n):flr;
		next(dr) = u & (b90 = man & b80 = bx) & (b70 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = r & (b90 = man & b91 = bxtrg) & (b92 =flr) & (0+2 < n):flr;
		next(dr) = u & (b90 = man & b80 = bxtrg) & (b70 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = r & (b90 = man & b91 = bxtrg) & (b92 = target) & (0+2 < n):flr;
		next(dr) = u & (b90 = man & b80 = bxtrg) & (b70 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = r & (b90 = mantrg & b91 = bx) & (b92 =flr) & (0+2 < n): target;
		next(dr) = u & (b90 = mantrg & b80 = bx) & (b70 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = r & (b90 = mantrg & b91 = bx) & (b92 = target) & (0+2 < n): target;
		next(dr) = u & (b90 = mantrg & b80 = bx) & (b70 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = r & (b90 = mantrg & b91 = bxtrg) & (b92 =flr) & (0+2 < n): target;
		next(dr) = u & (b90 = mantrg & b80 = bxtrg) & (b70 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = r & (b90 = mantrg & b91 = bxtrg) & (b92 = target) & (0+2 < n): target;
		next(dr) = u & (b90 = mantrg & b80 = bxtrg) & (b70 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = l & (b90 = flr & (b91 = man | b91 = mantrg)): man;
        next(dr) = d & (b90 = flr & (b80 = man | b80 = mantrg)): man;

    --box to floor
        next(dr) = l & (b90 = flr & (b91 = bx | b91 = bxtrg)) & (b92 = man | b92 = mantrg): bx;
        next(dr) = d & (b90 = flr & (b80 = bx | b80 = bxtrg)) & (b70 = man | b70 = mantrg): bx;

    --man to target
        next(dr) = l & (b90 = target & (b91 = man | b91 = mantrg)): mantrg;
        next(dr) = d & (b90 = target & (b80 = man | b80 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b90 = target & (b91 = bx | b91 = bxtrg)) & (b92 = man | b92 = mantrg): bxtrg;
        next(dr) = d & (b90 = target & (b80 = bx | b80 = bxtrg)) & (b70 = man | b70 = mantrg): bxtrg;

    --man to box

    --man to box on target

    TRUE: b90;
esac;
next(b91) := case
	--floor to floor
		next(dr) = l & (b91 = man & b90 =flr):flr;
		next(dr) = r & (b91 = man & b92 =flr):flr;
		next(dr) = u & (b91 = man & b81 =flr):flr;


	--target to floor
		next(dr) = l & (b91 = mantrg & b90 =flr): target;
		next(dr) = r & (b91 = mantrg & b92 =flr): target;
		next(dr) = u & (b91 = mantrg & b81 =flr): target;

	--floor to target
		next(dr) = l & (b91 = man & b90 = target):flr;
		next(dr) = r & (b91 = man & b92 = target):flr;
		next(dr) = u & (b91 = man & b81 = target):flr;

	--target to target
		next(dr) = l & (b91 = mantrg & b90 = target): target;
		next(dr) = r & (b91 = mantrg & b92 = target): target;
		next(dr) = u & (b91 = mantrg & b81 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b91 = man & b92 = bx) & (b93 =flr) & (1+2 < n):flr;
		next(dr) = u & (b91 = man & b81 = bx) & (b71 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = r & (b91 = man & b92 = bx) & (b93 = target) & (1+2 < n):flr;
		next(dr) = u & (b91 = man & b81 = bx) & (b71 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = r & (b91 = man & b92 = bxtrg) & (b93 =flr) & (1+2 < n):flr;
		next(dr) = u & (b91 = man & b81 = bxtrg) & (b71 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = r & (b91 = man & b92 = bxtrg) & (b93 = target) & (1+2 < n):flr;
		next(dr) = u & (b91 = man & b81 = bxtrg) & (b71 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = r & (b91 = mantrg & b92 = bx) & (b93 =flr) & (1+2 < n): target;
		next(dr) = u & (b91 = mantrg & b81 = bx) & (b71 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = r & (b91 = mantrg & b92 = bx) & (b93 = target) & (1+2 < n): target;
		next(dr) = u & (b91 = mantrg & b81 = bx) & (b71 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = r & (b91 = mantrg & b92 = bxtrg) & (b93 =flr) & (1+2 < n): target;
		next(dr) = u & (b91 = mantrg & b81 = bxtrg) & (b71 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = r & (b91 = mantrg & b92 = bxtrg) & (b93 = target) & (1+2 < n): target;
		next(dr) = u & (b91 = mantrg & b81 = bxtrg) & (b71 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b91 = flr & (b90 = man | b90 = mantrg)) : man;
        next(dr) = l & (b91 = flr & (b92 = man | b92 = mantrg)): man;
        next(dr) = d & (b91 = flr & (b81 = man | b81 = mantrg)): man;

    --box to floor
        next(dr) = l & (b91 = flr & (b92 = bx | b92 = bxtrg)) & (b93 = man | b93 = mantrg): bx;
        next(dr) = d & (b91 = flr & (b81 = bx | b81 = bxtrg)) & (b71 = man | b71 = mantrg): bx;

    --man to target
        next(dr) = r & (b91 = target & (b90 = man | b90 = mantrg)): mantrg;
        next(dr) = l & (b91 = target & (b92 = man | b92 = mantrg)): mantrg;
        next(dr) = d & (b91 = target & (b81 = man | b81 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b91 = target & (b92 = bx | b92 = bxtrg)) & (b93 = man | b93 = mantrg): bxtrg;
        next(dr) = d & (b91 = target & (b81 = bx | b81 = bxtrg)) & (b71 = man | b71 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b91 = bx & (b90 = man | b90 = mantrg)) & (b92 = flr | b92 = target): man;
        next(dr) = l & (b91 = bx & (b92 = man | b92 = mantrg)) & (b90 = flr | b90 = target): man;

    --man to box on target
        next(dr) = r & (b91 = bxtrg & (b90 = man | b90 = mantrg)) & (b92 = flr | b92 = target): mantrg;
        next(dr) = l & (b91 = bxtrg & (b92 = man | b92 = mantrg)) & (b90 = flr | b90 = target): mantrg;

    TRUE: b91;
esac;
next(b92) := case
	--floor to floor
		next(dr) = l & (b92 = man & b91 =flr):flr;
		next(dr) = r & (b92 = man & b93 =flr):flr;
		next(dr) = u & (b92 = man & b82 =flr):flr;


	--target to floor
		next(dr) = l & (b92 = mantrg & b91 =flr): target;
		next(dr) = r & (b92 = mantrg & b93 =flr): target;
		next(dr) = u & (b92 = mantrg & b82 =flr): target;

	--floor to target
		next(dr) = l & (b92 = man & b91 = target):flr;
		next(dr) = r & (b92 = man & b93 = target):flr;
		next(dr) = u & (b92 = man & b82 = target):flr;

	--target to target
		next(dr) = l & (b92 = mantrg & b91 = target): target;
		next(dr) = r & (b92 = mantrg & b93 = target): target;
		next(dr) = u & (b92 = mantrg & b82 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b92 = man & b91 = bx) & (b90 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b92 = man & b93 = bx) & (b94 =flr) & (2+2 < n):flr;
		next(dr) = u & (b92 = man & b82 = bx) & (b72 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b92 = man & b91 = bx) & (b90 = target) & (2-2 > 0):flr;
		next(dr) = r & (b92 = man & b93 = bx) & (b94 = target) & (2+2 < n):flr;
		next(dr) = u & (b92 = man & b82 = bx) & (b72 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b92 = man & b91 = bxtrg) & (b90 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b92 = man & b93 = bxtrg) & (b94 =flr) & (2+2 < n):flr;
		next(dr) = u & (b92 = man & b82 = bxtrg) & (b72 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b92 = man & b91 = bxtrg) & (b90 = target) & (2-2 > 0):flr;
		next(dr) = r & (b92 = man & b93 = bxtrg) & (b94 = target) & (2+2 < n):flr;
		next(dr) = u & (b92 = man & b82 = bxtrg) & (b72 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b92 = mantrg & b91 = bx) & (b90 =flr) & (2-2 > 0): target;
		next(dr) = r & (b92 = mantrg & b93 = bx) & (b94 =flr) & (2+2 < n): target;
		next(dr) = u & (b92 = mantrg & b82 = bx) & (b72 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b92 = mantrg & b91 = bx) & (b90 = target) & (2-2 > 0): target;
		next(dr) = r & (b92 = mantrg & b93 = bx) & (b94 = target) & (2+2 < n): target;
		next(dr) = u & (b92 = mantrg & b82 = bx) & (b72 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b92 = mantrg & b91 = bxtrg) & (b90 =flr) & (2-2 > 0): target;
		next(dr) = r & (b92 = mantrg & b93 = bxtrg) & (b94 =flr) & (2+2 < n): target;
		next(dr) = u & (b92 = mantrg & b82 = bxtrg) & (b72 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b92 = mantrg & b91 = bxtrg) & (b90 = target) & (2-2 > 0): target;
		next(dr) = r & (b92 = mantrg & b93 = bxtrg) & (b94 = target) & (2+2 < n): target;
		next(dr) = u & (b92 = mantrg & b82 = bxtrg) & (b72 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b92 = flr & (b91 = man | b91 = mantrg)) : man;
        next(dr) = l & (b92 = flr & (b93 = man | b93 = mantrg)): man;
        next(dr) = d & (b92 = flr & (b82 = man | b82 = mantrg)): man;

    --box to floor
        next(dr) = r & (b92 = flr & (b91 = bx | b91 = bxtrg)) & (b90 = man | b90 = mantrg): bx;
        next(dr) = l & (b92 = flr & (b93 = bx | b93 = bxtrg)) & (b94 = man | b94 = mantrg): bx;
        next(dr) = d & (b92 = flr & (b82 = bx | b82 = bxtrg)) & (b72 = man | b72 = mantrg): bx;

    --man to target
        next(dr) = r & (b92 = target & (b91 = man | b91 = mantrg)): mantrg;
        next(dr) = l & (b92 = target & (b93 = man | b93 = mantrg)): mantrg;
        next(dr) = d & (b92 = target & (b82 = man | b82 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b92 = target & (b91 = bx | b91 = bxtrg)) & (b90 = man | b90 = mantrg): bxtrg;
        next(dr) = l & (b92 = target & (b93 = bx | b93 = bxtrg)) & (b94 = man | b94 = mantrg): bxtrg;
        next(dr) = d & (b92 = target & (b82 = bx | b82 = bxtrg)) & (b72 = man | b72 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b92 = bx & (b91 = man | b91 = mantrg)) & (b93 = flr | b93 = target): man;
        next(dr) = l & (b92 = bx & (b93 = man | b93 = mantrg)) & (b91 = flr | b91 = target): man;

    --man to box on target
        next(dr) = r & (b92 = bxtrg & (b91 = man | b91 = mantrg)) & (b93 = flr | b93 = target): mantrg;
        next(dr) = l & (b92 = bxtrg & (b93 = man | b93 = mantrg)) & (b91 = flr | b91 = target): mantrg;

    TRUE: b92;
esac;
next(b93) := case
	--floor to floor
		next(dr) = l & (b93 = man & b92 =flr):flr;
		next(dr) = r & (b93 = man & b94 =flr):flr;
		next(dr) = u & (b93 = man & b83 =flr):flr;


	--target to floor
		next(dr) = l & (b93 = mantrg & b92 =flr): target;
		next(dr) = r & (b93 = mantrg & b94 =flr): target;
		next(dr) = u & (b93 = mantrg & b83 =flr): target;

	--floor to target
		next(dr) = l & (b93 = man & b92 = target):flr;
		next(dr) = r & (b93 = man & b94 = target):flr;
		next(dr) = u & (b93 = man & b83 = target):flr;

	--target to target
		next(dr) = l & (b93 = mantrg & b92 = target): target;
		next(dr) = r & (b93 = mantrg & b94 = target): target;
		next(dr) = u & (b93 = mantrg & b83 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b93 = man & b92 = bx) & (b91 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b93 = man & b94 = bx) & (b95 =flr) & (3+2 < n):flr;
		next(dr) = u & (b93 = man & b83 = bx) & (b73 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b93 = man & b92 = bx) & (b91 = target) & (3-2 > 0):flr;
		next(dr) = r & (b93 = man & b94 = bx) & (b95 = target) & (3+2 < n):flr;
		next(dr) = u & (b93 = man & b83 = bx) & (b73 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b93 = man & b92 = bxtrg) & (b91 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b93 = man & b94 = bxtrg) & (b95 =flr) & (3+2 < n):flr;
		next(dr) = u & (b93 = man & b83 = bxtrg) & (b73 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b93 = man & b92 = bxtrg) & (b91 = target) & (3-2 > 0):flr;
		next(dr) = r & (b93 = man & b94 = bxtrg) & (b95 = target) & (3+2 < n):flr;
		next(dr) = u & (b93 = man & b83 = bxtrg) & (b73 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b93 = mantrg & b92 = bx) & (b91 =flr) & (3-2 > 0): target;
		next(dr) = r & (b93 = mantrg & b94 = bx) & (b95 =flr) & (3+2 < n): target;
		next(dr) = u & (b93 = mantrg & b83 = bx) & (b73 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b93 = mantrg & b92 = bx) & (b91 = target) & (3-2 > 0): target;
		next(dr) = r & (b93 = mantrg & b94 = bx) & (b95 = target) & (3+2 < n): target;
		next(dr) = u & (b93 = mantrg & b83 = bx) & (b73 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b93 = mantrg & b92 = bxtrg) & (b91 =flr) & (3-2 > 0): target;
		next(dr) = r & (b93 = mantrg & b94 = bxtrg) & (b95 =flr) & (3+2 < n): target;
		next(dr) = u & (b93 = mantrg & b83 = bxtrg) & (b73 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b93 = mantrg & b92 = bxtrg) & (b91 = target) & (3-2 > 0): target;
		next(dr) = r & (b93 = mantrg & b94 = bxtrg) & (b95 = target) & (3+2 < n): target;
		next(dr) = u & (b93 = mantrg & b83 = bxtrg) & (b73 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b93 = flr & (b92 = man | b92 = mantrg)) : man;
        next(dr) = l & (b93 = flr & (b94 = man | b94 = mantrg)): man;
        next(dr) = d & (b93 = flr & (b83 = man | b83 = mantrg)): man;

    --box to floor
        next(dr) = r & (b93 = flr & (b92 = bx | b92 = bxtrg)) & (b91 = man | b91 = mantrg): bx;
        next(dr) = l & (b93 = flr & (b94 = bx | b94 = bxtrg)) & (b95 = man | b95 = mantrg): bx;
        next(dr) = d & (b93 = flr & (b83 = bx | b83 = bxtrg)) & (b73 = man | b73 = mantrg): bx;

    --man to target
        next(dr) = r & (b93 = target & (b92 = man | b92 = mantrg)): mantrg;
        next(dr) = l & (b93 = target & (b94 = man | b94 = mantrg)): mantrg;
        next(dr) = d & (b93 = target & (b83 = man | b83 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b93 = target & (b92 = bx | b92 = bxtrg)) & (b91 = man | b91 = mantrg): bxtrg;
        next(dr) = l & (b93 = target & (b94 = bx | b94 = bxtrg)) & (b95 = man | b95 = mantrg): bxtrg;
        next(dr) = d & (b93 = target & (b83 = bx | b83 = bxtrg)) & (b73 = man | b73 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b93 = bx & (b92 = man | b92 = mantrg)) & (b94 = flr | b94 = target): man;
        next(dr) = l & (b93 = bx & (b94 = man | b94 = mantrg)) & (b92 = flr | b92 = target): man;

    --man to box on target
        next(dr) = r & (b93 = bxtrg & (b92 = man | b92 = mantrg)) & (b94 = flr | b94 = target): mantrg;
        next(dr) = l & (b93 = bxtrg & (b94 = man | b94 = mantrg)) & (b92 = flr | b92 = target): mantrg;

    TRUE: b93;
esac;
next(b94) := case
	--floor to floor
		next(dr) = l & (b94 = man & b93 =flr):flr;
		next(dr) = r & (b94 = man & b95 =flr):flr;
		next(dr) = u & (b94 = man & b84 =flr):flr;


	--target to floor
		next(dr) = l & (b94 = mantrg & b93 =flr): target;
		next(dr) = r & (b94 = mantrg & b95 =flr): target;
		next(dr) = u & (b94 = mantrg & b84 =flr): target;

	--floor to target
		next(dr) = l & (b94 = man & b93 = target):flr;
		next(dr) = r & (b94 = man & b95 = target):flr;
		next(dr) = u & (b94 = man & b84 = target):flr;

	--target to target
		next(dr) = l & (b94 = mantrg & b93 = target): target;
		next(dr) = r & (b94 = mantrg & b95 = target): target;
		next(dr) = u & (b94 = mantrg & b84 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b94 = man & b93 = bx) & (b92 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b94 = man & b95 = bx) & (b96 =flr) & (4+2 < n):flr;
		next(dr) = u & (b94 = man & b84 = bx) & (b74 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b94 = man & b93 = bx) & (b92 = target) & (4-2 > 0):flr;
		next(dr) = r & (b94 = man & b95 = bx) & (b96 = target) & (4+2 < n):flr;
		next(dr) = u & (b94 = man & b84 = bx) & (b74 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b94 = man & b93 = bxtrg) & (b92 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b94 = man & b95 = bxtrg) & (b96 =flr) & (4+2 < n):flr;
		next(dr) = u & (b94 = man & b84 = bxtrg) & (b74 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b94 = man & b93 = bxtrg) & (b92 = target) & (4-2 > 0):flr;
		next(dr) = r & (b94 = man & b95 = bxtrg) & (b96 = target) & (4+2 < n):flr;
		next(dr) = u & (b94 = man & b84 = bxtrg) & (b74 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b94 = mantrg & b93 = bx) & (b92 =flr) & (4-2 > 0): target;
		next(dr) = r & (b94 = mantrg & b95 = bx) & (b96 =flr) & (4+2 < n): target;
		next(dr) = u & (b94 = mantrg & b84 = bx) & (b74 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b94 = mantrg & b93 = bx) & (b92 = target) & (4-2 > 0): target;
		next(dr) = r & (b94 = mantrg & b95 = bx) & (b96 = target) & (4+2 < n): target;
		next(dr) = u & (b94 = mantrg & b84 = bx) & (b74 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b94 = mantrg & b93 = bxtrg) & (b92 =flr) & (4-2 > 0): target;
		next(dr) = r & (b94 = mantrg & b95 = bxtrg) & (b96 =flr) & (4+2 < n): target;
		next(dr) = u & (b94 = mantrg & b84 = bxtrg) & (b74 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b94 = mantrg & b93 = bxtrg) & (b92 = target) & (4-2 > 0): target;
		next(dr) = r & (b94 = mantrg & b95 = bxtrg) & (b96 = target) & (4+2 < n): target;
		next(dr) = u & (b94 = mantrg & b84 = bxtrg) & (b74 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b94 = flr & (b93 = man | b93 = mantrg)) : man;
        next(dr) = l & (b94 = flr & (b95 = man | b95 = mantrg)): man;
        next(dr) = d & (b94 = flr & (b84 = man | b84 = mantrg)): man;

    --box to floor
        next(dr) = r & (b94 = flr & (b93 = bx | b93 = bxtrg)) & (b92 = man | b92 = mantrg): bx;
        next(dr) = l & (b94 = flr & (b95 = bx | b95 = bxtrg)) & (b96 = man | b96 = mantrg): bx;
        next(dr) = d & (b94 = flr & (b84 = bx | b84 = bxtrg)) & (b74 = man | b74 = mantrg): bx;

    --man to target
        next(dr) = r & (b94 = target & (b93 = man | b93 = mantrg)): mantrg;
        next(dr) = l & (b94 = target & (b95 = man | b95 = mantrg)): mantrg;
        next(dr) = d & (b94 = target & (b84 = man | b84 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b94 = target & (b93 = bx | b93 = bxtrg)) & (b92 = man | b92 = mantrg): bxtrg;
        next(dr) = l & (b94 = target & (b95 = bx | b95 = bxtrg)) & (b96 = man | b96 = mantrg): bxtrg;
        next(dr) = d & (b94 = target & (b84 = bx | b84 = bxtrg)) & (b74 = man | b74 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b94 = bx & (b93 = man | b93 = mantrg)) & (b95 = flr | b95 = target): man;
        next(dr) = l & (b94 = bx & (b95 = man | b95 = mantrg)) & (b93 = flr | b93 = target): man;

    --man to box on target
        next(dr) = r & (b94 = bxtrg & (b93 = man | b93 = mantrg)) & (b95 = flr | b95 = target): mantrg;
        next(dr) = l & (b94 = bxtrg & (b95 = man | b95 = mantrg)) & (b93 = flr | b93 = target): mantrg;

    TRUE: b94;
esac;
next(b95) := case
	--floor to floor
		next(dr) = l & (b95 = man & b94 =flr):flr;
		next(dr) = r & (b95 = man & b96 =flr):flr;
		next(dr) = u & (b95 = man & b85 =flr):flr;


	--target to floor
		next(dr) = l & (b95 = mantrg & b94 =flr): target;
		next(dr) = r & (b95 = mantrg & b96 =flr): target;
		next(dr) = u & (b95 = mantrg & b85 =flr): target;

	--floor to target
		next(dr) = l & (b95 = man & b94 = target):flr;
		next(dr) = r & (b95 = man & b96 = target):flr;
		next(dr) = u & (b95 = man & b85 = target):flr;

	--target to target
		next(dr) = l & (b95 = mantrg & b94 = target): target;
		next(dr) = r & (b95 = mantrg & b96 = target): target;
		next(dr) = u & (b95 = mantrg & b85 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b95 = man & b94 = bx) & (b93 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b95 = man & b96 = bx) & (b97 =flr) & (5+2 < n):flr;
		next(dr) = u & (b95 = man & b85 = bx) & (b75 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b95 = man & b94 = bx) & (b93 = target) & (5-2 > 0):flr;
		next(dr) = r & (b95 = man & b96 = bx) & (b97 = target) & (5+2 < n):flr;
		next(dr) = u & (b95 = man & b85 = bx) & (b75 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b95 = man & b94 = bxtrg) & (b93 =flr) & (5-2 > 0):flr;
		next(dr) = r & (b95 = man & b96 = bxtrg) & (b97 =flr) & (5+2 < n):flr;
		next(dr) = u & (b95 = man & b85 = bxtrg) & (b75 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b95 = man & b94 = bxtrg) & (b93 = target) & (5-2 > 0):flr;
		next(dr) = r & (b95 = man & b96 = bxtrg) & (b97 = target) & (5+2 < n):flr;
		next(dr) = u & (b95 = man & b85 = bxtrg) & (b75 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b95 = mantrg & b94 = bx) & (b93 =flr) & (5-2 > 0): target;
		next(dr) = r & (b95 = mantrg & b96 = bx) & (b97 =flr) & (5+2 < n): target;
		next(dr) = u & (b95 = mantrg & b85 = bx) & (b75 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b95 = mantrg & b94 = bx) & (b93 = target) & (5-2 > 0): target;
		next(dr) = r & (b95 = mantrg & b96 = bx) & (b97 = target) & (5+2 < n): target;
		next(dr) = u & (b95 = mantrg & b85 = bx) & (b75 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b95 = mantrg & b94 = bxtrg) & (b93 =flr) & (5-2 > 0): target;
		next(dr) = r & (b95 = mantrg & b96 = bxtrg) & (b97 =flr) & (5+2 < n): target;
		next(dr) = u & (b95 = mantrg & b85 = bxtrg) & (b75 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b95 = mantrg & b94 = bxtrg) & (b93 = target) & (5-2 > 0): target;
		next(dr) = r & (b95 = mantrg & b96 = bxtrg) & (b97 = target) & (5+2 < n): target;
		next(dr) = u & (b95 = mantrg & b85 = bxtrg) & (b75 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b95 = flr & (b94 = man | b94 = mantrg)) : man;
        next(dr) = l & (b95 = flr & (b96 = man | b96 = mantrg)): man;
        next(dr) = d & (b95 = flr & (b85 = man | b85 = mantrg)): man;

    --box to floor
        next(dr) = r & (b95 = flr & (b94 = bx | b94 = bxtrg)) & (b93 = man | b93 = mantrg): bx;
        next(dr) = l & (b95 = flr & (b96 = bx | b96 = bxtrg)) & (b97 = man | b97 = mantrg): bx;
        next(dr) = d & (b95 = flr & (b85 = bx | b85 = bxtrg)) & (b75 = man | b75 = mantrg): bx;

    --man to target
        next(dr) = r & (b95 = target & (b94 = man | b94 = mantrg)): mantrg;
        next(dr) = l & (b95 = target & (b96 = man | b96 = mantrg)): mantrg;
        next(dr) = d & (b95 = target & (b85 = man | b85 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b95 = target & (b94 = bx | b94 = bxtrg)) & (b93 = man | b93 = mantrg): bxtrg;
        next(dr) = l & (b95 = target & (b96 = bx | b96 = bxtrg)) & (b97 = man | b97 = mantrg): bxtrg;
        next(dr) = d & (b95 = target & (b85 = bx | b85 = bxtrg)) & (b75 = man | b75 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b95 = bx & (b94 = man | b94 = mantrg)) & (b96 = flr | b96 = target): man;
        next(dr) = l & (b95 = bx & (b96 = man | b96 = mantrg)) & (b94 = flr | b94 = target): man;

    --man to box on target
        next(dr) = r & (b95 = bxtrg & (b94 = man | b94 = mantrg)) & (b96 = flr | b96 = target): mantrg;
        next(dr) = l & (b95 = bxtrg & (b96 = man | b96 = mantrg)) & (b94 = flr | b94 = target): mantrg;

    TRUE: b95;
esac;
next(b96) := case
	--floor to floor
		next(dr) = l & (b96 = man & b95 =flr):flr;
		next(dr) = r & (b96 = man & b97 =flr):flr;
		next(dr) = u & (b96 = man & b86 =flr):flr;


	--target to floor
		next(dr) = l & (b96 = mantrg & b95 =flr): target;
		next(dr) = r & (b96 = mantrg & b97 =flr): target;
		next(dr) = u & (b96 = mantrg & b86 =flr): target;

	--floor to target
		next(dr) = l & (b96 = man & b95 = target):flr;
		next(dr) = r & (b96 = man & b97 = target):flr;
		next(dr) = u & (b96 = man & b86 = target):flr;

	--target to target
		next(dr) = l & (b96 = mantrg & b95 = target): target;
		next(dr) = r & (b96 = mantrg & b97 = target): target;
		next(dr) = u & (b96 = mantrg & b86 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b96 = man & b95 = bx) & (b94 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b96 = man & b97 = bx) & (b98 =flr) & (6+2 < n):flr;
		next(dr) = u & (b96 = man & b86 = bx) & (b76 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b96 = man & b95 = bx) & (b94 = target) & (6-2 > 0):flr;
		next(dr) = r & (b96 = man & b97 = bx) & (b98 = target) & (6+2 < n):flr;
		next(dr) = u & (b96 = man & b86 = bx) & (b76 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b96 = man & b95 = bxtrg) & (b94 =flr) & (6-2 > 0):flr;
		next(dr) = r & (b96 = man & b97 = bxtrg) & (b98 =flr) & (6+2 < n):flr;
		next(dr) = u & (b96 = man & b86 = bxtrg) & (b76 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b96 = man & b95 = bxtrg) & (b94 = target) & (6-2 > 0):flr;
		next(dr) = r & (b96 = man & b97 = bxtrg) & (b98 = target) & (6+2 < n):flr;
		next(dr) = u & (b96 = man & b86 = bxtrg) & (b76 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b96 = mantrg & b95 = bx) & (b94 =flr) & (6-2 > 0): target;
		next(dr) = r & (b96 = mantrg & b97 = bx) & (b98 =flr) & (6+2 < n): target;
		next(dr) = u & (b96 = mantrg & b86 = bx) & (b76 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b96 = mantrg & b95 = bx) & (b94 = target) & (6-2 > 0): target;
		next(dr) = r & (b96 = mantrg & b97 = bx) & (b98 = target) & (6+2 < n): target;
		next(dr) = u & (b96 = mantrg & b86 = bx) & (b76 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b96 = mantrg & b95 = bxtrg) & (b94 =flr) & (6-2 > 0): target;
		next(dr) = r & (b96 = mantrg & b97 = bxtrg) & (b98 =flr) & (6+2 < n): target;
		next(dr) = u & (b96 = mantrg & b86 = bxtrg) & (b76 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b96 = mantrg & b95 = bxtrg) & (b94 = target) & (6-2 > 0): target;
		next(dr) = r & (b96 = mantrg & b97 = bxtrg) & (b98 = target) & (6+2 < n): target;
		next(dr) = u & (b96 = mantrg & b86 = bxtrg) & (b76 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b96 = flr & (b95 = man | b95 = mantrg)) : man;
        next(dr) = l & (b96 = flr & (b97 = man | b97 = mantrg)): man;
        next(dr) = d & (b96 = flr & (b86 = man | b86 = mantrg)): man;

    --box to floor
        next(dr) = r & (b96 = flr & (b95 = bx | b95 = bxtrg)) & (b94 = man | b94 = mantrg): bx;
        next(dr) = l & (b96 = flr & (b97 = bx | b97 = bxtrg)) & (b98 = man | b98 = mantrg): bx;
        next(dr) = d & (b96 = flr & (b86 = bx | b86 = bxtrg)) & (b76 = man | b76 = mantrg): bx;

    --man to target
        next(dr) = r & (b96 = target & (b95 = man | b95 = mantrg)): mantrg;
        next(dr) = l & (b96 = target & (b97 = man | b97 = mantrg)): mantrg;
        next(dr) = d & (b96 = target & (b86 = man | b86 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b96 = target & (b95 = bx | b95 = bxtrg)) & (b94 = man | b94 = mantrg): bxtrg;
        next(dr) = l & (b96 = target & (b97 = bx | b97 = bxtrg)) & (b98 = man | b98 = mantrg): bxtrg;
        next(dr) = d & (b96 = target & (b86 = bx | b86 = bxtrg)) & (b76 = man | b76 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b96 = bx & (b95 = man | b95 = mantrg)) & (b97 = flr | b97 = target): man;
        next(dr) = l & (b96 = bx & (b97 = man | b97 = mantrg)) & (b95 = flr | b95 = target): man;

    --man to box on target
        next(dr) = r & (b96 = bxtrg & (b95 = man | b95 = mantrg)) & (b97 = flr | b97 = target): mantrg;
        next(dr) = l & (b96 = bxtrg & (b97 = man | b97 = mantrg)) & (b95 = flr | b95 = target): mantrg;

    TRUE: b96;
esac;
next(b97) := case
	--floor to floor
		next(dr) = l & (b97 = man & b96 =flr):flr;
		next(dr) = r & (b97 = man & b98 =flr):flr;
		next(dr) = u & (b97 = man & b87 =flr):flr;


	--target to floor
		next(dr) = l & (b97 = mantrg & b96 =flr): target;
		next(dr) = r & (b97 = mantrg & b98 =flr): target;
		next(dr) = u & (b97 = mantrg & b87 =flr): target;

	--floor to target
		next(dr) = l & (b97 = man & b96 = target):flr;
		next(dr) = r & (b97 = man & b98 = target):flr;
		next(dr) = u & (b97 = man & b87 = target):flr;

	--target to target
		next(dr) = l & (b97 = mantrg & b96 = target): target;
		next(dr) = r & (b97 = mantrg & b98 = target): target;
		next(dr) = u & (b97 = mantrg & b87 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b97 = man & b96 = bx) & (b95 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b97 = man & b98 = bx) & (b99 =flr) & (7+2 < n):flr;
		next(dr) = u & (b97 = man & b87 = bx) & (b77 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b97 = man & b96 = bx) & (b95 = target) & (7-2 > 0):flr;
		next(dr) = r & (b97 = man & b98 = bx) & (b99 = target) & (7+2 < n):flr;
		next(dr) = u & (b97 = man & b87 = bx) & (b77 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b97 = man & b96 = bxtrg) & (b95 =flr) & (7-2 > 0):flr;
		next(dr) = r & (b97 = man & b98 = bxtrg) & (b99 =flr) & (7+2 < n):flr;
		next(dr) = u & (b97 = man & b87 = bxtrg) & (b77 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b97 = man & b96 = bxtrg) & (b95 = target) & (7-2 > 0):flr;
		next(dr) = r & (b97 = man & b98 = bxtrg) & (b99 = target) & (7+2 < n):flr;
		next(dr) = u & (b97 = man & b87 = bxtrg) & (b77 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b97 = mantrg & b96 = bx) & (b95 =flr) & (7-2 > 0): target;
		next(dr) = r & (b97 = mantrg & b98 = bx) & (b99 =flr) & (7+2 < n): target;
		next(dr) = u & (b97 = mantrg & b87 = bx) & (b77 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b97 = mantrg & b96 = bx) & (b95 = target) & (7-2 > 0): target;
		next(dr) = r & (b97 = mantrg & b98 = bx) & (b99 = target) & (7+2 < n): target;
		next(dr) = u & (b97 = mantrg & b87 = bx) & (b77 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b97 = mantrg & b96 = bxtrg) & (b95 =flr) & (7-2 > 0): target;
		next(dr) = r & (b97 = mantrg & b98 = bxtrg) & (b99 =flr) & (7+2 < n): target;
		next(dr) = u & (b97 = mantrg & b87 = bxtrg) & (b77 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b97 = mantrg & b96 = bxtrg) & (b95 = target) & (7-2 > 0): target;
		next(dr) = r & (b97 = mantrg & b98 = bxtrg) & (b99 = target) & (7+2 < n): target;
		next(dr) = u & (b97 = mantrg & b87 = bxtrg) & (b77 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b97 = flr & (b96 = man | b96 = mantrg)) : man;
        next(dr) = l & (b97 = flr & (b98 = man | b98 = mantrg)): man;
        next(dr) = d & (b97 = flr & (b87 = man | b87 = mantrg)): man;

    --box to floor
        next(dr) = r & (b97 = flr & (b96 = bx | b96 = bxtrg)) & (b95 = man | b95 = mantrg): bx;
        next(dr) = l & (b97 = flr & (b98 = bx | b98 = bxtrg)) & (b99 = man | b99 = mantrg): bx;
        next(dr) = d & (b97 = flr & (b87 = bx | b87 = bxtrg)) & (b77 = man | b77 = mantrg): bx;

    --man to target
        next(dr) = r & (b97 = target & (b96 = man | b96 = mantrg)): mantrg;
        next(dr) = l & (b97 = target & (b98 = man | b98 = mantrg)): mantrg;
        next(dr) = d & (b97 = target & (b87 = man | b87 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b97 = target & (b96 = bx | b96 = bxtrg)) & (b95 = man | b95 = mantrg): bxtrg;
        next(dr) = l & (b97 = target & (b98 = bx | b98 = bxtrg)) & (b99 = man | b99 = mantrg): bxtrg;
        next(dr) = d & (b97 = target & (b87 = bx | b87 = bxtrg)) & (b77 = man | b77 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b97 = bx & (b96 = man | b96 = mantrg)) & (b98 = flr | b98 = target): man;
        next(dr) = l & (b97 = bx & (b98 = man | b98 = mantrg)) & (b96 = flr | b96 = target): man;

    --man to box on target
        next(dr) = r & (b97 = bxtrg & (b96 = man | b96 = mantrg)) & (b98 = flr | b98 = target): mantrg;
        next(dr) = l & (b97 = bxtrg & (b98 = man | b98 = mantrg)) & (b96 = flr | b96 = target): mantrg;

    TRUE: b97;
esac;
next(b98) := case
	--floor to floor
		next(dr) = l & (b98 = man & b97 =flr):flr;
		next(dr) = r & (b98 = man & b99 =flr):flr;
		next(dr) = u & (b98 = man & b88 =flr):flr;


	--target to floor
		next(dr) = l & (b98 = mantrg & b97 =flr): target;
		next(dr) = r & (b98 = mantrg & b99 =flr): target;
		next(dr) = u & (b98 = mantrg & b88 =flr): target;

	--floor to target
		next(dr) = l & (b98 = man & b97 = target):flr;
		next(dr) = r & (b98 = man & b99 = target):flr;
		next(dr) = u & (b98 = man & b88 = target):flr;

	--target to target
		next(dr) = l & (b98 = mantrg & b97 = target): target;
		next(dr) = r & (b98 = mantrg & b99 = target): target;
		next(dr) = u & (b98 = mantrg & b88 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b98 = man & b97 = bx) & (b96 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b98 = man & b99 = bx) & (b910 =flr) & (8+2 < n):flr;
		next(dr) = u & (b98 = man & b88 = bx) & (b78 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b98 = man & b97 = bx) & (b96 = target) & (8-2 > 0):flr;
		next(dr) = r & (b98 = man & b99 = bx) & (b910 = target) & (8+2 < n):flr;
		next(dr) = u & (b98 = man & b88 = bx) & (b78 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b98 = man & b97 = bxtrg) & (b96 =flr) & (8-2 > 0):flr;
		next(dr) = r & (b98 = man & b99 = bxtrg) & (b910 =flr) & (8+2 < n):flr;
		next(dr) = u & (b98 = man & b88 = bxtrg) & (b78 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b98 = man & b97 = bxtrg) & (b96 = target) & (8-2 > 0):flr;
		next(dr) = r & (b98 = man & b99 = bxtrg) & (b910 = target) & (8+2 < n):flr;
		next(dr) = u & (b98 = man & b88 = bxtrg) & (b78 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b98 = mantrg & b97 = bx) & (b96 =flr) & (8-2 > 0): target;
		next(dr) = r & (b98 = mantrg & b99 = bx) & (b910 =flr) & (8+2 < n): target;
		next(dr) = u & (b98 = mantrg & b88 = bx) & (b78 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b98 = mantrg & b97 = bx) & (b96 = target) & (8-2 > 0): target;
		next(dr) = r & (b98 = mantrg & b99 = bx) & (b910 = target) & (8+2 < n): target;
		next(dr) = u & (b98 = mantrg & b88 = bx) & (b78 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b98 = mantrg & b97 = bxtrg) & (b96 =flr) & (8-2 > 0): target;
		next(dr) = r & (b98 = mantrg & b99 = bxtrg) & (b910 =flr) & (8+2 < n): target;
		next(dr) = u & (b98 = mantrg & b88 = bxtrg) & (b78 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b98 = mantrg & b97 = bxtrg) & (b96 = target) & (8-2 > 0): target;
		next(dr) = r & (b98 = mantrg & b99 = bxtrg) & (b910 = target) & (8+2 < n): target;
		next(dr) = u & (b98 = mantrg & b88 = bxtrg) & (b78 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b98 = flr & (b97 = man | b97 = mantrg)) : man;
        next(dr) = l & (b98 = flr & (b99 = man | b99 = mantrg)): man;
        next(dr) = d & (b98 = flr & (b88 = man | b88 = mantrg)): man;

    --box to floor
        next(dr) = r & (b98 = flr & (b97 = bx | b97 = bxtrg)) & (b96 = man | b96 = mantrg): bx;
        next(dr) = l & (b98 = flr & (b99 = bx | b99 = bxtrg)) & (b910 = man | b910 = mantrg): bx;
        next(dr) = d & (b98 = flr & (b88 = bx | b88 = bxtrg)) & (b78 = man | b78 = mantrg): bx;

    --man to target
        next(dr) = r & (b98 = target & (b97 = man | b97 = mantrg)): mantrg;
        next(dr) = l & (b98 = target & (b99 = man | b99 = mantrg)): mantrg;
        next(dr) = d & (b98 = target & (b88 = man | b88 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b98 = target & (b97 = bx | b97 = bxtrg)) & (b96 = man | b96 = mantrg): bxtrg;
        next(dr) = l & (b98 = target & (b99 = bx | b99 = bxtrg)) & (b910 = man | b910 = mantrg): bxtrg;
        next(dr) = d & (b98 = target & (b88 = bx | b88 = bxtrg)) & (b78 = man | b78 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b98 = bx & (b97 = man | b97 = mantrg)) & (b99 = flr | b99 = target): man;
        next(dr) = l & (b98 = bx & (b99 = man | b99 = mantrg)) & (b97 = flr | b97 = target): man;

    --man to box on target
        next(dr) = r & (b98 = bxtrg & (b97 = man | b97 = mantrg)) & (b99 = flr | b99 = target): mantrg;
        next(dr) = l & (b98 = bxtrg & (b99 = man | b99 = mantrg)) & (b97 = flr | b97 = target): mantrg;

    TRUE: b98;
esac;
next(b99) := case
	--floor to floor
		next(dr) = l & (b99 = man & b98 =flr):flr;
		next(dr) = r & (b99 = man & b910 =flr):flr;
		next(dr) = u & (b99 = man & b89 =flr):flr;


	--target to floor
		next(dr) = l & (b99 = mantrg & b98 =flr): target;
		next(dr) = r & (b99 = mantrg & b910 =flr): target;
		next(dr) = u & (b99 = mantrg & b89 =flr): target;

	--floor to target
		next(dr) = l & (b99 = man & b98 = target):flr;
		next(dr) = r & (b99 = man & b910 = target):flr;
		next(dr) = u & (b99 = man & b89 = target):flr;

	--target to target
		next(dr) = l & (b99 = mantrg & b98 = target): target;
		next(dr) = r & (b99 = mantrg & b910 = target): target;
		next(dr) = u & (b99 = mantrg & b89 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b99 = man & b98 = bx) & (b97 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b99 = man & b89 = bx) & (b79 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b99 = man & b98 = bx) & (b97 = target) & (9-2 > 0):flr;
		next(dr) = u & (b99 = man & b89 = bx) & (b79 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b99 = man & b98 = bxtrg) & (b97 =flr) & (9-2 > 0):flr;
		next(dr) = u & (b99 = man & b89 = bxtrg) & (b79 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b99 = man & b98 = bxtrg) & (b97 = target) & (9-2 > 0):flr;
		next(dr) = u & (b99 = man & b89 = bxtrg) & (b79 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b99 = mantrg & b98 = bx) & (b97 =flr) & (9-2 > 0): target;
		next(dr) = u & (b99 = mantrg & b89 = bx) & (b79 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b99 = mantrg & b98 = bx) & (b97 = target) & (9-2 > 0): target;
		next(dr) = u & (b99 = mantrg & b89 = bx) & (b79 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b99 = mantrg & b98 = bxtrg) & (b97 =flr) & (9-2 > 0): target;
		next(dr) = u & (b99 = mantrg & b89 = bxtrg) & (b79 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b99 = mantrg & b98 = bxtrg) & (b97 = target) & (9-2 > 0): target;
		next(dr) = u & (b99 = mantrg & b89 = bxtrg) & (b79 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b99 = flr & (b98 = man | b98 = mantrg)) : man;
        next(dr) = l & (b99 = flr & (b910 = man | b910 = mantrg)): man;
        next(dr) = d & (b99 = flr & (b89 = man | b89 = mantrg)): man;

    --box to floor
        next(dr) = r & (b99 = flr & (b98 = bx | b98 = bxtrg)) & (b97 = man | b97 = mantrg): bx;
        next(dr) = d & (b99 = flr & (b89 = bx | b89 = bxtrg)) & (b79 = man | b79 = mantrg): bx;

    --man to target
        next(dr) = r & (b99 = target & (b98 = man | b98 = mantrg)): mantrg;
        next(dr) = l & (b99 = target & (b910 = man | b910 = mantrg)): mantrg;
        next(dr) = d & (b99 = target & (b89 = man | b89 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b99 = target & (b98 = bx | b98 = bxtrg)) & (b97 = man | b97 = mantrg): bxtrg;
        next(dr) = d & (b99 = target & (b89 = bx | b89 = bxtrg)) & (b79 = man | b79 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b99 = bx & (b98 = man | b98 = mantrg)) & (b910 = flr | b910 = target): man;
        next(dr) = l & (b99 = bx & (b910 = man | b910 = mantrg)) & (b98 = flr | b98 = target): man;

    --man to box on target
        next(dr) = r & (b99 = bxtrg & (b98 = man | b98 = mantrg)) & (b910 = flr | b910 = target): mantrg;
        next(dr) = l & (b99 = bxtrg & (b910 = man | b910 = mantrg)) & (b98 = flr | b98 = target): mantrg;

    TRUE: b99;
esac;
next(b910) := case
	--floor to floor
		next(dr) = l & (b910 = man & b99 =flr):flr;
		next(dr) = u & (b910 = man & b810 =flr):flr;


	--target to floor
		next(dr) = l & (b910 = mantrg & b99 =flr): target;
		next(dr) = u & (b910 = mantrg & b810 =flr): target;

	--floor to target
		next(dr) = l & (b910 = man & b99 = target):flr;
		next(dr) = u & (b910 = man & b810 = target):flr;

	--target to target
		next(dr) = l & (b910 = mantrg & b99 = target): target;
		next(dr) = u & (b910 = mantrg & b810 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b910 = man & b99 = bx) & (b98 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b910 = man & b810 = bx) & (b710 =flr) & (9-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b910 = man & b99 = bx) & (b98 = target) & (10-2 > 0):flr;
		next(dr) = u & (b910 = man & b810 = bx) & (b710 = target) & (9-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b910 = man & b99 = bxtrg) & (b98 =flr) & (10-2 > 0):flr;
		next(dr) = u & (b910 = man & b810 = bxtrg) & (b710 =flr) & (9-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b910 = man & b99 = bxtrg) & (b98 = target) & (10-2 > 0):flr;
		next(dr) = u & (b910 = man & b810 = bxtrg) & (b710 = target) & (9-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b910 = mantrg & b99 = bx) & (b98 =flr) & (10-2 > 0): target;
		next(dr) = u & (b910 = mantrg & b810 = bx) & (b710 =flr) & (9-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b910 = mantrg & b99 = bx) & (b98 = target) & (10-2 > 0): target;
		next(dr) = u & (b910 = mantrg & b810 = bx) & (b710 = target) & (9-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b910 = mantrg & b99 = bxtrg) & (b98 =flr) & (10-2 > 0): target;
		next(dr) = u & (b910 = mantrg & b810 = bxtrg) & (b710 =flr) & (9-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b910 = mantrg & b99 = bxtrg) & (b98 = target) & (10-2 > 0): target;
		next(dr) = u & (b910 = mantrg & b810 = bxtrg) & (b710 = target) & (9-2 > 0): target;

    --man to floor
        next(dr) = r & (b910 = flr & (b99 = man | b99 = mantrg)) : man;
        next(dr) = d & (b910 = flr & (b810 = man | b810 = mantrg)): man;

    --box to floor
        next(dr) = r & (b910 = flr & (b99 = bx | b99 = bxtrg)) & (b98 = man | b98 = mantrg): bx;
        next(dr) = d & (b910 = flr & (b810 = bx | b810 = bxtrg)) & (b710 = man | b710 = mantrg): bx;

    --man to target
        next(dr) = r & (b910 = target & (b99 = man | b99 = mantrg)): mantrg;
        next(dr) = d & (b910 = target & (b810 = man | b810 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b910 = target & (b99 = bx | b99 = bxtrg)) & (b98 = man | b98 = mantrg): bxtrg;
        next(dr) = d & (b910 = target & (b810 = bx | b810 = bxtrg)) & (b710 = man | b710 = mantrg): bxtrg;

    --man to box

    --man to box on target

    TRUE: b910;
esac;
LTLSPEC !F((b00 != bx) & (b01 != bx) & (b02 != bx) & (b03 != bx) & (b04 != bx) & (b05 != bx) & (b06 != bx) & (b07 != bx) & (b08 != bx) & (b09 != bx) & (b010 != bx) & (b10 != bx) & (b11 != bx) & (b12 != bx) & (b13 != bx) & (b14 != bx) & (b15 != bx) & (b16 != bx) & (b17 != bx) & (b18 != bx) & (b19 != bx) & (b110 != bx) & (b20 != bx) & (b21 != bx) & (b22 != bx) & (b23 != bx) & (b24 != bx) & (b25 != bx) & (b26 != bx) & (b27 != bx) & (b28 != bx) & (b29 != bx) & (b210 != bx) & (b30 != bx) & (b31 != bx) & (b32 != bx) & (b33 != bx) & (b34 != bx) & (b35 != bx) & (b36 != bx) & (b37 != bx) & (b38 != bx) & (b39 != bx) & (b310 != bx) & (b40 != bx) & (b41 != bx) & (b42 != bx) & (b43 != bx) & (b44 != bx) & (b45 != bx) & (b46 != bx) & (b47 != bx) & (b48 != bx) & (b49 != bx) & (b410 != bx) & (b50 != bx) & (b51 != bx) & (b52 != bx) & (b53 != bx) & (b54 != bx) & (b55 != bx) & (b56 != bx) & (b57 != bx) & (b58 != bx) & (b59 != bx) & (b510 != bx) & (b60 != bx) & (b61 != bx) & (b62 != bx) & (b63 != bx) & (b64 != bx) & (b65 != bx) & (b66 != bx) & (b67 != bx) & (b68 != bx) & (b69 != bx) & (b610 != bx) & (b70 != bx) & (b71 != bx) & (b72 != bx) & (b73 != bx) & (b74 != bx) & (b75 != bx) & (b76 != bx) & (b77 != bx) & (b78 != bx) & (b79 != bx) & (b710 != bx) & (b80 != bx) & (b81 != bx) & (b82 != bx) & (b83 != bx) & (b84 != bx) & (b85 != bx) & (b86 != bx) & (b87 != bx) & (b88 != bx) & (b89 != bx) & (b810 != bx) & (b90 != bx) & (b91 != bx) & (b92 != bx) & (b93 != bx) & (b94 != bx) & (b95 != bx) & (b96 != bx) & (b97 != bx) & (b98 != bx) & (b99 != bx) & (b910 != bx));