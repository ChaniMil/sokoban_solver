MODULE main
DEFINE m := 7 ; n := 7 ;
VAR
    dr: {r, l, u, d, s};
	i: 0..m+(-1);
	j: 0..n+(-1);
  right: boolean;
  left: boolean;
  down: boolean;
  up: boolean;
b00: {wall, target, flr, mantrg, bx, man, bxtrg};
b01: {wall, target, flr, mantrg, bx, man, bxtrg};
b02: {wall, target, flr, mantrg, bx, man, bxtrg};
b03: {wall, target, flr, mantrg, bx, man, bxtrg};
b04: {wall, target, flr, mantrg, bx, man, bxtrg};
b05: {wall, target, flr, mantrg, bx, man, bxtrg};
b06: {wall, target, flr, mantrg, bx, man, bxtrg};
b10: {wall, target, flr, mantrg, bx, man, bxtrg};
b11: {wall, target, flr, mantrg, bx, man, bxtrg};
b12: {wall, target, flr, mantrg, bx, man, bxtrg};
b13: {wall, target, flr, mantrg, bx, man, bxtrg};
b14: {wall, target, flr, mantrg, bx, man, bxtrg};
b15: {wall, target, flr, mantrg, bx, man, bxtrg};
b16: {wall, target, flr, mantrg, bx, man, bxtrg};
b20: {wall, target, flr, mantrg, bx, man, bxtrg};
b21: {wall, target, flr, mantrg, bx, man, bxtrg};
b22: {wall, target, flr, mantrg, bx, man, bxtrg};
b23: {wall, target, flr, mantrg, bx, man, bxtrg};
b24: {wall, target, flr, mantrg, bx, man, bxtrg};
b25: {wall, target, flr, mantrg, bx, man, bxtrg};
b26: {wall, target, flr, mantrg, bx, man, bxtrg};
b30: {wall, target, flr, mantrg, bx, man, bxtrg};
b31: {wall, target, flr, mantrg, bx, man, bxtrg};
b32: {wall, target, flr, mantrg, bx, man, bxtrg};
b33: {wall, target, flr, mantrg, bx, man, bxtrg};
b34: {wall, target, flr, mantrg, bx, man, bxtrg};
b35: {wall, target, flr, mantrg, bx, man, bxtrg};
b36: {wall, target, flr, mantrg, bx, man, bxtrg};
b40: {wall, target, flr, mantrg, bx, man, bxtrg};
b41: {wall, target, flr, mantrg, bx, man, bxtrg};
b42: {wall, target, flr, mantrg, bx, man, bxtrg};
b43: {wall, target, flr, mantrg, bx, man, bxtrg};
b44: {wall, target, flr, mantrg, bx, man, bxtrg};
b45: {wall, target, flr, mantrg, bx, man, bxtrg};
b46: {wall, target, flr, mantrg, bx, man, bxtrg};
b50: {wall, target, flr, mantrg, bx, man, bxtrg};
b51: {wall, target, flr, mantrg, bx, man, bxtrg};
b52: {wall, target, flr, mantrg, bx, man, bxtrg};
b53: {wall, target, flr, mantrg, bx, man, bxtrg};
b54: {wall, target, flr, mantrg, bx, man, bxtrg};
b55: {wall, target, flr, mantrg, bx, man, bxtrg};
b56: {wall, target, flr, mantrg, bx, man, bxtrg};
b60: {wall, target, flr, mantrg, bx, man, bxtrg};
b61: {wall, target, flr, mantrg, bx, man, bxtrg};
b62: {wall, target, flr, mantrg, bx, man, bxtrg};
b63: {wall, target, flr, mantrg, bx, man, bxtrg};
b64: {wall, target, flr, mantrg, bx, man, bxtrg};
b65: {wall, target, flr, mantrg, bx, man, bxtrg};
b66: {wall, target, flr, mantrg, bx, man, bxtrg};

ASSIGN
	init(b00) := wall;
	init(b01) := wall;
	init(b02) := wall;
	init(b03) := wall;
	init(b04) := wall;
	init(b05) := wall;
	init(b06) := wall;
	init(b10) := wall;
	init(b11) := man;
	init(b12) := flr;
	init(b13) := flr;
	init(b14) := flr;
	init(b15) := flr;
	init(b16) := wall;
	init(b20) := wall;
	init(b21) := flr;
	init(b22) := flr;
	init(b23) := target;
	init(b24) := bx;
	init(b25) := flr;
	init(b26) := wall;
	init(b30) := wall;
	init(b31) := flr;
	init(b32) := flr;
	init(b33) := flr;
	init(b34) := wall;
	init(b35) := wall;
	init(b36) := wall;
	init(b40) := wall;
	init(b41) := flr;
	init(b42) := flr;
	init(b43) := bx;
	init(b44) := flr;
	init(b45) := flr;
	init(b46) := wall;
	init(b50) := wall;
	init(b51) := flr;
	init(b52) := flr;
	init(b53) := flr;
	init(b54) := wall;
	init(b55) := target;
	init(b56) := wall;
	init(b60) := wall;
	init(b61) := wall;
	init(b62) := wall;
	init(b63) := wall;
	init(b64) := wall;
	init(b65) := wall;
	init(b66) := wall;
	init(i) := 1;
	init(j) := 1;
	init(dr) := s;
	init(left) := FALSE;
	init(right) := FALSE;
	init(down) := FALSE;
	init(up) := FALSE;
	 
next(i) := case
    next(dr) = u & i>0: i+(-1);
    next(dr) = d & i<m+(-1): i+1;
    TRUE: i;
    esac;

next(j) := case
    next(dr) = l & j>0: j+(-1);
    next(dr) = r & j<n+(-1): j+1;
    TRUE: j;
    esac;

next(dr) := case
    next(up) & next(down) & next(right) & next(left): {r, u, l, d};
	next(up) & next(down) & next(right) & !next(left): {r, u, d};
	next(up) & next(down) & !next(right) & next(left): {u, l, d};
	next(up) & next(down) & !next(right) & !next(left): {u, d};
	next(up) & !next(down) & next(right) & next(left): {r, u, l};
	next(up) & !next(down) & next(right) & !next(left): {r, u};
	next(up) & !next(down) & !next(right) & next(left): {u, l};
	next(up) & !next(down) & !next(right) & !next(left): {u};
	!next(up) & next(down) & next(right) & next(left): {r, l, d};
	!next(up) & next(down) & next(right) & !next(left): {r, d};
	!next(up) & next(down) & !next(right) & next(left): {l, d};
	!next(up) & next(down) & !next(right) & !next(left): {d};
	!next(up) & !next(down) & next(right) & next(left): {r, l};
	!next(up) & !next(down) & next(right) & !next(left): {r};
	!next(up) & !next(down) & !next(right) & next(left): {l};
	TRUE: {s};
esac;

next(up):= case
	i = 0 | i = 1: FALSE;
	i = 1 & j = 1 & (b01 = flr | b01 = target): TRUE;
	i = 1 & j = 2 & (b02 = flr | b02 = target): TRUE;
	i = 1 & j = 3 & (b03 = flr | b03 = target): TRUE;
	i = 1 & j = 4 & (b04 = flr | b04 = target): TRUE;
	i = 1 & j = 5 & (b05 = flr | b05 = target): TRUE;
	i = 1 & j = 6 & (b06 = flr | b06 = target): TRUE;
	i = 2 & j = 1 & (b11 = flr | b11 = target): TRUE;
	i = 2 & j = 1 & (b11 = bx | b11 = bxtrg) & (b01 != bx & b01 != bxtrg & b01 != wall): TRUE;
	i = 2 & j = 2 & (b12 = flr | b12 = target): TRUE;
	i = 2 & j = 2 & (b12 = bx | b12 = bxtrg) & (b02 != bx & b02 != bxtrg & b02 != wall): TRUE;
	i = 2 & j = 3 & (b13 = flr | b13 = target): TRUE;
	i = 2 & j = 3 & (b13 = bx | b13 = bxtrg) & (b03 != bx & b03 != bxtrg & b03 != wall): TRUE;
	i = 2 & j = 4 & (b14 = flr | b14 = target): TRUE;
	i = 2 & j = 4 & (b14 = bx | b14 = bxtrg) & (b04 != bx & b04 != bxtrg & b04 != wall): TRUE;
	i = 2 & j = 5 & (b15 = flr | b15 = target): TRUE;
	i = 2 & j = 5 & (b15 = bx | b15 = bxtrg) & (b05 != bx & b05 != bxtrg & b05 != wall): TRUE;
	i = 2 & j = 6 & (b16 = flr | b16 = target): TRUE;
	i = 2 & j = 6 & (b16 = bx | b16 = bxtrg) & (b06 != bx & b06 != bxtrg & b06 != wall): TRUE;
	i = 3 & j = 1 & (b21 = flr | b21 = target): TRUE;
	i = 3 & j = 1 & (b21 = bx | b21 = bxtrg) & (b11 != bx & b11 != bxtrg & b11 != wall): TRUE;
	i = 3 & j = 2 & (b22 = flr | b22 = target): TRUE;
	i = 3 & j = 2 & (b22 = bx | b22 = bxtrg) & (b12 != bx & b12 != bxtrg & b12 != wall): TRUE;
	i = 3 & j = 3 & (b23 = flr | b23 = target): TRUE;
	i = 3 & j = 3 & (b23 = bx | b23 = bxtrg) & (b13 != bx & b13 != bxtrg & b13 != wall): TRUE;
	i = 3 & j = 4 & (b24 = flr | b24 = target): TRUE;
	i = 3 & j = 4 & (b24 = bx | b24 = bxtrg) & (b14 != bx & b14 != bxtrg & b14 != wall): TRUE;
	i = 3 & j = 5 & (b25 = flr | b25 = target): TRUE;
	i = 3 & j = 5 & (b25 = bx | b25 = bxtrg) & (b15 != bx & b15 != bxtrg & b15 != wall): TRUE;
	i = 3 & j = 6 & (b26 = flr | b26 = target): TRUE;
	i = 3 & j = 6 & (b26 = bx | b26 = bxtrg) & (b16 != bx & b16 != bxtrg & b16 != wall): TRUE;
	i = 4 & j = 1 & (b31 = flr | b31 = target): TRUE;
	i = 4 & j = 1 & (b31 = bx | b31 = bxtrg) & (b21 != bx & b21 != bxtrg & b21 != wall): TRUE;
	i = 4 & j = 2 & (b32 = flr | b32 = target): TRUE;
	i = 4 & j = 2 & (b32 = bx | b32 = bxtrg) & (b22 != bx & b22 != bxtrg & b22 != wall): TRUE;
	i = 4 & j = 3 & (b33 = flr | b33 = target): TRUE;
	i = 4 & j = 3 & (b33 = bx | b33 = bxtrg) & (b23 != bx & b23 != bxtrg & b23 != wall): TRUE;
	i = 4 & j = 4 & (b34 = flr | b34 = target): TRUE;
	i = 4 & j = 4 & (b34 = bx | b34 = bxtrg) & (b24 != bx & b24 != bxtrg & b24 != wall): TRUE;
	i = 4 & j = 5 & (b35 = flr | b35 = target): TRUE;
	i = 4 & j = 5 & (b35 = bx | b35 = bxtrg) & (b25 != bx & b25 != bxtrg & b25 != wall): TRUE;
	i = 4 & j = 6 & (b36 = flr | b36 = target): TRUE;
	i = 4 & j = 6 & (b36 = bx | b36 = bxtrg) & (b26 != bx & b26 != bxtrg & b26 != wall): TRUE;
	i = 5 & j = 1 & (b41 = flr | b41 = target): TRUE;
	i = 5 & j = 1 & (b41 = bx | b41 = bxtrg) & (b31 != bx & b31 != bxtrg & b31 != wall): TRUE;
	i = 5 & j = 2 & (b42 = flr | b42 = target): TRUE;
	i = 5 & j = 2 & (b42 = bx | b42 = bxtrg) & (b32 != bx & b32 != bxtrg & b32 != wall): TRUE;
	i = 5 & j = 3 & (b43 = flr | b43 = target): TRUE;
	i = 5 & j = 3 & (b43 = bx | b43 = bxtrg) & (b33 != bx & b33 != bxtrg & b33 != wall): TRUE;
	i = 5 & j = 4 & (b44 = flr | b44 = target): TRUE;
	i = 5 & j = 4 & (b44 = bx | b44 = bxtrg) & (b34 != bx & b34 != bxtrg & b34 != wall): TRUE;
	i = 5 & j = 5 & (b45 = flr | b45 = target): TRUE;
	i = 5 & j = 5 & (b45 = bx | b45 = bxtrg) & (b35 != bx & b35 != bxtrg & b35 != wall): TRUE;
	i = 5 & j = 6 & (b46 = flr | b46 = target): TRUE;
	i = 5 & j = 6 & (b46 = bx | b46 = bxtrg) & (b36 != bx & b36 != bxtrg & b36 != wall): TRUE;
	i = 6 & j = 1 & (b51 = flr | b51 = target): TRUE;
	i = 6 & j = 1 & (b51 = bx | b51 = bxtrg) & (b41 != bx & b41 != bxtrg & b41 != wall): TRUE;
	i = 6 & j = 2 & (b52 = flr | b52 = target): TRUE;
	i = 6 & j = 2 & (b52 = bx | b52 = bxtrg) & (b42 != bx & b42 != bxtrg & b42 != wall): TRUE;
	i = 6 & j = 3 & (b53 = flr | b53 = target): TRUE;
	i = 6 & j = 3 & (b53 = bx | b53 = bxtrg) & (b43 != bx & b43 != bxtrg & b43 != wall): TRUE;
	i = 6 & j = 4 & (b54 = flr | b54 = target): TRUE;
	i = 6 & j = 4 & (b54 = bx | b54 = bxtrg) & (b44 != bx & b44 != bxtrg & b44 != wall): TRUE;
	i = 6 & j = 5 & (b55 = flr | b55 = target): TRUE;
	i = 6 & j = 5 & (b55 = bx | b55 = bxtrg) & (b45 != bx & b45 != bxtrg & b45 != wall): TRUE;
	i = 6 & j = 6 & (b56 = flr | b56 = target): TRUE;
	i = 6 & j = 6 & (b56 = bx | b56 = bxtrg) & (b46 != bx & b46 != bxtrg & b46 != wall): TRUE;
	TRUE: FALSE;
esac;
next(down):= case
	i = m+(-1): FALSE;
	i = 1 & j = 1 & (b21 = flr | b21 = target): TRUE;
	i = 1 & j = 1 & (b21 = bx | b21 = bxtrg) & (b31 != bx & b31 != bxtrg & b31 != wall): TRUE;
	i = 1 & j = 2 & (b22 = flr | b22 = target): TRUE;
	i = 1 & j = 2 & (b22 = bx | b22 = bxtrg) & (b32 != bx & b32 != bxtrg & b32 != wall): TRUE;
	i = 1 & j = 3 & (b23 = flr | b23 = target): TRUE;
	i = 1 & j = 3 & (b23 = bx | b23 = bxtrg) & (b33 != bx & b33 != bxtrg & b33 != wall): TRUE;
	i = 1 & j = 4 & (b24 = flr | b24 = target): TRUE;
	i = 1 & j = 4 & (b24 = bx | b24 = bxtrg) & (b34 != bx & b34 != bxtrg & b34 != wall): TRUE;
	i = 1 & j = 5 & (b25 = flr | b25 = target): TRUE;
	i = 1 & j = 5 & (b25 = bx | b25 = bxtrg) & (b35 != bx & b35 != bxtrg & b35 != wall): TRUE;
	i = 1 & j = 6 & (b26 = flr | b26 = target): TRUE;
	i = 1 & j = 6 & (b26 = bx | b26 = bxtrg) & (b36 != bx & b36 != bxtrg & b36 != wall): TRUE;
	i = 2 & j = 1 & (b31 = flr | b31 = target): TRUE;
	i = 2 & j = 1 & (b31 = bx | b31 = bxtrg) & (b41 != bx & b41 != bxtrg & b41 != wall): TRUE;
	i = 2 & j = 2 & (b32 = flr | b32 = target): TRUE;
	i = 2 & j = 2 & (b32 = bx | b32 = bxtrg) & (b42 != bx & b42 != bxtrg & b42 != wall): TRUE;
	i = 2 & j = 3 & (b33 = flr | b33 = target): TRUE;
	i = 2 & j = 3 & (b33 = bx | b33 = bxtrg) & (b43 != bx & b43 != bxtrg & b43 != wall): TRUE;
	i = 2 & j = 4 & (b34 = flr | b34 = target): TRUE;
	i = 2 & j = 4 & (b34 = bx | b34 = bxtrg) & (b44 != bx & b44 != bxtrg & b44 != wall): TRUE;
	i = 2 & j = 5 & (b35 = flr | b35 = target): TRUE;
	i = 2 & j = 5 & (b35 = bx | b35 = bxtrg) & (b45 != bx & b45 != bxtrg & b45 != wall): TRUE;
	i = 2 & j = 6 & (b36 = flr | b36 = target): TRUE;
	i = 2 & j = 6 & (b36 = bx | b36 = bxtrg) & (b46 != bx & b46 != bxtrg & b46 != wall): TRUE;
	i = 3 & j = 1 & (b41 = flr | b41 = target): TRUE;
	i = 3 & j = 1 & (b41 = bx | b41 = bxtrg) & (b51 != bx & b51 != bxtrg & b51 != wall): TRUE;
	i = 3 & j = 2 & (b42 = flr | b42 = target): TRUE;
	i = 3 & j = 2 & (b42 = bx | b42 = bxtrg) & (b52 != bx & b52 != bxtrg & b52 != wall): TRUE;
	i = 3 & j = 3 & (b43 = flr | b43 = target): TRUE;
	i = 3 & j = 3 & (b43 = bx | b43 = bxtrg) & (b53 != bx & b53 != bxtrg & b53 != wall): TRUE;
	i = 3 & j = 4 & (b44 = flr | b44 = target): TRUE;
	i = 3 & j = 4 & (b44 = bx | b44 = bxtrg) & (b54 != bx & b54 != bxtrg & b54 != wall): TRUE;
	i = 3 & j = 5 & (b45 = flr | b45 = target): TRUE;
	i = 3 & j = 5 & (b45 = bx | b45 = bxtrg) & (b55 != bx & b55 != bxtrg & b55 != wall): TRUE;
	i = 3 & j = 6 & (b46 = flr | b46 = target): TRUE;
	i = 3 & j = 6 & (b46 = bx | b46 = bxtrg) & (b56 != bx & b56 != bxtrg & b56 != wall): TRUE;
	i = 4 & j = 1 & (b51 = flr | b51 = target): TRUE;
	i = 4 & j = 1 & (b51 = bx | b51 = bxtrg) & (b61 != bx & b61 != bxtrg & b61 != wall): TRUE;
	i = 4 & j = 2 & (b52 = flr | b52 = target): TRUE;
	i = 4 & j = 2 & (b52 = bx | b52 = bxtrg) & (b62 != bx & b62 != bxtrg & b62 != wall): TRUE;
	i = 4 & j = 3 & (b53 = flr | b53 = target): TRUE;
	i = 4 & j = 3 & (b53 = bx | b53 = bxtrg) & (b63 != bx & b63 != bxtrg & b63 != wall): TRUE;
	i = 4 & j = 4 & (b54 = flr | b54 = target): TRUE;
	i = 4 & j = 4 & (b54 = bx | b54 = bxtrg) & (b64 != bx & b64 != bxtrg & b64 != wall): TRUE;
	i = 4 & j = 5 & (b55 = flr | b55 = target): TRUE;
	i = 4 & j = 5 & (b55 = bx | b55 = bxtrg) & (b65 != bx & b65 != bxtrg & b65 != wall): TRUE;
	i = 4 & j = 6 & (b56 = flr | b56 = target): TRUE;
	i = 4 & j = 6 & (b56 = bx | b56 = bxtrg) & (b66 != bx & b66 != bxtrg & b66 != wall): TRUE;
	i = 5 & j = 1 & (b61 = flr | b61 = target): TRUE;
	i = 5 & j = 2 & (b62 = flr | b62 = target): TRUE;
	i = 5 & j = 3 & (b63 = flr | b63 = target): TRUE;
	i = 5 & j = 4 & (b64 = flr | b64 = target): TRUE;
	i = 5 & j = 5 & (b65 = flr | b65 = target): TRUE;
	i = 5 & j = 6 & (b66 = flr | b66 = target): TRUE;
	TRUE: FALSE;
esac;
next(right):= case
	j = n+(-1): FALSE;
	i = 1 & j = 1 & (b12 = flr | b12 = target): TRUE;
	i = 1 & j = 1 & (b12 = bx | b12 = bxtrg) & (b13 != bx & b13 != bxtrg & b13 != wall): TRUE;
	i = 1 & j = 2 & (b13 = flr | b13 = target): TRUE;
	i = 1 & j = 2 & (b13 = bx | b13 = bxtrg) & (b14 != bx & b14 != bxtrg & b14 != wall): TRUE;
	i = 1 & j = 3 & (b14 = flr | b14 = target): TRUE;
	i = 1 & j = 3 & (b14 = bx | b14 = bxtrg) & (b15 != bx & b15 != bxtrg & b15 != wall): TRUE;
	i = 1 & j = 4 & (b15 = flr | b15 = target): TRUE;
	i = 1 & j = 4 & (b15 = bx | b15 = bxtrg) & (b16 != bx & b16 != bxtrg & b16 != wall): TRUE;
	i = 1 & j = 5 & (b16 = flr | b16 = target): TRUE;
	i = 2 & j = 1 & (b22 = flr | b22 = target): TRUE;
	i = 2 & j = 1 & (b22 = bx | b22 = bxtrg) & (b23 != bx & b23 != bxtrg & b23 != wall): TRUE;
	i = 2 & j = 2 & (b23 = flr | b23 = target): TRUE;
	i = 2 & j = 2 & (b23 = bx | b23 = bxtrg) & (b24 != bx & b24 != bxtrg & b24 != wall): TRUE;
	i = 2 & j = 3 & (b24 = flr | b24 = target): TRUE;
	i = 2 & j = 3 & (b24 = bx | b24 = bxtrg) & (b25 != bx & b25 != bxtrg & b25 != wall): TRUE;
	i = 2 & j = 4 & (b25 = flr | b25 = target): TRUE;
	i = 2 & j = 4 & (b25 = bx | b25 = bxtrg) & (b26 != bx & b26 != bxtrg & b26 != wall): TRUE;
	i = 2 & j = 5 & (b26 = flr | b26 = target): TRUE;
	i = 3 & j = 1 & (b32 = flr | b32 = target): TRUE;
	i = 3 & j = 1 & (b32 = bx | b32 = bxtrg) & (b33 != bx & b33 != bxtrg & b33 != wall): TRUE;
	i = 3 & j = 2 & (b33 = flr | b33 = target): TRUE;
	i = 3 & j = 2 & (b33 = bx | b33 = bxtrg) & (b34 != bx & b34 != bxtrg & b34 != wall): TRUE;
	i = 3 & j = 3 & (b34 = flr | b34 = target): TRUE;
	i = 3 & j = 3 & (b34 = bx | b34 = bxtrg) & (b35 != bx & b35 != bxtrg & b35 != wall): TRUE;
	i = 3 & j = 4 & (b35 = flr | b35 = target): TRUE;
	i = 3 & j = 4 & (b35 = bx | b35 = bxtrg) & (b36 != bx & b36 != bxtrg & b36 != wall): TRUE;
	i = 3 & j = 5 & (b36 = flr | b36 = target): TRUE;
	i = 4 & j = 1 & (b42 = flr | b42 = target): TRUE;
	i = 4 & j = 1 & (b42 = bx | b42 = bxtrg) & (b43 != bx & b43 != bxtrg & b43 != wall): TRUE;
	i = 4 & j = 2 & (b43 = flr | b43 = target): TRUE;
	i = 4 & j = 2 & (b43 = bx | b43 = bxtrg) & (b44 != bx & b44 != bxtrg & b44 != wall): TRUE;
	i = 4 & j = 3 & (b44 = flr | b44 = target): TRUE;
	i = 4 & j = 3 & (b44 = bx | b44 = bxtrg) & (b45 != bx & b45 != bxtrg & b45 != wall): TRUE;
	i = 4 & j = 4 & (b45 = flr | b45 = target): TRUE;
	i = 4 & j = 4 & (b45 = bx | b45 = bxtrg) & (b46 != bx & b46 != bxtrg & b46 != wall): TRUE;
	i = 4 & j = 5 & (b46 = flr | b46 = target): TRUE;
	i = 5 & j = 1 & (b52 = flr | b52 = target): TRUE;
	i = 5 & j = 1 & (b52 = bx | b52 = bxtrg) & (b53 != bx & b53 != bxtrg & b53 != wall): TRUE;
	i = 5 & j = 2 & (b53 = flr | b53 = target): TRUE;
	i = 5 & j = 2 & (b53 = bx | b53 = bxtrg) & (b54 != bx & b54 != bxtrg & b54 != wall): TRUE;
	i = 5 & j = 3 & (b54 = flr | b54 = target): TRUE;
	i = 5 & j = 3 & (b54 = bx | b54 = bxtrg) & (b55 != bx & b55 != bxtrg & b55 != wall): TRUE;
	i = 5 & j = 4 & (b55 = flr | b55 = target): TRUE;
	i = 5 & j = 4 & (b55 = bx | b55 = bxtrg) & (b56 != bx & b56 != bxtrg & b56 != wall): TRUE;
	i = 5 & j = 5 & (b56 = flr | b56 = target): TRUE;
	i = 6 & j = 1 & (b62 = flr | b62 = target): TRUE;
	i = 6 & j = 1 & (b62 = bx | b62 = bxtrg) & (b63 != bx & b63 != bxtrg & b63 != wall): TRUE;
	i = 6 & j = 2 & (b63 = flr | b63 = target): TRUE;
	i = 6 & j = 2 & (b63 = bx | b63 = bxtrg) & (b64 != bx & b64 != bxtrg & b64 != wall): TRUE;
	i = 6 & j = 3 & (b64 = flr | b64 = target): TRUE;
	i = 6 & j = 3 & (b64 = bx | b64 = bxtrg) & (b65 != bx & b65 != bxtrg & b65 != wall): TRUE;
	i = 6 & j = 4 & (b65 = flr | b65 = target): TRUE;
	i = 6 & j = 4 & (b65 = bx | b65 = bxtrg) & (b66 != bx & b66 != bxtrg & b66 != wall): TRUE;
	i = 6 & j = 5 & (b66 = flr | b66 = target): TRUE;
	TRUE: FALSE;
esac;
next(left):= case
	j = 0 | j = 1: FALSE;
	i = 1 & j = 1 & (b10 = flr | b10 = target): TRUE;
	i = 1 & j = 2 & (b11 = flr | b11 = target): TRUE;
	i = 1 & j = 2 & (b11 = bx | b11 = bxtrg) & (b10 != bx & b10 != bxtrg & b10 != wall): TRUE;
	i = 1 & j = 3 & (b12 = flr | b12 = target): TRUE;
	i = 1 & j = 3 & (b12 = bx | b12 = bxtrg) & (b11 != bx & b11 != bxtrg & b11 != wall): TRUE;
	i = 1 & j = 4 & (b13 = flr | b13 = target): TRUE;
	i = 1 & j = 4 & (b13 = bx | b13 = bxtrg) & (b12 != bx & b12 != bxtrg & b12 != wall): TRUE;
	i = 1 & j = 5 & (b14 = flr | b14 = target): TRUE;
	i = 1 & j = 5 & (b14 = bx | b14 = bxtrg) & (b13 != bx & b13 != bxtrg & b13 != wall): TRUE;
	i = 1 & j = 6 & (b15 = flr | b15 = target): TRUE;
	i = 1 & j = 6 & (b15 = bx | b15 = bxtrg) & (b14 != bx & b14 != bxtrg & b14 != wall): TRUE;
	i = 2 & j = 1 & (b20 = flr | b20 = target): TRUE;
	i = 2 & j = 2 & (b21 = flr | b21 = target): TRUE;
	i = 2 & j = 2 & (b21 = bx | b21 = bxtrg) & (b20 != bx & b20 != bxtrg & b20 != wall): TRUE;
	i = 2 & j = 3 & (b22 = flr | b22 = target): TRUE;
	i = 2 & j = 3 & (b22 = bx | b22 = bxtrg) & (b21 != bx & b21 != bxtrg & b21 != wall): TRUE;
	i = 2 & j = 4 & (b23 = flr | b23 = target): TRUE;
	i = 2 & j = 4 & (b23 = bx | b23 = bxtrg) & (b22 != bx & b22 != bxtrg & b22 != wall): TRUE;
	i = 2 & j = 5 & (b24 = flr | b24 = target): TRUE;
	i = 2 & j = 5 & (b24 = bx | b24 = bxtrg) & (b23 != bx & b23 != bxtrg & b23 != wall): TRUE;
	i = 2 & j = 6 & (b25 = flr | b25 = target): TRUE;
	i = 2 & j = 6 & (b25 = bx | b25 = bxtrg) & (b24 != bx & b24 != bxtrg & b24 != wall): TRUE;
	i = 3 & j = 1 & (b30 = flr | b30 = target): TRUE;
	i = 3 & j = 2 & (b31 = flr | b31 = target): TRUE;
	i = 3 & j = 2 & (b31 = bx | b31 = bxtrg) & (b30 != bx & b30 != bxtrg & b30 != wall): TRUE;
	i = 3 & j = 3 & (b32 = flr | b32 = target): TRUE;
	i = 3 & j = 3 & (b32 = bx | b32 = bxtrg) & (b31 != bx & b31 != bxtrg & b31 != wall): TRUE;
	i = 3 & j = 4 & (b33 = flr | b33 = target): TRUE;
	i = 3 & j = 4 & (b33 = bx | b33 = bxtrg) & (b32 != bx & b32 != bxtrg & b32 != wall): TRUE;
	i = 3 & j = 5 & (b34 = flr | b34 = target): TRUE;
	i = 3 & j = 5 & (b34 = bx | b34 = bxtrg) & (b33 != bx & b33 != bxtrg & b33 != wall): TRUE;
	i = 3 & j = 6 & (b35 = flr | b35 = target): TRUE;
	i = 3 & j = 6 & (b35 = bx | b35 = bxtrg) & (b34 != bx & b34 != bxtrg & b34 != wall): TRUE;
	i = 4 & j = 1 & (b40 = flr | b40 = target): TRUE;
	i = 4 & j = 2 & (b41 = flr | b41 = target): TRUE;
	i = 4 & j = 2 & (b41 = bx | b41 = bxtrg) & (b40 != bx & b40 != bxtrg & b40 != wall): TRUE;
	i = 4 & j = 3 & (b42 = flr | b42 = target): TRUE;
	i = 4 & j = 3 & (b42 = bx | b42 = bxtrg) & (b41 != bx & b41 != bxtrg & b41 != wall): TRUE;
	i = 4 & j = 4 & (b43 = flr | b43 = target): TRUE;
	i = 4 & j = 4 & (b43 = bx | b43 = bxtrg) & (b42 != bx & b42 != bxtrg & b42 != wall): TRUE;
	i = 4 & j = 5 & (b44 = flr | b44 = target): TRUE;
	i = 4 & j = 5 & (b44 = bx | b44 = bxtrg) & (b43 != bx & b43 != bxtrg & b43 != wall): TRUE;
	i = 4 & j = 6 & (b45 = flr | b45 = target): TRUE;
	i = 4 & j = 6 & (b45 = bx | b45 = bxtrg) & (b44 != bx & b44 != bxtrg & b44 != wall): TRUE;
	i = 5 & j = 1 & (b50 = flr | b50 = target): TRUE;
	i = 5 & j = 2 & (b51 = flr | b51 = target): TRUE;
	i = 5 & j = 2 & (b51 = bx | b51 = bxtrg) & (b50 != bx & b50 != bxtrg & b50 != wall): TRUE;
	i = 5 & j = 3 & (b52 = flr | b52 = target): TRUE;
	i = 5 & j = 3 & (b52 = bx | b52 = bxtrg) & (b51 != bx & b51 != bxtrg & b51 != wall): TRUE;
	i = 5 & j = 4 & (b53 = flr | b53 = target): TRUE;
	i = 5 & j = 4 & (b53 = bx | b53 = bxtrg) & (b52 != bx & b52 != bxtrg & b52 != wall): TRUE;
	i = 5 & j = 5 & (b54 = flr | b54 = target): TRUE;
	i = 5 & j = 5 & (b54 = bx | b54 = bxtrg) & (b53 != bx & b53 != bxtrg & b53 != wall): TRUE;
	i = 5 & j = 6 & (b55 = flr | b55 = target): TRUE;
	i = 5 & j = 6 & (b55 = bx | b55 = bxtrg) & (b54 != bx & b54 != bxtrg & b54 != wall): TRUE;
	i = 6 & j = 1 & (b60 = flr | b60 = target): TRUE;
	i = 6 & j = 2 & (b61 = flr | b61 = target): TRUE;
	i = 6 & j = 2 & (b61 = bx | b61 = bxtrg) & (b60 != bx & b60 != bxtrg & b60 != wall): TRUE;
	i = 6 & j = 3 & (b62 = flr | b62 = target): TRUE;
	i = 6 & j = 3 & (b62 = bx | b62 = bxtrg) & (b61 != bx & b61 != bxtrg & b61 != wall): TRUE;
	i = 6 & j = 4 & (b63 = flr | b63 = target): TRUE;
	i = 6 & j = 4 & (b63 = bx | b63 = bxtrg) & (b62 != bx & b62 != bxtrg & b62 != wall): TRUE;
	i = 6 & j = 5 & (b64 = flr | b64 = target): TRUE;
	i = 6 & j = 5 & (b64 = bx | b64 = bxtrg) & (b63 != bx & b63 != bxtrg & b63 != wall): TRUE;
	i = 6 & j = 6 & (b65 = flr | b65 = target): TRUE;
	i = 6 & j = 6 & (b65 = bx | b65 = bxtrg) & (b64 != bx & b64 != bxtrg & b64 != wall): TRUE;
	TRUE: FALSE;
esac;

next(b00) := case
	--floor to floor
		next(dr) = r & (b00 = man & b01 =flr):flr;
		next(dr) = d & (b00 = man & b10 =flr):flr;


	--target to floor
		next(dr) = r & (b00 = mantrg & b01 =flr): target;
		next(dr) = d & (b00 = mantrg & b10 =flr): target;

	--floor to target
		next(dr) = r & (b00 = man & b01 = target):flr;
		next(dr) = d & (b00 = man & b10 = target):flr;

	--target to target
		next(dr) = r & (b00 = mantrg & b01 = target): target;
		next(dr) = d & (b00 = mantrg & b10 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b00 = man & b01 = bx) & (b02 =flr) & (0+2 < n):flr;
		next(dr) = d & (b00 = man & b10 = bx) & (b20 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b00 = man & b01 = bx) & (b02 = target) & (0+2 < n):flr;
		next(dr) = d & (b00 = man & b10 = bx) & (b20 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b00 = man & b01 = bxtrg) & (b02 =flr) & (0+2 < n):flr;
		next(dr) = d & (b00 = man & b10 = bxtrg) & (b20 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b00 = man & b01 = bxtrg) & (b02 = target) & (0+2 < n):flr;
		next(dr) = d & (b00 = man & b10 = bxtrg) & (b20 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b00 = mantrg & b01 = bx) & (b02 =flr) & (0+2 < n): target;
		next(dr) = d & (b00 = mantrg & b10 = bx) & (b20 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b00 = mantrg & b01 = bx) & (b02 = target) & (0+2 < n): target;
		next(dr) = d & (b00 = mantrg & b10 = bx) & (b20 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b00 = mantrg & b01 = bxtrg) & (b02 =flr) & (0+2 < n): target;
		next(dr) = d & (b00 = mantrg & b10 = bxtrg) & (b20 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b00 = mantrg & b01 = bxtrg) & (b02 = target) & (0+2 < n): target;
		next(dr) = d & (b00 = mantrg & b10 = bxtrg) & (b20 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = l & (b00 = flr & (b01 = man | b01 = mantrg)): man;
        next(dr) = u & (b00 = flr & (b10 = man | b10 = mantrg)): man;

    --box to floor
        next(dr) = l & (b00 = flr & (b01 = bx | b01 = bxtrg)) & (b02 = man | b02 = mantrg): bx;
        next(dr) = u & (b00 = flr & (b10 = bx | b10 = bxtrg)) & (b20 = man | b20 = mantrg): bx;

    --man to target
        next(dr) = l & (b00 = target & (b01 = man | b01 = mantrg)): mantrg;
        next(dr) = u & (b00 = target & (b10 = man | b10 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b00 = target & (b01 = bx | b01 = bxtrg)) & (b02 = man | b02 = mantrg): bxtrg;
        next(dr) = u & (b00 = target & (b10 = bx | b10 = bxtrg)) & (b20 = man | b20 = mantrg): bxtrg;

    --man to box

    --man to box on target

    TRUE: b00;
esac;
next(b01) := case
	--floor to floor
		next(dr) = l & (b01 = man & b00 =flr):flr;
		next(dr) = r & (b01 = man & b02 =flr):flr;
		next(dr) = d & (b01 = man & b11 =flr):flr;


	--target to floor
		next(dr) = l & (b01 = mantrg & b00 =flr): target;
		next(dr) = r & (b01 = mantrg & b02 =flr): target;
		next(dr) = d & (b01 = mantrg & b11 =flr): target;

	--floor to target
		next(dr) = l & (b01 = man & b00 = target):flr;
		next(dr) = r & (b01 = man & b02 = target):flr;
		next(dr) = d & (b01 = man & b11 = target):flr;

	--target to target
		next(dr) = l & (b01 = mantrg & b00 = target): target;
		next(dr) = r & (b01 = mantrg & b02 = target): target;
		next(dr) = d & (b01 = mantrg & b11 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b01 = man & b02 = bx) & (b03 =flr) & (1+2 < n):flr;
		next(dr) = d & (b01 = man & b11 = bx) & (b21 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b01 = man & b02 = bx) & (b03 = target) & (1+2 < n):flr;
		next(dr) = d & (b01 = man & b11 = bx) & (b21 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b01 = man & b02 = bxtrg) & (b03 =flr) & (1+2 < n):flr;
		next(dr) = d & (b01 = man & b11 = bxtrg) & (b21 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b01 = man & b02 = bxtrg) & (b03 = target) & (1+2 < n):flr;
		next(dr) = d & (b01 = man & b11 = bxtrg) & (b21 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b01 = mantrg & b02 = bx) & (b03 =flr) & (1+2 < n): target;
		next(dr) = d & (b01 = mantrg & b11 = bx) & (b21 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b01 = mantrg & b02 = bx) & (b03 = target) & (1+2 < n): target;
		next(dr) = d & (b01 = mantrg & b11 = bx) & (b21 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b01 = mantrg & b02 = bxtrg) & (b03 =flr) & (1+2 < n): target;
		next(dr) = d & (b01 = mantrg & b11 = bxtrg) & (b21 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b01 = mantrg & b02 = bxtrg) & (b03 = target) & (1+2 < n): target;
		next(dr) = d & (b01 = mantrg & b11 = bxtrg) & (b21 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b01 = flr & (b00 = man | b00 = mantrg)) : man;
        next(dr) = l & (b01 = flr & (b02 = man | b02 = mantrg)): man;
        next(dr) = u & (b01 = flr & (b11 = man | b11 = mantrg)): man;

    --box to floor
        next(dr) = l & (b01 = flr & (b02 = bx | b02 = bxtrg)) & (b03 = man | b03 = mantrg): bx;
        next(dr) = u & (b01 = flr & (b11 = bx | b11 = bxtrg)) & (b21 = man | b21 = mantrg): bx;

    --man to target
        next(dr) = r & (b01 = target & (b00 = man | b00 = mantrg)): mantrg;
        next(dr) = l & (b01 = target & (b02 = man | b02 = mantrg)): mantrg;
        next(dr) = u & (b01 = target & (b11 = man | b11 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b01 = target & (b02 = bx | b02 = bxtrg)) & (b03 = man | b03 = mantrg): bxtrg;
        next(dr) = u & (b01 = target & (b11 = bx | b11 = bxtrg)) & (b21 = man | b21 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b01 = bx & (b00 = man | b00 = mantrg)) & (b02 = flr | b02 = target): man;
        next(dr) = l & (b01 = bx & (b02 = man | b02 = mantrg)) & (b00 = flr | b00 = target): man;

    --man to box on target
        next(dr) = r & (b01 = bxtrg & (b00 = man | b00 = mantrg)) & (b02 = flr | b02 = target): mantrg;
        next(dr) = l & (b01 = bxtrg & (b02 = man | b02 = mantrg)) & (b00 = flr | b00 = target): mantrg;

    TRUE: b01;
esac;
next(b02) := case
	--floor to floor
		next(dr) = l & (b02 = man & b01 =flr):flr;
		next(dr) = r & (b02 = man & b03 =flr):flr;
		next(dr) = d & (b02 = man & b12 =flr):flr;


	--target to floor
		next(dr) = l & (b02 = mantrg & b01 =flr): target;
		next(dr) = r & (b02 = mantrg & b03 =flr): target;
		next(dr) = d & (b02 = mantrg & b12 =flr): target;

	--floor to target
		next(dr) = l & (b02 = man & b01 = target):flr;
		next(dr) = r & (b02 = man & b03 = target):flr;
		next(dr) = d & (b02 = man & b12 = target):flr;

	--target to target
		next(dr) = l & (b02 = mantrg & b01 = target): target;
		next(dr) = r & (b02 = mantrg & b03 = target): target;
		next(dr) = d & (b02 = mantrg & b12 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b02 = man & b01 = bx) & (b00 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b02 = man & b03 = bx) & (b04 =flr) & (2+2 < n):flr;
		next(dr) = d & (b02 = man & b12 = bx) & (b22 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b02 = man & b01 = bx) & (b00 = target) & (2-2 > 0):flr;
		next(dr) = r & (b02 = man & b03 = bx) & (b04 = target) & (2+2 < n):flr;
		next(dr) = d & (b02 = man & b12 = bx) & (b22 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b02 = man & b01 = bxtrg) & (b00 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b02 = man & b03 = bxtrg) & (b04 =flr) & (2+2 < n):flr;
		next(dr) = d & (b02 = man & b12 = bxtrg) & (b22 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b02 = man & b01 = bxtrg) & (b00 = target) & (2-2 > 0):flr;
		next(dr) = r & (b02 = man & b03 = bxtrg) & (b04 = target) & (2+2 < n):flr;
		next(dr) = d & (b02 = man & b12 = bxtrg) & (b22 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b02 = mantrg & b01 = bx) & (b00 =flr) & (2-2 > 0): target;
		next(dr) = r & (b02 = mantrg & b03 = bx) & (b04 =flr) & (2+2 < n): target;
		next(dr) = d & (b02 = mantrg & b12 = bx) & (b22 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b02 = mantrg & b01 = bx) & (b00 = target) & (2-2 > 0): target;
		next(dr) = r & (b02 = mantrg & b03 = bx) & (b04 = target) & (2+2 < n): target;
		next(dr) = d & (b02 = mantrg & b12 = bx) & (b22 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b02 = mantrg & b01 = bxtrg) & (b00 =flr) & (2-2 > 0): target;
		next(dr) = r & (b02 = mantrg & b03 = bxtrg) & (b04 =flr) & (2+2 < n): target;
		next(dr) = d & (b02 = mantrg & b12 = bxtrg) & (b22 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b02 = mantrg & b01 = bxtrg) & (b00 = target) & (2-2 > 0): target;
		next(dr) = r & (b02 = mantrg & b03 = bxtrg) & (b04 = target) & (2+2 < n): target;
		next(dr) = d & (b02 = mantrg & b12 = bxtrg) & (b22 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b02 = flr & (b01 = man | b01 = mantrg)) : man;
        next(dr) = l & (b02 = flr & (b03 = man | b03 = mantrg)): man;
        next(dr) = u & (b02 = flr & (b12 = man | b12 = mantrg)): man;

    --box to floor
        next(dr) = r & (b02 = flr & (b01 = bx | b01 = bxtrg)) & (b00 = man | b00 = mantrg): bx;
        next(dr) = l & (b02 = flr & (b03 = bx | b03 = bxtrg)) & (b04 = man | b04 = mantrg): bx;
        next(dr) = u & (b02 = flr & (b12 = bx | b12 = bxtrg)) & (b22 = man | b22 = mantrg): bx;

    --man to target
        next(dr) = r & (b02 = target & (b01 = man | b01 = mantrg)): mantrg;
        next(dr) = l & (b02 = target & (b03 = man | b03 = mantrg)): mantrg;
        next(dr) = u & (b02 = target & (b12 = man | b12 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b02 = target & (b01 = bx | b01 = bxtrg)) & (b00 = man | b00 = mantrg): bxtrg;
        next(dr) = l & (b02 = target & (b03 = bx | b03 = bxtrg)) & (b04 = man | b04 = mantrg): bxtrg;
        next(dr) = u & (b02 = target & (b12 = bx | b12 = bxtrg)) & (b22 = man | b22 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b02 = bx & (b01 = man | b01 = mantrg)) & (b03 = flr | b03 = target): man;
        next(dr) = l & (b02 = bx & (b03 = man | b03 = mantrg)) & (b01 = flr | b01 = target): man;

    --man to box on target
        next(dr) = r & (b02 = bxtrg & (b01 = man | b01 = mantrg)) & (b03 = flr | b03 = target): mantrg;
        next(dr) = l & (b02 = bxtrg & (b03 = man | b03 = mantrg)) & (b01 = flr | b01 = target): mantrg;

    TRUE: b02;
esac;
next(b03) := case
	--floor to floor
		next(dr) = l & (b03 = man & b02 =flr):flr;
		next(dr) = r & (b03 = man & b04 =flr):flr;
		next(dr) = d & (b03 = man & b13 =flr):flr;


	--target to floor
		next(dr) = l & (b03 = mantrg & b02 =flr): target;
		next(dr) = r & (b03 = mantrg & b04 =flr): target;
		next(dr) = d & (b03 = mantrg & b13 =flr): target;

	--floor to target
		next(dr) = l & (b03 = man & b02 = target):flr;
		next(dr) = r & (b03 = man & b04 = target):flr;
		next(dr) = d & (b03 = man & b13 = target):flr;

	--target to target
		next(dr) = l & (b03 = mantrg & b02 = target): target;
		next(dr) = r & (b03 = mantrg & b04 = target): target;
		next(dr) = d & (b03 = mantrg & b13 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b03 = man & b02 = bx) & (b01 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b03 = man & b04 = bx) & (b05 =flr) & (3+2 < n):flr;
		next(dr) = d & (b03 = man & b13 = bx) & (b23 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b03 = man & b02 = bx) & (b01 = target) & (3-2 > 0):flr;
		next(dr) = r & (b03 = man & b04 = bx) & (b05 = target) & (3+2 < n):flr;
		next(dr) = d & (b03 = man & b13 = bx) & (b23 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b03 = man & b02 = bxtrg) & (b01 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b03 = man & b04 = bxtrg) & (b05 =flr) & (3+2 < n):flr;
		next(dr) = d & (b03 = man & b13 = bxtrg) & (b23 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b03 = man & b02 = bxtrg) & (b01 = target) & (3-2 > 0):flr;
		next(dr) = r & (b03 = man & b04 = bxtrg) & (b05 = target) & (3+2 < n):flr;
		next(dr) = d & (b03 = man & b13 = bxtrg) & (b23 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b03 = mantrg & b02 = bx) & (b01 =flr) & (3-2 > 0): target;
		next(dr) = r & (b03 = mantrg & b04 = bx) & (b05 =flr) & (3+2 < n): target;
		next(dr) = d & (b03 = mantrg & b13 = bx) & (b23 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b03 = mantrg & b02 = bx) & (b01 = target) & (3-2 > 0): target;
		next(dr) = r & (b03 = mantrg & b04 = bx) & (b05 = target) & (3+2 < n): target;
		next(dr) = d & (b03 = mantrg & b13 = bx) & (b23 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b03 = mantrg & b02 = bxtrg) & (b01 =flr) & (3-2 > 0): target;
		next(dr) = r & (b03 = mantrg & b04 = bxtrg) & (b05 =flr) & (3+2 < n): target;
		next(dr) = d & (b03 = mantrg & b13 = bxtrg) & (b23 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b03 = mantrg & b02 = bxtrg) & (b01 = target) & (3-2 > 0): target;
		next(dr) = r & (b03 = mantrg & b04 = bxtrg) & (b05 = target) & (3+2 < n): target;
		next(dr) = d & (b03 = mantrg & b13 = bxtrg) & (b23 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b03 = flr & (b02 = man | b02 = mantrg)) : man;
        next(dr) = l & (b03 = flr & (b04 = man | b04 = mantrg)): man;
        next(dr) = u & (b03 = flr & (b13 = man | b13 = mantrg)): man;

    --box to floor
        next(dr) = r & (b03 = flr & (b02 = bx | b02 = bxtrg)) & (b01 = man | b01 = mantrg): bx;
        next(dr) = l & (b03 = flr & (b04 = bx | b04 = bxtrg)) & (b05 = man | b05 = mantrg): bx;
        next(dr) = u & (b03 = flr & (b13 = bx | b13 = bxtrg)) & (b23 = man | b23 = mantrg): bx;

    --man to target
        next(dr) = r & (b03 = target & (b02 = man | b02 = mantrg)): mantrg;
        next(dr) = l & (b03 = target & (b04 = man | b04 = mantrg)): mantrg;
        next(dr) = u & (b03 = target & (b13 = man | b13 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b03 = target & (b02 = bx | b02 = bxtrg)) & (b01 = man | b01 = mantrg): bxtrg;
        next(dr) = l & (b03 = target & (b04 = bx | b04 = bxtrg)) & (b05 = man | b05 = mantrg): bxtrg;
        next(dr) = u & (b03 = target & (b13 = bx | b13 = bxtrg)) & (b23 = man | b23 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b03 = bx & (b02 = man | b02 = mantrg)) & (b04 = flr | b04 = target): man;
        next(dr) = l & (b03 = bx & (b04 = man | b04 = mantrg)) & (b02 = flr | b02 = target): man;

    --man to box on target
        next(dr) = r & (b03 = bxtrg & (b02 = man | b02 = mantrg)) & (b04 = flr | b04 = target): mantrg;
        next(dr) = l & (b03 = bxtrg & (b04 = man | b04 = mantrg)) & (b02 = flr | b02 = target): mantrg;

    TRUE: b03;
esac;
next(b04) := case
	--floor to floor
		next(dr) = l & (b04 = man & b03 =flr):flr;
		next(dr) = r & (b04 = man & b05 =flr):flr;
		next(dr) = d & (b04 = man & b14 =flr):flr;


	--target to floor
		next(dr) = l & (b04 = mantrg & b03 =flr): target;
		next(dr) = r & (b04 = mantrg & b05 =flr): target;
		next(dr) = d & (b04 = mantrg & b14 =flr): target;

	--floor to target
		next(dr) = l & (b04 = man & b03 = target):flr;
		next(dr) = r & (b04 = man & b05 = target):flr;
		next(dr) = d & (b04 = man & b14 = target):flr;

	--target to target
		next(dr) = l & (b04 = mantrg & b03 = target): target;
		next(dr) = r & (b04 = mantrg & b05 = target): target;
		next(dr) = d & (b04 = mantrg & b14 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b04 = man & b03 = bx) & (b02 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b04 = man & b05 = bx) & (b06 =flr) & (4+2 < n):flr;
		next(dr) = d & (b04 = man & b14 = bx) & (b24 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b04 = man & b03 = bx) & (b02 = target) & (4-2 > 0):flr;
		next(dr) = r & (b04 = man & b05 = bx) & (b06 = target) & (4+2 < n):flr;
		next(dr) = d & (b04 = man & b14 = bx) & (b24 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b04 = man & b03 = bxtrg) & (b02 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b04 = man & b05 = bxtrg) & (b06 =flr) & (4+2 < n):flr;
		next(dr) = d & (b04 = man & b14 = bxtrg) & (b24 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b04 = man & b03 = bxtrg) & (b02 = target) & (4-2 > 0):flr;
		next(dr) = r & (b04 = man & b05 = bxtrg) & (b06 = target) & (4+2 < n):flr;
		next(dr) = d & (b04 = man & b14 = bxtrg) & (b24 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b04 = mantrg & b03 = bx) & (b02 =flr) & (4-2 > 0): target;
		next(dr) = r & (b04 = mantrg & b05 = bx) & (b06 =flr) & (4+2 < n): target;
		next(dr) = d & (b04 = mantrg & b14 = bx) & (b24 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b04 = mantrg & b03 = bx) & (b02 = target) & (4-2 > 0): target;
		next(dr) = r & (b04 = mantrg & b05 = bx) & (b06 = target) & (4+2 < n): target;
		next(dr) = d & (b04 = mantrg & b14 = bx) & (b24 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b04 = mantrg & b03 = bxtrg) & (b02 =flr) & (4-2 > 0): target;
		next(dr) = r & (b04 = mantrg & b05 = bxtrg) & (b06 =flr) & (4+2 < n): target;
		next(dr) = d & (b04 = mantrg & b14 = bxtrg) & (b24 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b04 = mantrg & b03 = bxtrg) & (b02 = target) & (4-2 > 0): target;
		next(dr) = r & (b04 = mantrg & b05 = bxtrg) & (b06 = target) & (4+2 < n): target;
		next(dr) = d & (b04 = mantrg & b14 = bxtrg) & (b24 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b04 = flr & (b03 = man | b03 = mantrg)) : man;
        next(dr) = l & (b04 = flr & (b05 = man | b05 = mantrg)): man;
        next(dr) = u & (b04 = flr & (b14 = man | b14 = mantrg)): man;

    --box to floor
        next(dr) = r & (b04 = flr & (b03 = bx | b03 = bxtrg)) & (b02 = man | b02 = mantrg): bx;
        next(dr) = l & (b04 = flr & (b05 = bx | b05 = bxtrg)) & (b06 = man | b06 = mantrg): bx;
        next(dr) = u & (b04 = flr & (b14 = bx | b14 = bxtrg)) & (b24 = man | b24 = mantrg): bx;

    --man to target
        next(dr) = r & (b04 = target & (b03 = man | b03 = mantrg)): mantrg;
        next(dr) = l & (b04 = target & (b05 = man | b05 = mantrg)): mantrg;
        next(dr) = u & (b04 = target & (b14 = man | b14 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b04 = target & (b03 = bx | b03 = bxtrg)) & (b02 = man | b02 = mantrg): bxtrg;
        next(dr) = l & (b04 = target & (b05 = bx | b05 = bxtrg)) & (b06 = man | b06 = mantrg): bxtrg;
        next(dr) = u & (b04 = target & (b14 = bx | b14 = bxtrg)) & (b24 = man | b24 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b04 = bx & (b03 = man | b03 = mantrg)) & (b05 = flr | b05 = target): man;
        next(dr) = l & (b04 = bx & (b05 = man | b05 = mantrg)) & (b03 = flr | b03 = target): man;

    --man to box on target
        next(dr) = r & (b04 = bxtrg & (b03 = man | b03 = mantrg)) & (b05 = flr | b05 = target): mantrg;
        next(dr) = l & (b04 = bxtrg & (b05 = man | b05 = mantrg)) & (b03 = flr | b03 = target): mantrg;

    TRUE: b04;
esac;
next(b05) := case
	--floor to floor
		next(dr) = l & (b05 = man & b04 =flr):flr;
		next(dr) = r & (b05 = man & b06 =flr):flr;
		next(dr) = d & (b05 = man & b15 =flr):flr;


	--target to floor
		next(dr) = l & (b05 = mantrg & b04 =flr): target;
		next(dr) = r & (b05 = mantrg & b06 =flr): target;
		next(dr) = d & (b05 = mantrg & b15 =flr): target;

	--floor to target
		next(dr) = l & (b05 = man & b04 = target):flr;
		next(dr) = r & (b05 = man & b06 = target):flr;
		next(dr) = d & (b05 = man & b15 = target):flr;

	--target to target
		next(dr) = l & (b05 = mantrg & b04 = target): target;
		next(dr) = r & (b05 = mantrg & b06 = target): target;
		next(dr) = d & (b05 = mantrg & b15 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b05 = man & b04 = bx) & (b03 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b05 = man & b15 = bx) & (b25 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b05 = man & b04 = bx) & (b03 = target) & (5-2 > 0):flr;
		next(dr) = d & (b05 = man & b15 = bx) & (b25 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b05 = man & b04 = bxtrg) & (b03 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b05 = man & b15 = bxtrg) & (b25 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b05 = man & b04 = bxtrg) & (b03 = target) & (5-2 > 0):flr;
		next(dr) = d & (b05 = man & b15 = bxtrg) & (b25 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b05 = mantrg & b04 = bx) & (b03 =flr) & (5-2 > 0): target;
		next(dr) = d & (b05 = mantrg & b15 = bx) & (b25 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b05 = mantrg & b04 = bx) & (b03 = target) & (5-2 > 0): target;
		next(dr) = d & (b05 = mantrg & b15 = bx) & (b25 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b05 = mantrg & b04 = bxtrg) & (b03 =flr) & (5-2 > 0): target;
		next(dr) = d & (b05 = mantrg & b15 = bxtrg) & (b25 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b05 = mantrg & b04 = bxtrg) & (b03 = target) & (5-2 > 0): target;
		next(dr) = d & (b05 = mantrg & b15 = bxtrg) & (b25 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b05 = flr & (b04 = man | b04 = mantrg)) : man;
        next(dr) = l & (b05 = flr & (b06 = man | b06 = mantrg)): man;
        next(dr) = u & (b05 = flr & (b15 = man | b15 = mantrg)): man;

    --box to floor
        next(dr) = r & (b05 = flr & (b04 = bx | b04 = bxtrg)) & (b03 = man | b03 = mantrg): bx;
        next(dr) = u & (b05 = flr & (b15 = bx | b15 = bxtrg)) & (b25 = man | b25 = mantrg): bx;

    --man to target
        next(dr) = r & (b05 = target & (b04 = man | b04 = mantrg)): mantrg;
        next(dr) = l & (b05 = target & (b06 = man | b06 = mantrg)): mantrg;
        next(dr) = u & (b05 = target & (b15 = man | b15 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b05 = target & (b04 = bx | b04 = bxtrg)) & (b03 = man | b03 = mantrg): bxtrg;
        next(dr) = u & (b05 = target & (b15 = bx | b15 = bxtrg)) & (b25 = man | b25 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b05 = bx & (b04 = man | b04 = mantrg)) & (b06 = flr | b06 = target): man;
        next(dr) = l & (b05 = bx & (b06 = man | b06 = mantrg)) & (b04 = flr | b04 = target): man;

    --man to box on target
        next(dr) = r & (b05 = bxtrg & (b04 = man | b04 = mantrg)) & (b06 = flr | b06 = target): mantrg;
        next(dr) = l & (b05 = bxtrg & (b06 = man | b06 = mantrg)) & (b04 = flr | b04 = target): mantrg;

    TRUE: b05;
esac;
next(b06) := case
	--floor to floor
		next(dr) = l & (b06 = man & b05 =flr):flr;
		next(dr) = d & (b06 = man & b16 =flr):flr;


	--target to floor
		next(dr) = l & (b06 = mantrg & b05 =flr): target;
		next(dr) = d & (b06 = mantrg & b16 =flr): target;

	--floor to target
		next(dr) = l & (b06 = man & b05 = target):flr;
		next(dr) = d & (b06 = man & b16 = target):flr;

	--target to target
		next(dr) = l & (b06 = mantrg & b05 = target): target;
		next(dr) = d & (b06 = mantrg & b16 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b06 = man & b05 = bx) & (b04 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b06 = man & b16 = bx) & (b26 =flr) & (0+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b06 = man & b05 = bx) & (b04 = target) & (6-2 > 0):flr;
		next(dr) = d & (b06 = man & b16 = bx) & (b26 = target) & (0+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b06 = man & b05 = bxtrg) & (b04 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b06 = man & b16 = bxtrg) & (b26 =flr) & (0-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b06 = man & b05 = bxtrg) & (b04 = target) & (6-2 > 0):flr;
		next(dr) = d & (b06 = man & b16 = bxtrg) & (b26 = target) & (0+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b06 = mantrg & b05 = bx) & (b04 =flr) & (6-2 > 0): target;
		next(dr) = d & (b06 = mantrg & b16 = bx) & (b26 =flr) & (0+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b06 = mantrg & b05 = bx) & (b04 = target) & (6-2 > 0): target;
		next(dr) = d & (b06 = mantrg & b16 = bx) & (b26 = target) & (0+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b06 = mantrg & b05 = bxtrg) & (b04 =flr) & (6-2 > 0): target;
		next(dr) = d & (b06 = mantrg & b16 = bxtrg) & (b26 =flr) & (0+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b06 = mantrg & b05 = bxtrg) & (b04 = target) & (6-2 > 0): target;
		next(dr) = d & (b06 = mantrg & b16 = bxtrg) & (b26 = target) & (0+2 < m): target;

    --man to floor
        next(dr) = r & (b06 = flr & (b05 = man | b05 = mantrg)) : man;
        next(dr) = u & (b06 = flr & (b16 = man | b16 = mantrg)): man;

    --box to floor
        next(dr) = r & (b06 = flr & (b05 = bx | b05 = bxtrg)) & (b04 = man | b04 = mantrg): bx;
        next(dr) = u & (b06 = flr & (b16 = bx | b16 = bxtrg)) & (b26 = man | b26 = mantrg): bx;

    --man to target
        next(dr) = r & (b06 = target & (b05 = man | b05 = mantrg)): mantrg;
        next(dr) = u & (b06 = target & (b16 = man | b16 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b06 = target & (b05 = bx | b05 = bxtrg)) & (b04 = man | b04 = mantrg): bxtrg;
        next(dr) = u & (b06 = target & (b16 = bx | b16 = bxtrg)) & (b26 = man | b26 = mantrg): bxtrg;

    --man to box

    --man to box on target

    TRUE: b06;
esac;
next(b10) := case
	--floor to floor
		next(dr) = r & (b10 = man & b11 =flr):flr;
		next(dr) = u & (b10 = man & b00 =flr):flr;
		next(dr) = d & (b10 = man & b20 =flr):flr;


	--target to floor
		next(dr) = r & (b10 = mantrg & b11 =flr): target;
		next(dr) = u & (b10 = mantrg & b00 =flr): target;
		next(dr) = d & (b10 = mantrg & b20 =flr): target;

	--floor to target
		next(dr) = r & (b10 = man & b11 = target):flr;
		next(dr) = u & (b10 = man & b00 = target):flr;
		next(dr) = d & (b10 = man & b20 = target):flr;

	--target to target
		next(dr) = r & (b10 = mantrg & b11 = target): target;
		next(dr) = u & (b10 = mantrg & b00 = target): target;
		next(dr) = d & (b10 = mantrg & b20 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b10 = man & b11 = bx) & (b12 =flr) & (0+2 < n):flr;
		next(dr) = d & (b10 = man & b20 = bx) & (b30 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b10 = man & b11 = bx) & (b12 = target) & (0+2 < n):flr;
		next(dr) = d & (b10 = man & b20 = bx) & (b30 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b10 = man & b11 = bxtrg) & (b12 =flr) & (0+2 < n):flr;
		next(dr) = d & (b10 = man & b20 = bxtrg) & (b30 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b10 = man & b11 = bxtrg) & (b12 = target) & (0+2 < n):flr;
		next(dr) = d & (b10 = man & b20 = bxtrg) & (b30 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b10 = mantrg & b11 = bx) & (b12 =flr) & (0+2 < n): target;
		next(dr) = d & (b10 = mantrg & b20 = bx) & (b30 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b10 = mantrg & b11 = bx) & (b12 = target) & (0+2 < n): target;
		next(dr) = d & (b10 = mantrg & b20 = bx) & (b30 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b10 = mantrg & b11 = bxtrg) & (b12 =flr) & (0+2 < n): target;
		next(dr) = d & (b10 = mantrg & b20 = bxtrg) & (b30 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b10 = mantrg & b11 = bxtrg) & (b12 = target) & (0+2 < n): target;
		next(dr) = d & (b10 = mantrg & b20 = bxtrg) & (b30 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = l & (b10 = flr & (b11 = man | b11 = mantrg)): man;
        next(dr) = d & (b10 = flr & (b00 = man | b00 = mantrg)): man;
        next(dr) = u & (b10 = flr & (b20 = man | b20 = mantrg)): man;

    --box to floor
        next(dr) = l & (b10 = flr & (b11 = bx | b11 = bxtrg)) & (b12 = man | b12 = mantrg): bx;
        next(dr) = u & (b10 = flr & (b20 = bx | b20 = bxtrg)) & (b30 = man | b30 = mantrg): bx;

    --man to target
        next(dr) = l & (b10 = target & (b11 = man | b11 = mantrg)): mantrg;
        next(dr) = d & (b10 = target & (b00 = man | b00 = mantrg)): mantrg;
        next(dr) = u & (b10 = target & (b20 = man | b20 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b10 = target & (b11 = bx | b11 = bxtrg)) & (b12 = man | b12 = mantrg): bxtrg;
        next(dr) = u & (b10 = target & (b20 = bx | b20 = bxtrg)) & (b30 = man | b30 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b10 = bx & (b00 = man | b00 = mantrg)) & (b20 = flr | b20 = target): man;
        next(dr) = u & (b10 = bx & (b20 = man | b20 = mantrg)) & (b00 = flr | b00 = target): man;

    --man to box on target
        next(dr) = d & (b10 = bxtrg & (b00 = man | b00 = mantrg)) & (b20 = flr | b20 = target): mantrg;
        next(dr) = u & (b10 = bxtrg & (b20 = man | b20 = mantrg)) & (b00 = flr | b00 = target): mantrg;

    TRUE: b10;
esac;
next(b11) := case
	--floor to floor
		next(dr) = l & (b11 = man & b10 =flr):flr;
		next(dr) = r & (b11 = man & b12 =flr):flr;
		next(dr) = u & (b11 = man & b01 =flr):flr;
		next(dr) = d & (b11 = man & b21 =flr):flr;


	--target to floor
		next(dr) = l & (b11 = mantrg & b10 =flr): target;
		next(dr) = r & (b11 = mantrg & b12 =flr): target;
		next(dr) = u & (b11 = mantrg & b01 =flr): target;
		next(dr) = d & (b11 = mantrg & b21 =flr): target;

	--floor to target
		next(dr) = l & (b11 = man & b10 = target):flr;
		next(dr) = r & (b11 = man & b12 = target):flr;
		next(dr) = u & (b11 = man & b01 = target):flr;
		next(dr) = d & (b11 = man & b21 = target):flr;

	--target to target
		next(dr) = l & (b11 = mantrg & b10 = target): target;
		next(dr) = r & (b11 = mantrg & b12 = target): target;
		next(dr) = u & (b11 = mantrg & b01 = target): target;
		next(dr) = d & (b11 = mantrg & b21 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b11 = man & b12 = bx) & (b13 =flr) & (1+2 < n):flr;
		next(dr) = d & (b11 = man & b21 = bx) & (b31 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b11 = man & b12 = bx) & (b13 = target) & (1+2 < n):flr;
		next(dr) = d & (b11 = man & b21 = bx) & (b31 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b11 = man & b12 = bxtrg) & (b13 =flr) & (1+2 < n):flr;
		next(dr) = d & (b11 = man & b21 = bxtrg) & (b31 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b11 = man & b12 = bxtrg) & (b13 = target) & (1+2 < n):flr;
		next(dr) = d & (b11 = man & b21 = bxtrg) & (b31 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b11 = mantrg & b12 = bx) & (b13 =flr) & (1+2 < n): target;
		next(dr) = d & (b11 = mantrg & b21 = bx) & (b31 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b11 = mantrg & b12 = bx) & (b13 = target) & (1+2 < n): target;
		next(dr) = d & (b11 = mantrg & b21 = bx) & (b31 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b11 = mantrg & b12 = bxtrg) & (b13 =flr) & (1+2 < n): target;
		next(dr) = d & (b11 = mantrg & b21 = bxtrg) & (b31 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b11 = mantrg & b12 = bxtrg) & (b13 = target) & (1+2 < n): target;
		next(dr) = d & (b11 = mantrg & b21 = bxtrg) & (b31 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b11 = flr & (b10 = man | b10 = mantrg)) : man;
        next(dr) = l & (b11 = flr & (b12 = man | b12 = mantrg)): man;
        next(dr) = d & (b11 = flr & (b01 = man | b01 = mantrg)): man;
        next(dr) = u & (b11 = flr & (b21 = man | b21 = mantrg)): man;

    --box to floor
        next(dr) = l & (b11 = flr & (b12 = bx | b12 = bxtrg)) & (b13 = man | b13 = mantrg): bx;
        next(dr) = u & (b11 = flr & (b21 = bx | b21 = bxtrg)) & (b31 = man | b31 = mantrg): bx;

    --man to target
        next(dr) = r & (b11 = target & (b10 = man | b10 = mantrg)): mantrg;
        next(dr) = l & (b11 = target & (b12 = man | b12 = mantrg)): mantrg;
        next(dr) = d & (b11 = target & (b01 = man | b01 = mantrg)): mantrg;
        next(dr) = u & (b11 = target & (b21 = man | b21 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b11 = target & (b12 = bx | b12 = bxtrg)) & (b13 = man | b13 = mantrg): bxtrg;
        next(dr) = u & (b11 = target & (b21 = bx | b21 = bxtrg)) & (b31 = man | b31 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b11 = bx & (b10 = man | b10 = mantrg)) & (b12 = flr | b12 = target): man;
        next(dr) = l & (b11 = bx & (b12 = man | b12 = mantrg)) & (b10 = flr | b10 = target): man;
        next(dr) = d & (b11 = bx & (b01 = man | b01 = mantrg)) & (b21 = flr | b21 = target): man;
        next(dr) = u & (b11 = bx & (b21 = man | b21 = mantrg)) & (b01 = flr | b01 = target): man;

    --man to box on target
        next(dr) = r & (b11 = bxtrg & (b10 = man | b10 = mantrg)) & (b12 = flr | b12 = target): mantrg;
        next(dr) = l & (b11 = bxtrg & (b12 = man | b12 = mantrg)) & (b10 = flr | b10 = target): mantrg;
        next(dr) = d & (b11 = bxtrg & (b01 = man | b01 = mantrg)) & (b21 = flr | b21 = target): mantrg;
        next(dr) = u & (b11 = bxtrg & (b21 = man | b21 = mantrg)) & (b01 = flr | b01 = target): mantrg;

    TRUE: b11;
esac;
next(b12) := case
	--floor to floor
		next(dr) = l & (b12 = man & b11 =flr):flr;
		next(dr) = r & (b12 = man & b13 =flr):flr;
		next(dr) = u & (b12 = man & b02 =flr):flr;
		next(dr) = d & (b12 = man & b22 =flr):flr;


	--target to floor
		next(dr) = l & (b12 = mantrg & b11 =flr): target;
		next(dr) = r & (b12 = mantrg & b13 =flr): target;
		next(dr) = u & (b12 = mantrg & b02 =flr): target;
		next(dr) = d & (b12 = mantrg & b22 =flr): target;

	--floor to target
		next(dr) = l & (b12 = man & b11 = target):flr;
		next(dr) = r & (b12 = man & b13 = target):flr;
		next(dr) = u & (b12 = man & b02 = target):flr;
		next(dr) = d & (b12 = man & b22 = target):flr;

	--target to target
		next(dr) = l & (b12 = mantrg & b11 = target): target;
		next(dr) = r & (b12 = mantrg & b13 = target): target;
		next(dr) = u & (b12 = mantrg & b02 = target): target;
		next(dr) = d & (b12 = mantrg & b22 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b12 = man & b11 = bx) & (b10 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b12 = man & b13 = bx) & (b14 =flr) & (2+2 < n):flr;
		next(dr) = d & (b12 = man & b22 = bx) & (b32 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b12 = man & b11 = bx) & (b10 = target) & (2-2 > 0):flr;
		next(dr) = r & (b12 = man & b13 = bx) & (b14 = target) & (2+2 < n):flr;
		next(dr) = d & (b12 = man & b22 = bx) & (b32 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b12 = man & b11 = bxtrg) & (b10 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b12 = man & b13 = bxtrg) & (b14 =flr) & (2+2 < n):flr;
		next(dr) = d & (b12 = man & b22 = bxtrg) & (b32 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b12 = man & b11 = bxtrg) & (b10 = target) & (2-2 > 0):flr;
		next(dr) = r & (b12 = man & b13 = bxtrg) & (b14 = target) & (2+2 < n):flr;
		next(dr) = d & (b12 = man & b22 = bxtrg) & (b32 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b12 = mantrg & b11 = bx) & (b10 =flr) & (2-2 > 0): target;
		next(dr) = r & (b12 = mantrg & b13 = bx) & (b14 =flr) & (2+2 < n): target;
		next(dr) = d & (b12 = mantrg & b22 = bx) & (b32 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b12 = mantrg & b11 = bx) & (b10 = target) & (2-2 > 0): target;
		next(dr) = r & (b12 = mantrg & b13 = bx) & (b14 = target) & (2+2 < n): target;
		next(dr) = d & (b12 = mantrg & b22 = bx) & (b32 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b12 = mantrg & b11 = bxtrg) & (b10 =flr) & (2-2 > 0): target;
		next(dr) = r & (b12 = mantrg & b13 = bxtrg) & (b14 =flr) & (2+2 < n): target;
		next(dr) = d & (b12 = mantrg & b22 = bxtrg) & (b32 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b12 = mantrg & b11 = bxtrg) & (b10 = target) & (2-2 > 0): target;
		next(dr) = r & (b12 = mantrg & b13 = bxtrg) & (b14 = target) & (2+2 < n): target;
		next(dr) = d & (b12 = mantrg & b22 = bxtrg) & (b32 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b12 = flr & (b11 = man | b11 = mantrg)) : man;
        next(dr) = l & (b12 = flr & (b13 = man | b13 = mantrg)): man;
        next(dr) = d & (b12 = flr & (b02 = man | b02 = mantrg)): man;
        next(dr) = u & (b12 = flr & (b22 = man | b22 = mantrg)): man;

    --box to floor
        next(dr) = r & (b12 = flr & (b11 = bx | b11 = bxtrg)) & (b10 = man | b10 = mantrg): bx;
        next(dr) = l & (b12 = flr & (b13 = bx | b13 = bxtrg)) & (b14 = man | b14 = mantrg): bx;
        next(dr) = u & (b12 = flr & (b22 = bx | b22 = bxtrg)) & (b32 = man | b32 = mantrg): bx;

    --man to target
        next(dr) = r & (b12 = target & (b11 = man | b11 = mantrg)): mantrg;
        next(dr) = l & (b12 = target & (b13 = man | b13 = mantrg)): mantrg;
        next(dr) = d & (b12 = target & (b02 = man | b02 = mantrg)): mantrg;
        next(dr) = u & (b12 = target & (b22 = man | b22 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b12 = target & (b11 = bx | b11 = bxtrg)) & (b10 = man | b10 = mantrg): bxtrg;
        next(dr) = l & (b12 = target & (b13 = bx | b13 = bxtrg)) & (b14 = man | b14 = mantrg): bxtrg;
        next(dr) = u & (b12 = target & (b22 = bx | b22 = bxtrg)) & (b32 = man | b32 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b12 = bx & (b11 = man | b11 = mantrg)) & (b13 = flr | b13 = target): man;
        next(dr) = l & (b12 = bx & (b13 = man | b13 = mantrg)) & (b11 = flr | b11 = target): man;
        next(dr) = d & (b12 = bx & (b02 = man | b02 = mantrg)) & (b22 = flr | b22 = target): man;
        next(dr) = u & (b12 = bx & (b22 = man | b22 = mantrg)) & (b02 = flr | b02 = target): man;

    --man to box on target
        next(dr) = r & (b12 = bxtrg & (b11 = man | b11 = mantrg)) & (b13 = flr | b13 = target): mantrg;
        next(dr) = l & (b12 = bxtrg & (b13 = man | b13 = mantrg)) & (b11 = flr | b11 = target): mantrg;
        next(dr) = d & (b12 = bxtrg & (b02 = man | b02 = mantrg)) & (b22 = flr | b22 = target): mantrg;
        next(dr) = u & (b12 = bxtrg & (b22 = man | b22 = mantrg)) & (b02 = flr | b02 = target): mantrg;

    TRUE: b12;
esac;
next(b13) := case
	--floor to floor
		next(dr) = l & (b13 = man & b12 =flr):flr;
		next(dr) = r & (b13 = man & b14 =flr):flr;
		next(dr) = u & (b13 = man & b03 =flr):flr;
		next(dr) = d & (b13 = man & b23 =flr):flr;


	--target to floor
		next(dr) = l & (b13 = mantrg & b12 =flr): target;
		next(dr) = r & (b13 = mantrg & b14 =flr): target;
		next(dr) = u & (b13 = mantrg & b03 =flr): target;
		next(dr) = d & (b13 = mantrg & b23 =flr): target;

	--floor to target
		next(dr) = l & (b13 = man & b12 = target):flr;
		next(dr) = r & (b13 = man & b14 = target):flr;
		next(dr) = u & (b13 = man & b03 = target):flr;
		next(dr) = d & (b13 = man & b23 = target):flr;

	--target to target
		next(dr) = l & (b13 = mantrg & b12 = target): target;
		next(dr) = r & (b13 = mantrg & b14 = target): target;
		next(dr) = u & (b13 = mantrg & b03 = target): target;
		next(dr) = d & (b13 = mantrg & b23 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b13 = man & b12 = bx) & (b11 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b13 = man & b14 = bx) & (b15 =flr) & (3+2 < n):flr;
		next(dr) = d & (b13 = man & b23 = bx) & (b33 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b13 = man & b12 = bx) & (b11 = target) & (3-2 > 0):flr;
		next(dr) = r & (b13 = man & b14 = bx) & (b15 = target) & (3+2 < n):flr;
		next(dr) = d & (b13 = man & b23 = bx) & (b33 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b13 = man & b12 = bxtrg) & (b11 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b13 = man & b14 = bxtrg) & (b15 =flr) & (3+2 < n):flr;
		next(dr) = d & (b13 = man & b23 = bxtrg) & (b33 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b13 = man & b12 = bxtrg) & (b11 = target) & (3-2 > 0):flr;
		next(dr) = r & (b13 = man & b14 = bxtrg) & (b15 = target) & (3+2 < n):flr;
		next(dr) = d & (b13 = man & b23 = bxtrg) & (b33 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b13 = mantrg & b12 = bx) & (b11 =flr) & (3-2 > 0): target;
		next(dr) = r & (b13 = mantrg & b14 = bx) & (b15 =flr) & (3+2 < n): target;
		next(dr) = d & (b13 = mantrg & b23 = bx) & (b33 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b13 = mantrg & b12 = bx) & (b11 = target) & (3-2 > 0): target;
		next(dr) = r & (b13 = mantrg & b14 = bx) & (b15 = target) & (3+2 < n): target;
		next(dr) = d & (b13 = mantrg & b23 = bx) & (b33 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b13 = mantrg & b12 = bxtrg) & (b11 =flr) & (3-2 > 0): target;
		next(dr) = r & (b13 = mantrg & b14 = bxtrg) & (b15 =flr) & (3+2 < n): target;
		next(dr) = d & (b13 = mantrg & b23 = bxtrg) & (b33 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b13 = mantrg & b12 = bxtrg) & (b11 = target) & (3-2 > 0): target;
		next(dr) = r & (b13 = mantrg & b14 = bxtrg) & (b15 = target) & (3+2 < n): target;
		next(dr) = d & (b13 = mantrg & b23 = bxtrg) & (b33 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b13 = flr & (b12 = man | b12 = mantrg)) : man;
        next(dr) = l & (b13 = flr & (b14 = man | b14 = mantrg)): man;
        next(dr) = d & (b13 = flr & (b03 = man | b03 = mantrg)): man;
        next(dr) = u & (b13 = flr & (b23 = man | b23 = mantrg)): man;

    --box to floor
        next(dr) = r & (b13 = flr & (b12 = bx | b12 = bxtrg)) & (b11 = man | b11 = mantrg): bx;
        next(dr) = l & (b13 = flr & (b14 = bx | b14 = bxtrg)) & (b15 = man | b15 = mantrg): bx;
        next(dr) = u & (b13 = flr & (b23 = bx | b23 = bxtrg)) & (b33 = man | b33 = mantrg): bx;

    --man to target
        next(dr) = r & (b13 = target & (b12 = man | b12 = mantrg)): mantrg;
        next(dr) = l & (b13 = target & (b14 = man | b14 = mantrg)): mantrg;
        next(dr) = d & (b13 = target & (b03 = man | b03 = mantrg)): mantrg;
        next(dr) = u & (b13 = target & (b23 = man | b23 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b13 = target & (b12 = bx | b12 = bxtrg)) & (b11 = man | b11 = mantrg): bxtrg;
        next(dr) = l & (b13 = target & (b14 = bx | b14 = bxtrg)) & (b15 = man | b15 = mantrg): bxtrg;
        next(dr) = u & (b13 = target & (b23 = bx | b23 = bxtrg)) & (b33 = man | b33 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b13 = bx & (b12 = man | b12 = mantrg)) & (b14 = flr | b14 = target): man;
        next(dr) = l & (b13 = bx & (b14 = man | b14 = mantrg)) & (b12 = flr | b12 = target): man;
        next(dr) = d & (b13 = bx & (b03 = man | b03 = mantrg)) & (b23 = flr | b23 = target): man;
        next(dr) = u & (b13 = bx & (b23 = man | b23 = mantrg)) & (b03 = flr | b03 = target): man;

    --man to box on target
        next(dr) = r & (b13 = bxtrg & (b12 = man | b12 = mantrg)) & (b14 = flr | b14 = target): mantrg;
        next(dr) = l & (b13 = bxtrg & (b14 = man | b14 = mantrg)) & (b12 = flr | b12 = target): mantrg;
        next(dr) = d & (b13 = bxtrg & (b03 = man | b03 = mantrg)) & (b23 = flr | b23 = target): mantrg;
        next(dr) = u & (b13 = bxtrg & (b23 = man | b23 = mantrg)) & (b03 = flr | b03 = target): mantrg;

    TRUE: b13;
esac;
next(b14) := case
	--floor to floor
		next(dr) = l & (b14 = man & b13 =flr):flr;
		next(dr) = r & (b14 = man & b15 =flr):flr;
		next(dr) = u & (b14 = man & b04 =flr):flr;
		next(dr) = d & (b14 = man & b24 =flr):flr;


	--target to floor
		next(dr) = l & (b14 = mantrg & b13 =flr): target;
		next(dr) = r & (b14 = mantrg & b15 =flr): target;
		next(dr) = u & (b14 = mantrg & b04 =flr): target;
		next(dr) = d & (b14 = mantrg & b24 =flr): target;

	--floor to target
		next(dr) = l & (b14 = man & b13 = target):flr;
		next(dr) = r & (b14 = man & b15 = target):flr;
		next(dr) = u & (b14 = man & b04 = target):flr;
		next(dr) = d & (b14 = man & b24 = target):flr;

	--target to target
		next(dr) = l & (b14 = mantrg & b13 = target): target;
		next(dr) = r & (b14 = mantrg & b15 = target): target;
		next(dr) = u & (b14 = mantrg & b04 = target): target;
		next(dr) = d & (b14 = mantrg & b24 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b14 = man & b13 = bx) & (b12 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b14 = man & b15 = bx) & (b16 =flr) & (4+2 < n):flr;
		next(dr) = d & (b14 = man & b24 = bx) & (b34 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b14 = man & b13 = bx) & (b12 = target) & (4-2 > 0):flr;
		next(dr) = r & (b14 = man & b15 = bx) & (b16 = target) & (4+2 < n):flr;
		next(dr) = d & (b14 = man & b24 = bx) & (b34 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b14 = man & b13 = bxtrg) & (b12 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b14 = man & b15 = bxtrg) & (b16 =flr) & (4+2 < n):flr;
		next(dr) = d & (b14 = man & b24 = bxtrg) & (b34 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b14 = man & b13 = bxtrg) & (b12 = target) & (4-2 > 0):flr;
		next(dr) = r & (b14 = man & b15 = bxtrg) & (b16 = target) & (4+2 < n):flr;
		next(dr) = d & (b14 = man & b24 = bxtrg) & (b34 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b14 = mantrg & b13 = bx) & (b12 =flr) & (4-2 > 0): target;
		next(dr) = r & (b14 = mantrg & b15 = bx) & (b16 =flr) & (4+2 < n): target;
		next(dr) = d & (b14 = mantrg & b24 = bx) & (b34 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b14 = mantrg & b13 = bx) & (b12 = target) & (4-2 > 0): target;
		next(dr) = r & (b14 = mantrg & b15 = bx) & (b16 = target) & (4+2 < n): target;
		next(dr) = d & (b14 = mantrg & b24 = bx) & (b34 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b14 = mantrg & b13 = bxtrg) & (b12 =flr) & (4-2 > 0): target;
		next(dr) = r & (b14 = mantrg & b15 = bxtrg) & (b16 =flr) & (4+2 < n): target;
		next(dr) = d & (b14 = mantrg & b24 = bxtrg) & (b34 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b14 = mantrg & b13 = bxtrg) & (b12 = target) & (4-2 > 0): target;
		next(dr) = r & (b14 = mantrg & b15 = bxtrg) & (b16 = target) & (4+2 < n): target;
		next(dr) = d & (b14 = mantrg & b24 = bxtrg) & (b34 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b14 = flr & (b13 = man | b13 = mantrg)) : man;
        next(dr) = l & (b14 = flr & (b15 = man | b15 = mantrg)): man;
        next(dr) = d & (b14 = flr & (b04 = man | b04 = mantrg)): man;
        next(dr) = u & (b14 = flr & (b24 = man | b24 = mantrg)): man;

    --box to floor
        next(dr) = r & (b14 = flr & (b13 = bx | b13 = bxtrg)) & (b12 = man | b12 = mantrg): bx;
        next(dr) = l & (b14 = flr & (b15 = bx | b15 = bxtrg)) & (b16 = man | b16 = mantrg): bx;
        next(dr) = u & (b14 = flr & (b24 = bx | b24 = bxtrg)) & (b34 = man | b34 = mantrg): bx;

    --man to target
        next(dr) = r & (b14 = target & (b13 = man | b13 = mantrg)): mantrg;
        next(dr) = l & (b14 = target & (b15 = man | b15 = mantrg)): mantrg;
        next(dr) = d & (b14 = target & (b04 = man | b04 = mantrg)): mantrg;
        next(dr) = u & (b14 = target & (b24 = man | b24 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b14 = target & (b13 = bx | b13 = bxtrg)) & (b12 = man | b12 = mantrg): bxtrg;
        next(dr) = l & (b14 = target & (b15 = bx | b15 = bxtrg)) & (b16 = man | b16 = mantrg): bxtrg;
        next(dr) = u & (b14 = target & (b24 = bx | b24 = bxtrg)) & (b34 = man | b34 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b14 = bx & (b13 = man | b13 = mantrg)) & (b15 = flr | b15 = target): man;
        next(dr) = l & (b14 = bx & (b15 = man | b15 = mantrg)) & (b13 = flr | b13 = target): man;
        next(dr) = d & (b14 = bx & (b04 = man | b04 = mantrg)) & (b24 = flr | b24 = target): man;
        next(dr) = u & (b14 = bx & (b24 = man | b24 = mantrg)) & (b04 = flr | b04 = target): man;

    --man to box on target
        next(dr) = r & (b14 = bxtrg & (b13 = man | b13 = mantrg)) & (b15 = flr | b15 = target): mantrg;
        next(dr) = l & (b14 = bxtrg & (b15 = man | b15 = mantrg)) & (b13 = flr | b13 = target): mantrg;
        next(dr) = d & (b14 = bxtrg & (b04 = man | b04 = mantrg)) & (b24 = flr | b24 = target): mantrg;
        next(dr) = u & (b14 = bxtrg & (b24 = man | b24 = mantrg)) & (b04 = flr | b04 = target): mantrg;

    TRUE: b14;
esac;
next(b15) := case
	--floor to floor
		next(dr) = l & (b15 = man & b14 =flr):flr;
		next(dr) = r & (b15 = man & b16 =flr):flr;
		next(dr) = u & (b15 = man & b05 =flr):flr;
		next(dr) = d & (b15 = man & b25 =flr):flr;


	--target to floor
		next(dr) = l & (b15 = mantrg & b14 =flr): target;
		next(dr) = r & (b15 = mantrg & b16 =flr): target;
		next(dr) = u & (b15 = mantrg & b05 =flr): target;
		next(dr) = d & (b15 = mantrg & b25 =flr): target;

	--floor to target
		next(dr) = l & (b15 = man & b14 = target):flr;
		next(dr) = r & (b15 = man & b16 = target):flr;
		next(dr) = u & (b15 = man & b05 = target):flr;
		next(dr) = d & (b15 = man & b25 = target):flr;

	--target to target
		next(dr) = l & (b15 = mantrg & b14 = target): target;
		next(dr) = r & (b15 = mantrg & b16 = target): target;
		next(dr) = u & (b15 = mantrg & b05 = target): target;
		next(dr) = d & (b15 = mantrg & b25 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b15 = man & b14 = bx) & (b13 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b15 = man & b25 = bx) & (b35 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b15 = man & b14 = bx) & (b13 = target) & (5-2 > 0):flr;
		next(dr) = d & (b15 = man & b25 = bx) & (b35 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b15 = man & b14 = bxtrg) & (b13 =flr) & (5-2 > 0):flr;
		next(dr) = d & (b15 = man & b25 = bxtrg) & (b35 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b15 = man & b14 = bxtrg) & (b13 = target) & (5-2 > 0):flr;
		next(dr) = d & (b15 = man & b25 = bxtrg) & (b35 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b15 = mantrg & b14 = bx) & (b13 =flr) & (5-2 > 0): target;
		next(dr) = d & (b15 = mantrg & b25 = bx) & (b35 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b15 = mantrg & b14 = bx) & (b13 = target) & (5-2 > 0): target;
		next(dr) = d & (b15 = mantrg & b25 = bx) & (b35 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b15 = mantrg & b14 = bxtrg) & (b13 =flr) & (5-2 > 0): target;
		next(dr) = d & (b15 = mantrg & b25 = bxtrg) & (b35 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b15 = mantrg & b14 = bxtrg) & (b13 = target) & (5-2 > 0): target;
		next(dr) = d & (b15 = mantrg & b25 = bxtrg) & (b35 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b15 = flr & (b14 = man | b14 = mantrg)) : man;
        next(dr) = l & (b15 = flr & (b16 = man | b16 = mantrg)): man;
        next(dr) = d & (b15 = flr & (b05 = man | b05 = mantrg)): man;
        next(dr) = u & (b15 = flr & (b25 = man | b25 = mantrg)): man;

    --box to floor
        next(dr) = r & (b15 = flr & (b14 = bx | b14 = bxtrg)) & (b13 = man | b13 = mantrg): bx;
        next(dr) = u & (b15 = flr & (b25 = bx | b25 = bxtrg)) & (b35 = man | b35 = mantrg): bx;

    --man to target
        next(dr) = r & (b15 = target & (b14 = man | b14 = mantrg)): mantrg;
        next(dr) = l & (b15 = target & (b16 = man | b16 = mantrg)): mantrg;
        next(dr) = d & (b15 = target & (b05 = man | b05 = mantrg)): mantrg;
        next(dr) = u & (b15 = target & (b25 = man | b25 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b15 = target & (b14 = bx | b14 = bxtrg)) & (b13 = man | b13 = mantrg): bxtrg;
        next(dr) = u & (b15 = target & (b25 = bx | b25 = bxtrg)) & (b35 = man | b35 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b15 = bx & (b14 = man | b14 = mantrg)) & (b16 = flr | b16 = target): man;
        next(dr) = l & (b15 = bx & (b16 = man | b16 = mantrg)) & (b14 = flr | b14 = target): man;
        next(dr) = d & (b15 = bx & (b05 = man | b05 = mantrg)) & (b25 = flr | b25 = target): man;
        next(dr) = u & (b15 = bx & (b25 = man | b25 = mantrg)) & (b05 = flr | b05 = target): man;

    --man to box on target
        next(dr) = r & (b15 = bxtrg & (b14 = man | b14 = mantrg)) & (b16 = flr | b16 = target): mantrg;
        next(dr) = l & (b15 = bxtrg & (b16 = man | b16 = mantrg)) & (b14 = flr | b14 = target): mantrg;
        next(dr) = d & (b15 = bxtrg & (b05 = man | b05 = mantrg)) & (b25 = flr | b25 = target): mantrg;
        next(dr) = u & (b15 = bxtrg & (b25 = man | b25 = mantrg)) & (b05 = flr | b05 = target): mantrg;

    TRUE: b15;
esac;
next(b16) := case
	--floor to floor
		next(dr) = l & (b16 = man & b15 =flr):flr;
		next(dr) = u & (b16 = man & b06 =flr):flr;
		next(dr) = d & (b16 = man & b26 =flr):flr;


	--target to floor
		next(dr) = l & (b16 = mantrg & b15 =flr): target;
		next(dr) = u & (b16 = mantrg & b06 =flr): target;
		next(dr) = d & (b16 = mantrg & b26 =flr): target;

	--floor to target
		next(dr) = l & (b16 = man & b15 = target):flr;
		next(dr) = u & (b16 = man & b06 = target):flr;
		next(dr) = d & (b16 = man & b26 = target):flr;

	--target to target
		next(dr) = l & (b16 = mantrg & b15 = target): target;
		next(dr) = u & (b16 = mantrg & b06 = target): target;
		next(dr) = d & (b16 = mantrg & b26 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b16 = man & b15 = bx) & (b14 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b16 = man & b26 = bx) & (b36 =flr) & (1+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b16 = man & b15 = bx) & (b14 = target) & (6-2 > 0):flr;
		next(dr) = d & (b16 = man & b26 = bx) & (b36 = target) & (1+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b16 = man & b15 = bxtrg) & (b14 =flr) & (6-2 > 0):flr;
		next(dr) = d & (b16 = man & b26 = bxtrg) & (b36 =flr) & (1-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b16 = man & b15 = bxtrg) & (b14 = target) & (6-2 > 0):flr;
		next(dr) = d & (b16 = man & b26 = bxtrg) & (b36 = target) & (1+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b16 = mantrg & b15 = bx) & (b14 =flr) & (6-2 > 0): target;
		next(dr) = d & (b16 = mantrg & b26 = bx) & (b36 =flr) & (1+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b16 = mantrg & b15 = bx) & (b14 = target) & (6-2 > 0): target;
		next(dr) = d & (b16 = mantrg & b26 = bx) & (b36 = target) & (1+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b16 = mantrg & b15 = bxtrg) & (b14 =flr) & (6-2 > 0): target;
		next(dr) = d & (b16 = mantrg & b26 = bxtrg) & (b36 =flr) & (1+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b16 = mantrg & b15 = bxtrg) & (b14 = target) & (6-2 > 0): target;
		next(dr) = d & (b16 = mantrg & b26 = bxtrg) & (b36 = target) & (1+2 < m): target;

    --man to floor
        next(dr) = r & (b16 = flr & (b15 = man | b15 = mantrg)) : man;
        next(dr) = d & (b16 = flr & (b06 = man | b06 = mantrg)): man;
        next(dr) = u & (b16 = flr & (b26 = man | b26 = mantrg)): man;

    --box to floor
        next(dr) = r & (b16 = flr & (b15 = bx | b15 = bxtrg)) & (b14 = man | b14 = mantrg): bx;
        next(dr) = u & (b16 = flr & (b26 = bx | b26 = bxtrg)) & (b36 = man | b36 = mantrg): bx;

    --man to target
        next(dr) = r & (b16 = target & (b15 = man | b15 = mantrg)): mantrg;
        next(dr) = d & (b16 = target & (b06 = man | b06 = mantrg)): mantrg;
        next(dr) = u & (b16 = target & (b26 = man | b26 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b16 = target & (b15 = bx | b15 = bxtrg)) & (b14 = man | b14 = mantrg): bxtrg;
        next(dr) = u & (b16 = target & (b26 = bx | b26 = bxtrg)) & (b36 = man | b36 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b16 = bx & (b06 = man | b06 = mantrg)) & (b26 = flr | b26 = target): man;
        next(dr) = u & (b16 = bx & (b26 = man | b26 = mantrg)) & (b06 = flr | b06 = target): man;

    --man to box on target
        next(dr) = d & (b16 = bxtrg & (b06 = man | b06 = mantrg)) & (b26 = flr | b26 = target): mantrg;
        next(dr) = u & (b16 = bxtrg & (b26 = man | b26 = mantrg)) & (b06 = flr | b06 = target): mantrg;

    TRUE: b16;
esac;
next(b20) := case
	--floor to floor
		next(dr) = r & (b20 = man & b21 =flr):flr;
		next(dr) = u & (b20 = man & b10 =flr):flr;
		next(dr) = d & (b20 = man & b30 =flr):flr;


	--target to floor
		next(dr) = r & (b20 = mantrg & b21 =flr): target;
		next(dr) = u & (b20 = mantrg & b10 =flr): target;
		next(dr) = d & (b20 = mantrg & b30 =flr): target;

	--floor to target
		next(dr) = r & (b20 = man & b21 = target):flr;
		next(dr) = u & (b20 = man & b10 = target):flr;
		next(dr) = d & (b20 = man & b30 = target):flr;

	--target to target
		next(dr) = r & (b20 = mantrg & b21 = target): target;
		next(dr) = u & (b20 = mantrg & b10 = target): target;
		next(dr) = d & (b20 = mantrg & b30 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b20 = man & b21 = bx) & (b22 =flr) & (0+2 < n):flr;
		next(dr) = u & (b20 = man & b10 = bx) & (b00 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b20 = man & b30 = bx) & (b40 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b20 = man & b21 = bx) & (b22 = target) & (0+2 < n):flr;
		next(dr) = u & (b20 = man & b10 = bx) & (b00 = target) & (2-2 > 0):flr;
		next(dr) = d & (b20 = man & b30 = bx) & (b40 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b20 = man & b21 = bxtrg) & (b22 =flr) & (0+2 < n):flr;
		next(dr) = u & (b20 = man & b10 = bxtrg) & (b00 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b20 = man & b30 = bxtrg) & (b40 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b20 = man & b21 = bxtrg) & (b22 = target) & (0+2 < n):flr;
		next(dr) = u & (b20 = man & b10 = bxtrg) & (b00 = target) & (2-2 > 0):flr;
		next(dr) = d & (b20 = man & b30 = bxtrg) & (b40 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b20 = mantrg & b21 = bx) & (b22 =flr) & (0+2 < n): target;
		next(dr) = u & (b20 = mantrg & b10 = bx) & (b00 =flr) & (2-2 > 0): target;
		next(dr) = d & (b20 = mantrg & b30 = bx) & (b40 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b20 = mantrg & b21 = bx) & (b22 = target) & (0+2 < n): target;
		next(dr) = u & (b20 = mantrg & b10 = bx) & (b00 = target) & (2-2 > 0): target;
		next(dr) = d & (b20 = mantrg & b30 = bx) & (b40 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b20 = mantrg & b21 = bxtrg) & (b22 =flr) & (0+2 < n): target;
		next(dr) = u & (b20 = mantrg & b10 = bxtrg) & (b00 =flr) & (2-2 > 0): target;
		next(dr) = d & (b20 = mantrg & b30 = bxtrg) & (b40 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b20 = mantrg & b21 = bxtrg) & (b22 = target) & (0+2 < n): target;
		next(dr) = u & (b20 = mantrg & b10 = bxtrg) & (b00 = target) & (2-2 > 0): target;
		next(dr) = d & (b20 = mantrg & b30 = bxtrg) & (b40 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = l & (b20 = flr & (b21 = man | b21 = mantrg)): man;
        next(dr) = d & (b20 = flr & (b10 = man | b10 = mantrg)): man;
        next(dr) = u & (b20 = flr & (b30 = man | b30 = mantrg)): man;

    --box to floor
        next(dr) = l & (b20 = flr & (b21 = bx | b21 = bxtrg)) & (b22 = man | b22 = mantrg): bx;
        next(dr) = d & (b20 = flr & (b10 = bx | b10 = bxtrg)) & (b00 = man | b00 = mantrg): bx;
        next(dr) = u & (b20 = flr & (b30 = bx | b30 = bxtrg)) & (b40 = man | b40 = mantrg): bx;

    --man to target
        next(dr) = l & (b20 = target & (b21 = man | b21 = mantrg)): mantrg;
        next(dr) = d & (b20 = target & (b10 = man | b10 = mantrg)): mantrg;
        next(dr) = u & (b20 = target & (b30 = man | b30 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b20 = target & (b21 = bx | b21 = bxtrg)) & (b22 = man | b22 = mantrg): bxtrg;
        next(dr) = d & (b20 = target & (b10 = bx | b10 = bxtrg)) & (b00 = man | b00 = mantrg): bxtrg;
        next(dr) = u & (b20 = target & (b30 = bx | b30 = bxtrg)) & (b40 = man | b40 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b20 = bx & (b10 = man | b10 = mantrg)) & (b30 = flr | b30 = target): man;
        next(dr) = u & (b20 = bx & (b30 = man | b30 = mantrg)) & (b10 = flr | b10 = target): man;

    --man to box on target
        next(dr) = d & (b20 = bxtrg & (b10 = man | b10 = mantrg)) & (b30 = flr | b30 = target): mantrg;
        next(dr) = u & (b20 = bxtrg & (b30 = man | b30 = mantrg)) & (b10 = flr | b10 = target): mantrg;

    TRUE: b20;
esac;
next(b21) := case
	--floor to floor
		next(dr) = l & (b21 = man & b20 =flr):flr;
		next(dr) = r & (b21 = man & b22 =flr):flr;
		next(dr) = u & (b21 = man & b11 =flr):flr;
		next(dr) = d & (b21 = man & b31 =flr):flr;


	--target to floor
		next(dr) = l & (b21 = mantrg & b20 =flr): target;
		next(dr) = r & (b21 = mantrg & b22 =flr): target;
		next(dr) = u & (b21 = mantrg & b11 =flr): target;
		next(dr) = d & (b21 = mantrg & b31 =flr): target;

	--floor to target
		next(dr) = l & (b21 = man & b20 = target):flr;
		next(dr) = r & (b21 = man & b22 = target):flr;
		next(dr) = u & (b21 = man & b11 = target):flr;
		next(dr) = d & (b21 = man & b31 = target):flr;

	--target to target
		next(dr) = l & (b21 = mantrg & b20 = target): target;
		next(dr) = r & (b21 = mantrg & b22 = target): target;
		next(dr) = u & (b21 = mantrg & b11 = target): target;
		next(dr) = d & (b21 = mantrg & b31 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b21 = man & b22 = bx) & (b23 =flr) & (1+2 < n):flr;
		next(dr) = u & (b21 = man & b11 = bx) & (b01 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b21 = man & b31 = bx) & (b41 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b21 = man & b22 = bx) & (b23 = target) & (1+2 < n):flr;
		next(dr) = u & (b21 = man & b11 = bx) & (b01 = target) & (2-2 > 0):flr;
		next(dr) = d & (b21 = man & b31 = bx) & (b41 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b21 = man & b22 = bxtrg) & (b23 =flr) & (1+2 < n):flr;
		next(dr) = u & (b21 = man & b11 = bxtrg) & (b01 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b21 = man & b31 = bxtrg) & (b41 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b21 = man & b22 = bxtrg) & (b23 = target) & (1+2 < n):flr;
		next(dr) = u & (b21 = man & b11 = bxtrg) & (b01 = target) & (2-2 > 0):flr;
		next(dr) = d & (b21 = man & b31 = bxtrg) & (b41 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b21 = mantrg & b22 = bx) & (b23 =flr) & (1+2 < n): target;
		next(dr) = u & (b21 = mantrg & b11 = bx) & (b01 =flr) & (2-2 > 0): target;
		next(dr) = d & (b21 = mantrg & b31 = bx) & (b41 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b21 = mantrg & b22 = bx) & (b23 = target) & (1+2 < n): target;
		next(dr) = u & (b21 = mantrg & b11 = bx) & (b01 = target) & (2-2 > 0): target;
		next(dr) = d & (b21 = mantrg & b31 = bx) & (b41 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b21 = mantrg & b22 = bxtrg) & (b23 =flr) & (1+2 < n): target;
		next(dr) = u & (b21 = mantrg & b11 = bxtrg) & (b01 =flr) & (2-2 > 0): target;
		next(dr) = d & (b21 = mantrg & b31 = bxtrg) & (b41 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b21 = mantrg & b22 = bxtrg) & (b23 = target) & (1+2 < n): target;
		next(dr) = u & (b21 = mantrg & b11 = bxtrg) & (b01 = target) & (2-2 > 0): target;
		next(dr) = d & (b21 = mantrg & b31 = bxtrg) & (b41 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b21 = flr & (b20 = man | b20 = mantrg)) : man;
        next(dr) = l & (b21 = flr & (b22 = man | b22 = mantrg)): man;
        next(dr) = d & (b21 = flr & (b11 = man | b11 = mantrg)): man;
        next(dr) = u & (b21 = flr & (b31 = man | b31 = mantrg)): man;

    --box to floor
        next(dr) = l & (b21 = flr & (b22 = bx | b22 = bxtrg)) & (b23 = man | b23 = mantrg): bx;
        next(dr) = d & (b21 = flr & (b11 = bx | b11 = bxtrg)) & (b01 = man | b01 = mantrg): bx;
        next(dr) = u & (b21 = flr & (b31 = bx | b31 = bxtrg)) & (b41 = man | b41 = mantrg): bx;

    --man to target
        next(dr) = r & (b21 = target & (b20 = man | b20 = mantrg)): mantrg;
        next(dr) = l & (b21 = target & (b22 = man | b22 = mantrg)): mantrg;
        next(dr) = d & (b21 = target & (b11 = man | b11 = mantrg)): mantrg;
        next(dr) = u & (b21 = target & (b31 = man | b31 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b21 = target & (b22 = bx | b22 = bxtrg)) & (b23 = man | b23 = mantrg): bxtrg;
        next(dr) = d & (b21 = target & (b11 = bx | b11 = bxtrg)) & (b01 = man | b01 = mantrg): bxtrg;
        next(dr) = u & (b21 = target & (b31 = bx | b31 = bxtrg)) & (b41 = man | b41 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b21 = bx & (b20 = man | b20 = mantrg)) & (b22 = flr | b22 = target): man;
        next(dr) = l & (b21 = bx & (b22 = man | b22 = mantrg)) & (b20 = flr | b20 = target): man;
        next(dr) = d & (b21 = bx & (b11 = man | b11 = mantrg)) & (b31 = flr | b31 = target): man;
        next(dr) = u & (b21 = bx & (b31 = man | b31 = mantrg)) & (b11 = flr | b11 = target): man;

    --man to box on target
        next(dr) = r & (b21 = bxtrg & (b20 = man | b20 = mantrg)) & (b22 = flr | b22 = target): mantrg;
        next(dr) = l & (b21 = bxtrg & (b22 = man | b22 = mantrg)) & (b20 = flr | b20 = target): mantrg;
        next(dr) = d & (b21 = bxtrg & (b11 = man | b11 = mantrg)) & (b31 = flr | b31 = target): mantrg;
        next(dr) = u & (b21 = bxtrg & (b31 = man | b31 = mantrg)) & (b11 = flr | b11 = target): mantrg;

    TRUE: b21;
esac;
next(b22) := case
	--floor to floor
		next(dr) = l & (b22 = man & b21 =flr):flr;
		next(dr) = r & (b22 = man & b23 =flr):flr;
		next(dr) = u & (b22 = man & b12 =flr):flr;
		next(dr) = d & (b22 = man & b32 =flr):flr;


	--target to floor
		next(dr) = l & (b22 = mantrg & b21 =flr): target;
		next(dr) = r & (b22 = mantrg & b23 =flr): target;
		next(dr) = u & (b22 = mantrg & b12 =flr): target;
		next(dr) = d & (b22 = mantrg & b32 =flr): target;

	--floor to target
		next(dr) = l & (b22 = man & b21 = target):flr;
		next(dr) = r & (b22 = man & b23 = target):flr;
		next(dr) = u & (b22 = man & b12 = target):flr;
		next(dr) = d & (b22 = man & b32 = target):flr;

	--target to target
		next(dr) = l & (b22 = mantrg & b21 = target): target;
		next(dr) = r & (b22 = mantrg & b23 = target): target;
		next(dr) = u & (b22 = mantrg & b12 = target): target;
		next(dr) = d & (b22 = mantrg & b32 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b22 = man & b21 = bx) & (b20 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b22 = man & b23 = bx) & (b24 =flr) & (2+2 < n):flr;
		next(dr) = u & (b22 = man & b12 = bx) & (b02 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b22 = man & b32 = bx) & (b42 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b22 = man & b21 = bx) & (b20 = target) & (2-2 > 0):flr;
		next(dr) = r & (b22 = man & b23 = bx) & (b24 = target) & (2+2 < n):flr;
		next(dr) = u & (b22 = man & b12 = bx) & (b02 = target) & (2-2 > 0):flr;
		next(dr) = d & (b22 = man & b32 = bx) & (b42 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b22 = man & b21 = bxtrg) & (b20 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b22 = man & b23 = bxtrg) & (b24 =flr) & (2+2 < n):flr;
		next(dr) = u & (b22 = man & b12 = bxtrg) & (b02 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b22 = man & b32 = bxtrg) & (b42 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b22 = man & b21 = bxtrg) & (b20 = target) & (2-2 > 0):flr;
		next(dr) = r & (b22 = man & b23 = bxtrg) & (b24 = target) & (2+2 < n):flr;
		next(dr) = u & (b22 = man & b12 = bxtrg) & (b02 = target) & (2-2 > 0):flr;
		next(dr) = d & (b22 = man & b32 = bxtrg) & (b42 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b22 = mantrg & b21 = bx) & (b20 =flr) & (2-2 > 0): target;
		next(dr) = r & (b22 = mantrg & b23 = bx) & (b24 =flr) & (2+2 < n): target;
		next(dr) = u & (b22 = mantrg & b12 = bx) & (b02 =flr) & (2-2 > 0): target;
		next(dr) = d & (b22 = mantrg & b32 = bx) & (b42 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b22 = mantrg & b21 = bx) & (b20 = target) & (2-2 > 0): target;
		next(dr) = r & (b22 = mantrg & b23 = bx) & (b24 = target) & (2+2 < n): target;
		next(dr) = u & (b22 = mantrg & b12 = bx) & (b02 = target) & (2-2 > 0): target;
		next(dr) = d & (b22 = mantrg & b32 = bx) & (b42 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b22 = mantrg & b21 = bxtrg) & (b20 =flr) & (2-2 > 0): target;
		next(dr) = r & (b22 = mantrg & b23 = bxtrg) & (b24 =flr) & (2+2 < n): target;
		next(dr) = u & (b22 = mantrg & b12 = bxtrg) & (b02 =flr) & (2-2 > 0): target;
		next(dr) = d & (b22 = mantrg & b32 = bxtrg) & (b42 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b22 = mantrg & b21 = bxtrg) & (b20 = target) & (2-2 > 0): target;
		next(dr) = r & (b22 = mantrg & b23 = bxtrg) & (b24 = target) & (2+2 < n): target;
		next(dr) = u & (b22 = mantrg & b12 = bxtrg) & (b02 = target) & (2-2 > 0): target;
		next(dr) = d & (b22 = mantrg & b32 = bxtrg) & (b42 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b22 = flr & (b21 = man | b21 = mantrg)) : man;
        next(dr) = l & (b22 = flr & (b23 = man | b23 = mantrg)): man;
        next(dr) = d & (b22 = flr & (b12 = man | b12 = mantrg)): man;
        next(dr) = u & (b22 = flr & (b32 = man | b32 = mantrg)): man;

    --box to floor
        next(dr) = r & (b22 = flr & (b21 = bx | b21 = bxtrg)) & (b20 = man | b20 = mantrg): bx;
        next(dr) = l & (b22 = flr & (b23 = bx | b23 = bxtrg)) & (b24 = man | b24 = mantrg): bx;
        next(dr) = d & (b22 = flr & (b12 = bx | b12 = bxtrg)) & (b02 = man | b02 = mantrg): bx;
        next(dr) = u & (b22 = flr & (b32 = bx | b32 = bxtrg)) & (b42 = man | b42 = mantrg): bx;

    --man to target
        next(dr) = r & (b22 = target & (b21 = man | b21 = mantrg)): mantrg;
        next(dr) = l & (b22 = target & (b23 = man | b23 = mantrg)): mantrg;
        next(dr) = d & (b22 = target & (b12 = man | b12 = mantrg)): mantrg;
        next(dr) = u & (b22 = target & (b32 = man | b32 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b22 = target & (b21 = bx | b21 = bxtrg)) & (b20 = man | b20 = mantrg): bxtrg;
        next(dr) = l & (b22 = target & (b23 = bx | b23 = bxtrg)) & (b24 = man | b24 = mantrg): bxtrg;
        next(dr) = d & (b22 = target & (b12 = bx | b12 = bxtrg)) & (b02 = man | b02 = mantrg): bxtrg;
        next(dr) = u & (b22 = target & (b32 = bx | b32 = bxtrg)) & (b42 = man | b42 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b22 = bx & (b21 = man | b21 = mantrg)) & (b23 = flr | b23 = target): man;
        next(dr) = l & (b22 = bx & (b23 = man | b23 = mantrg)) & (b21 = flr | b21 = target): man;
        next(dr) = d & (b22 = bx & (b12 = man | b12 = mantrg)) & (b32 = flr | b32 = target): man;
        next(dr) = u & (b22 = bx & (b32 = man | b32 = mantrg)) & (b12 = flr | b12 = target): man;

    --man to box on target
        next(dr) = r & (b22 = bxtrg & (b21 = man | b21 = mantrg)) & (b23 = flr | b23 = target): mantrg;
        next(dr) = l & (b22 = bxtrg & (b23 = man | b23 = mantrg)) & (b21 = flr | b21 = target): mantrg;
        next(dr) = d & (b22 = bxtrg & (b12 = man | b12 = mantrg)) & (b32 = flr | b32 = target): mantrg;
        next(dr) = u & (b22 = bxtrg & (b32 = man | b32 = mantrg)) & (b12 = flr | b12 = target): mantrg;

    TRUE: b22;
esac;
next(b23) := case
	--floor to floor
		next(dr) = l & (b23 = man & b22 =flr):flr;
		next(dr) = r & (b23 = man & b24 =flr):flr;
		next(dr) = u & (b23 = man & b13 =flr):flr;
		next(dr) = d & (b23 = man & b33 =flr):flr;


	--target to floor
		next(dr) = l & (b23 = mantrg & b22 =flr): target;
		next(dr) = r & (b23 = mantrg & b24 =flr): target;
		next(dr) = u & (b23 = mantrg & b13 =flr): target;
		next(dr) = d & (b23 = mantrg & b33 =flr): target;

	--floor to target
		next(dr) = l & (b23 = man & b22 = target):flr;
		next(dr) = r & (b23 = man & b24 = target):flr;
		next(dr) = u & (b23 = man & b13 = target):flr;
		next(dr) = d & (b23 = man & b33 = target):flr;

	--target to target
		next(dr) = l & (b23 = mantrg & b22 = target): target;
		next(dr) = r & (b23 = mantrg & b24 = target): target;
		next(dr) = u & (b23 = mantrg & b13 = target): target;
		next(dr) = d & (b23 = mantrg & b33 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b23 = man & b22 = bx) & (b21 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b23 = man & b24 = bx) & (b25 =flr) & (3+2 < n):flr;
		next(dr) = u & (b23 = man & b13 = bx) & (b03 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b23 = man & b33 = bx) & (b43 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b23 = man & b22 = bx) & (b21 = target) & (3-2 > 0):flr;
		next(dr) = r & (b23 = man & b24 = bx) & (b25 = target) & (3+2 < n):flr;
		next(dr) = u & (b23 = man & b13 = bx) & (b03 = target) & (2-2 > 0):flr;
		next(dr) = d & (b23 = man & b33 = bx) & (b43 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b23 = man & b22 = bxtrg) & (b21 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b23 = man & b24 = bxtrg) & (b25 =flr) & (3+2 < n):flr;
		next(dr) = u & (b23 = man & b13 = bxtrg) & (b03 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b23 = man & b33 = bxtrg) & (b43 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b23 = man & b22 = bxtrg) & (b21 = target) & (3-2 > 0):flr;
		next(dr) = r & (b23 = man & b24 = bxtrg) & (b25 = target) & (3+2 < n):flr;
		next(dr) = u & (b23 = man & b13 = bxtrg) & (b03 = target) & (2-2 > 0):flr;
		next(dr) = d & (b23 = man & b33 = bxtrg) & (b43 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b23 = mantrg & b22 = bx) & (b21 =flr) & (3-2 > 0): target;
		next(dr) = r & (b23 = mantrg & b24 = bx) & (b25 =flr) & (3+2 < n): target;
		next(dr) = u & (b23 = mantrg & b13 = bx) & (b03 =flr) & (2-2 > 0): target;
		next(dr) = d & (b23 = mantrg & b33 = bx) & (b43 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b23 = mantrg & b22 = bx) & (b21 = target) & (3-2 > 0): target;
		next(dr) = r & (b23 = mantrg & b24 = bx) & (b25 = target) & (3+2 < n): target;
		next(dr) = u & (b23 = mantrg & b13 = bx) & (b03 = target) & (2-2 > 0): target;
		next(dr) = d & (b23 = mantrg & b33 = bx) & (b43 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b23 = mantrg & b22 = bxtrg) & (b21 =flr) & (3-2 > 0): target;
		next(dr) = r & (b23 = mantrg & b24 = bxtrg) & (b25 =flr) & (3+2 < n): target;
		next(dr) = u & (b23 = mantrg & b13 = bxtrg) & (b03 =flr) & (2-2 > 0): target;
		next(dr) = d & (b23 = mantrg & b33 = bxtrg) & (b43 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b23 = mantrg & b22 = bxtrg) & (b21 = target) & (3-2 > 0): target;
		next(dr) = r & (b23 = mantrg & b24 = bxtrg) & (b25 = target) & (3+2 < n): target;
		next(dr) = u & (b23 = mantrg & b13 = bxtrg) & (b03 = target) & (2-2 > 0): target;
		next(dr) = d & (b23 = mantrg & b33 = bxtrg) & (b43 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b23 = flr & (b22 = man | b22 = mantrg)) : man;
        next(dr) = l & (b23 = flr & (b24 = man | b24 = mantrg)): man;
        next(dr) = d & (b23 = flr & (b13 = man | b13 = mantrg)): man;
        next(dr) = u & (b23 = flr & (b33 = man | b33 = mantrg)): man;

    --box to floor
        next(dr) = r & (b23 = flr & (b22 = bx | b22 = bxtrg)) & (b21 = man | b21 = mantrg): bx;
        next(dr) = l & (b23 = flr & (b24 = bx | b24 = bxtrg)) & (b25 = man | b25 = mantrg): bx;
        next(dr) = d & (b23 = flr & (b13 = bx | b13 = bxtrg)) & (b03 = man | b03 = mantrg): bx;
        next(dr) = u & (b23 = flr & (b33 = bx | b33 = bxtrg)) & (b43 = man | b43 = mantrg): bx;

    --man to target
        next(dr) = r & (b23 = target & (b22 = man | b22 = mantrg)): mantrg;
        next(dr) = l & (b23 = target & (b24 = man | b24 = mantrg)): mantrg;
        next(dr) = d & (b23 = target & (b13 = man | b13 = mantrg)): mantrg;
        next(dr) = u & (b23 = target & (b33 = man | b33 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b23 = target & (b22 = bx | b22 = bxtrg)) & (b21 = man | b21 = mantrg): bxtrg;
        next(dr) = l & (b23 = target & (b24 = bx | b24 = bxtrg)) & (b25 = man | b25 = mantrg): bxtrg;
        next(dr) = d & (b23 = target & (b13 = bx | b13 = bxtrg)) & (b03 = man | b03 = mantrg): bxtrg;
        next(dr) = u & (b23 = target & (b33 = bx | b33 = bxtrg)) & (b43 = man | b43 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b23 = bx & (b22 = man | b22 = mantrg)) & (b24 = flr | b24 = target): man;
        next(dr) = l & (b23 = bx & (b24 = man | b24 = mantrg)) & (b22 = flr | b22 = target): man;
        next(dr) = d & (b23 = bx & (b13 = man | b13 = mantrg)) & (b33 = flr | b33 = target): man;
        next(dr) = u & (b23 = bx & (b33 = man | b33 = mantrg)) & (b13 = flr | b13 = target): man;

    --man to box on target
        next(dr) = r & (b23 = bxtrg & (b22 = man | b22 = mantrg)) & (b24 = flr | b24 = target): mantrg;
        next(dr) = l & (b23 = bxtrg & (b24 = man | b24 = mantrg)) & (b22 = flr | b22 = target): mantrg;
        next(dr) = d & (b23 = bxtrg & (b13 = man | b13 = mantrg)) & (b33 = flr | b33 = target): mantrg;
        next(dr) = u & (b23 = bxtrg & (b33 = man | b33 = mantrg)) & (b13 = flr | b13 = target): mantrg;

    TRUE: b23;
esac;
next(b24) := case
	--floor to floor
		next(dr) = l & (b24 = man & b23 =flr):flr;
		next(dr) = r & (b24 = man & b25 =flr):flr;
		next(dr) = u & (b24 = man & b14 =flr):flr;
		next(dr) = d & (b24 = man & b34 =flr):flr;


	--target to floor
		next(dr) = l & (b24 = mantrg & b23 =flr): target;
		next(dr) = r & (b24 = mantrg & b25 =flr): target;
		next(dr) = u & (b24 = mantrg & b14 =flr): target;
		next(dr) = d & (b24 = mantrg & b34 =flr): target;

	--floor to target
		next(dr) = l & (b24 = man & b23 = target):flr;
		next(dr) = r & (b24 = man & b25 = target):flr;
		next(dr) = u & (b24 = man & b14 = target):flr;
		next(dr) = d & (b24 = man & b34 = target):flr;

	--target to target
		next(dr) = l & (b24 = mantrg & b23 = target): target;
		next(dr) = r & (b24 = mantrg & b25 = target): target;
		next(dr) = u & (b24 = mantrg & b14 = target): target;
		next(dr) = d & (b24 = mantrg & b34 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b24 = man & b23 = bx) & (b22 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b24 = man & b25 = bx) & (b26 =flr) & (4+2 < n):flr;
		next(dr) = u & (b24 = man & b14 = bx) & (b04 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b24 = man & b34 = bx) & (b44 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b24 = man & b23 = bx) & (b22 = target) & (4-2 > 0):flr;
		next(dr) = r & (b24 = man & b25 = bx) & (b26 = target) & (4+2 < n):flr;
		next(dr) = u & (b24 = man & b14 = bx) & (b04 = target) & (2-2 > 0):flr;
		next(dr) = d & (b24 = man & b34 = bx) & (b44 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b24 = man & b23 = bxtrg) & (b22 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b24 = man & b25 = bxtrg) & (b26 =flr) & (4+2 < n):flr;
		next(dr) = u & (b24 = man & b14 = bxtrg) & (b04 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b24 = man & b34 = bxtrg) & (b44 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b24 = man & b23 = bxtrg) & (b22 = target) & (4-2 > 0):flr;
		next(dr) = r & (b24 = man & b25 = bxtrg) & (b26 = target) & (4+2 < n):flr;
		next(dr) = u & (b24 = man & b14 = bxtrg) & (b04 = target) & (2-2 > 0):flr;
		next(dr) = d & (b24 = man & b34 = bxtrg) & (b44 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b24 = mantrg & b23 = bx) & (b22 =flr) & (4-2 > 0): target;
		next(dr) = r & (b24 = mantrg & b25 = bx) & (b26 =flr) & (4+2 < n): target;
		next(dr) = u & (b24 = mantrg & b14 = bx) & (b04 =flr) & (2-2 > 0): target;
		next(dr) = d & (b24 = mantrg & b34 = bx) & (b44 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b24 = mantrg & b23 = bx) & (b22 = target) & (4-2 > 0): target;
		next(dr) = r & (b24 = mantrg & b25 = bx) & (b26 = target) & (4+2 < n): target;
		next(dr) = u & (b24 = mantrg & b14 = bx) & (b04 = target) & (2-2 > 0): target;
		next(dr) = d & (b24 = mantrg & b34 = bx) & (b44 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b24 = mantrg & b23 = bxtrg) & (b22 =flr) & (4-2 > 0): target;
		next(dr) = r & (b24 = mantrg & b25 = bxtrg) & (b26 =flr) & (4+2 < n): target;
		next(dr) = u & (b24 = mantrg & b14 = bxtrg) & (b04 =flr) & (2-2 > 0): target;
		next(dr) = d & (b24 = mantrg & b34 = bxtrg) & (b44 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b24 = mantrg & b23 = bxtrg) & (b22 = target) & (4-2 > 0): target;
		next(dr) = r & (b24 = mantrg & b25 = bxtrg) & (b26 = target) & (4+2 < n): target;
		next(dr) = u & (b24 = mantrg & b14 = bxtrg) & (b04 = target) & (2-2 > 0): target;
		next(dr) = d & (b24 = mantrg & b34 = bxtrg) & (b44 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b24 = flr & (b23 = man | b23 = mantrg)) : man;
        next(dr) = l & (b24 = flr & (b25 = man | b25 = mantrg)): man;
        next(dr) = d & (b24 = flr & (b14 = man | b14 = mantrg)): man;
        next(dr) = u & (b24 = flr & (b34 = man | b34 = mantrg)): man;

    --box to floor
        next(dr) = r & (b24 = flr & (b23 = bx | b23 = bxtrg)) & (b22 = man | b22 = mantrg): bx;
        next(dr) = l & (b24 = flr & (b25 = bx | b25 = bxtrg)) & (b26 = man | b26 = mantrg): bx;
        next(dr) = d & (b24 = flr & (b14 = bx | b14 = bxtrg)) & (b04 = man | b04 = mantrg): bx;
        next(dr) = u & (b24 = flr & (b34 = bx | b34 = bxtrg)) & (b44 = man | b44 = mantrg): bx;

    --man to target
        next(dr) = r & (b24 = target & (b23 = man | b23 = mantrg)): mantrg;
        next(dr) = l & (b24 = target & (b25 = man | b25 = mantrg)): mantrg;
        next(dr) = d & (b24 = target & (b14 = man | b14 = mantrg)): mantrg;
        next(dr) = u & (b24 = target & (b34 = man | b34 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b24 = target & (b23 = bx | b23 = bxtrg)) & (b22 = man | b22 = mantrg): bxtrg;
        next(dr) = l & (b24 = target & (b25 = bx | b25 = bxtrg)) & (b26 = man | b26 = mantrg): bxtrg;
        next(dr) = d & (b24 = target & (b14 = bx | b14 = bxtrg)) & (b04 = man | b04 = mantrg): bxtrg;
        next(dr) = u & (b24 = target & (b34 = bx | b34 = bxtrg)) & (b44 = man | b44 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b24 = bx & (b23 = man | b23 = mantrg)) & (b25 = flr | b25 = target): man;
        next(dr) = l & (b24 = bx & (b25 = man | b25 = mantrg)) & (b23 = flr | b23 = target): man;
        next(dr) = d & (b24 = bx & (b14 = man | b14 = mantrg)) & (b34 = flr | b34 = target): man;
        next(dr) = u & (b24 = bx & (b34 = man | b34 = mantrg)) & (b14 = flr | b14 = target): man;

    --man to box on target
        next(dr) = r & (b24 = bxtrg & (b23 = man | b23 = mantrg)) & (b25 = flr | b25 = target): mantrg;
        next(dr) = l & (b24 = bxtrg & (b25 = man | b25 = mantrg)) & (b23 = flr | b23 = target): mantrg;
        next(dr) = d & (b24 = bxtrg & (b14 = man | b14 = mantrg)) & (b34 = flr | b34 = target): mantrg;
        next(dr) = u & (b24 = bxtrg & (b34 = man | b34 = mantrg)) & (b14 = flr | b14 = target): mantrg;

    TRUE: b24;
esac;
next(b25) := case
	--floor to floor
		next(dr) = l & (b25 = man & b24 =flr):flr;
		next(dr) = r & (b25 = man & b26 =flr):flr;
		next(dr) = u & (b25 = man & b15 =flr):flr;
		next(dr) = d & (b25 = man & b35 =flr):flr;


	--target to floor
		next(dr) = l & (b25 = mantrg & b24 =flr): target;
		next(dr) = r & (b25 = mantrg & b26 =flr): target;
		next(dr) = u & (b25 = mantrg & b15 =flr): target;
		next(dr) = d & (b25 = mantrg & b35 =flr): target;

	--floor to target
		next(dr) = l & (b25 = man & b24 = target):flr;
		next(dr) = r & (b25 = man & b26 = target):flr;
		next(dr) = u & (b25 = man & b15 = target):flr;
		next(dr) = d & (b25 = man & b35 = target):flr;

	--target to target
		next(dr) = l & (b25 = mantrg & b24 = target): target;
		next(dr) = r & (b25 = mantrg & b26 = target): target;
		next(dr) = u & (b25 = mantrg & b15 = target): target;
		next(dr) = d & (b25 = mantrg & b35 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b25 = man & b24 = bx) & (b23 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b25 = man & b15 = bx) & (b05 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b25 = man & b35 = bx) & (b45 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b25 = man & b24 = bx) & (b23 = target) & (5-2 > 0):flr;
		next(dr) = u & (b25 = man & b15 = bx) & (b05 = target) & (2-2 > 0):flr;
		next(dr) = d & (b25 = man & b35 = bx) & (b45 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b25 = man & b24 = bxtrg) & (b23 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b25 = man & b15 = bxtrg) & (b05 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b25 = man & b35 = bxtrg) & (b45 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b25 = man & b24 = bxtrg) & (b23 = target) & (5-2 > 0):flr;
		next(dr) = u & (b25 = man & b15 = bxtrg) & (b05 = target) & (2-2 > 0):flr;
		next(dr) = d & (b25 = man & b35 = bxtrg) & (b45 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b25 = mantrg & b24 = bx) & (b23 =flr) & (5-2 > 0): target;
		next(dr) = u & (b25 = mantrg & b15 = bx) & (b05 =flr) & (2-2 > 0): target;
		next(dr) = d & (b25 = mantrg & b35 = bx) & (b45 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b25 = mantrg & b24 = bx) & (b23 = target) & (5-2 > 0): target;
		next(dr) = u & (b25 = mantrg & b15 = bx) & (b05 = target) & (2-2 > 0): target;
		next(dr) = d & (b25 = mantrg & b35 = bx) & (b45 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b25 = mantrg & b24 = bxtrg) & (b23 =flr) & (5-2 > 0): target;
		next(dr) = u & (b25 = mantrg & b15 = bxtrg) & (b05 =flr) & (2-2 > 0): target;
		next(dr) = d & (b25 = mantrg & b35 = bxtrg) & (b45 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b25 = mantrg & b24 = bxtrg) & (b23 = target) & (5-2 > 0): target;
		next(dr) = u & (b25 = mantrg & b15 = bxtrg) & (b05 = target) & (2-2 > 0): target;
		next(dr) = d & (b25 = mantrg & b35 = bxtrg) & (b45 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b25 = flr & (b24 = man | b24 = mantrg)) : man;
        next(dr) = l & (b25 = flr & (b26 = man | b26 = mantrg)): man;
        next(dr) = d & (b25 = flr & (b15 = man | b15 = mantrg)): man;
        next(dr) = u & (b25 = flr & (b35 = man | b35 = mantrg)): man;

    --box to floor
        next(dr) = r & (b25 = flr & (b24 = bx | b24 = bxtrg)) & (b23 = man | b23 = mantrg): bx;
        next(dr) = d & (b25 = flr & (b15 = bx | b15 = bxtrg)) & (b05 = man | b05 = mantrg): bx;
        next(dr) = u & (b25 = flr & (b35 = bx | b35 = bxtrg)) & (b45 = man | b45 = mantrg): bx;

    --man to target
        next(dr) = r & (b25 = target & (b24 = man | b24 = mantrg)): mantrg;
        next(dr) = l & (b25 = target & (b26 = man | b26 = mantrg)): mantrg;
        next(dr) = d & (b25 = target & (b15 = man | b15 = mantrg)): mantrg;
        next(dr) = u & (b25 = target & (b35 = man | b35 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b25 = target & (b24 = bx | b24 = bxtrg)) & (b23 = man | b23 = mantrg): bxtrg;
        next(dr) = d & (b25 = target & (b15 = bx | b15 = bxtrg)) & (b05 = man | b05 = mantrg): bxtrg;
        next(dr) = u & (b25 = target & (b35 = bx | b35 = bxtrg)) & (b45 = man | b45 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b25 = bx & (b24 = man | b24 = mantrg)) & (b26 = flr | b26 = target): man;
        next(dr) = l & (b25 = bx & (b26 = man | b26 = mantrg)) & (b24 = flr | b24 = target): man;
        next(dr) = d & (b25 = bx & (b15 = man | b15 = mantrg)) & (b35 = flr | b35 = target): man;
        next(dr) = u & (b25 = bx & (b35 = man | b35 = mantrg)) & (b15 = flr | b15 = target): man;

    --man to box on target
        next(dr) = r & (b25 = bxtrg & (b24 = man | b24 = mantrg)) & (b26 = flr | b26 = target): mantrg;
        next(dr) = l & (b25 = bxtrg & (b26 = man | b26 = mantrg)) & (b24 = flr | b24 = target): mantrg;
        next(dr) = d & (b25 = bxtrg & (b15 = man | b15 = mantrg)) & (b35 = flr | b35 = target): mantrg;
        next(dr) = u & (b25 = bxtrg & (b35 = man | b35 = mantrg)) & (b15 = flr | b15 = target): mantrg;

    TRUE: b25;
esac;
next(b26) := case
	--floor to floor
		next(dr) = l & (b26 = man & b25 =flr):flr;
		next(dr) = u & (b26 = man & b16 =flr):flr;
		next(dr) = d & (b26 = man & b36 =flr):flr;


	--target to floor
		next(dr) = l & (b26 = mantrg & b25 =flr): target;
		next(dr) = u & (b26 = mantrg & b16 =flr): target;
		next(dr) = d & (b26 = mantrg & b36 =flr): target;

	--floor to target
		next(dr) = l & (b26 = man & b25 = target):flr;
		next(dr) = u & (b26 = man & b16 = target):flr;
		next(dr) = d & (b26 = man & b36 = target):flr;

	--target to target
		next(dr) = l & (b26 = mantrg & b25 = target): target;
		next(dr) = u & (b26 = mantrg & b16 = target): target;
		next(dr) = d & (b26 = mantrg & b36 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b26 = man & b25 = bx) & (b24 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b26 = man & b16 = bx) & (b06 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b26 = man & b36 = bx) & (b46 =flr) & (2+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b26 = man & b25 = bx) & (b24 = target) & (6-2 > 0):flr;
		next(dr) = u & (b26 = man & b16 = bx) & (b06 = target) & (2-2 > 0):flr;
		next(dr) = d & (b26 = man & b36 = bx) & (b46 = target) & (2+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b26 = man & b25 = bxtrg) & (b24 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b26 = man & b16 = bxtrg) & (b06 =flr) & (2-2 > 0):flr;
		next(dr) = d & (b26 = man & b36 = bxtrg) & (b46 =flr) & (2-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b26 = man & b25 = bxtrg) & (b24 = target) & (6-2 > 0):flr;
		next(dr) = u & (b26 = man & b16 = bxtrg) & (b06 = target) & (2-2 > 0):flr;
		next(dr) = d & (b26 = man & b36 = bxtrg) & (b46 = target) & (2+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b26 = mantrg & b25 = bx) & (b24 =flr) & (6-2 > 0): target;
		next(dr) = u & (b26 = mantrg & b16 = bx) & (b06 =flr) & (2-2 > 0): target;
		next(dr) = d & (b26 = mantrg & b36 = bx) & (b46 =flr) & (2+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b26 = mantrg & b25 = bx) & (b24 = target) & (6-2 > 0): target;
		next(dr) = u & (b26 = mantrg & b16 = bx) & (b06 = target) & (2-2 > 0): target;
		next(dr) = d & (b26 = mantrg & b36 = bx) & (b46 = target) & (2+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b26 = mantrg & b25 = bxtrg) & (b24 =flr) & (6-2 > 0): target;
		next(dr) = u & (b26 = mantrg & b16 = bxtrg) & (b06 =flr) & (2-2 > 0): target;
		next(dr) = d & (b26 = mantrg & b36 = bxtrg) & (b46 =flr) & (2+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b26 = mantrg & b25 = bxtrg) & (b24 = target) & (6-2 > 0): target;
		next(dr) = u & (b26 = mantrg & b16 = bxtrg) & (b06 = target) & (2-2 > 0): target;
		next(dr) = d & (b26 = mantrg & b36 = bxtrg) & (b46 = target) & (2+2 < m): target;

    --man to floor
        next(dr) = r & (b26 = flr & (b25 = man | b25 = mantrg)) : man;
        next(dr) = d & (b26 = flr & (b16 = man | b16 = mantrg)): man;
        next(dr) = u & (b26 = flr & (b36 = man | b36 = mantrg)): man;

    --box to floor
        next(dr) = r & (b26 = flr & (b25 = bx | b25 = bxtrg)) & (b24 = man | b24 = mantrg): bx;
        next(dr) = d & (b26 = flr & (b16 = bx | b16 = bxtrg)) & (b06 = man | b06 = mantrg): bx;
        next(dr) = u & (b26 = flr & (b36 = bx | b36 = bxtrg)) & (b46 = man | b46 = mantrg): bx;

    --man to target
        next(dr) = r & (b26 = target & (b25 = man | b25 = mantrg)): mantrg;
        next(dr) = d & (b26 = target & (b16 = man | b16 = mantrg)): mantrg;
        next(dr) = u & (b26 = target & (b36 = man | b36 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b26 = target & (b25 = bx | b25 = bxtrg)) & (b24 = man | b24 = mantrg): bxtrg;
        next(dr) = d & (b26 = target & (b16 = bx | b16 = bxtrg)) & (b06 = man | b06 = mantrg): bxtrg;
        next(dr) = u & (b26 = target & (b36 = bx | b36 = bxtrg)) & (b46 = man | b46 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b26 = bx & (b16 = man | b16 = mantrg)) & (b36 = flr | b36 = target): man;
        next(dr) = u & (b26 = bx & (b36 = man | b36 = mantrg)) & (b16 = flr | b16 = target): man;

    --man to box on target
        next(dr) = d & (b26 = bxtrg & (b16 = man | b16 = mantrg)) & (b36 = flr | b36 = target): mantrg;
        next(dr) = u & (b26 = bxtrg & (b36 = man | b36 = mantrg)) & (b16 = flr | b16 = target): mantrg;

    TRUE: b26;
esac;
next(b30) := case
	--floor to floor
		next(dr) = r & (b30 = man & b31 =flr):flr;
		next(dr) = u & (b30 = man & b20 =flr):flr;
		next(dr) = d & (b30 = man & b40 =flr):flr;


	--target to floor
		next(dr) = r & (b30 = mantrg & b31 =flr): target;
		next(dr) = u & (b30 = mantrg & b20 =flr): target;
		next(dr) = d & (b30 = mantrg & b40 =flr): target;

	--floor to target
		next(dr) = r & (b30 = man & b31 = target):flr;
		next(dr) = u & (b30 = man & b20 = target):flr;
		next(dr) = d & (b30 = man & b40 = target):flr;

	--target to target
		next(dr) = r & (b30 = mantrg & b31 = target): target;
		next(dr) = u & (b30 = mantrg & b20 = target): target;
		next(dr) = d & (b30 = mantrg & b40 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b30 = man & b31 = bx) & (b32 =flr) & (0+2 < n):flr;
		next(dr) = u & (b30 = man & b20 = bx) & (b10 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b30 = man & b40 = bx) & (b50 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b30 = man & b31 = bx) & (b32 = target) & (0+2 < n):flr;
		next(dr) = u & (b30 = man & b20 = bx) & (b10 = target) & (3-2 > 0):flr;
		next(dr) = d & (b30 = man & b40 = bx) & (b50 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b30 = man & b31 = bxtrg) & (b32 =flr) & (0+2 < n):flr;
		next(dr) = u & (b30 = man & b20 = bxtrg) & (b10 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b30 = man & b40 = bxtrg) & (b50 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b30 = man & b31 = bxtrg) & (b32 = target) & (0+2 < n):flr;
		next(dr) = u & (b30 = man & b20 = bxtrg) & (b10 = target) & (3-2 > 0):flr;
		next(dr) = d & (b30 = man & b40 = bxtrg) & (b50 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b30 = mantrg & b31 = bx) & (b32 =flr) & (0+2 < n): target;
		next(dr) = u & (b30 = mantrg & b20 = bx) & (b10 =flr) & (3-2 > 0): target;
		next(dr) = d & (b30 = mantrg & b40 = bx) & (b50 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b30 = mantrg & b31 = bx) & (b32 = target) & (0+2 < n): target;
		next(dr) = u & (b30 = mantrg & b20 = bx) & (b10 = target) & (3-2 > 0): target;
		next(dr) = d & (b30 = mantrg & b40 = bx) & (b50 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b30 = mantrg & b31 = bxtrg) & (b32 =flr) & (0+2 < n): target;
		next(dr) = u & (b30 = mantrg & b20 = bxtrg) & (b10 =flr) & (3-2 > 0): target;
		next(dr) = d & (b30 = mantrg & b40 = bxtrg) & (b50 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b30 = mantrg & b31 = bxtrg) & (b32 = target) & (0+2 < n): target;
		next(dr) = u & (b30 = mantrg & b20 = bxtrg) & (b10 = target) & (3-2 > 0): target;
		next(dr) = d & (b30 = mantrg & b40 = bxtrg) & (b50 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = l & (b30 = flr & (b31 = man | b31 = mantrg)): man;
        next(dr) = d & (b30 = flr & (b20 = man | b20 = mantrg)): man;
        next(dr) = u & (b30 = flr & (b40 = man | b40 = mantrg)): man;

    --box to floor
        next(dr) = l & (b30 = flr & (b31 = bx | b31 = bxtrg)) & (b32 = man | b32 = mantrg): bx;
        next(dr) = d & (b30 = flr & (b20 = bx | b20 = bxtrg)) & (b10 = man | b10 = mantrg): bx;
        next(dr) = u & (b30 = flr & (b40 = bx | b40 = bxtrg)) & (b50 = man | b50 = mantrg): bx;

    --man to target
        next(dr) = l & (b30 = target & (b31 = man | b31 = mantrg)): mantrg;
        next(dr) = d & (b30 = target & (b20 = man | b20 = mantrg)): mantrg;
        next(dr) = u & (b30 = target & (b40 = man | b40 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b30 = target & (b31 = bx | b31 = bxtrg)) & (b32 = man | b32 = mantrg): bxtrg;
        next(dr) = d & (b30 = target & (b20 = bx | b20 = bxtrg)) & (b10 = man | b10 = mantrg): bxtrg;
        next(dr) = u & (b30 = target & (b40 = bx | b40 = bxtrg)) & (b50 = man | b50 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b30 = bx & (b20 = man | b20 = mantrg)) & (b40 = flr | b40 = target): man;
        next(dr) = u & (b30 = bx & (b40 = man | b40 = mantrg)) & (b20 = flr | b20 = target): man;

    --man to box on target
        next(dr) = d & (b30 = bxtrg & (b20 = man | b20 = mantrg)) & (b40 = flr | b40 = target): mantrg;
        next(dr) = u & (b30 = bxtrg & (b40 = man | b40 = mantrg)) & (b20 = flr | b20 = target): mantrg;

    TRUE: b30;
esac;
next(b31) := case
	--floor to floor
		next(dr) = l & (b31 = man & b30 =flr):flr;
		next(dr) = r & (b31 = man & b32 =flr):flr;
		next(dr) = u & (b31 = man & b21 =flr):flr;
		next(dr) = d & (b31 = man & b41 =flr):flr;


	--target to floor
		next(dr) = l & (b31 = mantrg & b30 =flr): target;
		next(dr) = r & (b31 = mantrg & b32 =flr): target;
		next(dr) = u & (b31 = mantrg & b21 =flr): target;
		next(dr) = d & (b31 = mantrg & b41 =flr): target;

	--floor to target
		next(dr) = l & (b31 = man & b30 = target):flr;
		next(dr) = r & (b31 = man & b32 = target):flr;
		next(dr) = u & (b31 = man & b21 = target):flr;
		next(dr) = d & (b31 = man & b41 = target):flr;

	--target to target
		next(dr) = l & (b31 = mantrg & b30 = target): target;
		next(dr) = r & (b31 = mantrg & b32 = target): target;
		next(dr) = u & (b31 = mantrg & b21 = target): target;
		next(dr) = d & (b31 = mantrg & b41 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b31 = man & b32 = bx) & (b33 =flr) & (1+2 < n):flr;
		next(dr) = u & (b31 = man & b21 = bx) & (b11 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b31 = man & b41 = bx) & (b51 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b31 = man & b32 = bx) & (b33 = target) & (1+2 < n):flr;
		next(dr) = u & (b31 = man & b21 = bx) & (b11 = target) & (3-2 > 0):flr;
		next(dr) = d & (b31 = man & b41 = bx) & (b51 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b31 = man & b32 = bxtrg) & (b33 =flr) & (1+2 < n):flr;
		next(dr) = u & (b31 = man & b21 = bxtrg) & (b11 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b31 = man & b41 = bxtrg) & (b51 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b31 = man & b32 = bxtrg) & (b33 = target) & (1+2 < n):flr;
		next(dr) = u & (b31 = man & b21 = bxtrg) & (b11 = target) & (3-2 > 0):flr;
		next(dr) = d & (b31 = man & b41 = bxtrg) & (b51 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b31 = mantrg & b32 = bx) & (b33 =flr) & (1+2 < n): target;
		next(dr) = u & (b31 = mantrg & b21 = bx) & (b11 =flr) & (3-2 > 0): target;
		next(dr) = d & (b31 = mantrg & b41 = bx) & (b51 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b31 = mantrg & b32 = bx) & (b33 = target) & (1+2 < n): target;
		next(dr) = u & (b31 = mantrg & b21 = bx) & (b11 = target) & (3-2 > 0): target;
		next(dr) = d & (b31 = mantrg & b41 = bx) & (b51 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b31 = mantrg & b32 = bxtrg) & (b33 =flr) & (1+2 < n): target;
		next(dr) = u & (b31 = mantrg & b21 = bxtrg) & (b11 =flr) & (3-2 > 0): target;
		next(dr) = d & (b31 = mantrg & b41 = bxtrg) & (b51 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b31 = mantrg & b32 = bxtrg) & (b33 = target) & (1+2 < n): target;
		next(dr) = u & (b31 = mantrg & b21 = bxtrg) & (b11 = target) & (3-2 > 0): target;
		next(dr) = d & (b31 = mantrg & b41 = bxtrg) & (b51 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b31 = flr & (b30 = man | b30 = mantrg)) : man;
        next(dr) = l & (b31 = flr & (b32 = man | b32 = mantrg)): man;
        next(dr) = d & (b31 = flr & (b21 = man | b21 = mantrg)): man;
        next(dr) = u & (b31 = flr & (b41 = man | b41 = mantrg)): man;

    --box to floor
        next(dr) = l & (b31 = flr & (b32 = bx | b32 = bxtrg)) & (b33 = man | b33 = mantrg): bx;
        next(dr) = d & (b31 = flr & (b21 = bx | b21 = bxtrg)) & (b11 = man | b11 = mantrg): bx;
        next(dr) = u & (b31 = flr & (b41 = bx | b41 = bxtrg)) & (b51 = man | b51 = mantrg): bx;

    --man to target
        next(dr) = r & (b31 = target & (b30 = man | b30 = mantrg)): mantrg;
        next(dr) = l & (b31 = target & (b32 = man | b32 = mantrg)): mantrg;
        next(dr) = d & (b31 = target & (b21 = man | b21 = mantrg)): mantrg;
        next(dr) = u & (b31 = target & (b41 = man | b41 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b31 = target & (b32 = bx | b32 = bxtrg)) & (b33 = man | b33 = mantrg): bxtrg;
        next(dr) = d & (b31 = target & (b21 = bx | b21 = bxtrg)) & (b11 = man | b11 = mantrg): bxtrg;
        next(dr) = u & (b31 = target & (b41 = bx | b41 = bxtrg)) & (b51 = man | b51 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b31 = bx & (b30 = man | b30 = mantrg)) & (b32 = flr | b32 = target): man;
        next(dr) = l & (b31 = bx & (b32 = man | b32 = mantrg)) & (b30 = flr | b30 = target): man;
        next(dr) = d & (b31 = bx & (b21 = man | b21 = mantrg)) & (b41 = flr | b41 = target): man;
        next(dr) = u & (b31 = bx & (b41 = man | b41 = mantrg)) & (b21 = flr | b21 = target): man;

    --man to box on target
        next(dr) = r & (b31 = bxtrg & (b30 = man | b30 = mantrg)) & (b32 = flr | b32 = target): mantrg;
        next(dr) = l & (b31 = bxtrg & (b32 = man | b32 = mantrg)) & (b30 = flr | b30 = target): mantrg;
        next(dr) = d & (b31 = bxtrg & (b21 = man | b21 = mantrg)) & (b41 = flr | b41 = target): mantrg;
        next(dr) = u & (b31 = bxtrg & (b41 = man | b41 = mantrg)) & (b21 = flr | b21 = target): mantrg;

    TRUE: b31;
esac;
next(b32) := case
	--floor to floor
		next(dr) = l & (b32 = man & b31 =flr):flr;
		next(dr) = r & (b32 = man & b33 =flr):flr;
		next(dr) = u & (b32 = man & b22 =flr):flr;
		next(dr) = d & (b32 = man & b42 =flr):flr;


	--target to floor
		next(dr) = l & (b32 = mantrg & b31 =flr): target;
		next(dr) = r & (b32 = mantrg & b33 =flr): target;
		next(dr) = u & (b32 = mantrg & b22 =flr): target;
		next(dr) = d & (b32 = mantrg & b42 =flr): target;

	--floor to target
		next(dr) = l & (b32 = man & b31 = target):flr;
		next(dr) = r & (b32 = man & b33 = target):flr;
		next(dr) = u & (b32 = man & b22 = target):flr;
		next(dr) = d & (b32 = man & b42 = target):flr;

	--target to target
		next(dr) = l & (b32 = mantrg & b31 = target): target;
		next(dr) = r & (b32 = mantrg & b33 = target): target;
		next(dr) = u & (b32 = mantrg & b22 = target): target;
		next(dr) = d & (b32 = mantrg & b42 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b32 = man & b31 = bx) & (b30 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b32 = man & b33 = bx) & (b34 =flr) & (2+2 < n):flr;
		next(dr) = u & (b32 = man & b22 = bx) & (b12 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b32 = man & b42 = bx) & (b52 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b32 = man & b31 = bx) & (b30 = target) & (2-2 > 0):flr;
		next(dr) = r & (b32 = man & b33 = bx) & (b34 = target) & (2+2 < n):flr;
		next(dr) = u & (b32 = man & b22 = bx) & (b12 = target) & (3-2 > 0):flr;
		next(dr) = d & (b32 = man & b42 = bx) & (b52 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b32 = man & b31 = bxtrg) & (b30 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b32 = man & b33 = bxtrg) & (b34 =flr) & (2+2 < n):flr;
		next(dr) = u & (b32 = man & b22 = bxtrg) & (b12 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b32 = man & b42 = bxtrg) & (b52 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b32 = man & b31 = bxtrg) & (b30 = target) & (2-2 > 0):flr;
		next(dr) = r & (b32 = man & b33 = bxtrg) & (b34 = target) & (2+2 < n):flr;
		next(dr) = u & (b32 = man & b22 = bxtrg) & (b12 = target) & (3-2 > 0):flr;
		next(dr) = d & (b32 = man & b42 = bxtrg) & (b52 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b32 = mantrg & b31 = bx) & (b30 =flr) & (2-2 > 0): target;
		next(dr) = r & (b32 = mantrg & b33 = bx) & (b34 =flr) & (2+2 < n): target;
		next(dr) = u & (b32 = mantrg & b22 = bx) & (b12 =flr) & (3-2 > 0): target;
		next(dr) = d & (b32 = mantrg & b42 = bx) & (b52 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b32 = mantrg & b31 = bx) & (b30 = target) & (2-2 > 0): target;
		next(dr) = r & (b32 = mantrg & b33 = bx) & (b34 = target) & (2+2 < n): target;
		next(dr) = u & (b32 = mantrg & b22 = bx) & (b12 = target) & (3-2 > 0): target;
		next(dr) = d & (b32 = mantrg & b42 = bx) & (b52 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b32 = mantrg & b31 = bxtrg) & (b30 =flr) & (2-2 > 0): target;
		next(dr) = r & (b32 = mantrg & b33 = bxtrg) & (b34 =flr) & (2+2 < n): target;
		next(dr) = u & (b32 = mantrg & b22 = bxtrg) & (b12 =flr) & (3-2 > 0): target;
		next(dr) = d & (b32 = mantrg & b42 = bxtrg) & (b52 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b32 = mantrg & b31 = bxtrg) & (b30 = target) & (2-2 > 0): target;
		next(dr) = r & (b32 = mantrg & b33 = bxtrg) & (b34 = target) & (2+2 < n): target;
		next(dr) = u & (b32 = mantrg & b22 = bxtrg) & (b12 = target) & (3-2 > 0): target;
		next(dr) = d & (b32 = mantrg & b42 = bxtrg) & (b52 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b32 = flr & (b31 = man | b31 = mantrg)) : man;
        next(dr) = l & (b32 = flr & (b33 = man | b33 = mantrg)): man;
        next(dr) = d & (b32 = flr & (b22 = man | b22 = mantrg)): man;
        next(dr) = u & (b32 = flr & (b42 = man | b42 = mantrg)): man;

    --box to floor
        next(dr) = r & (b32 = flr & (b31 = bx | b31 = bxtrg)) & (b30 = man | b30 = mantrg): bx;
        next(dr) = l & (b32 = flr & (b33 = bx | b33 = bxtrg)) & (b34 = man | b34 = mantrg): bx;
        next(dr) = d & (b32 = flr & (b22 = bx | b22 = bxtrg)) & (b12 = man | b12 = mantrg): bx;
        next(dr) = u & (b32 = flr & (b42 = bx | b42 = bxtrg)) & (b52 = man | b52 = mantrg): bx;

    --man to target
        next(dr) = r & (b32 = target & (b31 = man | b31 = mantrg)): mantrg;
        next(dr) = l & (b32 = target & (b33 = man | b33 = mantrg)): mantrg;
        next(dr) = d & (b32 = target & (b22 = man | b22 = mantrg)): mantrg;
        next(dr) = u & (b32 = target & (b42 = man | b42 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b32 = target & (b31 = bx | b31 = bxtrg)) & (b30 = man | b30 = mantrg): bxtrg;
        next(dr) = l & (b32 = target & (b33 = bx | b33 = bxtrg)) & (b34 = man | b34 = mantrg): bxtrg;
        next(dr) = d & (b32 = target & (b22 = bx | b22 = bxtrg)) & (b12 = man | b12 = mantrg): bxtrg;
        next(dr) = u & (b32 = target & (b42 = bx | b42 = bxtrg)) & (b52 = man | b52 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b32 = bx & (b31 = man | b31 = mantrg)) & (b33 = flr | b33 = target): man;
        next(dr) = l & (b32 = bx & (b33 = man | b33 = mantrg)) & (b31 = flr | b31 = target): man;
        next(dr) = d & (b32 = bx & (b22 = man | b22 = mantrg)) & (b42 = flr | b42 = target): man;
        next(dr) = u & (b32 = bx & (b42 = man | b42 = mantrg)) & (b22 = flr | b22 = target): man;

    --man to box on target
        next(dr) = r & (b32 = bxtrg & (b31 = man | b31 = mantrg)) & (b33 = flr | b33 = target): mantrg;
        next(dr) = l & (b32 = bxtrg & (b33 = man | b33 = mantrg)) & (b31 = flr | b31 = target): mantrg;
        next(dr) = d & (b32 = bxtrg & (b22 = man | b22 = mantrg)) & (b42 = flr | b42 = target): mantrg;
        next(dr) = u & (b32 = bxtrg & (b42 = man | b42 = mantrg)) & (b22 = flr | b22 = target): mantrg;

    TRUE: b32;
esac;
next(b33) := case
	--floor to floor
		next(dr) = l & (b33 = man & b32 =flr):flr;
		next(dr) = r & (b33 = man & b34 =flr):flr;
		next(dr) = u & (b33 = man & b23 =flr):flr;
		next(dr) = d & (b33 = man & b43 =flr):flr;


	--target to floor
		next(dr) = l & (b33 = mantrg & b32 =flr): target;
		next(dr) = r & (b33 = mantrg & b34 =flr): target;
		next(dr) = u & (b33 = mantrg & b23 =flr): target;
		next(dr) = d & (b33 = mantrg & b43 =flr): target;

	--floor to target
		next(dr) = l & (b33 = man & b32 = target):flr;
		next(dr) = r & (b33 = man & b34 = target):flr;
		next(dr) = u & (b33 = man & b23 = target):flr;
		next(dr) = d & (b33 = man & b43 = target):flr;

	--target to target
		next(dr) = l & (b33 = mantrg & b32 = target): target;
		next(dr) = r & (b33 = mantrg & b34 = target): target;
		next(dr) = u & (b33 = mantrg & b23 = target): target;
		next(dr) = d & (b33 = mantrg & b43 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b33 = man & b32 = bx) & (b31 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b33 = man & b34 = bx) & (b35 =flr) & (3+2 < n):flr;
		next(dr) = u & (b33 = man & b23 = bx) & (b13 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b33 = man & b43 = bx) & (b53 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b33 = man & b32 = bx) & (b31 = target) & (3-2 > 0):flr;
		next(dr) = r & (b33 = man & b34 = bx) & (b35 = target) & (3+2 < n):flr;
		next(dr) = u & (b33 = man & b23 = bx) & (b13 = target) & (3-2 > 0):flr;
		next(dr) = d & (b33 = man & b43 = bx) & (b53 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b33 = man & b32 = bxtrg) & (b31 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b33 = man & b34 = bxtrg) & (b35 =flr) & (3+2 < n):flr;
		next(dr) = u & (b33 = man & b23 = bxtrg) & (b13 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b33 = man & b43 = bxtrg) & (b53 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b33 = man & b32 = bxtrg) & (b31 = target) & (3-2 > 0):flr;
		next(dr) = r & (b33 = man & b34 = bxtrg) & (b35 = target) & (3+2 < n):flr;
		next(dr) = u & (b33 = man & b23 = bxtrg) & (b13 = target) & (3-2 > 0):flr;
		next(dr) = d & (b33 = man & b43 = bxtrg) & (b53 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b33 = mantrg & b32 = bx) & (b31 =flr) & (3-2 > 0): target;
		next(dr) = r & (b33 = mantrg & b34 = bx) & (b35 =flr) & (3+2 < n): target;
		next(dr) = u & (b33 = mantrg & b23 = bx) & (b13 =flr) & (3-2 > 0): target;
		next(dr) = d & (b33 = mantrg & b43 = bx) & (b53 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b33 = mantrg & b32 = bx) & (b31 = target) & (3-2 > 0): target;
		next(dr) = r & (b33 = mantrg & b34 = bx) & (b35 = target) & (3+2 < n): target;
		next(dr) = u & (b33 = mantrg & b23 = bx) & (b13 = target) & (3-2 > 0): target;
		next(dr) = d & (b33 = mantrg & b43 = bx) & (b53 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b33 = mantrg & b32 = bxtrg) & (b31 =flr) & (3-2 > 0): target;
		next(dr) = r & (b33 = mantrg & b34 = bxtrg) & (b35 =flr) & (3+2 < n): target;
		next(dr) = u & (b33 = mantrg & b23 = bxtrg) & (b13 =flr) & (3-2 > 0): target;
		next(dr) = d & (b33 = mantrg & b43 = bxtrg) & (b53 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b33 = mantrg & b32 = bxtrg) & (b31 = target) & (3-2 > 0): target;
		next(dr) = r & (b33 = mantrg & b34 = bxtrg) & (b35 = target) & (3+2 < n): target;
		next(dr) = u & (b33 = mantrg & b23 = bxtrg) & (b13 = target) & (3-2 > 0): target;
		next(dr) = d & (b33 = mantrg & b43 = bxtrg) & (b53 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b33 = flr & (b32 = man | b32 = mantrg)) : man;
        next(dr) = l & (b33 = flr & (b34 = man | b34 = mantrg)): man;
        next(dr) = d & (b33 = flr & (b23 = man | b23 = mantrg)): man;
        next(dr) = u & (b33 = flr & (b43 = man | b43 = mantrg)): man;

    --box to floor
        next(dr) = r & (b33 = flr & (b32 = bx | b32 = bxtrg)) & (b31 = man | b31 = mantrg): bx;
        next(dr) = l & (b33 = flr & (b34 = bx | b34 = bxtrg)) & (b35 = man | b35 = mantrg): bx;
        next(dr) = d & (b33 = flr & (b23 = bx | b23 = bxtrg)) & (b13 = man | b13 = mantrg): bx;
        next(dr) = u & (b33 = flr & (b43 = bx | b43 = bxtrg)) & (b53 = man | b53 = mantrg): bx;

    --man to target
        next(dr) = r & (b33 = target & (b32 = man | b32 = mantrg)): mantrg;
        next(dr) = l & (b33 = target & (b34 = man | b34 = mantrg)): mantrg;
        next(dr) = d & (b33 = target & (b23 = man | b23 = mantrg)): mantrg;
        next(dr) = u & (b33 = target & (b43 = man | b43 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b33 = target & (b32 = bx | b32 = bxtrg)) & (b31 = man | b31 = mantrg): bxtrg;
        next(dr) = l & (b33 = target & (b34 = bx | b34 = bxtrg)) & (b35 = man | b35 = mantrg): bxtrg;
        next(dr) = d & (b33 = target & (b23 = bx | b23 = bxtrg)) & (b13 = man | b13 = mantrg): bxtrg;
        next(dr) = u & (b33 = target & (b43 = bx | b43 = bxtrg)) & (b53 = man | b53 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b33 = bx & (b32 = man | b32 = mantrg)) & (b34 = flr | b34 = target): man;
        next(dr) = l & (b33 = bx & (b34 = man | b34 = mantrg)) & (b32 = flr | b32 = target): man;
        next(dr) = d & (b33 = bx & (b23 = man | b23 = mantrg)) & (b43 = flr | b43 = target): man;
        next(dr) = u & (b33 = bx & (b43 = man | b43 = mantrg)) & (b23 = flr | b23 = target): man;

    --man to box on target
        next(dr) = r & (b33 = bxtrg & (b32 = man | b32 = mantrg)) & (b34 = flr | b34 = target): mantrg;
        next(dr) = l & (b33 = bxtrg & (b34 = man | b34 = mantrg)) & (b32 = flr | b32 = target): mantrg;
        next(dr) = d & (b33 = bxtrg & (b23 = man | b23 = mantrg)) & (b43 = flr | b43 = target): mantrg;
        next(dr) = u & (b33 = bxtrg & (b43 = man | b43 = mantrg)) & (b23 = flr | b23 = target): mantrg;

    TRUE: b33;
esac;
next(b34) := case
	--floor to floor
		next(dr) = l & (b34 = man & b33 =flr):flr;
		next(dr) = r & (b34 = man & b35 =flr):flr;
		next(dr) = u & (b34 = man & b24 =flr):flr;
		next(dr) = d & (b34 = man & b44 =flr):flr;


	--target to floor
		next(dr) = l & (b34 = mantrg & b33 =flr): target;
		next(dr) = r & (b34 = mantrg & b35 =flr): target;
		next(dr) = u & (b34 = mantrg & b24 =flr): target;
		next(dr) = d & (b34 = mantrg & b44 =flr): target;

	--floor to target
		next(dr) = l & (b34 = man & b33 = target):flr;
		next(dr) = r & (b34 = man & b35 = target):flr;
		next(dr) = u & (b34 = man & b24 = target):flr;
		next(dr) = d & (b34 = man & b44 = target):flr;

	--target to target
		next(dr) = l & (b34 = mantrg & b33 = target): target;
		next(dr) = r & (b34 = mantrg & b35 = target): target;
		next(dr) = u & (b34 = mantrg & b24 = target): target;
		next(dr) = d & (b34 = mantrg & b44 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b34 = man & b33 = bx) & (b32 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b34 = man & b35 = bx) & (b36 =flr) & (4+2 < n):flr;
		next(dr) = u & (b34 = man & b24 = bx) & (b14 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b34 = man & b44 = bx) & (b54 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b34 = man & b33 = bx) & (b32 = target) & (4-2 > 0):flr;
		next(dr) = r & (b34 = man & b35 = bx) & (b36 = target) & (4+2 < n):flr;
		next(dr) = u & (b34 = man & b24 = bx) & (b14 = target) & (3-2 > 0):flr;
		next(dr) = d & (b34 = man & b44 = bx) & (b54 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b34 = man & b33 = bxtrg) & (b32 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b34 = man & b35 = bxtrg) & (b36 =flr) & (4+2 < n):flr;
		next(dr) = u & (b34 = man & b24 = bxtrg) & (b14 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b34 = man & b44 = bxtrg) & (b54 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b34 = man & b33 = bxtrg) & (b32 = target) & (4-2 > 0):flr;
		next(dr) = r & (b34 = man & b35 = bxtrg) & (b36 = target) & (4+2 < n):flr;
		next(dr) = u & (b34 = man & b24 = bxtrg) & (b14 = target) & (3-2 > 0):flr;
		next(dr) = d & (b34 = man & b44 = bxtrg) & (b54 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b34 = mantrg & b33 = bx) & (b32 =flr) & (4-2 > 0): target;
		next(dr) = r & (b34 = mantrg & b35 = bx) & (b36 =flr) & (4+2 < n): target;
		next(dr) = u & (b34 = mantrg & b24 = bx) & (b14 =flr) & (3-2 > 0): target;
		next(dr) = d & (b34 = mantrg & b44 = bx) & (b54 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b34 = mantrg & b33 = bx) & (b32 = target) & (4-2 > 0): target;
		next(dr) = r & (b34 = mantrg & b35 = bx) & (b36 = target) & (4+2 < n): target;
		next(dr) = u & (b34 = mantrg & b24 = bx) & (b14 = target) & (3-2 > 0): target;
		next(dr) = d & (b34 = mantrg & b44 = bx) & (b54 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b34 = mantrg & b33 = bxtrg) & (b32 =flr) & (4-2 > 0): target;
		next(dr) = r & (b34 = mantrg & b35 = bxtrg) & (b36 =flr) & (4+2 < n): target;
		next(dr) = u & (b34 = mantrg & b24 = bxtrg) & (b14 =flr) & (3-2 > 0): target;
		next(dr) = d & (b34 = mantrg & b44 = bxtrg) & (b54 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b34 = mantrg & b33 = bxtrg) & (b32 = target) & (4-2 > 0): target;
		next(dr) = r & (b34 = mantrg & b35 = bxtrg) & (b36 = target) & (4+2 < n): target;
		next(dr) = u & (b34 = mantrg & b24 = bxtrg) & (b14 = target) & (3-2 > 0): target;
		next(dr) = d & (b34 = mantrg & b44 = bxtrg) & (b54 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b34 = flr & (b33 = man | b33 = mantrg)) : man;
        next(dr) = l & (b34 = flr & (b35 = man | b35 = mantrg)): man;
        next(dr) = d & (b34 = flr & (b24 = man | b24 = mantrg)): man;
        next(dr) = u & (b34 = flr & (b44 = man | b44 = mantrg)): man;

    --box to floor
        next(dr) = r & (b34 = flr & (b33 = bx | b33 = bxtrg)) & (b32 = man | b32 = mantrg): bx;
        next(dr) = l & (b34 = flr & (b35 = bx | b35 = bxtrg)) & (b36 = man | b36 = mantrg): bx;
        next(dr) = d & (b34 = flr & (b24 = bx | b24 = bxtrg)) & (b14 = man | b14 = mantrg): bx;
        next(dr) = u & (b34 = flr & (b44 = bx | b44 = bxtrg)) & (b54 = man | b54 = mantrg): bx;

    --man to target
        next(dr) = r & (b34 = target & (b33 = man | b33 = mantrg)): mantrg;
        next(dr) = l & (b34 = target & (b35 = man | b35 = mantrg)): mantrg;
        next(dr) = d & (b34 = target & (b24 = man | b24 = mantrg)): mantrg;
        next(dr) = u & (b34 = target & (b44 = man | b44 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b34 = target & (b33 = bx | b33 = bxtrg)) & (b32 = man | b32 = mantrg): bxtrg;
        next(dr) = l & (b34 = target & (b35 = bx | b35 = bxtrg)) & (b36 = man | b36 = mantrg): bxtrg;
        next(dr) = d & (b34 = target & (b24 = bx | b24 = bxtrg)) & (b14 = man | b14 = mantrg): bxtrg;
        next(dr) = u & (b34 = target & (b44 = bx | b44 = bxtrg)) & (b54 = man | b54 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b34 = bx & (b33 = man | b33 = mantrg)) & (b35 = flr | b35 = target): man;
        next(dr) = l & (b34 = bx & (b35 = man | b35 = mantrg)) & (b33 = flr | b33 = target): man;
        next(dr) = d & (b34 = bx & (b24 = man | b24 = mantrg)) & (b44 = flr | b44 = target): man;
        next(dr) = u & (b34 = bx & (b44 = man | b44 = mantrg)) & (b24 = flr | b24 = target): man;

    --man to box on target
        next(dr) = r & (b34 = bxtrg & (b33 = man | b33 = mantrg)) & (b35 = flr | b35 = target): mantrg;
        next(dr) = l & (b34 = bxtrg & (b35 = man | b35 = mantrg)) & (b33 = flr | b33 = target): mantrg;
        next(dr) = d & (b34 = bxtrg & (b24 = man | b24 = mantrg)) & (b44 = flr | b44 = target): mantrg;
        next(dr) = u & (b34 = bxtrg & (b44 = man | b44 = mantrg)) & (b24 = flr | b24 = target): mantrg;

    TRUE: b34;
esac;
next(b35) := case
	--floor to floor
		next(dr) = l & (b35 = man & b34 =flr):flr;
		next(dr) = r & (b35 = man & b36 =flr):flr;
		next(dr) = u & (b35 = man & b25 =flr):flr;
		next(dr) = d & (b35 = man & b45 =flr):flr;


	--target to floor
		next(dr) = l & (b35 = mantrg & b34 =flr): target;
		next(dr) = r & (b35 = mantrg & b36 =flr): target;
		next(dr) = u & (b35 = mantrg & b25 =flr): target;
		next(dr) = d & (b35 = mantrg & b45 =flr): target;

	--floor to target
		next(dr) = l & (b35 = man & b34 = target):flr;
		next(dr) = r & (b35 = man & b36 = target):flr;
		next(dr) = u & (b35 = man & b25 = target):flr;
		next(dr) = d & (b35 = man & b45 = target):flr;

	--target to target
		next(dr) = l & (b35 = mantrg & b34 = target): target;
		next(dr) = r & (b35 = mantrg & b36 = target): target;
		next(dr) = u & (b35 = mantrg & b25 = target): target;
		next(dr) = d & (b35 = mantrg & b45 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b35 = man & b34 = bx) & (b33 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b35 = man & b25 = bx) & (b15 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b35 = man & b45 = bx) & (b55 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b35 = man & b34 = bx) & (b33 = target) & (5-2 > 0):flr;
		next(dr) = u & (b35 = man & b25 = bx) & (b15 = target) & (3-2 > 0):flr;
		next(dr) = d & (b35 = man & b45 = bx) & (b55 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b35 = man & b34 = bxtrg) & (b33 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b35 = man & b25 = bxtrg) & (b15 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b35 = man & b45 = bxtrg) & (b55 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b35 = man & b34 = bxtrg) & (b33 = target) & (5-2 > 0):flr;
		next(dr) = u & (b35 = man & b25 = bxtrg) & (b15 = target) & (3-2 > 0):flr;
		next(dr) = d & (b35 = man & b45 = bxtrg) & (b55 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b35 = mantrg & b34 = bx) & (b33 =flr) & (5-2 > 0): target;
		next(dr) = u & (b35 = mantrg & b25 = bx) & (b15 =flr) & (3-2 > 0): target;
		next(dr) = d & (b35 = mantrg & b45 = bx) & (b55 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b35 = mantrg & b34 = bx) & (b33 = target) & (5-2 > 0): target;
		next(dr) = u & (b35 = mantrg & b25 = bx) & (b15 = target) & (3-2 > 0): target;
		next(dr) = d & (b35 = mantrg & b45 = bx) & (b55 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b35 = mantrg & b34 = bxtrg) & (b33 =flr) & (5-2 > 0): target;
		next(dr) = u & (b35 = mantrg & b25 = bxtrg) & (b15 =flr) & (3-2 > 0): target;
		next(dr) = d & (b35 = mantrg & b45 = bxtrg) & (b55 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b35 = mantrg & b34 = bxtrg) & (b33 = target) & (5-2 > 0): target;
		next(dr) = u & (b35 = mantrg & b25 = bxtrg) & (b15 = target) & (3-2 > 0): target;
		next(dr) = d & (b35 = mantrg & b45 = bxtrg) & (b55 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b35 = flr & (b34 = man | b34 = mantrg)) : man;
        next(dr) = l & (b35 = flr & (b36 = man | b36 = mantrg)): man;
        next(dr) = d & (b35 = flr & (b25 = man | b25 = mantrg)): man;
        next(dr) = u & (b35 = flr & (b45 = man | b45 = mantrg)): man;

    --box to floor
        next(dr) = r & (b35 = flr & (b34 = bx | b34 = bxtrg)) & (b33 = man | b33 = mantrg): bx;
        next(dr) = d & (b35 = flr & (b25 = bx | b25 = bxtrg)) & (b15 = man | b15 = mantrg): bx;
        next(dr) = u & (b35 = flr & (b45 = bx | b45 = bxtrg)) & (b55 = man | b55 = mantrg): bx;

    --man to target
        next(dr) = r & (b35 = target & (b34 = man | b34 = mantrg)): mantrg;
        next(dr) = l & (b35 = target & (b36 = man | b36 = mantrg)): mantrg;
        next(dr) = d & (b35 = target & (b25 = man | b25 = mantrg)): mantrg;
        next(dr) = u & (b35 = target & (b45 = man | b45 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b35 = target & (b34 = bx | b34 = bxtrg)) & (b33 = man | b33 = mantrg): bxtrg;
        next(dr) = d & (b35 = target & (b25 = bx | b25 = bxtrg)) & (b15 = man | b15 = mantrg): bxtrg;
        next(dr) = u & (b35 = target & (b45 = bx | b45 = bxtrg)) & (b55 = man | b55 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b35 = bx & (b34 = man | b34 = mantrg)) & (b36 = flr | b36 = target): man;
        next(dr) = l & (b35 = bx & (b36 = man | b36 = mantrg)) & (b34 = flr | b34 = target): man;
        next(dr) = d & (b35 = bx & (b25 = man | b25 = mantrg)) & (b45 = flr | b45 = target): man;
        next(dr) = u & (b35 = bx & (b45 = man | b45 = mantrg)) & (b25 = flr | b25 = target): man;

    --man to box on target
        next(dr) = r & (b35 = bxtrg & (b34 = man | b34 = mantrg)) & (b36 = flr | b36 = target): mantrg;
        next(dr) = l & (b35 = bxtrg & (b36 = man | b36 = mantrg)) & (b34 = flr | b34 = target): mantrg;
        next(dr) = d & (b35 = bxtrg & (b25 = man | b25 = mantrg)) & (b45 = flr | b45 = target): mantrg;
        next(dr) = u & (b35 = bxtrg & (b45 = man | b45 = mantrg)) & (b25 = flr | b25 = target): mantrg;

    TRUE: b35;
esac;
next(b36) := case
	--floor to floor
		next(dr) = l & (b36 = man & b35 =flr):flr;
		next(dr) = u & (b36 = man & b26 =flr):flr;
		next(dr) = d & (b36 = man & b46 =flr):flr;


	--target to floor
		next(dr) = l & (b36 = mantrg & b35 =flr): target;
		next(dr) = u & (b36 = mantrg & b26 =flr): target;
		next(dr) = d & (b36 = mantrg & b46 =flr): target;

	--floor to target
		next(dr) = l & (b36 = man & b35 = target):flr;
		next(dr) = u & (b36 = man & b26 = target):flr;
		next(dr) = d & (b36 = man & b46 = target):flr;

	--target to target
		next(dr) = l & (b36 = mantrg & b35 = target): target;
		next(dr) = u & (b36 = mantrg & b26 = target): target;
		next(dr) = d & (b36 = mantrg & b46 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b36 = man & b35 = bx) & (b34 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b36 = man & b26 = bx) & (b16 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b36 = man & b46 = bx) & (b56 =flr) & (3+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b36 = man & b35 = bx) & (b34 = target) & (6-2 > 0):flr;
		next(dr) = u & (b36 = man & b26 = bx) & (b16 = target) & (3-2 > 0):flr;
		next(dr) = d & (b36 = man & b46 = bx) & (b56 = target) & (3+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b36 = man & b35 = bxtrg) & (b34 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b36 = man & b26 = bxtrg) & (b16 =flr) & (3-2 > 0):flr;
		next(dr) = d & (b36 = man & b46 = bxtrg) & (b56 =flr) & (3-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b36 = man & b35 = bxtrg) & (b34 = target) & (6-2 > 0):flr;
		next(dr) = u & (b36 = man & b26 = bxtrg) & (b16 = target) & (3-2 > 0):flr;
		next(dr) = d & (b36 = man & b46 = bxtrg) & (b56 = target) & (3+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b36 = mantrg & b35 = bx) & (b34 =flr) & (6-2 > 0): target;
		next(dr) = u & (b36 = mantrg & b26 = bx) & (b16 =flr) & (3-2 > 0): target;
		next(dr) = d & (b36 = mantrg & b46 = bx) & (b56 =flr) & (3+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b36 = mantrg & b35 = bx) & (b34 = target) & (6-2 > 0): target;
		next(dr) = u & (b36 = mantrg & b26 = bx) & (b16 = target) & (3-2 > 0): target;
		next(dr) = d & (b36 = mantrg & b46 = bx) & (b56 = target) & (3+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b36 = mantrg & b35 = bxtrg) & (b34 =flr) & (6-2 > 0): target;
		next(dr) = u & (b36 = mantrg & b26 = bxtrg) & (b16 =flr) & (3-2 > 0): target;
		next(dr) = d & (b36 = mantrg & b46 = bxtrg) & (b56 =flr) & (3+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b36 = mantrg & b35 = bxtrg) & (b34 = target) & (6-2 > 0): target;
		next(dr) = u & (b36 = mantrg & b26 = bxtrg) & (b16 = target) & (3-2 > 0): target;
		next(dr) = d & (b36 = mantrg & b46 = bxtrg) & (b56 = target) & (3+2 < m): target;

    --man to floor
        next(dr) = r & (b36 = flr & (b35 = man | b35 = mantrg)) : man;
        next(dr) = d & (b36 = flr & (b26 = man | b26 = mantrg)): man;
        next(dr) = u & (b36 = flr & (b46 = man | b46 = mantrg)): man;

    --box to floor
        next(dr) = r & (b36 = flr & (b35 = bx | b35 = bxtrg)) & (b34 = man | b34 = mantrg): bx;
        next(dr) = d & (b36 = flr & (b26 = bx | b26 = bxtrg)) & (b16 = man | b16 = mantrg): bx;
        next(dr) = u & (b36 = flr & (b46 = bx | b46 = bxtrg)) & (b56 = man | b56 = mantrg): bx;

    --man to target
        next(dr) = r & (b36 = target & (b35 = man | b35 = mantrg)): mantrg;
        next(dr) = d & (b36 = target & (b26 = man | b26 = mantrg)): mantrg;
        next(dr) = u & (b36 = target & (b46 = man | b46 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b36 = target & (b35 = bx | b35 = bxtrg)) & (b34 = man | b34 = mantrg): bxtrg;
        next(dr) = d & (b36 = target & (b26 = bx | b26 = bxtrg)) & (b16 = man | b16 = mantrg): bxtrg;
        next(dr) = u & (b36 = target & (b46 = bx | b46 = bxtrg)) & (b56 = man | b56 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b36 = bx & (b26 = man | b26 = mantrg)) & (b46 = flr | b46 = target): man;
        next(dr) = u & (b36 = bx & (b46 = man | b46 = mantrg)) & (b26 = flr | b26 = target): man;

    --man to box on target
        next(dr) = d & (b36 = bxtrg & (b26 = man | b26 = mantrg)) & (b46 = flr | b46 = target): mantrg;
        next(dr) = u & (b36 = bxtrg & (b46 = man | b46 = mantrg)) & (b26 = flr | b26 = target): mantrg;

    TRUE: b36;
esac;
next(b40) := case
	--floor to floor
		next(dr) = r & (b40 = man & b41 =flr):flr;
		next(dr) = u & (b40 = man & b30 =flr):flr;
		next(dr) = d & (b40 = man & b50 =flr):flr;


	--target to floor
		next(dr) = r & (b40 = mantrg & b41 =flr): target;
		next(dr) = u & (b40 = mantrg & b30 =flr): target;
		next(dr) = d & (b40 = mantrg & b50 =flr): target;

	--floor to target
		next(dr) = r & (b40 = man & b41 = target):flr;
		next(dr) = u & (b40 = man & b30 = target):flr;
		next(dr) = d & (b40 = man & b50 = target):flr;

	--target to target
		next(dr) = r & (b40 = mantrg & b41 = target): target;
		next(dr) = u & (b40 = mantrg & b30 = target): target;
		next(dr) = d & (b40 = mantrg & b50 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b40 = man & b41 = bx) & (b42 =flr) & (0+2 < n):flr;
		next(dr) = u & (b40 = man & b30 = bx) & (b20 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b40 = man & b50 = bx) & (b60 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b40 = man & b41 = bx) & (b42 = target) & (0+2 < n):flr;
		next(dr) = u & (b40 = man & b30 = bx) & (b20 = target) & (4-2 > 0):flr;
		next(dr) = d & (b40 = man & b50 = bx) & (b60 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b40 = man & b41 = bxtrg) & (b42 =flr) & (0+2 < n):flr;
		next(dr) = u & (b40 = man & b30 = bxtrg) & (b20 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b40 = man & b50 = bxtrg) & (b60 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b40 = man & b41 = bxtrg) & (b42 = target) & (0+2 < n):flr;
		next(dr) = u & (b40 = man & b30 = bxtrg) & (b20 = target) & (4-2 > 0):flr;
		next(dr) = d & (b40 = man & b50 = bxtrg) & (b60 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b40 = mantrg & b41 = bx) & (b42 =flr) & (0+2 < n): target;
		next(dr) = u & (b40 = mantrg & b30 = bx) & (b20 =flr) & (4-2 > 0): target;
		next(dr) = d & (b40 = mantrg & b50 = bx) & (b60 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b40 = mantrg & b41 = bx) & (b42 = target) & (0+2 < n): target;
		next(dr) = u & (b40 = mantrg & b30 = bx) & (b20 = target) & (4-2 > 0): target;
		next(dr) = d & (b40 = mantrg & b50 = bx) & (b60 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b40 = mantrg & b41 = bxtrg) & (b42 =flr) & (0+2 < n): target;
		next(dr) = u & (b40 = mantrg & b30 = bxtrg) & (b20 =flr) & (4-2 > 0): target;
		next(dr) = d & (b40 = mantrg & b50 = bxtrg) & (b60 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b40 = mantrg & b41 = bxtrg) & (b42 = target) & (0+2 < n): target;
		next(dr) = u & (b40 = mantrg & b30 = bxtrg) & (b20 = target) & (4-2 > 0): target;
		next(dr) = d & (b40 = mantrg & b50 = bxtrg) & (b60 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = l & (b40 = flr & (b41 = man | b41 = mantrg)): man;
        next(dr) = d & (b40 = flr & (b30 = man | b30 = mantrg)): man;
        next(dr) = u & (b40 = flr & (b50 = man | b50 = mantrg)): man;

    --box to floor
        next(dr) = l & (b40 = flr & (b41 = bx | b41 = bxtrg)) & (b42 = man | b42 = mantrg): bx;
        next(dr) = d & (b40 = flr & (b30 = bx | b30 = bxtrg)) & (b20 = man | b20 = mantrg): bx;
        next(dr) = u & (b40 = flr & (b50 = bx | b50 = bxtrg)) & (b60 = man | b60 = mantrg): bx;

    --man to target
        next(dr) = l & (b40 = target & (b41 = man | b41 = mantrg)): mantrg;
        next(dr) = d & (b40 = target & (b30 = man | b30 = mantrg)): mantrg;
        next(dr) = u & (b40 = target & (b50 = man | b50 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b40 = target & (b41 = bx | b41 = bxtrg)) & (b42 = man | b42 = mantrg): bxtrg;
        next(dr) = d & (b40 = target & (b30 = bx | b30 = bxtrg)) & (b20 = man | b20 = mantrg): bxtrg;
        next(dr) = u & (b40 = target & (b50 = bx | b50 = bxtrg)) & (b60 = man | b60 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b40 = bx & (b30 = man | b30 = mantrg)) & (b50 = flr | b50 = target): man;
        next(dr) = u & (b40 = bx & (b50 = man | b50 = mantrg)) & (b30 = flr | b30 = target): man;

    --man to box on target
        next(dr) = d & (b40 = bxtrg & (b30 = man | b30 = mantrg)) & (b50 = flr | b50 = target): mantrg;
        next(dr) = u & (b40 = bxtrg & (b50 = man | b50 = mantrg)) & (b30 = flr | b30 = target): mantrg;

    TRUE: b40;
esac;
next(b41) := case
	--floor to floor
		next(dr) = l & (b41 = man & b40 =flr):flr;
		next(dr) = r & (b41 = man & b42 =flr):flr;
		next(dr) = u & (b41 = man & b31 =flr):flr;
		next(dr) = d & (b41 = man & b51 =flr):flr;


	--target to floor
		next(dr) = l & (b41 = mantrg & b40 =flr): target;
		next(dr) = r & (b41 = mantrg & b42 =flr): target;
		next(dr) = u & (b41 = mantrg & b31 =flr): target;
		next(dr) = d & (b41 = mantrg & b51 =flr): target;

	--floor to target
		next(dr) = l & (b41 = man & b40 = target):flr;
		next(dr) = r & (b41 = man & b42 = target):flr;
		next(dr) = u & (b41 = man & b31 = target):flr;
		next(dr) = d & (b41 = man & b51 = target):flr;

	--target to target
		next(dr) = l & (b41 = mantrg & b40 = target): target;
		next(dr) = r & (b41 = mantrg & b42 = target): target;
		next(dr) = u & (b41 = mantrg & b31 = target): target;
		next(dr) = d & (b41 = mantrg & b51 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b41 = man & b42 = bx) & (b43 =flr) & (1+2 < n):flr;
		next(dr) = u & (b41 = man & b31 = bx) & (b21 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b41 = man & b51 = bx) & (b61 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = r & (b41 = man & b42 = bx) & (b43 = target) & (1+2 < n):flr;
		next(dr) = u & (b41 = man & b31 = bx) & (b21 = target) & (4-2 > 0):flr;
		next(dr) = d & (b41 = man & b51 = bx) & (b61 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = r & (b41 = man & b42 = bxtrg) & (b43 =flr) & (1+2 < n):flr;
		next(dr) = u & (b41 = man & b31 = bxtrg) & (b21 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b41 = man & b51 = bxtrg) & (b61 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = r & (b41 = man & b42 = bxtrg) & (b43 = target) & (1+2 < n):flr;
		next(dr) = u & (b41 = man & b31 = bxtrg) & (b21 = target) & (4-2 > 0):flr;
		next(dr) = d & (b41 = man & b51 = bxtrg) & (b61 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = r & (b41 = mantrg & b42 = bx) & (b43 =flr) & (1+2 < n): target;
		next(dr) = u & (b41 = mantrg & b31 = bx) & (b21 =flr) & (4-2 > 0): target;
		next(dr) = d & (b41 = mantrg & b51 = bx) & (b61 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = r & (b41 = mantrg & b42 = bx) & (b43 = target) & (1+2 < n): target;
		next(dr) = u & (b41 = mantrg & b31 = bx) & (b21 = target) & (4-2 > 0): target;
		next(dr) = d & (b41 = mantrg & b51 = bx) & (b61 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = r & (b41 = mantrg & b42 = bxtrg) & (b43 =flr) & (1+2 < n): target;
		next(dr) = u & (b41 = mantrg & b31 = bxtrg) & (b21 =flr) & (4-2 > 0): target;
		next(dr) = d & (b41 = mantrg & b51 = bxtrg) & (b61 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = r & (b41 = mantrg & b42 = bxtrg) & (b43 = target) & (1+2 < n): target;
		next(dr) = u & (b41 = mantrg & b31 = bxtrg) & (b21 = target) & (4-2 > 0): target;
		next(dr) = d & (b41 = mantrg & b51 = bxtrg) & (b61 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b41 = flr & (b40 = man | b40 = mantrg)) : man;
        next(dr) = l & (b41 = flr & (b42 = man | b42 = mantrg)): man;
        next(dr) = d & (b41 = flr & (b31 = man | b31 = mantrg)): man;
        next(dr) = u & (b41 = flr & (b51 = man | b51 = mantrg)): man;

    --box to floor
        next(dr) = l & (b41 = flr & (b42 = bx | b42 = bxtrg)) & (b43 = man | b43 = mantrg): bx;
        next(dr) = d & (b41 = flr & (b31 = bx | b31 = bxtrg)) & (b21 = man | b21 = mantrg): bx;
        next(dr) = u & (b41 = flr & (b51 = bx | b51 = bxtrg)) & (b61 = man | b61 = mantrg): bx;

    --man to target
        next(dr) = r & (b41 = target & (b40 = man | b40 = mantrg)): mantrg;
        next(dr) = l & (b41 = target & (b42 = man | b42 = mantrg)): mantrg;
        next(dr) = d & (b41 = target & (b31 = man | b31 = mantrg)): mantrg;
        next(dr) = u & (b41 = target & (b51 = man | b51 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b41 = target & (b42 = bx | b42 = bxtrg)) & (b43 = man | b43 = mantrg): bxtrg;
        next(dr) = d & (b41 = target & (b31 = bx | b31 = bxtrg)) & (b21 = man | b21 = mantrg): bxtrg;
        next(dr) = u & (b41 = target & (b51 = bx | b51 = bxtrg)) & (b61 = man | b61 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b41 = bx & (b40 = man | b40 = mantrg)) & (b42 = flr | b42 = target): man;
        next(dr) = l & (b41 = bx & (b42 = man | b42 = mantrg)) & (b40 = flr | b40 = target): man;
        next(dr) = d & (b41 = bx & (b31 = man | b31 = mantrg)) & (b51 = flr | b51 = target): man;
        next(dr) = u & (b41 = bx & (b51 = man | b51 = mantrg)) & (b31 = flr | b31 = target): man;

    --man to box on target
        next(dr) = r & (b41 = bxtrg & (b40 = man | b40 = mantrg)) & (b42 = flr | b42 = target): mantrg;
        next(dr) = l & (b41 = bxtrg & (b42 = man | b42 = mantrg)) & (b40 = flr | b40 = target): mantrg;
        next(dr) = d & (b41 = bxtrg & (b31 = man | b31 = mantrg)) & (b51 = flr | b51 = target): mantrg;
        next(dr) = u & (b41 = bxtrg & (b51 = man | b51 = mantrg)) & (b31 = flr | b31 = target): mantrg;

    TRUE: b41;
esac;
next(b42) := case
	--floor to floor
		next(dr) = l & (b42 = man & b41 =flr):flr;
		next(dr) = r & (b42 = man & b43 =flr):flr;
		next(dr) = u & (b42 = man & b32 =flr):flr;
		next(dr) = d & (b42 = man & b52 =flr):flr;


	--target to floor
		next(dr) = l & (b42 = mantrg & b41 =flr): target;
		next(dr) = r & (b42 = mantrg & b43 =flr): target;
		next(dr) = u & (b42 = mantrg & b32 =flr): target;
		next(dr) = d & (b42 = mantrg & b52 =flr): target;

	--floor to target
		next(dr) = l & (b42 = man & b41 = target):flr;
		next(dr) = r & (b42 = man & b43 = target):flr;
		next(dr) = u & (b42 = man & b32 = target):flr;
		next(dr) = d & (b42 = man & b52 = target):flr;

	--target to target
		next(dr) = l & (b42 = mantrg & b41 = target): target;
		next(dr) = r & (b42 = mantrg & b43 = target): target;
		next(dr) = u & (b42 = mantrg & b32 = target): target;
		next(dr) = d & (b42 = mantrg & b52 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b42 = man & b41 = bx) & (b40 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b42 = man & b43 = bx) & (b44 =flr) & (2+2 < n):flr;
		next(dr) = u & (b42 = man & b32 = bx) & (b22 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b42 = man & b52 = bx) & (b62 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b42 = man & b41 = bx) & (b40 = target) & (2-2 > 0):flr;
		next(dr) = r & (b42 = man & b43 = bx) & (b44 = target) & (2+2 < n):flr;
		next(dr) = u & (b42 = man & b32 = bx) & (b22 = target) & (4-2 > 0):flr;
		next(dr) = d & (b42 = man & b52 = bx) & (b62 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b42 = man & b41 = bxtrg) & (b40 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b42 = man & b43 = bxtrg) & (b44 =flr) & (2+2 < n):flr;
		next(dr) = u & (b42 = man & b32 = bxtrg) & (b22 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b42 = man & b52 = bxtrg) & (b62 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b42 = man & b41 = bxtrg) & (b40 = target) & (2-2 > 0):flr;
		next(dr) = r & (b42 = man & b43 = bxtrg) & (b44 = target) & (2+2 < n):flr;
		next(dr) = u & (b42 = man & b32 = bxtrg) & (b22 = target) & (4-2 > 0):flr;
		next(dr) = d & (b42 = man & b52 = bxtrg) & (b62 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b42 = mantrg & b41 = bx) & (b40 =flr) & (2-2 > 0): target;
		next(dr) = r & (b42 = mantrg & b43 = bx) & (b44 =flr) & (2+2 < n): target;
		next(dr) = u & (b42 = mantrg & b32 = bx) & (b22 =flr) & (4-2 > 0): target;
		next(dr) = d & (b42 = mantrg & b52 = bx) & (b62 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b42 = mantrg & b41 = bx) & (b40 = target) & (2-2 > 0): target;
		next(dr) = r & (b42 = mantrg & b43 = bx) & (b44 = target) & (2+2 < n): target;
		next(dr) = u & (b42 = mantrg & b32 = bx) & (b22 = target) & (4-2 > 0): target;
		next(dr) = d & (b42 = mantrg & b52 = bx) & (b62 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b42 = mantrg & b41 = bxtrg) & (b40 =flr) & (2-2 > 0): target;
		next(dr) = r & (b42 = mantrg & b43 = bxtrg) & (b44 =flr) & (2+2 < n): target;
		next(dr) = u & (b42 = mantrg & b32 = bxtrg) & (b22 =flr) & (4-2 > 0): target;
		next(dr) = d & (b42 = mantrg & b52 = bxtrg) & (b62 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b42 = mantrg & b41 = bxtrg) & (b40 = target) & (2-2 > 0): target;
		next(dr) = r & (b42 = mantrg & b43 = bxtrg) & (b44 = target) & (2+2 < n): target;
		next(dr) = u & (b42 = mantrg & b32 = bxtrg) & (b22 = target) & (4-2 > 0): target;
		next(dr) = d & (b42 = mantrg & b52 = bxtrg) & (b62 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b42 = flr & (b41 = man | b41 = mantrg)) : man;
        next(dr) = l & (b42 = flr & (b43 = man | b43 = mantrg)): man;
        next(dr) = d & (b42 = flr & (b32 = man | b32 = mantrg)): man;
        next(dr) = u & (b42 = flr & (b52 = man | b52 = mantrg)): man;

    --box to floor
        next(dr) = r & (b42 = flr & (b41 = bx | b41 = bxtrg)) & (b40 = man | b40 = mantrg): bx;
        next(dr) = l & (b42 = flr & (b43 = bx | b43 = bxtrg)) & (b44 = man | b44 = mantrg): bx;
        next(dr) = d & (b42 = flr & (b32 = bx | b32 = bxtrg)) & (b22 = man | b22 = mantrg): bx;
        next(dr) = u & (b42 = flr & (b52 = bx | b52 = bxtrg)) & (b62 = man | b62 = mantrg): bx;

    --man to target
        next(dr) = r & (b42 = target & (b41 = man | b41 = mantrg)): mantrg;
        next(dr) = l & (b42 = target & (b43 = man | b43 = mantrg)): mantrg;
        next(dr) = d & (b42 = target & (b32 = man | b32 = mantrg)): mantrg;
        next(dr) = u & (b42 = target & (b52 = man | b52 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b42 = target & (b41 = bx | b41 = bxtrg)) & (b40 = man | b40 = mantrg): bxtrg;
        next(dr) = l & (b42 = target & (b43 = bx | b43 = bxtrg)) & (b44 = man | b44 = mantrg): bxtrg;
        next(dr) = d & (b42 = target & (b32 = bx | b32 = bxtrg)) & (b22 = man | b22 = mantrg): bxtrg;
        next(dr) = u & (b42 = target & (b52 = bx | b52 = bxtrg)) & (b62 = man | b62 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b42 = bx & (b41 = man | b41 = mantrg)) & (b43 = flr | b43 = target): man;
        next(dr) = l & (b42 = bx & (b43 = man | b43 = mantrg)) & (b41 = flr | b41 = target): man;
        next(dr) = d & (b42 = bx & (b32 = man | b32 = mantrg)) & (b52 = flr | b52 = target): man;
        next(dr) = u & (b42 = bx & (b52 = man | b52 = mantrg)) & (b32 = flr | b32 = target): man;

    --man to box on target
        next(dr) = r & (b42 = bxtrg & (b41 = man | b41 = mantrg)) & (b43 = flr | b43 = target): mantrg;
        next(dr) = l & (b42 = bxtrg & (b43 = man | b43 = mantrg)) & (b41 = flr | b41 = target): mantrg;
        next(dr) = d & (b42 = bxtrg & (b32 = man | b32 = mantrg)) & (b52 = flr | b52 = target): mantrg;
        next(dr) = u & (b42 = bxtrg & (b52 = man | b52 = mantrg)) & (b32 = flr | b32 = target): mantrg;

    TRUE: b42;
esac;
next(b43) := case
	--floor to floor
		next(dr) = l & (b43 = man & b42 =flr):flr;
		next(dr) = r & (b43 = man & b44 =flr):flr;
		next(dr) = u & (b43 = man & b33 =flr):flr;
		next(dr) = d & (b43 = man & b53 =flr):flr;


	--target to floor
		next(dr) = l & (b43 = mantrg & b42 =flr): target;
		next(dr) = r & (b43 = mantrg & b44 =flr): target;
		next(dr) = u & (b43 = mantrg & b33 =flr): target;
		next(dr) = d & (b43 = mantrg & b53 =flr): target;

	--floor to target
		next(dr) = l & (b43 = man & b42 = target):flr;
		next(dr) = r & (b43 = man & b44 = target):flr;
		next(dr) = u & (b43 = man & b33 = target):flr;
		next(dr) = d & (b43 = man & b53 = target):flr;

	--target to target
		next(dr) = l & (b43 = mantrg & b42 = target): target;
		next(dr) = r & (b43 = mantrg & b44 = target): target;
		next(dr) = u & (b43 = mantrg & b33 = target): target;
		next(dr) = d & (b43 = mantrg & b53 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b43 = man & b42 = bx) & (b41 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b43 = man & b44 = bx) & (b45 =flr) & (3+2 < n):flr;
		next(dr) = u & (b43 = man & b33 = bx) & (b23 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b43 = man & b53 = bx) & (b63 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b43 = man & b42 = bx) & (b41 = target) & (3-2 > 0):flr;
		next(dr) = r & (b43 = man & b44 = bx) & (b45 = target) & (3+2 < n):flr;
		next(dr) = u & (b43 = man & b33 = bx) & (b23 = target) & (4-2 > 0):flr;
		next(dr) = d & (b43 = man & b53 = bx) & (b63 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b43 = man & b42 = bxtrg) & (b41 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b43 = man & b44 = bxtrg) & (b45 =flr) & (3+2 < n):flr;
		next(dr) = u & (b43 = man & b33 = bxtrg) & (b23 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b43 = man & b53 = bxtrg) & (b63 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b43 = man & b42 = bxtrg) & (b41 = target) & (3-2 > 0):flr;
		next(dr) = r & (b43 = man & b44 = bxtrg) & (b45 = target) & (3+2 < n):flr;
		next(dr) = u & (b43 = man & b33 = bxtrg) & (b23 = target) & (4-2 > 0):flr;
		next(dr) = d & (b43 = man & b53 = bxtrg) & (b63 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b43 = mantrg & b42 = bx) & (b41 =flr) & (3-2 > 0): target;
		next(dr) = r & (b43 = mantrg & b44 = bx) & (b45 =flr) & (3+2 < n): target;
		next(dr) = u & (b43 = mantrg & b33 = bx) & (b23 =flr) & (4-2 > 0): target;
		next(dr) = d & (b43 = mantrg & b53 = bx) & (b63 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b43 = mantrg & b42 = bx) & (b41 = target) & (3-2 > 0): target;
		next(dr) = r & (b43 = mantrg & b44 = bx) & (b45 = target) & (3+2 < n): target;
		next(dr) = u & (b43 = mantrg & b33 = bx) & (b23 = target) & (4-2 > 0): target;
		next(dr) = d & (b43 = mantrg & b53 = bx) & (b63 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b43 = mantrg & b42 = bxtrg) & (b41 =flr) & (3-2 > 0): target;
		next(dr) = r & (b43 = mantrg & b44 = bxtrg) & (b45 =flr) & (3+2 < n): target;
		next(dr) = u & (b43 = mantrg & b33 = bxtrg) & (b23 =flr) & (4-2 > 0): target;
		next(dr) = d & (b43 = mantrg & b53 = bxtrg) & (b63 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b43 = mantrg & b42 = bxtrg) & (b41 = target) & (3-2 > 0): target;
		next(dr) = r & (b43 = mantrg & b44 = bxtrg) & (b45 = target) & (3+2 < n): target;
		next(dr) = u & (b43 = mantrg & b33 = bxtrg) & (b23 = target) & (4-2 > 0): target;
		next(dr) = d & (b43 = mantrg & b53 = bxtrg) & (b63 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b43 = flr & (b42 = man | b42 = mantrg)) : man;
        next(dr) = l & (b43 = flr & (b44 = man | b44 = mantrg)): man;
        next(dr) = d & (b43 = flr & (b33 = man | b33 = mantrg)): man;
        next(dr) = u & (b43 = flr & (b53 = man | b53 = mantrg)): man;

    --box to floor
        next(dr) = r & (b43 = flr & (b42 = bx | b42 = bxtrg)) & (b41 = man | b41 = mantrg): bx;
        next(dr) = l & (b43 = flr & (b44 = bx | b44 = bxtrg)) & (b45 = man | b45 = mantrg): bx;
        next(dr) = d & (b43 = flr & (b33 = bx | b33 = bxtrg)) & (b23 = man | b23 = mantrg): bx;
        next(dr) = u & (b43 = flr & (b53 = bx | b53 = bxtrg)) & (b63 = man | b63 = mantrg): bx;

    --man to target
        next(dr) = r & (b43 = target & (b42 = man | b42 = mantrg)): mantrg;
        next(dr) = l & (b43 = target & (b44 = man | b44 = mantrg)): mantrg;
        next(dr) = d & (b43 = target & (b33 = man | b33 = mantrg)): mantrg;
        next(dr) = u & (b43 = target & (b53 = man | b53 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b43 = target & (b42 = bx | b42 = bxtrg)) & (b41 = man | b41 = mantrg): bxtrg;
        next(dr) = l & (b43 = target & (b44 = bx | b44 = bxtrg)) & (b45 = man | b45 = mantrg): bxtrg;
        next(dr) = d & (b43 = target & (b33 = bx | b33 = bxtrg)) & (b23 = man | b23 = mantrg): bxtrg;
        next(dr) = u & (b43 = target & (b53 = bx | b53 = bxtrg)) & (b63 = man | b63 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b43 = bx & (b42 = man | b42 = mantrg)) & (b44 = flr | b44 = target): man;
        next(dr) = l & (b43 = bx & (b44 = man | b44 = mantrg)) & (b42 = flr | b42 = target): man;
        next(dr) = d & (b43 = bx & (b33 = man | b33 = mantrg)) & (b53 = flr | b53 = target): man;
        next(dr) = u & (b43 = bx & (b53 = man | b53 = mantrg)) & (b33 = flr | b33 = target): man;

    --man to box on target
        next(dr) = r & (b43 = bxtrg & (b42 = man | b42 = mantrg)) & (b44 = flr | b44 = target): mantrg;
        next(dr) = l & (b43 = bxtrg & (b44 = man | b44 = mantrg)) & (b42 = flr | b42 = target): mantrg;
        next(dr) = d & (b43 = bxtrg & (b33 = man | b33 = mantrg)) & (b53 = flr | b53 = target): mantrg;
        next(dr) = u & (b43 = bxtrg & (b53 = man | b53 = mantrg)) & (b33 = flr | b33 = target): mantrg;

    TRUE: b43;
esac;
next(b44) := case
	--floor to floor
		next(dr) = l & (b44 = man & b43 =flr):flr;
		next(dr) = r & (b44 = man & b45 =flr):flr;
		next(dr) = u & (b44 = man & b34 =flr):flr;
		next(dr) = d & (b44 = man & b54 =flr):flr;


	--target to floor
		next(dr) = l & (b44 = mantrg & b43 =flr): target;
		next(dr) = r & (b44 = mantrg & b45 =flr): target;
		next(dr) = u & (b44 = mantrg & b34 =flr): target;
		next(dr) = d & (b44 = mantrg & b54 =flr): target;

	--floor to target
		next(dr) = l & (b44 = man & b43 = target):flr;
		next(dr) = r & (b44 = man & b45 = target):flr;
		next(dr) = u & (b44 = man & b34 = target):flr;
		next(dr) = d & (b44 = man & b54 = target):flr;

	--target to target
		next(dr) = l & (b44 = mantrg & b43 = target): target;
		next(dr) = r & (b44 = mantrg & b45 = target): target;
		next(dr) = u & (b44 = mantrg & b34 = target): target;
		next(dr) = d & (b44 = mantrg & b54 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b44 = man & b43 = bx) & (b42 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b44 = man & b45 = bx) & (b46 =flr) & (4+2 < n):flr;
		next(dr) = u & (b44 = man & b34 = bx) & (b24 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b44 = man & b54 = bx) & (b64 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b44 = man & b43 = bx) & (b42 = target) & (4-2 > 0):flr;
		next(dr) = r & (b44 = man & b45 = bx) & (b46 = target) & (4+2 < n):flr;
		next(dr) = u & (b44 = man & b34 = bx) & (b24 = target) & (4-2 > 0):flr;
		next(dr) = d & (b44 = man & b54 = bx) & (b64 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b44 = man & b43 = bxtrg) & (b42 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b44 = man & b45 = bxtrg) & (b46 =flr) & (4+2 < n):flr;
		next(dr) = u & (b44 = man & b34 = bxtrg) & (b24 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b44 = man & b54 = bxtrg) & (b64 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b44 = man & b43 = bxtrg) & (b42 = target) & (4-2 > 0):flr;
		next(dr) = r & (b44 = man & b45 = bxtrg) & (b46 = target) & (4+2 < n):flr;
		next(dr) = u & (b44 = man & b34 = bxtrg) & (b24 = target) & (4-2 > 0):flr;
		next(dr) = d & (b44 = man & b54 = bxtrg) & (b64 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b44 = mantrg & b43 = bx) & (b42 =flr) & (4-2 > 0): target;
		next(dr) = r & (b44 = mantrg & b45 = bx) & (b46 =flr) & (4+2 < n): target;
		next(dr) = u & (b44 = mantrg & b34 = bx) & (b24 =flr) & (4-2 > 0): target;
		next(dr) = d & (b44 = mantrg & b54 = bx) & (b64 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b44 = mantrg & b43 = bx) & (b42 = target) & (4-2 > 0): target;
		next(dr) = r & (b44 = mantrg & b45 = bx) & (b46 = target) & (4+2 < n): target;
		next(dr) = u & (b44 = mantrg & b34 = bx) & (b24 = target) & (4-2 > 0): target;
		next(dr) = d & (b44 = mantrg & b54 = bx) & (b64 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b44 = mantrg & b43 = bxtrg) & (b42 =flr) & (4-2 > 0): target;
		next(dr) = r & (b44 = mantrg & b45 = bxtrg) & (b46 =flr) & (4+2 < n): target;
		next(dr) = u & (b44 = mantrg & b34 = bxtrg) & (b24 =flr) & (4-2 > 0): target;
		next(dr) = d & (b44 = mantrg & b54 = bxtrg) & (b64 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b44 = mantrg & b43 = bxtrg) & (b42 = target) & (4-2 > 0): target;
		next(dr) = r & (b44 = mantrg & b45 = bxtrg) & (b46 = target) & (4+2 < n): target;
		next(dr) = u & (b44 = mantrg & b34 = bxtrg) & (b24 = target) & (4-2 > 0): target;
		next(dr) = d & (b44 = mantrg & b54 = bxtrg) & (b64 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b44 = flr & (b43 = man | b43 = mantrg)) : man;
        next(dr) = l & (b44 = flr & (b45 = man | b45 = mantrg)): man;
        next(dr) = d & (b44 = flr & (b34 = man | b34 = mantrg)): man;
        next(dr) = u & (b44 = flr & (b54 = man | b54 = mantrg)): man;

    --box to floor
        next(dr) = r & (b44 = flr & (b43 = bx | b43 = bxtrg)) & (b42 = man | b42 = mantrg): bx;
        next(dr) = l & (b44 = flr & (b45 = bx | b45 = bxtrg)) & (b46 = man | b46 = mantrg): bx;
        next(dr) = d & (b44 = flr & (b34 = bx | b34 = bxtrg)) & (b24 = man | b24 = mantrg): bx;
        next(dr) = u & (b44 = flr & (b54 = bx | b54 = bxtrg)) & (b64 = man | b64 = mantrg): bx;

    --man to target
        next(dr) = r & (b44 = target & (b43 = man | b43 = mantrg)): mantrg;
        next(dr) = l & (b44 = target & (b45 = man | b45 = mantrg)): mantrg;
        next(dr) = d & (b44 = target & (b34 = man | b34 = mantrg)): mantrg;
        next(dr) = u & (b44 = target & (b54 = man | b54 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b44 = target & (b43 = bx | b43 = bxtrg)) & (b42 = man | b42 = mantrg): bxtrg;
        next(dr) = l & (b44 = target & (b45 = bx | b45 = bxtrg)) & (b46 = man | b46 = mantrg): bxtrg;
        next(dr) = d & (b44 = target & (b34 = bx | b34 = bxtrg)) & (b24 = man | b24 = mantrg): bxtrg;
        next(dr) = u & (b44 = target & (b54 = bx | b54 = bxtrg)) & (b64 = man | b64 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b44 = bx & (b43 = man | b43 = mantrg)) & (b45 = flr | b45 = target): man;
        next(dr) = l & (b44 = bx & (b45 = man | b45 = mantrg)) & (b43 = flr | b43 = target): man;
        next(dr) = d & (b44 = bx & (b34 = man | b34 = mantrg)) & (b54 = flr | b54 = target): man;
        next(dr) = u & (b44 = bx & (b54 = man | b54 = mantrg)) & (b34 = flr | b34 = target): man;

    --man to box on target
        next(dr) = r & (b44 = bxtrg & (b43 = man | b43 = mantrg)) & (b45 = flr | b45 = target): mantrg;
        next(dr) = l & (b44 = bxtrg & (b45 = man | b45 = mantrg)) & (b43 = flr | b43 = target): mantrg;
        next(dr) = d & (b44 = bxtrg & (b34 = man | b34 = mantrg)) & (b54 = flr | b54 = target): mantrg;
        next(dr) = u & (b44 = bxtrg & (b54 = man | b54 = mantrg)) & (b34 = flr | b34 = target): mantrg;

    TRUE: b44;
esac;
next(b45) := case
	--floor to floor
		next(dr) = l & (b45 = man & b44 =flr):flr;
		next(dr) = r & (b45 = man & b46 =flr):flr;
		next(dr) = u & (b45 = man & b35 =flr):flr;
		next(dr) = d & (b45 = man & b55 =flr):flr;


	--target to floor
		next(dr) = l & (b45 = mantrg & b44 =flr): target;
		next(dr) = r & (b45 = mantrg & b46 =flr): target;
		next(dr) = u & (b45 = mantrg & b35 =flr): target;
		next(dr) = d & (b45 = mantrg & b55 =flr): target;

	--floor to target
		next(dr) = l & (b45 = man & b44 = target):flr;
		next(dr) = r & (b45 = man & b46 = target):flr;
		next(dr) = u & (b45 = man & b35 = target):flr;
		next(dr) = d & (b45 = man & b55 = target):flr;

	--target to target
		next(dr) = l & (b45 = mantrg & b44 = target): target;
		next(dr) = r & (b45 = mantrg & b46 = target): target;
		next(dr) = u & (b45 = mantrg & b35 = target): target;
		next(dr) = d & (b45 = mantrg & b55 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b45 = man & b44 = bx) & (b43 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b45 = man & b35 = bx) & (b25 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b45 = man & b55 = bx) & (b65 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b45 = man & b44 = bx) & (b43 = target) & (5-2 > 0):flr;
		next(dr) = u & (b45 = man & b35 = bx) & (b25 = target) & (4-2 > 0):flr;
		next(dr) = d & (b45 = man & b55 = bx) & (b65 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b45 = man & b44 = bxtrg) & (b43 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b45 = man & b35 = bxtrg) & (b25 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b45 = man & b55 = bxtrg) & (b65 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b45 = man & b44 = bxtrg) & (b43 = target) & (5-2 > 0):flr;
		next(dr) = u & (b45 = man & b35 = bxtrg) & (b25 = target) & (4-2 > 0):flr;
		next(dr) = d & (b45 = man & b55 = bxtrg) & (b65 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b45 = mantrg & b44 = bx) & (b43 =flr) & (5-2 > 0): target;
		next(dr) = u & (b45 = mantrg & b35 = bx) & (b25 =flr) & (4-2 > 0): target;
		next(dr) = d & (b45 = mantrg & b55 = bx) & (b65 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b45 = mantrg & b44 = bx) & (b43 = target) & (5-2 > 0): target;
		next(dr) = u & (b45 = mantrg & b35 = bx) & (b25 = target) & (4-2 > 0): target;
		next(dr) = d & (b45 = mantrg & b55 = bx) & (b65 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b45 = mantrg & b44 = bxtrg) & (b43 =flr) & (5-2 > 0): target;
		next(dr) = u & (b45 = mantrg & b35 = bxtrg) & (b25 =flr) & (4-2 > 0): target;
		next(dr) = d & (b45 = mantrg & b55 = bxtrg) & (b65 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b45 = mantrg & b44 = bxtrg) & (b43 = target) & (5-2 > 0): target;
		next(dr) = u & (b45 = mantrg & b35 = bxtrg) & (b25 = target) & (4-2 > 0): target;
		next(dr) = d & (b45 = mantrg & b55 = bxtrg) & (b65 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b45 = flr & (b44 = man | b44 = mantrg)) : man;
        next(dr) = l & (b45 = flr & (b46 = man | b46 = mantrg)): man;
        next(dr) = d & (b45 = flr & (b35 = man | b35 = mantrg)): man;
        next(dr) = u & (b45 = flr & (b55 = man | b55 = mantrg)): man;

    --box to floor
        next(dr) = r & (b45 = flr & (b44 = bx | b44 = bxtrg)) & (b43 = man | b43 = mantrg): bx;
        next(dr) = d & (b45 = flr & (b35 = bx | b35 = bxtrg)) & (b25 = man | b25 = mantrg): bx;
        next(dr) = u & (b45 = flr & (b55 = bx | b55 = bxtrg)) & (b65 = man | b65 = mantrg): bx;

    --man to target
        next(dr) = r & (b45 = target & (b44 = man | b44 = mantrg)): mantrg;
        next(dr) = l & (b45 = target & (b46 = man | b46 = mantrg)): mantrg;
        next(dr) = d & (b45 = target & (b35 = man | b35 = mantrg)): mantrg;
        next(dr) = u & (b45 = target & (b55 = man | b55 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b45 = target & (b44 = bx | b44 = bxtrg)) & (b43 = man | b43 = mantrg): bxtrg;
        next(dr) = d & (b45 = target & (b35 = bx | b35 = bxtrg)) & (b25 = man | b25 = mantrg): bxtrg;
        next(dr) = u & (b45 = target & (b55 = bx | b55 = bxtrg)) & (b65 = man | b65 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b45 = bx & (b44 = man | b44 = mantrg)) & (b46 = flr | b46 = target): man;
        next(dr) = l & (b45 = bx & (b46 = man | b46 = mantrg)) & (b44 = flr | b44 = target): man;
        next(dr) = d & (b45 = bx & (b35 = man | b35 = mantrg)) & (b55 = flr | b55 = target): man;
        next(dr) = u & (b45 = bx & (b55 = man | b55 = mantrg)) & (b35 = flr | b35 = target): man;

    --man to box on target
        next(dr) = r & (b45 = bxtrg & (b44 = man | b44 = mantrg)) & (b46 = flr | b46 = target): mantrg;
        next(dr) = l & (b45 = bxtrg & (b46 = man | b46 = mantrg)) & (b44 = flr | b44 = target): mantrg;
        next(dr) = d & (b45 = bxtrg & (b35 = man | b35 = mantrg)) & (b55 = flr | b55 = target): mantrg;
        next(dr) = u & (b45 = bxtrg & (b55 = man | b55 = mantrg)) & (b35 = flr | b35 = target): mantrg;

    TRUE: b45;
esac;
next(b46) := case
	--floor to floor
		next(dr) = l & (b46 = man & b45 =flr):flr;
		next(dr) = u & (b46 = man & b36 =flr):flr;
		next(dr) = d & (b46 = man & b56 =flr):flr;


	--target to floor
		next(dr) = l & (b46 = mantrg & b45 =flr): target;
		next(dr) = u & (b46 = mantrg & b36 =flr): target;
		next(dr) = d & (b46 = mantrg & b56 =flr): target;

	--floor to target
		next(dr) = l & (b46 = man & b45 = target):flr;
		next(dr) = u & (b46 = man & b36 = target):flr;
		next(dr) = d & (b46 = man & b56 = target):flr;

	--target to target
		next(dr) = l & (b46 = mantrg & b45 = target): target;
		next(dr) = u & (b46 = mantrg & b36 = target): target;
		next(dr) = d & (b46 = mantrg & b56 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b46 = man & b45 = bx) & (b44 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b46 = man & b36 = bx) & (b26 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b46 = man & b56 = bx) & (b66 =flr) & (4+2 < m):flr;

	--floor to box on floor, target
		next(dr) = l & (b46 = man & b45 = bx) & (b44 = target) & (6-2 > 0):flr;
		next(dr) = u & (b46 = man & b36 = bx) & (b26 = target) & (4-2 > 0):flr;
		next(dr) = d & (b46 = man & b56 = bx) & (b66 = target) & (4+2 < m):flr;

	--floor to box on target, floor
		next(dr) = l & (b46 = man & b45 = bxtrg) & (b44 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b46 = man & b36 = bxtrg) & (b26 =flr) & (4-2 > 0):flr;
		next(dr) = d & (b46 = man & b56 = bxtrg) & (b66 =flr) & (4-2 < m):flr;

	--floor to box on target, target
		next(dr) = l & (b46 = man & b45 = bxtrg) & (b44 = target) & (6-2 > 0):flr;
		next(dr) = u & (b46 = man & b36 = bxtrg) & (b26 = target) & (4-2 > 0):flr;
		next(dr) = d & (b46 = man & b56 = bxtrg) & (b66 = target) & (4+2 < m):flr;

	--target to box on floor, floor
		next(dr) = l & (b46 = mantrg & b45 = bx) & (b44 =flr) & (6-2 > 0): target;
		next(dr) = u & (b46 = mantrg & b36 = bx) & (b26 =flr) & (4-2 > 0): target;
		next(dr) = d & (b46 = mantrg & b56 = bx) & (b66 =flr) & (4+2 < m): target;

	--target to box on floor, target
		next(dr) = l & (b46 = mantrg & b45 = bx) & (b44 = target) & (6-2 > 0): target;
		next(dr) = u & (b46 = mantrg & b36 = bx) & (b26 = target) & (4-2 > 0): target;
		next(dr) = d & (b46 = mantrg & b56 = bx) & (b66 = target) & (4+2 < m): target;

	--target to box on target, floor
		next(dr) = l & (b46 = mantrg & b45 = bxtrg) & (b44 =flr) & (6-2 > 0): target;
		next(dr) = u & (b46 = mantrg & b36 = bxtrg) & (b26 =flr) & (4-2 > 0): target;
		next(dr) = d & (b46 = mantrg & b56 = bxtrg) & (b66 =flr) & (4+2 < m): target;

	--target to box on target, target
		next(dr) = l & (b46 = mantrg & b45 = bxtrg) & (b44 = target) & (6-2 > 0): target;
		next(dr) = u & (b46 = mantrg & b36 = bxtrg) & (b26 = target) & (4-2 > 0): target;
		next(dr) = d & (b46 = mantrg & b56 = bxtrg) & (b66 = target) & (4+2 < m): target;

    --man to floor
        next(dr) = r & (b46 = flr & (b45 = man | b45 = mantrg)) : man;
        next(dr) = d & (b46 = flr & (b36 = man | b36 = mantrg)): man;
        next(dr) = u & (b46 = flr & (b56 = man | b56 = mantrg)): man;

    --box to floor
        next(dr) = r & (b46 = flr & (b45 = bx | b45 = bxtrg)) & (b44 = man | b44 = mantrg): bx;
        next(dr) = d & (b46 = flr & (b36 = bx | b36 = bxtrg)) & (b26 = man | b26 = mantrg): bx;
        next(dr) = u & (b46 = flr & (b56 = bx | b56 = bxtrg)) & (b66 = man | b66 = mantrg): bx;

    --man to target
        next(dr) = r & (b46 = target & (b45 = man | b45 = mantrg)): mantrg;
        next(dr) = d & (b46 = target & (b36 = man | b36 = mantrg)): mantrg;
        next(dr) = u & (b46 = target & (b56 = man | b56 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b46 = target & (b45 = bx | b45 = bxtrg)) & (b44 = man | b44 = mantrg): bxtrg;
        next(dr) = d & (b46 = target & (b36 = bx | b36 = bxtrg)) & (b26 = man | b26 = mantrg): bxtrg;
        next(dr) = u & (b46 = target & (b56 = bx | b56 = bxtrg)) & (b66 = man | b66 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b46 = bx & (b36 = man | b36 = mantrg)) & (b56 = flr | b56 = target): man;
        next(dr) = u & (b46 = bx & (b56 = man | b56 = mantrg)) & (b36 = flr | b36 = target): man;

    --man to box on target
        next(dr) = d & (b46 = bxtrg & (b36 = man | b36 = mantrg)) & (b56 = flr | b56 = target): mantrg;
        next(dr) = u & (b46 = bxtrg & (b56 = man | b56 = mantrg)) & (b36 = flr | b36 = target): mantrg;

    TRUE: b46;
esac;
next(b50) := case
	--floor to floor
		next(dr) = r & (b50 = man & b51 =flr):flr;
		next(dr) = u & (b50 = man & b40 =flr):flr;
		next(dr) = d & (b50 = man & b60 =flr):flr;


	--target to floor
		next(dr) = r & (b50 = mantrg & b51 =flr): target;
		next(dr) = u & (b50 = mantrg & b40 =flr): target;
		next(dr) = d & (b50 = mantrg & b60 =flr): target;

	--floor to target
		next(dr) = r & (b50 = man & b51 = target):flr;
		next(dr) = u & (b50 = man & b40 = target):flr;
		next(dr) = d & (b50 = man & b60 = target):flr;

	--target to target
		next(dr) = r & (b50 = mantrg & b51 = target): target;
		next(dr) = u & (b50 = mantrg & b40 = target): target;
		next(dr) = d & (b50 = mantrg & b60 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b50 = man & b51 = bx) & (b52 =flr) & (0+2 < n):flr;
		next(dr) = u & (b50 = man & b40 = bx) & (b30 =flr) & (5-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = r & (b50 = man & b51 = bx) & (b52 = target) & (0+2 < n):flr;
		next(dr) = u & (b50 = man & b40 = bx) & (b30 = target) & (5-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = r & (b50 = man & b51 = bxtrg) & (b52 =flr) & (0+2 < n):flr;
		next(dr) = u & (b50 = man & b40 = bxtrg) & (b30 =flr) & (5-2 > 0):flr;

	--floor to box on target, target
		next(dr) = r & (b50 = man & b51 = bxtrg) & (b52 = target) & (0+2 < n):flr;
		next(dr) = u & (b50 = man & b40 = bxtrg) & (b30 = target) & (5-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = r & (b50 = mantrg & b51 = bx) & (b52 =flr) & (0+2 < n): target;
		next(dr) = u & (b50 = mantrg & b40 = bx) & (b30 =flr) & (5-2 > 0): target;

	--target to box on floor, target
		next(dr) = r & (b50 = mantrg & b51 = bx) & (b52 = target) & (0+2 < n): target;
		next(dr) = u & (b50 = mantrg & b40 = bx) & (b30 = target) & (5-2 > 0): target;

	--target to box on target, floor
		next(dr) = r & (b50 = mantrg & b51 = bxtrg) & (b52 =flr) & (0+2 < n): target;
		next(dr) = u & (b50 = mantrg & b40 = bxtrg) & (b30 =flr) & (5-2 > 0): target;

	--target to box on target, target
		next(dr) = r & (b50 = mantrg & b51 = bxtrg) & (b52 = target) & (0+2 < n): target;
		next(dr) = u & (b50 = mantrg & b40 = bxtrg) & (b30 = target) & (5-2 > 0): target;

    --man to floor
        next(dr) = l & (b50 = flr & (b51 = man | b51 = mantrg)): man;
        next(dr) = d & (b50 = flr & (b40 = man | b40 = mantrg)): man;
        next(dr) = u & (b50 = flr & (b60 = man | b60 = mantrg)): man;

    --box to floor
        next(dr) = l & (b50 = flr & (b51 = bx | b51 = bxtrg)) & (b52 = man | b52 = mantrg): bx;
        next(dr) = d & (b50 = flr & (b40 = bx | b40 = bxtrg)) & (b30 = man | b30 = mantrg): bx;

    --man to target
        next(dr) = l & (b50 = target & (b51 = man | b51 = mantrg)): mantrg;
        next(dr) = d & (b50 = target & (b40 = man | b40 = mantrg)): mantrg;
        next(dr) = u & (b50 = target & (b60 = man | b60 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b50 = target & (b51 = bx | b51 = bxtrg)) & (b52 = man | b52 = mantrg): bxtrg;
        next(dr) = d & (b50 = target & (b40 = bx | b40 = bxtrg)) & (b30 = man | b30 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b50 = bx & (b40 = man | b40 = mantrg)) & (b60 = flr | b60 = target): man;
        next(dr) = u & (b50 = bx & (b60 = man | b60 = mantrg)) & (b40 = flr | b40 = target): man;

    --man to box on target
        next(dr) = d & (b50 = bxtrg & (b40 = man | b40 = mantrg)) & (b60 = flr | b60 = target): mantrg;
        next(dr) = u & (b50 = bxtrg & (b60 = man | b60 = mantrg)) & (b40 = flr | b40 = target): mantrg;

    TRUE: b50;
esac;
next(b51) := case
	--floor to floor
		next(dr) = l & (b51 = man & b50 =flr):flr;
		next(dr) = r & (b51 = man & b52 =flr):flr;
		next(dr) = u & (b51 = man & b41 =flr):flr;
		next(dr) = d & (b51 = man & b61 =flr):flr;


	--target to floor
		next(dr) = l & (b51 = mantrg & b50 =flr): target;
		next(dr) = r & (b51 = mantrg & b52 =flr): target;
		next(dr) = u & (b51 = mantrg & b41 =flr): target;
		next(dr) = d & (b51 = mantrg & b61 =flr): target;

	--floor to target
		next(dr) = l & (b51 = man & b50 = target):flr;
		next(dr) = r & (b51 = man & b52 = target):flr;
		next(dr) = u & (b51 = man & b41 = target):flr;
		next(dr) = d & (b51 = man & b61 = target):flr;

	--target to target
		next(dr) = l & (b51 = mantrg & b50 = target): target;
		next(dr) = r & (b51 = mantrg & b52 = target): target;
		next(dr) = u & (b51 = mantrg & b41 = target): target;
		next(dr) = d & (b51 = mantrg & b61 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b51 = man & b52 = bx) & (b53 =flr) & (1+2 < n):flr;
		next(dr) = u & (b51 = man & b41 = bx) & (b31 =flr) & (5-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = r & (b51 = man & b52 = bx) & (b53 = target) & (1+2 < n):flr;
		next(dr) = u & (b51 = man & b41 = bx) & (b31 = target) & (5-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = r & (b51 = man & b52 = bxtrg) & (b53 =flr) & (1+2 < n):flr;
		next(dr) = u & (b51 = man & b41 = bxtrg) & (b31 =flr) & (5-2 > 0):flr;

	--floor to box on target, target
		next(dr) = r & (b51 = man & b52 = bxtrg) & (b53 = target) & (1+2 < n):flr;
		next(dr) = u & (b51 = man & b41 = bxtrg) & (b31 = target) & (5-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = r & (b51 = mantrg & b52 = bx) & (b53 =flr) & (1+2 < n): target;
		next(dr) = u & (b51 = mantrg & b41 = bx) & (b31 =flr) & (5-2 > 0): target;

	--target to box on floor, target
		next(dr) = r & (b51 = mantrg & b52 = bx) & (b53 = target) & (1+2 < n): target;
		next(dr) = u & (b51 = mantrg & b41 = bx) & (b31 = target) & (5-2 > 0): target;

	--target to box on target, floor
		next(dr) = r & (b51 = mantrg & b52 = bxtrg) & (b53 =flr) & (1+2 < n): target;
		next(dr) = u & (b51 = mantrg & b41 = bxtrg) & (b31 =flr) & (5-2 > 0): target;

	--target to box on target, target
		next(dr) = r & (b51 = mantrg & b52 = bxtrg) & (b53 = target) & (1+2 < n): target;
		next(dr) = u & (b51 = mantrg & b41 = bxtrg) & (b31 = target) & (5-2 > 0): target;

    --man to floor
        next(dr) = r & (b51 = flr & (b50 = man | b50 = mantrg)) : man;
        next(dr) = l & (b51 = flr & (b52 = man | b52 = mantrg)): man;
        next(dr) = d & (b51 = flr & (b41 = man | b41 = mantrg)): man;
        next(dr) = u & (b51 = flr & (b61 = man | b61 = mantrg)): man;

    --box to floor
        next(dr) = l & (b51 = flr & (b52 = bx | b52 = bxtrg)) & (b53 = man | b53 = mantrg): bx;
        next(dr) = d & (b51 = flr & (b41 = bx | b41 = bxtrg)) & (b31 = man | b31 = mantrg): bx;

    --man to target
        next(dr) = r & (b51 = target & (b50 = man | b50 = mantrg)): mantrg;
        next(dr) = l & (b51 = target & (b52 = man | b52 = mantrg)): mantrg;
        next(dr) = d & (b51 = target & (b41 = man | b41 = mantrg)): mantrg;
        next(dr) = u & (b51 = target & (b61 = man | b61 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b51 = target & (b52 = bx | b52 = bxtrg)) & (b53 = man | b53 = mantrg): bxtrg;
        next(dr) = d & (b51 = target & (b41 = bx | b41 = bxtrg)) & (b31 = man | b31 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b51 = bx & (b50 = man | b50 = mantrg)) & (b52 = flr | b52 = target): man;
        next(dr) = l & (b51 = bx & (b52 = man | b52 = mantrg)) & (b50 = flr | b50 = target): man;
        next(dr) = d & (b51 = bx & (b41 = man | b41 = mantrg)) & (b61 = flr | b61 = target): man;
        next(dr) = u & (b51 = bx & (b61 = man | b61 = mantrg)) & (b41 = flr | b41 = target): man;

    --man to box on target
        next(dr) = r & (b51 = bxtrg & (b50 = man | b50 = mantrg)) & (b52 = flr | b52 = target): mantrg;
        next(dr) = l & (b51 = bxtrg & (b52 = man | b52 = mantrg)) & (b50 = flr | b50 = target): mantrg;
        next(dr) = d & (b51 = bxtrg & (b41 = man | b41 = mantrg)) & (b61 = flr | b61 = target): mantrg;
        next(dr) = u & (b51 = bxtrg & (b61 = man | b61 = mantrg)) & (b41 = flr | b41 = target): mantrg;

    TRUE: b51;
esac;
next(b52) := case
	--floor to floor
		next(dr) = l & (b52 = man & b51 =flr):flr;
		next(dr) = r & (b52 = man & b53 =flr):flr;
		next(dr) = u & (b52 = man & b42 =flr):flr;
		next(dr) = d & (b52 = man & b62 =flr):flr;


	--target to floor
		next(dr) = l & (b52 = mantrg & b51 =flr): target;
		next(dr) = r & (b52 = mantrg & b53 =flr): target;
		next(dr) = u & (b52 = mantrg & b42 =flr): target;
		next(dr) = d & (b52 = mantrg & b62 =flr): target;

	--floor to target
		next(dr) = l & (b52 = man & b51 = target):flr;
		next(dr) = r & (b52 = man & b53 = target):flr;
		next(dr) = u & (b52 = man & b42 = target):flr;
		next(dr) = d & (b52 = man & b62 = target):flr;

	--target to target
		next(dr) = l & (b52 = mantrg & b51 = target): target;
		next(dr) = r & (b52 = mantrg & b53 = target): target;
		next(dr) = u & (b52 = mantrg & b42 = target): target;
		next(dr) = d & (b52 = mantrg & b62 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b52 = man & b51 = bx) & (b50 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b52 = man & b53 = bx) & (b54 =flr) & (2+2 < n):flr;
		next(dr) = u & (b52 = man & b42 = bx) & (b32 =flr) & (5-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b52 = man & b51 = bx) & (b50 = target) & (2-2 > 0):flr;
		next(dr) = r & (b52 = man & b53 = bx) & (b54 = target) & (2+2 < n):flr;
		next(dr) = u & (b52 = man & b42 = bx) & (b32 = target) & (5-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b52 = man & b51 = bxtrg) & (b50 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b52 = man & b53 = bxtrg) & (b54 =flr) & (2+2 < n):flr;
		next(dr) = u & (b52 = man & b42 = bxtrg) & (b32 =flr) & (5-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b52 = man & b51 = bxtrg) & (b50 = target) & (2-2 > 0):flr;
		next(dr) = r & (b52 = man & b53 = bxtrg) & (b54 = target) & (2+2 < n):flr;
		next(dr) = u & (b52 = man & b42 = bxtrg) & (b32 = target) & (5-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b52 = mantrg & b51 = bx) & (b50 =flr) & (2-2 > 0): target;
		next(dr) = r & (b52 = mantrg & b53 = bx) & (b54 =flr) & (2+2 < n): target;
		next(dr) = u & (b52 = mantrg & b42 = bx) & (b32 =flr) & (5-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b52 = mantrg & b51 = bx) & (b50 = target) & (2-2 > 0): target;
		next(dr) = r & (b52 = mantrg & b53 = bx) & (b54 = target) & (2+2 < n): target;
		next(dr) = u & (b52 = mantrg & b42 = bx) & (b32 = target) & (5-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b52 = mantrg & b51 = bxtrg) & (b50 =flr) & (2-2 > 0): target;
		next(dr) = r & (b52 = mantrg & b53 = bxtrg) & (b54 =flr) & (2+2 < n): target;
		next(dr) = u & (b52 = mantrg & b42 = bxtrg) & (b32 =flr) & (5-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b52 = mantrg & b51 = bxtrg) & (b50 = target) & (2-2 > 0): target;
		next(dr) = r & (b52 = mantrg & b53 = bxtrg) & (b54 = target) & (2+2 < n): target;
		next(dr) = u & (b52 = mantrg & b42 = bxtrg) & (b32 = target) & (5-2 > 0): target;

    --man to floor
        next(dr) = r & (b52 = flr & (b51 = man | b51 = mantrg)) : man;
        next(dr) = l & (b52 = flr & (b53 = man | b53 = mantrg)): man;
        next(dr) = d & (b52 = flr & (b42 = man | b42 = mantrg)): man;
        next(dr) = u & (b52 = flr & (b62 = man | b62 = mantrg)): man;

    --box to floor
        next(dr) = r & (b52 = flr & (b51 = bx | b51 = bxtrg)) & (b50 = man | b50 = mantrg): bx;
        next(dr) = l & (b52 = flr & (b53 = bx | b53 = bxtrg)) & (b54 = man | b54 = mantrg): bx;
        next(dr) = d & (b52 = flr & (b42 = bx | b42 = bxtrg)) & (b32 = man | b32 = mantrg): bx;

    --man to target
        next(dr) = r & (b52 = target & (b51 = man | b51 = mantrg)): mantrg;
        next(dr) = l & (b52 = target & (b53 = man | b53 = mantrg)): mantrg;
        next(dr) = d & (b52 = target & (b42 = man | b42 = mantrg)): mantrg;
        next(dr) = u & (b52 = target & (b62 = man | b62 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b52 = target & (b51 = bx | b51 = bxtrg)) & (b50 = man | b50 = mantrg): bxtrg;
        next(dr) = l & (b52 = target & (b53 = bx | b53 = bxtrg)) & (b54 = man | b54 = mantrg): bxtrg;
        next(dr) = d & (b52 = target & (b42 = bx | b42 = bxtrg)) & (b32 = man | b32 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b52 = bx & (b51 = man | b51 = mantrg)) & (b53 = flr | b53 = target): man;
        next(dr) = l & (b52 = bx & (b53 = man | b53 = mantrg)) & (b51 = flr | b51 = target): man;
        next(dr) = d & (b52 = bx & (b42 = man | b42 = mantrg)) & (b62 = flr | b62 = target): man;
        next(dr) = u & (b52 = bx & (b62 = man | b62 = mantrg)) & (b42 = flr | b42 = target): man;

    --man to box on target
        next(dr) = r & (b52 = bxtrg & (b51 = man | b51 = mantrg)) & (b53 = flr | b53 = target): mantrg;
        next(dr) = l & (b52 = bxtrg & (b53 = man | b53 = mantrg)) & (b51 = flr | b51 = target): mantrg;
        next(dr) = d & (b52 = bxtrg & (b42 = man | b42 = mantrg)) & (b62 = flr | b62 = target): mantrg;
        next(dr) = u & (b52 = bxtrg & (b62 = man | b62 = mantrg)) & (b42 = flr | b42 = target): mantrg;

    TRUE: b52;
esac;
next(b53) := case
	--floor to floor
		next(dr) = l & (b53 = man & b52 =flr):flr;
		next(dr) = r & (b53 = man & b54 =flr):flr;
		next(dr) = u & (b53 = man & b43 =flr):flr;
		next(dr) = d & (b53 = man & b63 =flr):flr;


	--target to floor
		next(dr) = l & (b53 = mantrg & b52 =flr): target;
		next(dr) = r & (b53 = mantrg & b54 =flr): target;
		next(dr) = u & (b53 = mantrg & b43 =flr): target;
		next(dr) = d & (b53 = mantrg & b63 =flr): target;

	--floor to target
		next(dr) = l & (b53 = man & b52 = target):flr;
		next(dr) = r & (b53 = man & b54 = target):flr;
		next(dr) = u & (b53 = man & b43 = target):flr;
		next(dr) = d & (b53 = man & b63 = target):flr;

	--target to target
		next(dr) = l & (b53 = mantrg & b52 = target): target;
		next(dr) = r & (b53 = mantrg & b54 = target): target;
		next(dr) = u & (b53 = mantrg & b43 = target): target;
		next(dr) = d & (b53 = mantrg & b63 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b53 = man & b52 = bx) & (b51 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b53 = man & b54 = bx) & (b55 =flr) & (3+2 < n):flr;
		next(dr) = u & (b53 = man & b43 = bx) & (b33 =flr) & (5-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b53 = man & b52 = bx) & (b51 = target) & (3-2 > 0):flr;
		next(dr) = r & (b53 = man & b54 = bx) & (b55 = target) & (3+2 < n):flr;
		next(dr) = u & (b53 = man & b43 = bx) & (b33 = target) & (5-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b53 = man & b52 = bxtrg) & (b51 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b53 = man & b54 = bxtrg) & (b55 =flr) & (3+2 < n):flr;
		next(dr) = u & (b53 = man & b43 = bxtrg) & (b33 =flr) & (5-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b53 = man & b52 = bxtrg) & (b51 = target) & (3-2 > 0):flr;
		next(dr) = r & (b53 = man & b54 = bxtrg) & (b55 = target) & (3+2 < n):flr;
		next(dr) = u & (b53 = man & b43 = bxtrg) & (b33 = target) & (5-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b53 = mantrg & b52 = bx) & (b51 =flr) & (3-2 > 0): target;
		next(dr) = r & (b53 = mantrg & b54 = bx) & (b55 =flr) & (3+2 < n): target;
		next(dr) = u & (b53 = mantrg & b43 = bx) & (b33 =flr) & (5-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b53 = mantrg & b52 = bx) & (b51 = target) & (3-2 > 0): target;
		next(dr) = r & (b53 = mantrg & b54 = bx) & (b55 = target) & (3+2 < n): target;
		next(dr) = u & (b53 = mantrg & b43 = bx) & (b33 = target) & (5-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b53 = mantrg & b52 = bxtrg) & (b51 =flr) & (3-2 > 0): target;
		next(dr) = r & (b53 = mantrg & b54 = bxtrg) & (b55 =flr) & (3+2 < n): target;
		next(dr) = u & (b53 = mantrg & b43 = bxtrg) & (b33 =flr) & (5-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b53 = mantrg & b52 = bxtrg) & (b51 = target) & (3-2 > 0): target;
		next(dr) = r & (b53 = mantrg & b54 = bxtrg) & (b55 = target) & (3+2 < n): target;
		next(dr) = u & (b53 = mantrg & b43 = bxtrg) & (b33 = target) & (5-2 > 0): target;

    --man to floor
        next(dr) = r & (b53 = flr & (b52 = man | b52 = mantrg)) : man;
        next(dr) = l & (b53 = flr & (b54 = man | b54 = mantrg)): man;
        next(dr) = d & (b53 = flr & (b43 = man | b43 = mantrg)): man;
        next(dr) = u & (b53 = flr & (b63 = man | b63 = mantrg)): man;

    --box to floor
        next(dr) = r & (b53 = flr & (b52 = bx | b52 = bxtrg)) & (b51 = man | b51 = mantrg): bx;
        next(dr) = l & (b53 = flr & (b54 = bx | b54 = bxtrg)) & (b55 = man | b55 = mantrg): bx;
        next(dr) = d & (b53 = flr & (b43 = bx | b43 = bxtrg)) & (b33 = man | b33 = mantrg): bx;

    --man to target
        next(dr) = r & (b53 = target & (b52 = man | b52 = mantrg)): mantrg;
        next(dr) = l & (b53 = target & (b54 = man | b54 = mantrg)): mantrg;
        next(dr) = d & (b53 = target & (b43 = man | b43 = mantrg)): mantrg;
        next(dr) = u & (b53 = target & (b63 = man | b63 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b53 = target & (b52 = bx | b52 = bxtrg)) & (b51 = man | b51 = mantrg): bxtrg;
        next(dr) = l & (b53 = target & (b54 = bx | b54 = bxtrg)) & (b55 = man | b55 = mantrg): bxtrg;
        next(dr) = d & (b53 = target & (b43 = bx | b43 = bxtrg)) & (b33 = man | b33 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b53 = bx & (b52 = man | b52 = mantrg)) & (b54 = flr | b54 = target): man;
        next(dr) = l & (b53 = bx & (b54 = man | b54 = mantrg)) & (b52 = flr | b52 = target): man;
        next(dr) = d & (b53 = bx & (b43 = man | b43 = mantrg)) & (b63 = flr | b63 = target): man;
        next(dr) = u & (b53 = bx & (b63 = man | b63 = mantrg)) & (b43 = flr | b43 = target): man;

    --man to box on target
        next(dr) = r & (b53 = bxtrg & (b52 = man | b52 = mantrg)) & (b54 = flr | b54 = target): mantrg;
        next(dr) = l & (b53 = bxtrg & (b54 = man | b54 = mantrg)) & (b52 = flr | b52 = target): mantrg;
        next(dr) = d & (b53 = bxtrg & (b43 = man | b43 = mantrg)) & (b63 = flr | b63 = target): mantrg;
        next(dr) = u & (b53 = bxtrg & (b63 = man | b63 = mantrg)) & (b43 = flr | b43 = target): mantrg;

    TRUE: b53;
esac;
next(b54) := case
	--floor to floor
		next(dr) = l & (b54 = man & b53 =flr):flr;
		next(dr) = r & (b54 = man & b55 =flr):flr;
		next(dr) = u & (b54 = man & b44 =flr):flr;
		next(dr) = d & (b54 = man & b64 =flr):flr;


	--target to floor
		next(dr) = l & (b54 = mantrg & b53 =flr): target;
		next(dr) = r & (b54 = mantrg & b55 =flr): target;
		next(dr) = u & (b54 = mantrg & b44 =flr): target;
		next(dr) = d & (b54 = mantrg & b64 =flr): target;

	--floor to target
		next(dr) = l & (b54 = man & b53 = target):flr;
		next(dr) = r & (b54 = man & b55 = target):flr;
		next(dr) = u & (b54 = man & b44 = target):flr;
		next(dr) = d & (b54 = man & b64 = target):flr;

	--target to target
		next(dr) = l & (b54 = mantrg & b53 = target): target;
		next(dr) = r & (b54 = mantrg & b55 = target): target;
		next(dr) = u & (b54 = mantrg & b44 = target): target;
		next(dr) = d & (b54 = mantrg & b64 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b54 = man & b53 = bx) & (b52 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b54 = man & b55 = bx) & (b56 =flr) & (4+2 < n):flr;
		next(dr) = u & (b54 = man & b44 = bx) & (b34 =flr) & (5-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b54 = man & b53 = bx) & (b52 = target) & (4-2 > 0):flr;
		next(dr) = r & (b54 = man & b55 = bx) & (b56 = target) & (4+2 < n):flr;
		next(dr) = u & (b54 = man & b44 = bx) & (b34 = target) & (5-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b54 = man & b53 = bxtrg) & (b52 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b54 = man & b55 = bxtrg) & (b56 =flr) & (4+2 < n):flr;
		next(dr) = u & (b54 = man & b44 = bxtrg) & (b34 =flr) & (5-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b54 = man & b53 = bxtrg) & (b52 = target) & (4-2 > 0):flr;
		next(dr) = r & (b54 = man & b55 = bxtrg) & (b56 = target) & (4+2 < n):flr;
		next(dr) = u & (b54 = man & b44 = bxtrg) & (b34 = target) & (5-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b54 = mantrg & b53 = bx) & (b52 =flr) & (4-2 > 0): target;
		next(dr) = r & (b54 = mantrg & b55 = bx) & (b56 =flr) & (4+2 < n): target;
		next(dr) = u & (b54 = mantrg & b44 = bx) & (b34 =flr) & (5-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b54 = mantrg & b53 = bx) & (b52 = target) & (4-2 > 0): target;
		next(dr) = r & (b54 = mantrg & b55 = bx) & (b56 = target) & (4+2 < n): target;
		next(dr) = u & (b54 = mantrg & b44 = bx) & (b34 = target) & (5-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b54 = mantrg & b53 = bxtrg) & (b52 =flr) & (4-2 > 0): target;
		next(dr) = r & (b54 = mantrg & b55 = bxtrg) & (b56 =flr) & (4+2 < n): target;
		next(dr) = u & (b54 = mantrg & b44 = bxtrg) & (b34 =flr) & (5-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b54 = mantrg & b53 = bxtrg) & (b52 = target) & (4-2 > 0): target;
		next(dr) = r & (b54 = mantrg & b55 = bxtrg) & (b56 = target) & (4+2 < n): target;
		next(dr) = u & (b54 = mantrg & b44 = bxtrg) & (b34 = target) & (5-2 > 0): target;

    --man to floor
        next(dr) = r & (b54 = flr & (b53 = man | b53 = mantrg)) : man;
        next(dr) = l & (b54 = flr & (b55 = man | b55 = mantrg)): man;
        next(dr) = d & (b54 = flr & (b44 = man | b44 = mantrg)): man;
        next(dr) = u & (b54 = flr & (b64 = man | b64 = mantrg)): man;

    --box to floor
        next(dr) = r & (b54 = flr & (b53 = bx | b53 = bxtrg)) & (b52 = man | b52 = mantrg): bx;
        next(dr) = l & (b54 = flr & (b55 = bx | b55 = bxtrg)) & (b56 = man | b56 = mantrg): bx;
        next(dr) = d & (b54 = flr & (b44 = bx | b44 = bxtrg)) & (b34 = man | b34 = mantrg): bx;

    --man to target
        next(dr) = r & (b54 = target & (b53 = man | b53 = mantrg)): mantrg;
        next(dr) = l & (b54 = target & (b55 = man | b55 = mantrg)): mantrg;
        next(dr) = d & (b54 = target & (b44 = man | b44 = mantrg)): mantrg;
        next(dr) = u & (b54 = target & (b64 = man | b64 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b54 = target & (b53 = bx | b53 = bxtrg)) & (b52 = man | b52 = mantrg): bxtrg;
        next(dr) = l & (b54 = target & (b55 = bx | b55 = bxtrg)) & (b56 = man | b56 = mantrg): bxtrg;
        next(dr) = d & (b54 = target & (b44 = bx | b44 = bxtrg)) & (b34 = man | b34 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b54 = bx & (b53 = man | b53 = mantrg)) & (b55 = flr | b55 = target): man;
        next(dr) = l & (b54 = bx & (b55 = man | b55 = mantrg)) & (b53 = flr | b53 = target): man;
        next(dr) = d & (b54 = bx & (b44 = man | b44 = mantrg)) & (b64 = flr | b64 = target): man;
        next(dr) = u & (b54 = bx & (b64 = man | b64 = mantrg)) & (b44 = flr | b44 = target): man;

    --man to box on target
        next(dr) = r & (b54 = bxtrg & (b53 = man | b53 = mantrg)) & (b55 = flr | b55 = target): mantrg;
        next(dr) = l & (b54 = bxtrg & (b55 = man | b55 = mantrg)) & (b53 = flr | b53 = target): mantrg;
        next(dr) = d & (b54 = bxtrg & (b44 = man | b44 = mantrg)) & (b64 = flr | b64 = target): mantrg;
        next(dr) = u & (b54 = bxtrg & (b64 = man | b64 = mantrg)) & (b44 = flr | b44 = target): mantrg;

    TRUE: b54;
esac;
next(b55) := case
	--floor to floor
		next(dr) = l & (b55 = man & b54 =flr):flr;
		next(dr) = r & (b55 = man & b56 =flr):flr;
		next(dr) = u & (b55 = man & b45 =flr):flr;
		next(dr) = d & (b55 = man & b65 =flr):flr;


	--target to floor
		next(dr) = l & (b55 = mantrg & b54 =flr): target;
		next(dr) = r & (b55 = mantrg & b56 =flr): target;
		next(dr) = u & (b55 = mantrg & b45 =flr): target;
		next(dr) = d & (b55 = mantrg & b65 =flr): target;

	--floor to target
		next(dr) = l & (b55 = man & b54 = target):flr;
		next(dr) = r & (b55 = man & b56 = target):flr;
		next(dr) = u & (b55 = man & b45 = target):flr;
		next(dr) = d & (b55 = man & b65 = target):flr;

	--target to target
		next(dr) = l & (b55 = mantrg & b54 = target): target;
		next(dr) = r & (b55 = mantrg & b56 = target): target;
		next(dr) = u & (b55 = mantrg & b45 = target): target;
		next(dr) = d & (b55 = mantrg & b65 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b55 = man & b54 = bx) & (b53 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b55 = man & b45 = bx) & (b35 =flr) & (5-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b55 = man & b54 = bx) & (b53 = target) & (5-2 > 0):flr;
		next(dr) = u & (b55 = man & b45 = bx) & (b35 = target) & (5-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b55 = man & b54 = bxtrg) & (b53 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b55 = man & b45 = bxtrg) & (b35 =flr) & (5-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b55 = man & b54 = bxtrg) & (b53 = target) & (5-2 > 0):flr;
		next(dr) = u & (b55 = man & b45 = bxtrg) & (b35 = target) & (5-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b55 = mantrg & b54 = bx) & (b53 =flr) & (5-2 > 0): target;
		next(dr) = u & (b55 = mantrg & b45 = bx) & (b35 =flr) & (5-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b55 = mantrg & b54 = bx) & (b53 = target) & (5-2 > 0): target;
		next(dr) = u & (b55 = mantrg & b45 = bx) & (b35 = target) & (5-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b55 = mantrg & b54 = bxtrg) & (b53 =flr) & (5-2 > 0): target;
		next(dr) = u & (b55 = mantrg & b45 = bxtrg) & (b35 =flr) & (5-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b55 = mantrg & b54 = bxtrg) & (b53 = target) & (5-2 > 0): target;
		next(dr) = u & (b55 = mantrg & b45 = bxtrg) & (b35 = target) & (5-2 > 0): target;

    --man to floor
        next(dr) = r & (b55 = flr & (b54 = man | b54 = mantrg)) : man;
        next(dr) = l & (b55 = flr & (b56 = man | b56 = mantrg)): man;
        next(dr) = d & (b55 = flr & (b45 = man | b45 = mantrg)): man;
        next(dr) = u & (b55 = flr & (b65 = man | b65 = mantrg)): man;

    --box to floor
        next(dr) = r & (b55 = flr & (b54 = bx | b54 = bxtrg)) & (b53 = man | b53 = mantrg): bx;
        next(dr) = d & (b55 = flr & (b45 = bx | b45 = bxtrg)) & (b35 = man | b35 = mantrg): bx;

    --man to target
        next(dr) = r & (b55 = target & (b54 = man | b54 = mantrg)): mantrg;
        next(dr) = l & (b55 = target & (b56 = man | b56 = mantrg)): mantrg;
        next(dr) = d & (b55 = target & (b45 = man | b45 = mantrg)): mantrg;
        next(dr) = u & (b55 = target & (b65 = man | b65 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b55 = target & (b54 = bx | b54 = bxtrg)) & (b53 = man | b53 = mantrg): bxtrg;
        next(dr) = d & (b55 = target & (b45 = bx | b45 = bxtrg)) & (b35 = man | b35 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b55 = bx & (b54 = man | b54 = mantrg)) & (b56 = flr | b56 = target): man;
        next(dr) = l & (b55 = bx & (b56 = man | b56 = mantrg)) & (b54 = flr | b54 = target): man;
        next(dr) = d & (b55 = bx & (b45 = man | b45 = mantrg)) & (b65 = flr | b65 = target): man;
        next(dr) = u & (b55 = bx & (b65 = man | b65 = mantrg)) & (b45 = flr | b45 = target): man;

    --man to box on target
        next(dr) = r & (b55 = bxtrg & (b54 = man | b54 = mantrg)) & (b56 = flr | b56 = target): mantrg;
        next(dr) = l & (b55 = bxtrg & (b56 = man | b56 = mantrg)) & (b54 = flr | b54 = target): mantrg;
        next(dr) = d & (b55 = bxtrg & (b45 = man | b45 = mantrg)) & (b65 = flr | b65 = target): mantrg;
        next(dr) = u & (b55 = bxtrg & (b65 = man | b65 = mantrg)) & (b45 = flr | b45 = target): mantrg;

    TRUE: b55;
esac;
next(b56) := case
	--floor to floor
		next(dr) = l & (b56 = man & b55 =flr):flr;
		next(dr) = u & (b56 = man & b46 =flr):flr;
		next(dr) = d & (b56 = man & b66 =flr):flr;


	--target to floor
		next(dr) = l & (b56 = mantrg & b55 =flr): target;
		next(dr) = u & (b56 = mantrg & b46 =flr): target;
		next(dr) = d & (b56 = mantrg & b66 =flr): target;

	--floor to target
		next(dr) = l & (b56 = man & b55 = target):flr;
		next(dr) = u & (b56 = man & b46 = target):flr;
		next(dr) = d & (b56 = man & b66 = target):flr;

	--target to target
		next(dr) = l & (b56 = mantrg & b55 = target): target;
		next(dr) = u & (b56 = mantrg & b46 = target): target;
		next(dr) = d & (b56 = mantrg & b66 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b56 = man & b55 = bx) & (b54 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b56 = man & b46 = bx) & (b36 =flr) & (5-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b56 = man & b55 = bx) & (b54 = target) & (6-2 > 0):flr;
		next(dr) = u & (b56 = man & b46 = bx) & (b36 = target) & (5-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b56 = man & b55 = bxtrg) & (b54 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b56 = man & b46 = bxtrg) & (b36 =flr) & (5-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b56 = man & b55 = bxtrg) & (b54 = target) & (6-2 > 0):flr;
		next(dr) = u & (b56 = man & b46 = bxtrg) & (b36 = target) & (5-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b56 = mantrg & b55 = bx) & (b54 =flr) & (6-2 > 0): target;
		next(dr) = u & (b56 = mantrg & b46 = bx) & (b36 =flr) & (5-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b56 = mantrg & b55 = bx) & (b54 = target) & (6-2 > 0): target;
		next(dr) = u & (b56 = mantrg & b46 = bx) & (b36 = target) & (5-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b56 = mantrg & b55 = bxtrg) & (b54 =flr) & (6-2 > 0): target;
		next(dr) = u & (b56 = mantrg & b46 = bxtrg) & (b36 =flr) & (5-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b56 = mantrg & b55 = bxtrg) & (b54 = target) & (6-2 > 0): target;
		next(dr) = u & (b56 = mantrg & b46 = bxtrg) & (b36 = target) & (5-2 > 0): target;

    --man to floor
        next(dr) = r & (b56 = flr & (b55 = man | b55 = mantrg)) : man;
        next(dr) = d & (b56 = flr & (b46 = man | b46 = mantrg)): man;
        next(dr) = u & (b56 = flr & (b66 = man | b66 = mantrg)): man;

    --box to floor
        next(dr) = r & (b56 = flr & (b55 = bx | b55 = bxtrg)) & (b54 = man | b54 = mantrg): bx;
        next(dr) = d & (b56 = flr & (b46 = bx | b46 = bxtrg)) & (b36 = man | b36 = mantrg): bx;

    --man to target
        next(dr) = r & (b56 = target & (b55 = man | b55 = mantrg)): mantrg;
        next(dr) = d & (b56 = target & (b46 = man | b46 = mantrg)): mantrg;
        next(dr) = u & (b56 = target & (b66 = man | b66 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b56 = target & (b55 = bx | b55 = bxtrg)) & (b54 = man | b54 = mantrg): bxtrg;
        next(dr) = d & (b56 = target & (b46 = bx | b46 = bxtrg)) & (b36 = man | b36 = mantrg): bxtrg;

    --man to box
        next(dr) = d & (b56 = bx & (b46 = man | b46 = mantrg)) & (b66 = flr | b66 = target): man;
        next(dr) = u & (b56 = bx & (b66 = man | b66 = mantrg)) & (b46 = flr | b46 = target): man;

    --man to box on target
        next(dr) = d & (b56 = bxtrg & (b46 = man | b46 = mantrg)) & (b66 = flr | b66 = target): mantrg;
        next(dr) = u & (b56 = bxtrg & (b66 = man | b66 = mantrg)) & (b46 = flr | b46 = target): mantrg;

    TRUE: b56;
esac;
next(b60) := case
	--floor to floor
		next(dr) = r & (b60 = man & b61 =flr):flr;
		next(dr) = u & (b60 = man & b50 =flr):flr;


	--target to floor
		next(dr) = r & (b60 = mantrg & b61 =flr): target;
		next(dr) = u & (b60 = mantrg & b50 =flr): target;

	--floor to target
		next(dr) = r & (b60 = man & b61 = target):flr;
		next(dr) = u & (b60 = man & b50 = target):flr;

	--target to target
		next(dr) = r & (b60 = mantrg & b61 = target): target;
		next(dr) = u & (b60 = mantrg & b50 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b60 = man & b61 = bx) & (b62 =flr) & (0+2 < n):flr;
		next(dr) = u & (b60 = man & b50 = bx) & (b40 =flr) & (6-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = r & (b60 = man & b61 = bx) & (b62 = target) & (0+2 < n):flr;
		next(dr) = u & (b60 = man & b50 = bx) & (b40 = target) & (6-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = r & (b60 = man & b61 = bxtrg) & (b62 =flr) & (0+2 < n):flr;
		next(dr) = u & (b60 = man & b50 = bxtrg) & (b40 =flr) & (6-2 > 0):flr;

	--floor to box on target, target
		next(dr) = r & (b60 = man & b61 = bxtrg) & (b62 = target) & (0+2 < n):flr;
		next(dr) = u & (b60 = man & b50 = bxtrg) & (b40 = target) & (6-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = r & (b60 = mantrg & b61 = bx) & (b62 =flr) & (0+2 < n): target;
		next(dr) = u & (b60 = mantrg & b50 = bx) & (b40 =flr) & (6-2 > 0): target;

	--target to box on floor, target
		next(dr) = r & (b60 = mantrg & b61 = bx) & (b62 = target) & (0+2 < n): target;
		next(dr) = u & (b60 = mantrg & b50 = bx) & (b40 = target) & (6-2 > 0): target;

	--target to box on target, floor
		next(dr) = r & (b60 = mantrg & b61 = bxtrg) & (b62 =flr) & (0+2 < n): target;
		next(dr) = u & (b60 = mantrg & b50 = bxtrg) & (b40 =flr) & (6-2 > 0): target;

	--target to box on target, target
		next(dr) = r & (b60 = mantrg & b61 = bxtrg) & (b62 = target) & (0+2 < n): target;
		next(dr) = u & (b60 = mantrg & b50 = bxtrg) & (b40 = target) & (6-2 > 0): target;

    --man to floor
        next(dr) = l & (b60 = flr & (b61 = man | b61 = mantrg)): man;
        next(dr) = d & (b60 = flr & (b50 = man | b50 = mantrg)): man;

    --box to floor
        next(dr) = l & (b60 = flr & (b61 = bx | b61 = bxtrg)) & (b62 = man | b62 = mantrg): bx;
        next(dr) = d & (b60 = flr & (b50 = bx | b50 = bxtrg)) & (b40 = man | b40 = mantrg): bx;

    --man to target
        next(dr) = l & (b60 = target & (b61 = man | b61 = mantrg)): mantrg;
        next(dr) = d & (b60 = target & (b50 = man | b50 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b60 = target & (b61 = bx | b61 = bxtrg)) & (b62 = man | b62 = mantrg): bxtrg;
        next(dr) = d & (b60 = target & (b50 = bx | b50 = bxtrg)) & (b40 = man | b40 = mantrg): bxtrg;

    --man to box

    --man to box on target

    TRUE: b60;
esac;
next(b61) := case
	--floor to floor
		next(dr) = l & (b61 = man & b60 =flr):flr;
		next(dr) = r & (b61 = man & b62 =flr):flr;
		next(dr) = u & (b61 = man & b51 =flr):flr;


	--target to floor
		next(dr) = l & (b61 = mantrg & b60 =flr): target;
		next(dr) = r & (b61 = mantrg & b62 =flr): target;
		next(dr) = u & (b61 = mantrg & b51 =flr): target;

	--floor to target
		next(dr) = l & (b61 = man & b60 = target):flr;
		next(dr) = r & (b61 = man & b62 = target):flr;
		next(dr) = u & (b61 = man & b51 = target):flr;

	--target to target
		next(dr) = l & (b61 = mantrg & b60 = target): target;
		next(dr) = r & (b61 = mantrg & b62 = target): target;
		next(dr) = u & (b61 = mantrg & b51 = target): target;

	--floor to box on floor, floor
		next(dr) = r & (b61 = man & b62 = bx) & (b63 =flr) & (1+2 < n):flr;
		next(dr) = u & (b61 = man & b51 = bx) & (b41 =flr) & (6-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = r & (b61 = man & b62 = bx) & (b63 = target) & (1+2 < n):flr;
		next(dr) = u & (b61 = man & b51 = bx) & (b41 = target) & (6-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = r & (b61 = man & b62 = bxtrg) & (b63 =flr) & (1+2 < n):flr;
		next(dr) = u & (b61 = man & b51 = bxtrg) & (b41 =flr) & (6-2 > 0):flr;

	--floor to box on target, target
		next(dr) = r & (b61 = man & b62 = bxtrg) & (b63 = target) & (1+2 < n):flr;
		next(dr) = u & (b61 = man & b51 = bxtrg) & (b41 = target) & (6-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = r & (b61 = mantrg & b62 = bx) & (b63 =flr) & (1+2 < n): target;
		next(dr) = u & (b61 = mantrg & b51 = bx) & (b41 =flr) & (6-2 > 0): target;

	--target to box on floor, target
		next(dr) = r & (b61 = mantrg & b62 = bx) & (b63 = target) & (1+2 < n): target;
		next(dr) = u & (b61 = mantrg & b51 = bx) & (b41 = target) & (6-2 > 0): target;

	--target to box on target, floor
		next(dr) = r & (b61 = mantrg & b62 = bxtrg) & (b63 =flr) & (1+2 < n): target;
		next(dr) = u & (b61 = mantrg & b51 = bxtrg) & (b41 =flr) & (6-2 > 0): target;

	--target to box on target, target
		next(dr) = r & (b61 = mantrg & b62 = bxtrg) & (b63 = target) & (1+2 < n): target;
		next(dr) = u & (b61 = mantrg & b51 = bxtrg) & (b41 = target) & (6-2 > 0): target;

    --man to floor
        next(dr) = r & (b61 = flr & (b60 = man | b60 = mantrg)) : man;
        next(dr) = l & (b61 = flr & (b62 = man | b62 = mantrg)): man;
        next(dr) = d & (b61 = flr & (b51 = man | b51 = mantrg)): man;

    --box to floor
        next(dr) = l & (b61 = flr & (b62 = bx | b62 = bxtrg)) & (b63 = man | b63 = mantrg): bx;
        next(dr) = d & (b61 = flr & (b51 = bx | b51 = bxtrg)) & (b41 = man | b41 = mantrg): bx;

    --man to target
        next(dr) = r & (b61 = target & (b60 = man | b60 = mantrg)): mantrg;
        next(dr) = l & (b61 = target & (b62 = man | b62 = mantrg)): mantrg;
        next(dr) = d & (b61 = target & (b51 = man | b51 = mantrg)): mantrg;

    --box to target
        next(dr) = l & (b61 = target & (b62 = bx | b62 = bxtrg)) & (b63 = man | b63 = mantrg): bxtrg;
        next(dr) = d & (b61 = target & (b51 = bx | b51 = bxtrg)) & (b41 = man | b41 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b61 = bx & (b60 = man | b60 = mantrg)) & (b62 = flr | b62 = target): man;
        next(dr) = l & (b61 = bx & (b62 = man | b62 = mantrg)) & (b60 = flr | b60 = target): man;

    --man to box on target
        next(dr) = r & (b61 = bxtrg & (b60 = man | b60 = mantrg)) & (b62 = flr | b62 = target): mantrg;
        next(dr) = l & (b61 = bxtrg & (b62 = man | b62 = mantrg)) & (b60 = flr | b60 = target): mantrg;

    TRUE: b61;
esac;
next(b62) := case
	--floor to floor
		next(dr) = l & (b62 = man & b61 =flr):flr;
		next(dr) = r & (b62 = man & b63 =flr):flr;
		next(dr) = u & (b62 = man & b52 =flr):flr;


	--target to floor
		next(dr) = l & (b62 = mantrg & b61 =flr): target;
		next(dr) = r & (b62 = mantrg & b63 =flr): target;
		next(dr) = u & (b62 = mantrg & b52 =flr): target;

	--floor to target
		next(dr) = l & (b62 = man & b61 = target):flr;
		next(dr) = r & (b62 = man & b63 = target):flr;
		next(dr) = u & (b62 = man & b52 = target):flr;

	--target to target
		next(dr) = l & (b62 = mantrg & b61 = target): target;
		next(dr) = r & (b62 = mantrg & b63 = target): target;
		next(dr) = u & (b62 = mantrg & b52 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b62 = man & b61 = bx) & (b60 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b62 = man & b63 = bx) & (b64 =flr) & (2+2 < n):flr;
		next(dr) = u & (b62 = man & b52 = bx) & (b42 =flr) & (6-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b62 = man & b61 = bx) & (b60 = target) & (2-2 > 0):flr;
		next(dr) = r & (b62 = man & b63 = bx) & (b64 = target) & (2+2 < n):flr;
		next(dr) = u & (b62 = man & b52 = bx) & (b42 = target) & (6-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b62 = man & b61 = bxtrg) & (b60 =flr) & (2-2 > 0):flr;
		next(dr) = r & (b62 = man & b63 = bxtrg) & (b64 =flr) & (2+2 < n):flr;
		next(dr) = u & (b62 = man & b52 = bxtrg) & (b42 =flr) & (6-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b62 = man & b61 = bxtrg) & (b60 = target) & (2-2 > 0):flr;
		next(dr) = r & (b62 = man & b63 = bxtrg) & (b64 = target) & (2+2 < n):flr;
		next(dr) = u & (b62 = man & b52 = bxtrg) & (b42 = target) & (6-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b62 = mantrg & b61 = bx) & (b60 =flr) & (2-2 > 0): target;
		next(dr) = r & (b62 = mantrg & b63 = bx) & (b64 =flr) & (2+2 < n): target;
		next(dr) = u & (b62 = mantrg & b52 = bx) & (b42 =flr) & (6-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b62 = mantrg & b61 = bx) & (b60 = target) & (2-2 > 0): target;
		next(dr) = r & (b62 = mantrg & b63 = bx) & (b64 = target) & (2+2 < n): target;
		next(dr) = u & (b62 = mantrg & b52 = bx) & (b42 = target) & (6-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b62 = mantrg & b61 = bxtrg) & (b60 =flr) & (2-2 > 0): target;
		next(dr) = r & (b62 = mantrg & b63 = bxtrg) & (b64 =flr) & (2+2 < n): target;
		next(dr) = u & (b62 = mantrg & b52 = bxtrg) & (b42 =flr) & (6-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b62 = mantrg & b61 = bxtrg) & (b60 = target) & (2-2 > 0): target;
		next(dr) = r & (b62 = mantrg & b63 = bxtrg) & (b64 = target) & (2+2 < n): target;
		next(dr) = u & (b62 = mantrg & b52 = bxtrg) & (b42 = target) & (6-2 > 0): target;

    --man to floor
        next(dr) = r & (b62 = flr & (b61 = man | b61 = mantrg)) : man;
        next(dr) = l & (b62 = flr & (b63 = man | b63 = mantrg)): man;
        next(dr) = d & (b62 = flr & (b52 = man | b52 = mantrg)): man;

    --box to floor
        next(dr) = r & (b62 = flr & (b61 = bx | b61 = bxtrg)) & (b60 = man | b60 = mantrg): bx;
        next(dr) = l & (b62 = flr & (b63 = bx | b63 = bxtrg)) & (b64 = man | b64 = mantrg): bx;
        next(dr) = d & (b62 = flr & (b52 = bx | b52 = bxtrg)) & (b42 = man | b42 = mantrg): bx;

    --man to target
        next(dr) = r & (b62 = target & (b61 = man | b61 = mantrg)): mantrg;
        next(dr) = l & (b62 = target & (b63 = man | b63 = mantrg)): mantrg;
        next(dr) = d & (b62 = target & (b52 = man | b52 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b62 = target & (b61 = bx | b61 = bxtrg)) & (b60 = man | b60 = mantrg): bxtrg;
        next(dr) = l & (b62 = target & (b63 = bx | b63 = bxtrg)) & (b64 = man | b64 = mantrg): bxtrg;
        next(dr) = d & (b62 = target & (b52 = bx | b52 = bxtrg)) & (b42 = man | b42 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b62 = bx & (b61 = man | b61 = mantrg)) & (b63 = flr | b63 = target): man;
        next(dr) = l & (b62 = bx & (b63 = man | b63 = mantrg)) & (b61 = flr | b61 = target): man;

    --man to box on target
        next(dr) = r & (b62 = bxtrg & (b61 = man | b61 = mantrg)) & (b63 = flr | b63 = target): mantrg;
        next(dr) = l & (b62 = bxtrg & (b63 = man | b63 = mantrg)) & (b61 = flr | b61 = target): mantrg;

    TRUE: b62;
esac;
next(b63) := case
	--floor to floor
		next(dr) = l & (b63 = man & b62 =flr):flr;
		next(dr) = r & (b63 = man & b64 =flr):flr;
		next(dr) = u & (b63 = man & b53 =flr):flr;


	--target to floor
		next(dr) = l & (b63 = mantrg & b62 =flr): target;
		next(dr) = r & (b63 = mantrg & b64 =flr): target;
		next(dr) = u & (b63 = mantrg & b53 =flr): target;

	--floor to target
		next(dr) = l & (b63 = man & b62 = target):flr;
		next(dr) = r & (b63 = man & b64 = target):flr;
		next(dr) = u & (b63 = man & b53 = target):flr;

	--target to target
		next(dr) = l & (b63 = mantrg & b62 = target): target;
		next(dr) = r & (b63 = mantrg & b64 = target): target;
		next(dr) = u & (b63 = mantrg & b53 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b63 = man & b62 = bx) & (b61 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b63 = man & b64 = bx) & (b65 =flr) & (3+2 < n):flr;
		next(dr) = u & (b63 = man & b53 = bx) & (b43 =flr) & (6-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b63 = man & b62 = bx) & (b61 = target) & (3-2 > 0):flr;
		next(dr) = r & (b63 = man & b64 = bx) & (b65 = target) & (3+2 < n):flr;
		next(dr) = u & (b63 = man & b53 = bx) & (b43 = target) & (6-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b63 = man & b62 = bxtrg) & (b61 =flr) & (3-2 > 0):flr;
		next(dr) = r & (b63 = man & b64 = bxtrg) & (b65 =flr) & (3+2 < n):flr;
		next(dr) = u & (b63 = man & b53 = bxtrg) & (b43 =flr) & (6-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b63 = man & b62 = bxtrg) & (b61 = target) & (3-2 > 0):flr;
		next(dr) = r & (b63 = man & b64 = bxtrg) & (b65 = target) & (3+2 < n):flr;
		next(dr) = u & (b63 = man & b53 = bxtrg) & (b43 = target) & (6-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b63 = mantrg & b62 = bx) & (b61 =flr) & (3-2 > 0): target;
		next(dr) = r & (b63 = mantrg & b64 = bx) & (b65 =flr) & (3+2 < n): target;
		next(dr) = u & (b63 = mantrg & b53 = bx) & (b43 =flr) & (6-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b63 = mantrg & b62 = bx) & (b61 = target) & (3-2 > 0): target;
		next(dr) = r & (b63 = mantrg & b64 = bx) & (b65 = target) & (3+2 < n): target;
		next(dr) = u & (b63 = mantrg & b53 = bx) & (b43 = target) & (6-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b63 = mantrg & b62 = bxtrg) & (b61 =flr) & (3-2 > 0): target;
		next(dr) = r & (b63 = mantrg & b64 = bxtrg) & (b65 =flr) & (3+2 < n): target;
		next(dr) = u & (b63 = mantrg & b53 = bxtrg) & (b43 =flr) & (6-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b63 = mantrg & b62 = bxtrg) & (b61 = target) & (3-2 > 0): target;
		next(dr) = r & (b63 = mantrg & b64 = bxtrg) & (b65 = target) & (3+2 < n): target;
		next(dr) = u & (b63 = mantrg & b53 = bxtrg) & (b43 = target) & (6-2 > 0): target;

    --man to floor
        next(dr) = r & (b63 = flr & (b62 = man | b62 = mantrg)) : man;
        next(dr) = l & (b63 = flr & (b64 = man | b64 = mantrg)): man;
        next(dr) = d & (b63 = flr & (b53 = man | b53 = mantrg)): man;

    --box to floor
        next(dr) = r & (b63 = flr & (b62 = bx | b62 = bxtrg)) & (b61 = man | b61 = mantrg): bx;
        next(dr) = l & (b63 = flr & (b64 = bx | b64 = bxtrg)) & (b65 = man | b65 = mantrg): bx;
        next(dr) = d & (b63 = flr & (b53 = bx | b53 = bxtrg)) & (b43 = man | b43 = mantrg): bx;

    --man to target
        next(dr) = r & (b63 = target & (b62 = man | b62 = mantrg)): mantrg;
        next(dr) = l & (b63 = target & (b64 = man | b64 = mantrg)): mantrg;
        next(dr) = d & (b63 = target & (b53 = man | b53 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b63 = target & (b62 = bx | b62 = bxtrg)) & (b61 = man | b61 = mantrg): bxtrg;
        next(dr) = l & (b63 = target & (b64 = bx | b64 = bxtrg)) & (b65 = man | b65 = mantrg): bxtrg;
        next(dr) = d & (b63 = target & (b53 = bx | b53 = bxtrg)) & (b43 = man | b43 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b63 = bx & (b62 = man | b62 = mantrg)) & (b64 = flr | b64 = target): man;
        next(dr) = l & (b63 = bx & (b64 = man | b64 = mantrg)) & (b62 = flr | b62 = target): man;

    --man to box on target
        next(dr) = r & (b63 = bxtrg & (b62 = man | b62 = mantrg)) & (b64 = flr | b64 = target): mantrg;
        next(dr) = l & (b63 = bxtrg & (b64 = man | b64 = mantrg)) & (b62 = flr | b62 = target): mantrg;

    TRUE: b63;
esac;
next(b64) := case
	--floor to floor
		next(dr) = l & (b64 = man & b63 =flr):flr;
		next(dr) = r & (b64 = man & b65 =flr):flr;
		next(dr) = u & (b64 = man & b54 =flr):flr;


	--target to floor
		next(dr) = l & (b64 = mantrg & b63 =flr): target;
		next(dr) = r & (b64 = mantrg & b65 =flr): target;
		next(dr) = u & (b64 = mantrg & b54 =flr): target;

	--floor to target
		next(dr) = l & (b64 = man & b63 = target):flr;
		next(dr) = r & (b64 = man & b65 = target):flr;
		next(dr) = u & (b64 = man & b54 = target):flr;

	--target to target
		next(dr) = l & (b64 = mantrg & b63 = target): target;
		next(dr) = r & (b64 = mantrg & b65 = target): target;
		next(dr) = u & (b64 = mantrg & b54 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b64 = man & b63 = bx) & (b62 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b64 = man & b65 = bx) & (b66 =flr) & (4+2 < n):flr;
		next(dr) = u & (b64 = man & b54 = bx) & (b44 =flr) & (6-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b64 = man & b63 = bx) & (b62 = target) & (4-2 > 0):flr;
		next(dr) = r & (b64 = man & b65 = bx) & (b66 = target) & (4+2 < n):flr;
		next(dr) = u & (b64 = man & b54 = bx) & (b44 = target) & (6-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b64 = man & b63 = bxtrg) & (b62 =flr) & (4-2 > 0):flr;
		next(dr) = r & (b64 = man & b65 = bxtrg) & (b66 =flr) & (4+2 < n):flr;
		next(dr) = u & (b64 = man & b54 = bxtrg) & (b44 =flr) & (6-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b64 = man & b63 = bxtrg) & (b62 = target) & (4-2 > 0):flr;
		next(dr) = r & (b64 = man & b65 = bxtrg) & (b66 = target) & (4+2 < n):flr;
		next(dr) = u & (b64 = man & b54 = bxtrg) & (b44 = target) & (6-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b64 = mantrg & b63 = bx) & (b62 =flr) & (4-2 > 0): target;
		next(dr) = r & (b64 = mantrg & b65 = bx) & (b66 =flr) & (4+2 < n): target;
		next(dr) = u & (b64 = mantrg & b54 = bx) & (b44 =flr) & (6-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b64 = mantrg & b63 = bx) & (b62 = target) & (4-2 > 0): target;
		next(dr) = r & (b64 = mantrg & b65 = bx) & (b66 = target) & (4+2 < n): target;
		next(dr) = u & (b64 = mantrg & b54 = bx) & (b44 = target) & (6-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b64 = mantrg & b63 = bxtrg) & (b62 =flr) & (4-2 > 0): target;
		next(dr) = r & (b64 = mantrg & b65 = bxtrg) & (b66 =flr) & (4+2 < n): target;
		next(dr) = u & (b64 = mantrg & b54 = bxtrg) & (b44 =flr) & (6-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b64 = mantrg & b63 = bxtrg) & (b62 = target) & (4-2 > 0): target;
		next(dr) = r & (b64 = mantrg & b65 = bxtrg) & (b66 = target) & (4+2 < n): target;
		next(dr) = u & (b64 = mantrg & b54 = bxtrg) & (b44 = target) & (6-2 > 0): target;

    --man to floor
        next(dr) = r & (b64 = flr & (b63 = man | b63 = mantrg)) : man;
        next(dr) = l & (b64 = flr & (b65 = man | b65 = mantrg)): man;
        next(dr) = d & (b64 = flr & (b54 = man | b54 = mantrg)): man;

    --box to floor
        next(dr) = r & (b64 = flr & (b63 = bx | b63 = bxtrg)) & (b62 = man | b62 = mantrg): bx;
        next(dr) = l & (b64 = flr & (b65 = bx | b65 = bxtrg)) & (b66 = man | b66 = mantrg): bx;
        next(dr) = d & (b64 = flr & (b54 = bx | b54 = bxtrg)) & (b44 = man | b44 = mantrg): bx;

    --man to target
        next(dr) = r & (b64 = target & (b63 = man | b63 = mantrg)): mantrg;
        next(dr) = l & (b64 = target & (b65 = man | b65 = mantrg)): mantrg;
        next(dr) = d & (b64 = target & (b54 = man | b54 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b64 = target & (b63 = bx | b63 = bxtrg)) & (b62 = man | b62 = mantrg): bxtrg;
        next(dr) = l & (b64 = target & (b65 = bx | b65 = bxtrg)) & (b66 = man | b66 = mantrg): bxtrg;
        next(dr) = d & (b64 = target & (b54 = bx | b54 = bxtrg)) & (b44 = man | b44 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b64 = bx & (b63 = man | b63 = mantrg)) & (b65 = flr | b65 = target): man;
        next(dr) = l & (b64 = bx & (b65 = man | b65 = mantrg)) & (b63 = flr | b63 = target): man;

    --man to box on target
        next(dr) = r & (b64 = bxtrg & (b63 = man | b63 = mantrg)) & (b65 = flr | b65 = target): mantrg;
        next(dr) = l & (b64 = bxtrg & (b65 = man | b65 = mantrg)) & (b63 = flr | b63 = target): mantrg;

    TRUE: b64;
esac;
next(b65) := case
	--floor to floor
		next(dr) = l & (b65 = man & b64 =flr):flr;
		next(dr) = r & (b65 = man & b66 =flr):flr;
		next(dr) = u & (b65 = man & b55 =flr):flr;


	--target to floor
		next(dr) = l & (b65 = mantrg & b64 =flr): target;
		next(dr) = r & (b65 = mantrg & b66 =flr): target;
		next(dr) = u & (b65 = mantrg & b55 =flr): target;

	--floor to target
		next(dr) = l & (b65 = man & b64 = target):flr;
		next(dr) = r & (b65 = man & b66 = target):flr;
		next(dr) = u & (b65 = man & b55 = target):flr;

	--target to target
		next(dr) = l & (b65 = mantrg & b64 = target): target;
		next(dr) = r & (b65 = mantrg & b66 = target): target;
		next(dr) = u & (b65 = mantrg & b55 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b65 = man & b64 = bx) & (b63 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b65 = man & b55 = bx) & (b45 =flr) & (6-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b65 = man & b64 = bx) & (b63 = target) & (5-2 > 0):flr;
		next(dr) = u & (b65 = man & b55 = bx) & (b45 = target) & (6-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b65 = man & b64 = bxtrg) & (b63 =flr) & (5-2 > 0):flr;
		next(dr) = u & (b65 = man & b55 = bxtrg) & (b45 =flr) & (6-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b65 = man & b64 = bxtrg) & (b63 = target) & (5-2 > 0):flr;
		next(dr) = u & (b65 = man & b55 = bxtrg) & (b45 = target) & (6-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b65 = mantrg & b64 = bx) & (b63 =flr) & (5-2 > 0): target;
		next(dr) = u & (b65 = mantrg & b55 = bx) & (b45 =flr) & (6-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b65 = mantrg & b64 = bx) & (b63 = target) & (5-2 > 0): target;
		next(dr) = u & (b65 = mantrg & b55 = bx) & (b45 = target) & (6-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b65 = mantrg & b64 = bxtrg) & (b63 =flr) & (5-2 > 0): target;
		next(dr) = u & (b65 = mantrg & b55 = bxtrg) & (b45 =flr) & (6-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b65 = mantrg & b64 = bxtrg) & (b63 = target) & (5-2 > 0): target;
		next(dr) = u & (b65 = mantrg & b55 = bxtrg) & (b45 = target) & (6-2 > 0): target;

    --man to floor
        next(dr) = r & (b65 = flr & (b64 = man | b64 = mantrg)) : man;
        next(dr) = l & (b65 = flr & (b66 = man | b66 = mantrg)): man;
        next(dr) = d & (b65 = flr & (b55 = man | b55 = mantrg)): man;

    --box to floor
        next(dr) = r & (b65 = flr & (b64 = bx | b64 = bxtrg)) & (b63 = man | b63 = mantrg): bx;
        next(dr) = d & (b65 = flr & (b55 = bx | b55 = bxtrg)) & (b45 = man | b45 = mantrg): bx;

    --man to target
        next(dr) = r & (b65 = target & (b64 = man | b64 = mantrg)): mantrg;
        next(dr) = l & (b65 = target & (b66 = man | b66 = mantrg)): mantrg;
        next(dr) = d & (b65 = target & (b55 = man | b55 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b65 = target & (b64 = bx | b64 = bxtrg)) & (b63 = man | b63 = mantrg): bxtrg;
        next(dr) = d & (b65 = target & (b55 = bx | b55 = bxtrg)) & (b45 = man | b45 = mantrg): bxtrg;

    --man to box
        next(dr) = r & (b65 = bx & (b64 = man | b64 = mantrg)) & (b66 = flr | b66 = target): man;
        next(dr) = l & (b65 = bx & (b66 = man | b66 = mantrg)) & (b64 = flr | b64 = target): man;

    --man to box on target
        next(dr) = r & (b65 = bxtrg & (b64 = man | b64 = mantrg)) & (b66 = flr | b66 = target): mantrg;
        next(dr) = l & (b65 = bxtrg & (b66 = man | b66 = mantrg)) & (b64 = flr | b64 = target): mantrg;

    TRUE: b65;
esac;
next(b66) := case
	--floor to floor
		next(dr) = l & (b66 = man & b65 =flr):flr;
		next(dr) = u & (b66 = man & b56 =flr):flr;


	--target to floor
		next(dr) = l & (b66 = mantrg & b65 =flr): target;
		next(dr) = u & (b66 = mantrg & b56 =flr): target;

	--floor to target
		next(dr) = l & (b66 = man & b65 = target):flr;
		next(dr) = u & (b66 = man & b56 = target):flr;

	--target to target
		next(dr) = l & (b66 = mantrg & b65 = target): target;
		next(dr) = u & (b66 = mantrg & b56 = target): target;

	--floor to box on floor, floor
		next(dr) = l & (b66 = man & b65 = bx) & (b64 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b66 = man & b56 = bx) & (b46 =flr) & (6-2 > 0):flr;

	--floor to box on floor, target
		next(dr) = l & (b66 = man & b65 = bx) & (b64 = target) & (6-2 > 0):flr;
		next(dr) = u & (b66 = man & b56 = bx) & (b46 = target) & (6-2 > 0):flr;

	--floor to box on target, floor
		next(dr) = l & (b66 = man & b65 = bxtrg) & (b64 =flr) & (6-2 > 0):flr;
		next(dr) = u & (b66 = man & b56 = bxtrg) & (b46 =flr) & (6-2 > 0):flr;

	--floor to box on target, target
		next(dr) = l & (b66 = man & b65 = bxtrg) & (b64 = target) & (6-2 > 0):flr;
		next(dr) = u & (b66 = man & b56 = bxtrg) & (b46 = target) & (6-2 > 0):flr;

	--target to box on floor, floor
		next(dr) = l & (b66 = mantrg & b65 = bx) & (b64 =flr) & (6-2 > 0): target;
		next(dr) = u & (b66 = mantrg & b56 = bx) & (b46 =flr) & (6-2 > 0): target;

	--target to box on floor, target
		next(dr) = l & (b66 = mantrg & b65 = bx) & (b64 = target) & (6-2 > 0): target;
		next(dr) = u & (b66 = mantrg & b56 = bx) & (b46 = target) & (6-2 > 0): target;

	--target to box on target, floor
		next(dr) = l & (b66 = mantrg & b65 = bxtrg) & (b64 =flr) & (6-2 > 0): target;
		next(dr) = u & (b66 = mantrg & b56 = bxtrg) & (b46 =flr) & (6-2 > 0): target;

	--target to box on target, target
		next(dr) = l & (b66 = mantrg & b65 = bxtrg) & (b64 = target) & (6-2 > 0): target;
		next(dr) = u & (b66 = mantrg & b56 = bxtrg) & (b46 = target) & (6-2 > 0): target;

    --man to floor
        next(dr) = r & (b66 = flr & (b65 = man | b65 = mantrg)) : man;
        next(dr) = d & (b66 = flr & (b56 = man | b56 = mantrg)): man;

    --box to floor
        next(dr) = r & (b66 = flr & (b65 = bx | b65 = bxtrg)) & (b64 = man | b64 = mantrg): bx;
        next(dr) = d & (b66 = flr & (b56 = bx | b56 = bxtrg)) & (b46 = man | b46 = mantrg): bx;

    --man to target
        next(dr) = r & (b66 = target & (b65 = man | b65 = mantrg)): mantrg;
        next(dr) = d & (b66 = target & (b56 = man | b56 = mantrg)): mantrg;

    --box to target
        next(dr) = r & (b66 = target & (b65 = bx | b65 = bxtrg)) & (b64 = man | b64 = mantrg): bxtrg;
        next(dr) = d & (b66 = target & (b56 = bx | b56 = bxtrg)) & (b46 = man | b46 = mantrg): bxtrg;

    --man to box

    --man to box on target

    TRUE: b66;
esac;
LTLSPEC !F((b00 != bx) & (b01 != bx) & (b02 != bx) & (b03 != bx) & (b04 != bx) & (b05 != bx) & (b06 != bx) & (b10 != bx) & (b11 != bx) & (b12 != bx) & (b13 != bx) & (b14 != bx) & (b15 != bx) & (b16 != bx) & (b20 != bx) & (b21 != bx) & (b22 != bx) & (b23 != bx) & (b24 != bx) & (b25 != bx) & (b26 != bx) & (b30 != bx) & (b31 != bx) & (b32 != bx) & (b33 != bx) & (b34 != bx) & (b35 != bx) & (b36 != bx) & (b40 != bx) & (b41 != bx) & (b42 != bx) & (b43 != bx) & (b44 != bx) & (b45 != bx) & (b46 != bx) & (b50 != bx) & (b51 != bx) & (b52 != bx) & (b53 != bx) & (b54 != bx) & (b55 != bx) & (b56 != bx) & (b60 != bx) & (b61 != bx) & (b62 != bx) & (b63 != bx) & (b64 != bx) & (b65 != bx) & (b66 != bx));